"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@livestore";
exports.ids = ["vendor-chunks/@livestore"];
exports.modules = {

/***/ "(rsc)/./src/node_modules/@livestore/common/dist/adapter-types.js":
/*!******************************************************************!*\
  !*** ./src/node_modules/@livestore/common/dist/adapter-types.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BootStateProgress: () => (/* binding */ BootStateProgress),\n/* harmony export */   BootStatus: () => (/* binding */ BootStatus),\n/* harmony export */   IntentionalShutdownCause: () => (/* binding */ IntentionalShutdownCause),\n/* harmony export */   LeaderPullCursor: () => (/* binding */ LeaderPullCursor),\n/* harmony export */   MigrationsReport: () => (/* binding */ MigrationsReport),\n/* harmony export */   MigrationsReportEntry: () => (/* binding */ MigrationsReportEntry),\n/* harmony export */   PersistenceInfo: () => (/* binding */ PersistenceInfo),\n/* harmony export */   SessionIdSymbol: () => (/* binding */ SessionIdSymbol),\n/* harmony export */   SqliteError: () => (/* binding */ SqliteError),\n/* harmony export */   StoreInterrupted: () => (/* binding */ StoreInterrupted),\n/* harmony export */   UnexpectedError: () => (/* binding */ UnexpectedError)\n/* harmony export */ });\n/* harmony import */ var _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @livestore/utils/effect */ \"(rsc)/./src/node_modules/effect/dist/esm/Schema.js\");\n/* harmony import */ var _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @livestore/utils/effect */ \"(rsc)/./src/node_modules/effect/dist/esm/Effect.js\");\n/* harmony import */ var _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @livestore/utils/effect */ \"(rsc)/./src/node_modules/effect/dist/esm/ParseResult.js\");\n/* harmony import */ var _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @livestore/utils/effect */ \"(rsc)/./src/node_modules/effect/dist/esm/Stream.js\");\n/* harmony import */ var _schema_EventSequenceNumber_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./schema/EventSequenceNumber.js */ \"(rsc)/./src/node_modules/@livestore/common/dist/schema/EventSequenceNumber.js\");\n\n\nconst LeaderPullCursor = _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.Struct({\n    mergeCounter: _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.Number,\n    eventNum: _schema_EventSequenceNumber_js__WEBPACK_IMPORTED_MODULE_1__.EventSequenceNumber,\n});\nconst PersistenceInfo = _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.Struct({\n    fileName: _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.String,\n}, { key: _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.String, value: _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.Any }).annotations({ title: 'LiveStore.PersistenceInfo' });\nconst BootStateProgress = _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.Struct({\n    done: _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.Number,\n    total: _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.Number,\n});\nconst BootStatus = _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.Union(_livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.Struct({ stage: _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.Literal('loading') }), _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.Struct({ stage: _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.Literal('migrating'), progress: BootStateProgress }), _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.Struct({ stage: _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.Literal('rehydrating'), progress: BootStateProgress }), _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.Struct({ stage: _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.Literal('syncing'), progress: BootStateProgress }), _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.Struct({ stage: _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.Literal('done') })).annotations({ title: 'BootStatus' });\n/**\n * Can be used in queries to refer to the current session id.\n * Will be replaced with the actual session id at runtime\n *\n * In client document table:\n * ```ts\n * const uiState = State.SQLite.clientDocument({\n *   name: 'ui_state',\n *   schema: Schema.Struct({\n *     theme: Schema.Literal('dark', 'light', 'system'),\n *     user: Schema.String,\n *     showToolbar: Schema.Boolean,\n *   }),\n *   default: { value: defaultFrontendState, id: SessionIdSymbol },\n * })\n * ```\n *\n * Or in a client document query:\n * ```ts\n * const query$ = queryDb(tables.uiState.get(SessionIdSymbol))\n * ```\n */\nconst SessionIdSymbol = Symbol.for('@livestore/session-id');\nclass UnexpectedError extends _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.TaggedError()('LiveStore.UnexpectedError', {\n    cause: _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.Defect,\n    note: _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.optional(_livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.String),\n    payload: _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.optional(_livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.Any),\n}) {\n    static mapToUnexpectedError = (effect) => effect.pipe(_livestore_utils_effect__WEBPACK_IMPORTED_MODULE_2__.mapError((cause) => (_livestore_utils_effect__WEBPACK_IMPORTED_MODULE_3__.is(UnexpectedError)(cause) ? cause : new UnexpectedError({ cause }))), _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_2__.catchAllDefect((cause) => new UnexpectedError({ cause })));\n    static mapToUnexpectedErrorStream = (stream) => stream.pipe(_livestore_utils_effect__WEBPACK_IMPORTED_MODULE_4__.mapError((cause) => (_livestore_utils_effect__WEBPACK_IMPORTED_MODULE_3__.is(UnexpectedError)(cause) ? cause : new UnexpectedError({ cause }))));\n}\nclass IntentionalShutdownCause extends _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.TaggedError()('LiveStore.IntentionalShutdownCause', {\n    reason: _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.Literal('devtools-reset', 'devtools-import', 'adapter-reset', 'manual'),\n}) {\n}\nclass StoreInterrupted extends _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.TaggedError()('LiveStore.StoreInterrupted', {\n    reason: _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.String,\n}) {\n}\nclass SqliteError extends _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.TaggedError()('LiveStore.SqliteError', {\n    query: _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.optional(_livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.Struct({\n        sql: _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.String,\n        bindValues: _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.Union(_livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.Record({ key: _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.String, value: _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.Any }), _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.Array(_livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.Any)),\n    })),\n    /** The SQLite result code */\n    // code: Schema.optional(Schema.Number),\n    // Added string support for Expo SQLite (we should refactor this to have a unified error type)\n    code: _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.optional(_livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.Union(_livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.Number, _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.String)),\n    /** The original SQLite3 error */\n    cause: _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.Defect,\n    note: _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.optional(_livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.String),\n}) {\n}\nconst MigrationsReportEntry = _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.Struct({\n    tableName: _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.String,\n    hashes: _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.Struct({\n        expected: _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.Number,\n        actual: _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.optional(_livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.Number),\n    }),\n});\nconst MigrationsReport = _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.Struct({\n    migrations: _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.Array(MigrationsReportEntry),\n});\n//# sourceMappingURL=adapter-types.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbm9kZV9tb2R1bGVzL0BsaXZlc3RvcmUvY29tbW9uL2Rpc3QvYWRhcHRlci10eXBlcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQWlFO0FBQ007QUFDaEUseUJBQXlCLDJEQUFhO0FBQzdDLGtCQUFrQiwyREFBYTtBQUMvQixjQUFjLCtFQUF1QztBQUNyRCxDQUFDO0FBQ00sd0JBQXdCLDJEQUFhO0FBQzVDLGNBQWMsMkRBQWE7QUFDM0IsQ0FBQyxJQUFJLEtBQUssMkRBQWEsU0FBUyx3REFBVSxFQUFFLGdCQUFnQixvQ0FBb0M7QUFDekYsMEJBQTBCLDJEQUFhO0FBQzlDLFVBQVUsMkRBQWE7QUFDdkIsV0FBVywyREFBYTtBQUN4QixDQUFDO0FBQ00sbUJBQW1CLDBEQUFZLENBQUMsMkRBQWEsR0FBRyxPQUFPLDREQUFjLGFBQWEsR0FBRywyREFBYSxHQUFHLE9BQU8sNERBQWMsNENBQTRDLEdBQUcsMkRBQWEsR0FBRyxPQUFPLDREQUFjLDhDQUE4QyxHQUFHLDJEQUFhLEdBQUcsT0FBTyw0REFBYywwQ0FBMEMsR0FBRywyREFBYSxHQUFHLE9BQU8sNERBQWMsVUFBVSxpQkFBaUIscUJBQXFCO0FBQzdhO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTixnQkFBZ0Isa0RBQWtEO0FBQ2xFLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ0EsOEJBQThCLGdFQUFrQjtBQUN2RCxXQUFXLDJEQUFhO0FBQ3hCLFVBQVUsNkRBQWUsQ0FBQywyREFBYTtBQUN2QyxhQUFhLDZEQUFlLENBQUMsd0RBQVU7QUFDdkMsQ0FBQztBQUNELDBEQUEwRCw2REFBZSxhQUFhLHVEQUFTLHlEQUF5RCxPQUFPLEtBQUssbUVBQXFCLGtDQUFrQyxPQUFPO0FBQ2xPLGdFQUFnRSw2REFBZSxhQUFhLHVEQUFTLHlEQUF5RCxPQUFPO0FBQ3JLO0FBQ08sdUNBQXVDLGdFQUFrQjtBQUNoRSxZQUFZLDREQUFjO0FBQzFCLENBQUM7QUFDRDtBQUNPLCtCQUErQixnRUFBa0I7QUFDeEQsWUFBWSwyREFBYTtBQUN6QixDQUFDO0FBQ0Q7QUFDTywwQkFBMEIsZ0VBQWtCO0FBQ25ELFdBQVcsNkRBQWUsQ0FBQywyREFBYTtBQUN4QyxhQUFhLDJEQUFhO0FBQzFCLG9CQUFvQiwwREFBWSxDQUFDLDJEQUFhLEdBQUcsS0FBSywyREFBYSxTQUFTLHdEQUFVLEVBQUUsR0FBRywwREFBWSxDQUFDLHdEQUFVO0FBQ2xILEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxVQUFVLDZEQUFlLENBQUMsMERBQVksQ0FBQywyREFBYSxFQUFFLDJEQUFhO0FBQ25FO0FBQ0EsV0FBVywyREFBYTtBQUN4QixVQUFVLDZEQUFlLENBQUMsMkRBQWE7QUFDdkMsQ0FBQztBQUNEO0FBQ08sOEJBQThCLDJEQUFhO0FBQ2xELGVBQWUsMkRBQWE7QUFDNUIsWUFBWSwyREFBYTtBQUN6QixrQkFBa0IsMkRBQWE7QUFDL0IsZ0JBQWdCLDZEQUFlLENBQUMsMkRBQWE7QUFDN0MsS0FBSztBQUNMLENBQUM7QUFDTSx5QkFBeUIsMkRBQWE7QUFDN0MsZ0JBQWdCLDBEQUFZO0FBQzVCLENBQUM7QUFDRCIsInNvdXJjZXMiOlsid2VicGFjazovL2FuYWNvbmRhLWFzc2VzbWVudC0xLy4vc3JjL25vZGVfbW9kdWxlcy9AbGl2ZXN0b3JlL2NvbW1vbi9kaXN0L2FkYXB0ZXItdHlwZXMuanM/ZjNkMyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBFZmZlY3QsIFNjaGVtYSwgU3RyZWFtIH0gZnJvbSAnQGxpdmVzdG9yZS91dGlscy9lZmZlY3QnO1xuaW1wb3J0ICogYXMgRXZlbnRTZXF1ZW5jZU51bWJlciBmcm9tICcuL3NjaGVtYS9FdmVudFNlcXVlbmNlTnVtYmVyLmpzJztcbmV4cG9ydCBjb25zdCBMZWFkZXJQdWxsQ3Vyc29yID0gU2NoZW1hLlN0cnVjdCh7XG4gICAgbWVyZ2VDb3VudGVyOiBTY2hlbWEuTnVtYmVyLFxuICAgIGV2ZW50TnVtOiBFdmVudFNlcXVlbmNlTnVtYmVyLkV2ZW50U2VxdWVuY2VOdW1iZXIsXG59KTtcbmV4cG9ydCBjb25zdCBQZXJzaXN0ZW5jZUluZm8gPSBTY2hlbWEuU3RydWN0KHtcbiAgICBmaWxlTmFtZTogU2NoZW1hLlN0cmluZyxcbn0sIHsga2V5OiBTY2hlbWEuU3RyaW5nLCB2YWx1ZTogU2NoZW1hLkFueSB9KS5hbm5vdGF0aW9ucyh7IHRpdGxlOiAnTGl2ZVN0b3JlLlBlcnNpc3RlbmNlSW5mbycgfSk7XG5leHBvcnQgY29uc3QgQm9vdFN0YXRlUHJvZ3Jlc3MgPSBTY2hlbWEuU3RydWN0KHtcbiAgICBkb25lOiBTY2hlbWEuTnVtYmVyLFxuICAgIHRvdGFsOiBTY2hlbWEuTnVtYmVyLFxufSk7XG5leHBvcnQgY29uc3QgQm9vdFN0YXR1cyA9IFNjaGVtYS5VbmlvbihTY2hlbWEuU3RydWN0KHsgc3RhZ2U6IFNjaGVtYS5MaXRlcmFsKCdsb2FkaW5nJykgfSksIFNjaGVtYS5TdHJ1Y3QoeyBzdGFnZTogU2NoZW1hLkxpdGVyYWwoJ21pZ3JhdGluZycpLCBwcm9ncmVzczogQm9vdFN0YXRlUHJvZ3Jlc3MgfSksIFNjaGVtYS5TdHJ1Y3QoeyBzdGFnZTogU2NoZW1hLkxpdGVyYWwoJ3JlaHlkcmF0aW5nJyksIHByb2dyZXNzOiBCb290U3RhdGVQcm9ncmVzcyB9KSwgU2NoZW1hLlN0cnVjdCh7IHN0YWdlOiBTY2hlbWEuTGl0ZXJhbCgnc3luY2luZycpLCBwcm9ncmVzczogQm9vdFN0YXRlUHJvZ3Jlc3MgfSksIFNjaGVtYS5TdHJ1Y3QoeyBzdGFnZTogU2NoZW1hLkxpdGVyYWwoJ2RvbmUnKSB9KSkuYW5ub3RhdGlvbnMoeyB0aXRsZTogJ0Jvb3RTdGF0dXMnIH0pO1xuLyoqXG4gKiBDYW4gYmUgdXNlZCBpbiBxdWVyaWVzIHRvIHJlZmVyIHRvIHRoZSBjdXJyZW50IHNlc3Npb24gaWQuXG4gKiBXaWxsIGJlIHJlcGxhY2VkIHdpdGggdGhlIGFjdHVhbCBzZXNzaW9uIGlkIGF0IHJ1bnRpbWVcbiAqXG4gKiBJbiBjbGllbnQgZG9jdW1lbnQgdGFibGU6XG4gKiBgYGB0c1xuICogY29uc3QgdWlTdGF0ZSA9IFN0YXRlLlNRTGl0ZS5jbGllbnREb2N1bWVudCh7XG4gKiAgIG5hbWU6ICd1aV9zdGF0ZScsXG4gKiAgIHNjaGVtYTogU2NoZW1hLlN0cnVjdCh7XG4gKiAgICAgdGhlbWU6IFNjaGVtYS5MaXRlcmFsKCdkYXJrJywgJ2xpZ2h0JywgJ3N5c3RlbScpLFxuICogICAgIHVzZXI6IFNjaGVtYS5TdHJpbmcsXG4gKiAgICAgc2hvd1Rvb2xiYXI6IFNjaGVtYS5Cb29sZWFuLFxuICogICB9KSxcbiAqICAgZGVmYXVsdDogeyB2YWx1ZTogZGVmYXVsdEZyb250ZW5kU3RhdGUsIGlkOiBTZXNzaW9uSWRTeW1ib2wgfSxcbiAqIH0pXG4gKiBgYGBcbiAqXG4gKiBPciBpbiBhIGNsaWVudCBkb2N1bWVudCBxdWVyeTpcbiAqIGBgYHRzXG4gKiBjb25zdCBxdWVyeSQgPSBxdWVyeURiKHRhYmxlcy51aVN0YXRlLmdldChTZXNzaW9uSWRTeW1ib2wpKVxuICogYGBgXG4gKi9cbmV4cG9ydCBjb25zdCBTZXNzaW9uSWRTeW1ib2wgPSBTeW1ib2wuZm9yKCdAbGl2ZXN0b3JlL3Nlc3Npb24taWQnKTtcbmV4cG9ydCBjbGFzcyBVbmV4cGVjdGVkRXJyb3IgZXh0ZW5kcyBTY2hlbWEuVGFnZ2VkRXJyb3IoKSgnTGl2ZVN0b3JlLlVuZXhwZWN0ZWRFcnJvcicsIHtcbiAgICBjYXVzZTogU2NoZW1hLkRlZmVjdCxcbiAgICBub3RlOiBTY2hlbWEub3B0aW9uYWwoU2NoZW1hLlN0cmluZyksXG4gICAgcGF5bG9hZDogU2NoZW1hLm9wdGlvbmFsKFNjaGVtYS5BbnkpLFxufSkge1xuICAgIHN0YXRpYyBtYXBUb1VuZXhwZWN0ZWRFcnJvciA9IChlZmZlY3QpID0+IGVmZmVjdC5waXBlKEVmZmVjdC5tYXBFcnJvcigoY2F1c2UpID0+IChTY2hlbWEuaXMoVW5leHBlY3RlZEVycm9yKShjYXVzZSkgPyBjYXVzZSA6IG5ldyBVbmV4cGVjdGVkRXJyb3IoeyBjYXVzZSB9KSkpLCBFZmZlY3QuY2F0Y2hBbGxEZWZlY3QoKGNhdXNlKSA9PiBuZXcgVW5leHBlY3RlZEVycm9yKHsgY2F1c2UgfSkpKTtcbiAgICBzdGF0aWMgbWFwVG9VbmV4cGVjdGVkRXJyb3JTdHJlYW0gPSAoc3RyZWFtKSA9PiBzdHJlYW0ucGlwZShTdHJlYW0ubWFwRXJyb3IoKGNhdXNlKSA9PiAoU2NoZW1hLmlzKFVuZXhwZWN0ZWRFcnJvcikoY2F1c2UpID8gY2F1c2UgOiBuZXcgVW5leHBlY3RlZEVycm9yKHsgY2F1c2UgfSkpKSk7XG59XG5leHBvcnQgY2xhc3MgSW50ZW50aW9uYWxTaHV0ZG93bkNhdXNlIGV4dGVuZHMgU2NoZW1hLlRhZ2dlZEVycm9yKCkoJ0xpdmVTdG9yZS5JbnRlbnRpb25hbFNodXRkb3duQ2F1c2UnLCB7XG4gICAgcmVhc29uOiBTY2hlbWEuTGl0ZXJhbCgnZGV2dG9vbHMtcmVzZXQnLCAnZGV2dG9vbHMtaW1wb3J0JywgJ2FkYXB0ZXItcmVzZXQnLCAnbWFudWFsJyksXG59KSB7XG59XG5leHBvcnQgY2xhc3MgU3RvcmVJbnRlcnJ1cHRlZCBleHRlbmRzIFNjaGVtYS5UYWdnZWRFcnJvcigpKCdMaXZlU3RvcmUuU3RvcmVJbnRlcnJ1cHRlZCcsIHtcbiAgICByZWFzb246IFNjaGVtYS5TdHJpbmcsXG59KSB7XG59XG5leHBvcnQgY2xhc3MgU3FsaXRlRXJyb3IgZXh0ZW5kcyBTY2hlbWEuVGFnZ2VkRXJyb3IoKSgnTGl2ZVN0b3JlLlNxbGl0ZUVycm9yJywge1xuICAgIHF1ZXJ5OiBTY2hlbWEub3B0aW9uYWwoU2NoZW1hLlN0cnVjdCh7XG4gICAgICAgIHNxbDogU2NoZW1hLlN0cmluZyxcbiAgICAgICAgYmluZFZhbHVlczogU2NoZW1hLlVuaW9uKFNjaGVtYS5SZWNvcmQoeyBrZXk6IFNjaGVtYS5TdHJpbmcsIHZhbHVlOiBTY2hlbWEuQW55IH0pLCBTY2hlbWEuQXJyYXkoU2NoZW1hLkFueSkpLFxuICAgIH0pKSxcbiAgICAvKiogVGhlIFNRTGl0ZSByZXN1bHQgY29kZSAqL1xuICAgIC8vIGNvZGU6IFNjaGVtYS5vcHRpb25hbChTY2hlbWEuTnVtYmVyKSxcbiAgICAvLyBBZGRlZCBzdHJpbmcgc3VwcG9ydCBmb3IgRXhwbyBTUUxpdGUgKHdlIHNob3VsZCByZWZhY3RvciB0aGlzIHRvIGhhdmUgYSB1bmlmaWVkIGVycm9yIHR5cGUpXG4gICAgY29kZTogU2NoZW1hLm9wdGlvbmFsKFNjaGVtYS5VbmlvbihTY2hlbWEuTnVtYmVyLCBTY2hlbWEuU3RyaW5nKSksXG4gICAgLyoqIFRoZSBvcmlnaW5hbCBTUUxpdGUzIGVycm9yICovXG4gICAgY2F1c2U6IFNjaGVtYS5EZWZlY3QsXG4gICAgbm90ZTogU2NoZW1hLm9wdGlvbmFsKFNjaGVtYS5TdHJpbmcpLFxufSkge1xufVxuZXhwb3J0IGNvbnN0IE1pZ3JhdGlvbnNSZXBvcnRFbnRyeSA9IFNjaGVtYS5TdHJ1Y3Qoe1xuICAgIHRhYmxlTmFtZTogU2NoZW1hLlN0cmluZyxcbiAgICBoYXNoZXM6IFNjaGVtYS5TdHJ1Y3Qoe1xuICAgICAgICBleHBlY3RlZDogU2NoZW1hLk51bWJlcixcbiAgICAgICAgYWN0dWFsOiBTY2hlbWEub3B0aW9uYWwoU2NoZW1hLk51bWJlciksXG4gICAgfSksXG59KTtcbmV4cG9ydCBjb25zdCBNaWdyYXRpb25zUmVwb3J0ID0gU2NoZW1hLlN0cnVjdCh7XG4gICAgbWlncmF0aW9uczogU2NoZW1hLkFycmF5KE1pZ3JhdGlvbnNSZXBvcnRFbnRyeSksXG59KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFkYXB0ZXItdHlwZXMuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/node_modules/@livestore/common/dist/adapter-types.js\n");

/***/ }),

/***/ "(rsc)/./src/node_modules/@livestore/common/dist/bounded-collections.js":
/*!************************************************************************!*\
  !*** ./src/node_modules/@livestore/common/dist/bounded-collections.js ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BoundArray: () => (/* binding */ BoundArray),\n/* harmony export */   BoundMap: () => (/* binding */ BoundMap),\n/* harmony export */   BoundSet: () => (/* binding */ BoundSet)\n/* harmony export */ });\n/**\n * Creates a map that has a fixed number of entries.\n * Once hitting the bound, earliest insertions are removed\n */\nclass BoundMap {\n    #map = new Map();\n    #sizeLimit;\n    constructor(sizeLimit) {\n        this.#sizeLimit = sizeLimit;\n    }\n    onEvict;\n    set = (key, value) => {\n        this.#map.set(key, value);\n        // console.log(this.#map.size, this.#sizeLimit);\n        if (this.#map.size > this.#sizeLimit) {\n            const firstKey = this.#map.keys().next().value;\n            const deletedValue = this.#map.get(firstKey);\n            this.#map.delete(firstKey);\n            if (this.onEvict) {\n                this.onEvict(firstKey, deletedValue);\n            }\n        }\n    };\n    get = (key) => {\n        return this.#map.get(key);\n    };\n    delete = (key) => {\n        this.#map.delete(key);\n    };\n    keys = () => {\n        return this.#map.keys();\n    };\n}\nclass BoundSet {\n    #map;\n    constructor(sizeLimit) {\n        this.#map = new BoundMap(sizeLimit);\n        this.#map.onEvict = this.#onEvict;\n    }\n    #onEvict = (v) => {\n        if (this.onEvict) {\n            this.onEvict(v);\n        }\n    };\n    onEvict;\n    add = (v) => {\n        this.#map.set(v, v);\n    };\n    [Symbol.iterator] = () => {\n        return this.#map.keys();\n    };\n}\nclass BoundArray {\n    #array = [];\n    sizeLimit;\n    constructor(sizeLimit) {\n        this.sizeLimit = sizeLimit;\n    }\n    static make = (sizeLimit, initial = []) => {\n        const b = new BoundArray(sizeLimit);\n        for (const v of initial) {\n            b.push(v);\n        }\n        return b;\n    };\n    onEvict;\n    push = (v) => {\n        this.#array.push(v);\n        if (this.#array.length > this.sizeLimit) {\n            const first = this.#array.shift();\n            if (first && this.onEvict) {\n                this.onEvict(first);\n            }\n        }\n    };\n    get = (index) => {\n        return this.#array[index];\n    };\n    delete = (index) => {\n        this.#array.splice(index, 1);\n    };\n    get length() {\n        return this.#array.length;\n    }\n    [Symbol.iterator] = () => {\n        return this.#array[Symbol.iterator]();\n    };\n    map = (fn) => {\n        return this.#array.map(fn);\n    };\n    clear = () => {\n        this.#array = [];\n    };\n    sort = (fn) => {\n        return this.#array.sort(fn);\n    };\n}\n//# sourceMappingURL=bounded-collections.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbm9kZV9tb2R1bGVzL0BsaXZlc3RvcmUvY29tbW9uL2Rpc3QvYm91bmRlZC1jb2xsZWN0aW9ucy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYW5hY29uZGEtYXNzZXNtZW50LTEvLi9zcmMvbm9kZV9tb2R1bGVzL0BsaXZlc3RvcmUvY29tbW9uL2Rpc3QvYm91bmRlZC1jb2xsZWN0aW9ucy5qcz8wODM3Il0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ3JlYXRlcyBhIG1hcCB0aGF0IGhhcyBhIGZpeGVkIG51bWJlciBvZiBlbnRyaWVzLlxuICogT25jZSBoaXR0aW5nIHRoZSBib3VuZCwgZWFybGllc3QgaW5zZXJ0aW9ucyBhcmUgcmVtb3ZlZFxuICovXG5leHBvcnQgY2xhc3MgQm91bmRNYXAge1xuICAgICNtYXAgPSBuZXcgTWFwKCk7XG4gICAgI3NpemVMaW1pdDtcbiAgICBjb25zdHJ1Y3RvcihzaXplTGltaXQpIHtcbiAgICAgICAgdGhpcy4jc2l6ZUxpbWl0ID0gc2l6ZUxpbWl0O1xuICAgIH1cbiAgICBvbkV2aWN0O1xuICAgIHNldCA9IChrZXksIHZhbHVlKSA9PiB7XG4gICAgICAgIHRoaXMuI21hcC5zZXQoa2V5LCB2YWx1ZSk7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuI21hcC5zaXplLCB0aGlzLiNzaXplTGltaXQpO1xuICAgICAgICBpZiAodGhpcy4jbWFwLnNpemUgPiB0aGlzLiNzaXplTGltaXQpIHtcbiAgICAgICAgICAgIGNvbnN0IGZpcnN0S2V5ID0gdGhpcy4jbWFwLmtleXMoKS5uZXh0KCkudmFsdWU7XG4gICAgICAgICAgICBjb25zdCBkZWxldGVkVmFsdWUgPSB0aGlzLiNtYXAuZ2V0KGZpcnN0S2V5KTtcbiAgICAgICAgICAgIHRoaXMuI21hcC5kZWxldGUoZmlyc3RLZXkpO1xuICAgICAgICAgICAgaWYgKHRoaXMub25FdmljdCkge1xuICAgICAgICAgICAgICAgIHRoaXMub25FdmljdChmaXJzdEtleSwgZGVsZXRlZFZhbHVlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgZ2V0ID0gKGtleSkgPT4ge1xuICAgICAgICByZXR1cm4gdGhpcy4jbWFwLmdldChrZXkpO1xuICAgIH07XG4gICAgZGVsZXRlID0gKGtleSkgPT4ge1xuICAgICAgICB0aGlzLiNtYXAuZGVsZXRlKGtleSk7XG4gICAgfTtcbiAgICBrZXlzID0gKCkgPT4ge1xuICAgICAgICByZXR1cm4gdGhpcy4jbWFwLmtleXMoKTtcbiAgICB9O1xufVxuZXhwb3J0IGNsYXNzIEJvdW5kU2V0IHtcbiAgICAjbWFwO1xuICAgIGNvbnN0cnVjdG9yKHNpemVMaW1pdCkge1xuICAgICAgICB0aGlzLiNtYXAgPSBuZXcgQm91bmRNYXAoc2l6ZUxpbWl0KTtcbiAgICAgICAgdGhpcy4jbWFwLm9uRXZpY3QgPSB0aGlzLiNvbkV2aWN0O1xuICAgIH1cbiAgICAjb25FdmljdCA9ICh2KSA9PiB7XG4gICAgICAgIGlmICh0aGlzLm9uRXZpY3QpIHtcbiAgICAgICAgICAgIHRoaXMub25FdmljdCh2KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgb25FdmljdDtcbiAgICBhZGQgPSAodikgPT4ge1xuICAgICAgICB0aGlzLiNtYXAuc2V0KHYsIHYpO1xuICAgIH07XG4gICAgW1N5bWJvbC5pdGVyYXRvcl0gPSAoKSA9PiB7XG4gICAgICAgIHJldHVybiB0aGlzLiNtYXAua2V5cygpO1xuICAgIH07XG59XG5leHBvcnQgY2xhc3MgQm91bmRBcnJheSB7XG4gICAgI2FycmF5ID0gW107XG4gICAgc2l6ZUxpbWl0O1xuICAgIGNvbnN0cnVjdG9yKHNpemVMaW1pdCkge1xuICAgICAgICB0aGlzLnNpemVMaW1pdCA9IHNpemVMaW1pdDtcbiAgICB9XG4gICAgc3RhdGljIG1ha2UgPSAoc2l6ZUxpbWl0LCBpbml0aWFsID0gW10pID0+IHtcbiAgICAgICAgY29uc3QgYiA9IG5ldyBCb3VuZEFycmF5KHNpemVMaW1pdCk7XG4gICAgICAgIGZvciAoY29uc3QgdiBvZiBpbml0aWFsKSB7XG4gICAgICAgICAgICBiLnB1c2godik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGI7XG4gICAgfTtcbiAgICBvbkV2aWN0O1xuICAgIHB1c2ggPSAodikgPT4ge1xuICAgICAgICB0aGlzLiNhcnJheS5wdXNoKHYpO1xuICAgICAgICBpZiAodGhpcy4jYXJyYXkubGVuZ3RoID4gdGhpcy5zaXplTGltaXQpIHtcbiAgICAgICAgICAgIGNvbnN0IGZpcnN0ID0gdGhpcy4jYXJyYXkuc2hpZnQoKTtcbiAgICAgICAgICAgIGlmIChmaXJzdCAmJiB0aGlzLm9uRXZpY3QpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9uRXZpY3QoZmlyc3QpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICBnZXQgPSAoaW5kZXgpID0+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI2FycmF5W2luZGV4XTtcbiAgICB9O1xuICAgIGRlbGV0ZSA9IChpbmRleCkgPT4ge1xuICAgICAgICB0aGlzLiNhcnJheS5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIH07XG4gICAgZ2V0IGxlbmd0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI2FycmF5Lmxlbmd0aDtcbiAgICB9XG4gICAgW1N5bWJvbC5pdGVyYXRvcl0gPSAoKSA9PiB7XG4gICAgICAgIHJldHVybiB0aGlzLiNhcnJheVtTeW1ib2wuaXRlcmF0b3JdKCk7XG4gICAgfTtcbiAgICBtYXAgPSAoZm4pID0+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI2FycmF5Lm1hcChmbik7XG4gICAgfTtcbiAgICBjbGVhciA9ICgpID0+IHtcbiAgICAgICAgdGhpcy4jYXJyYXkgPSBbXTtcbiAgICB9O1xuICAgIHNvcnQgPSAoZm4pID0+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuI2FycmF5LnNvcnQoZm4pO1xuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ib3VuZGVkLWNvbGxlY3Rpb25zLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/node_modules/@livestore/common/dist/bounded-collections.js\n");

/***/ }),

/***/ "(rsc)/./src/node_modules/@livestore/common/dist/materializer-helper.js":
/*!************************************************************************!*\
  !*** ./src/node_modules/@livestore/common/dist/materializer-helper.js ***!
  \************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getExecStatementsFromMaterializer: () => (/* binding */ getExecStatementsFromMaterializer),\n/* harmony export */   hashMaterializerResults: () => (/* binding */ hashMaterializerResults),\n/* harmony export */   makeMaterializerHash: () => (/* binding */ makeMaterializerHash),\n/* harmony export */   replaceSessionIdSymbol: () => (/* binding */ replaceSessionIdSymbol)\n/* harmony export */ });\n/* harmony import */ var _livestore_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @livestore/utils */ \"(rsc)/./src/node_modules/@livestore/utils/dist/guards.js\");\n/* harmony import */ var _livestore_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @livestore/utils */ \"(rsc)/./src/node_modules/@livestore/utils/dist/misc.js\");\n/* harmony import */ var _livestore_utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @livestore/utils */ \"(rsc)/./src/node_modules/@livestore/utils/dist/index.js\");\n/* harmony import */ var _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @livestore/utils/effect */ \"(rsc)/./src/node_modules/effect/dist/esm/ParseResult.js\");\n/* harmony import */ var _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @livestore/utils/effect */ \"(rsc)/./src/node_modules/effect/dist/esm/Option.js\");\n/* harmony import */ var _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @livestore/utils/effect */ \"(rsc)/./src/node_modules/effect/dist/esm/Hash.js\");\n/* harmony import */ var _adapter_types_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./adapter-types.js */ \"(rsc)/./src/node_modules/@livestore/common/dist/adapter-types.js\");\n/* harmony import */ var _schema_schema_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./schema/schema.js */ \"(rsc)/./src/node_modules/@livestore/common/dist/schema/schema.js\");\n/* harmony import */ var _schema_state_sqlite_query_builder_api_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./schema/state/sqlite/query-builder/api.js */ \"(rsc)/./src/node_modules/@livestore/common/dist/schema/state/sqlite/query-builder/api.js\");\n/* harmony import */ var _schema_state_sqlite_query_builder_impl_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./schema/state/sqlite/query-builder/impl.js */ \"(rsc)/./src/node_modules/@livestore/common/dist/schema/state/sqlite/query-builder/impl.js\");\n/* harmony import */ var _util_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./util.js */ \"(rsc)/./src/node_modules/@livestore/common/dist/util.js\");\n\n\n\n\n\n\n\nconst getExecStatementsFromMaterializer = ({ eventDef, materializer, dbState, event, }) => {\n    const eventArgsDecoded = event.decoded === undefined ? _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.decodeUnknownSync(eventDef.schema)(event.encoded.args) : event.decoded.args;\n    const eventArgsEncoded = (0,_livestore_utils__WEBPACK_IMPORTED_MODULE_1__.isNil)(event.decoded?.args)\n        ? undefined\n        : _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.encodeUnknownSync(eventDef.schema)(event.decoded.args);\n    const query = (rawQueryOrQueryBuilder) => {\n        if ((0,_schema_state_sqlite_query_builder_api_js__WEBPACK_IMPORTED_MODULE_2__.isQueryBuilder)(rawQueryOrQueryBuilder)) {\n            const { query, bindValues } = rawQueryOrQueryBuilder.asSql();\n            const rawResults = dbState.select(query, (0,_util_js__WEBPACK_IMPORTED_MODULE_3__.prepareBindValues)(bindValues, query));\n            const resultSchema = (0,_schema_state_sqlite_query_builder_impl_js__WEBPACK_IMPORTED_MODULE_4__.getResultSchema)(rawQueryOrQueryBuilder);\n            return _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.decodeSync(resultSchema)(rawResults);\n        }\n        else {\n            const { query, bindValues } = rawQueryOrQueryBuilder;\n            return dbState.select(query, (0,_util_js__WEBPACK_IMPORTED_MODULE_3__.prepareBindValues)(bindValues, query));\n        }\n    };\n    const statementResults = fromMaterializerResult(materializer(eventArgsDecoded, {\n        eventDef,\n        query,\n        // TODO properly implement this\n        currentFacts: new Map(),\n    }));\n    return statementResults.map((statementRes) => {\n        const statementSql = statementRes.sql;\n        const bindValues = typeof statementRes === 'string' ? eventArgsEncoded : statementRes.bindValues;\n        const writeTables = typeof statementRes === 'string' ? undefined : statementRes.writeTables;\n        return { statementSql, bindValues: (0,_util_js__WEBPACK_IMPORTED_MODULE_3__.prepareBindValues)(bindValues ?? {}, statementSql), writeTables };\n    });\n};\nconst makeMaterializerHash = ({ schema, dbState }) => (event) => {\n    if ((0,_livestore_utils__WEBPACK_IMPORTED_MODULE_5__.isDevEnv)()) {\n        const { eventDef, materializer } = (0,_schema_schema_js__WEBPACK_IMPORTED_MODULE_6__.getEventDef)(schema, event.name);\n        const materializerResults = getExecStatementsFromMaterializer({\n            eventDef,\n            materializer,\n            dbState,\n            event: { decoded: undefined, encoded: event },\n        });\n        return _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_7__.some(_livestore_utils_effect__WEBPACK_IMPORTED_MODULE_8__.string(JSON.stringify(materializerResults)));\n    }\n    return _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_7__.none();\n};\nconst hashMaterializerResults = (materializerResults) => _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_8__.string(JSON.stringify(materializerResults));\nconst fromMaterializerResult = (materializerResult) => {\n    if ((0,_livestore_utils__WEBPACK_IMPORTED_MODULE_9__.isReadonlyArray)(materializerResult)) {\n        return materializerResult.flatMap(fromMaterializerResult);\n    }\n    if ((0,_schema_state_sqlite_query_builder_api_js__WEBPACK_IMPORTED_MODULE_2__.isQueryBuilder)(materializerResult)) {\n        const { query, bindValues } = materializerResult.asSql();\n        return [{ sql: query, bindValues: bindValues, writeTables: undefined }];\n    }\n    else if (typeof materializerResult === 'string') {\n        return [{ sql: materializerResult, bindValues: {}, writeTables: undefined }];\n    }\n    else {\n        return [\n            {\n                sql: materializerResult.sql,\n                bindValues: materializerResult.bindValues,\n                writeTables: materializerResult.writeTables,\n            },\n        ];\n    }\n};\n// NOTE we should explore whether there is a more elegant solution\n// e.g. by leveraging the schema to replace the sessionIdSymbol\nconst replaceSessionIdSymbol = (bindValues, sessionId) => {\n    deepReplaceValue(bindValues, _adapter_types_js__WEBPACK_IMPORTED_MODULE_10__.SessionIdSymbol, sessionId);\n};\nconst deepReplaceValue = (input, searchValue, replaceValue) => {\n    if (Array.isArray(input)) {\n        for (const i in input) {\n            if (input[i] === searchValue) {\n                input[i] = replaceValue;\n            }\n            else {\n                deepReplaceValue(input[i], searchValue, replaceValue);\n            }\n        }\n    }\n    else if (typeof input === 'object' && input !== null) {\n        for (const key in input) {\n            if (input[key] === searchValue) {\n                input[key] = replaceValue;\n            }\n            else {\n                deepReplaceValue(input[key], searchValue, replaceValue);\n            }\n        }\n    }\n};\n//# sourceMappingURL=materializer-helper.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbm9kZV9tb2R1bGVzL0BsaXZlc3RvcmUvY29tbW9uL2Rpc3QvbWF0ZXJpYWxpemVyLWhlbHBlci5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBb0U7QUFDTDtBQUNWO0FBQ0o7QUFDMkI7QUFDRTtBQUNoQztBQUN2Qyw2Q0FBNkMseUNBQXlDO0FBQzdGLDJEQUEyRCxzRUFBd0I7QUFDbkYsNkJBQTZCLHVEQUFLO0FBQ2xDO0FBQ0EsVUFBVSxzRUFBd0I7QUFDbEM7QUFDQSxZQUFZLHlGQUFjO0FBQzFCLG9CQUFvQixvQkFBb0I7QUFDeEMscURBQXFELDJEQUFpQjtBQUN0RSxpQ0FBaUMsMkZBQWU7QUFDaEQsbUJBQW1CLCtEQUFpQjtBQUNwQztBQUNBO0FBQ0Esb0JBQW9CLG9CQUFvQjtBQUN4Qyx5Q0FBeUMsMkRBQWlCO0FBQzFEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLDBCQUEwQiwyREFBaUIsaUJBQWlCO0FBQzdFLEtBQUs7QUFDTDtBQUNPLGdDQUFnQyxpQkFBaUI7QUFDeEQsUUFBUSwwREFBUTtBQUNoQixnQkFBZ0IseUJBQXlCLEVBQUUsOERBQVc7QUFDdEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsb0NBQW9DO0FBQ3pELFNBQVM7QUFDVCxlQUFlLHlEQUFXLENBQUMsMkRBQVc7QUFDdEM7QUFDQSxXQUFXLHlEQUFXO0FBQ3RCO0FBQ08seURBQXlELDJEQUFXO0FBQzNFO0FBQ0EsUUFBUSxpRUFBZTtBQUN2QjtBQUNBO0FBQ0EsUUFBUSx5RkFBYztBQUN0QixnQkFBZ0Isb0JBQW9CO0FBQ3BDLGtCQUFrQiw0REFBNEQ7QUFDOUU7QUFDQTtBQUNBLGtCQUFrQix1Q0FBdUMsMEJBQTBCO0FBQ25GO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQLGlDQUFpQywrREFBZTtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hbmFjb25kYS1hc3Nlc21lbnQtMS8uL3NyYy9ub2RlX21vZHVsZXMvQGxpdmVzdG9yZS9jb21tb24vZGlzdC9tYXRlcmlhbGl6ZXItaGVscGVyLmpzPzY4YTkiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaXNEZXZFbnYsIGlzTmlsLCBpc1JlYWRvbmx5QXJyYXkgfSBmcm9tICdAbGl2ZXN0b3JlL3V0aWxzJztcbmltcG9ydCB7IEhhc2gsIE9wdGlvbiwgU2NoZW1hIH0gZnJvbSAnQGxpdmVzdG9yZS91dGlscy9lZmZlY3QnO1xuaW1wb3J0IHsgU2Vzc2lvbklkU3ltYm9sIH0gZnJvbSAnLi9hZGFwdGVyLXR5cGVzLmpzJztcbmltcG9ydCB7IGdldEV2ZW50RGVmIH0gZnJvbSAnLi9zY2hlbWEvc2NoZW1hLmpzJztcbmltcG9ydCB7IGlzUXVlcnlCdWlsZGVyIH0gZnJvbSAnLi9zY2hlbWEvc3RhdGUvc3FsaXRlL3F1ZXJ5LWJ1aWxkZXIvYXBpLmpzJztcbmltcG9ydCB7IGdldFJlc3VsdFNjaGVtYSB9IGZyb20gJy4vc2NoZW1hL3N0YXRlL3NxbGl0ZS9xdWVyeS1idWlsZGVyL2ltcGwuanMnO1xuaW1wb3J0IHsgcHJlcGFyZUJpbmRWYWx1ZXMgfSBmcm9tICcuL3V0aWwuanMnO1xuZXhwb3J0IGNvbnN0IGdldEV4ZWNTdGF0ZW1lbnRzRnJvbU1hdGVyaWFsaXplciA9ICh7IGV2ZW50RGVmLCBtYXRlcmlhbGl6ZXIsIGRiU3RhdGUsIGV2ZW50LCB9KSA9PiB7XG4gICAgY29uc3QgZXZlbnRBcmdzRGVjb2RlZCA9IGV2ZW50LmRlY29kZWQgPT09IHVuZGVmaW5lZCA/IFNjaGVtYS5kZWNvZGVVbmtub3duU3luYyhldmVudERlZi5zY2hlbWEpKGV2ZW50LmVuY29kZWQuYXJncykgOiBldmVudC5kZWNvZGVkLmFyZ3M7XG4gICAgY29uc3QgZXZlbnRBcmdzRW5jb2RlZCA9IGlzTmlsKGV2ZW50LmRlY29kZWQ/LmFyZ3MpXG4gICAgICAgID8gdW5kZWZpbmVkXG4gICAgICAgIDogU2NoZW1hLmVuY29kZVVua25vd25TeW5jKGV2ZW50RGVmLnNjaGVtYSkoZXZlbnQuZGVjb2RlZC5hcmdzKTtcbiAgICBjb25zdCBxdWVyeSA9IChyYXdRdWVyeU9yUXVlcnlCdWlsZGVyKSA9PiB7XG4gICAgICAgIGlmIChpc1F1ZXJ5QnVpbGRlcihyYXdRdWVyeU9yUXVlcnlCdWlsZGVyKSkge1xuICAgICAgICAgICAgY29uc3QgeyBxdWVyeSwgYmluZFZhbHVlcyB9ID0gcmF3UXVlcnlPclF1ZXJ5QnVpbGRlci5hc1NxbCgpO1xuICAgICAgICAgICAgY29uc3QgcmF3UmVzdWx0cyA9IGRiU3RhdGUuc2VsZWN0KHF1ZXJ5LCBwcmVwYXJlQmluZFZhbHVlcyhiaW5kVmFsdWVzLCBxdWVyeSkpO1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0U2NoZW1hID0gZ2V0UmVzdWx0U2NoZW1hKHJhd1F1ZXJ5T3JRdWVyeUJ1aWxkZXIpO1xuICAgICAgICAgICAgcmV0dXJuIFNjaGVtYS5kZWNvZGVTeW5jKHJlc3VsdFNjaGVtYSkocmF3UmVzdWx0cyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCB7IHF1ZXJ5LCBiaW5kVmFsdWVzIH0gPSByYXdRdWVyeU9yUXVlcnlCdWlsZGVyO1xuICAgICAgICAgICAgcmV0dXJuIGRiU3RhdGUuc2VsZWN0KHF1ZXJ5LCBwcmVwYXJlQmluZFZhbHVlcyhiaW5kVmFsdWVzLCBxdWVyeSkpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBzdGF0ZW1lbnRSZXN1bHRzID0gZnJvbU1hdGVyaWFsaXplclJlc3VsdChtYXRlcmlhbGl6ZXIoZXZlbnRBcmdzRGVjb2RlZCwge1xuICAgICAgICBldmVudERlZixcbiAgICAgICAgcXVlcnksXG4gICAgICAgIC8vIFRPRE8gcHJvcGVybHkgaW1wbGVtZW50IHRoaXNcbiAgICAgICAgY3VycmVudEZhY3RzOiBuZXcgTWFwKCksXG4gICAgfSkpO1xuICAgIHJldHVybiBzdGF0ZW1lbnRSZXN1bHRzLm1hcCgoc3RhdGVtZW50UmVzKSA9PiB7XG4gICAgICAgIGNvbnN0IHN0YXRlbWVudFNxbCA9IHN0YXRlbWVudFJlcy5zcWw7XG4gICAgICAgIGNvbnN0IGJpbmRWYWx1ZXMgPSB0eXBlb2Ygc3RhdGVtZW50UmVzID09PSAnc3RyaW5nJyA/IGV2ZW50QXJnc0VuY29kZWQgOiBzdGF0ZW1lbnRSZXMuYmluZFZhbHVlcztcbiAgICAgICAgY29uc3Qgd3JpdGVUYWJsZXMgPSB0eXBlb2Ygc3RhdGVtZW50UmVzID09PSAnc3RyaW5nJyA/IHVuZGVmaW5lZCA6IHN0YXRlbWVudFJlcy53cml0ZVRhYmxlcztcbiAgICAgICAgcmV0dXJuIHsgc3RhdGVtZW50U3FsLCBiaW5kVmFsdWVzOiBwcmVwYXJlQmluZFZhbHVlcyhiaW5kVmFsdWVzID8/IHt9LCBzdGF0ZW1lbnRTcWwpLCB3cml0ZVRhYmxlcyB9O1xuICAgIH0pO1xufTtcbmV4cG9ydCBjb25zdCBtYWtlTWF0ZXJpYWxpemVySGFzaCA9ICh7IHNjaGVtYSwgZGJTdGF0ZSB9KSA9PiAoZXZlbnQpID0+IHtcbiAgICBpZiAoaXNEZXZFbnYoKSkge1xuICAgICAgICBjb25zdCB7IGV2ZW50RGVmLCBtYXRlcmlhbGl6ZXIgfSA9IGdldEV2ZW50RGVmKHNjaGVtYSwgZXZlbnQubmFtZSk7XG4gICAgICAgIGNvbnN0IG1hdGVyaWFsaXplclJlc3VsdHMgPSBnZXRFeGVjU3RhdGVtZW50c0Zyb21NYXRlcmlhbGl6ZXIoe1xuICAgICAgICAgICAgZXZlbnREZWYsXG4gICAgICAgICAgICBtYXRlcmlhbGl6ZXIsXG4gICAgICAgICAgICBkYlN0YXRlLFxuICAgICAgICAgICAgZXZlbnQ6IHsgZGVjb2RlZDogdW5kZWZpbmVkLCBlbmNvZGVkOiBldmVudCB9LFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIE9wdGlvbi5zb21lKEhhc2guc3RyaW5nKEpTT04uc3RyaW5naWZ5KG1hdGVyaWFsaXplclJlc3VsdHMpKSk7XG4gICAgfVxuICAgIHJldHVybiBPcHRpb24ubm9uZSgpO1xufTtcbmV4cG9ydCBjb25zdCBoYXNoTWF0ZXJpYWxpemVyUmVzdWx0cyA9IChtYXRlcmlhbGl6ZXJSZXN1bHRzKSA9PiBIYXNoLnN0cmluZyhKU09OLnN0cmluZ2lmeShtYXRlcmlhbGl6ZXJSZXN1bHRzKSk7XG5jb25zdCBmcm9tTWF0ZXJpYWxpemVyUmVzdWx0ID0gKG1hdGVyaWFsaXplclJlc3VsdCkgPT4ge1xuICAgIGlmIChpc1JlYWRvbmx5QXJyYXkobWF0ZXJpYWxpemVyUmVzdWx0KSkge1xuICAgICAgICByZXR1cm4gbWF0ZXJpYWxpemVyUmVzdWx0LmZsYXRNYXAoZnJvbU1hdGVyaWFsaXplclJlc3VsdCk7XG4gICAgfVxuICAgIGlmIChpc1F1ZXJ5QnVpbGRlcihtYXRlcmlhbGl6ZXJSZXN1bHQpKSB7XG4gICAgICAgIGNvbnN0IHsgcXVlcnksIGJpbmRWYWx1ZXMgfSA9IG1hdGVyaWFsaXplclJlc3VsdC5hc1NxbCgpO1xuICAgICAgICByZXR1cm4gW3sgc3FsOiBxdWVyeSwgYmluZFZhbHVlczogYmluZFZhbHVlcywgd3JpdGVUYWJsZXM6IHVuZGVmaW5lZCB9XTtcbiAgICB9XG4gICAgZWxzZSBpZiAodHlwZW9mIG1hdGVyaWFsaXplclJlc3VsdCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgcmV0dXJuIFt7IHNxbDogbWF0ZXJpYWxpemVyUmVzdWx0LCBiaW5kVmFsdWVzOiB7fSwgd3JpdGVUYWJsZXM6IHVuZGVmaW5lZCB9XTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgc3FsOiBtYXRlcmlhbGl6ZXJSZXN1bHQuc3FsLFxuICAgICAgICAgICAgICAgIGJpbmRWYWx1ZXM6IG1hdGVyaWFsaXplclJlc3VsdC5iaW5kVmFsdWVzLFxuICAgICAgICAgICAgICAgIHdyaXRlVGFibGVzOiBtYXRlcmlhbGl6ZXJSZXN1bHQud3JpdGVUYWJsZXMsXG4gICAgICAgICAgICB9LFxuICAgICAgICBdO1xuICAgIH1cbn07XG4vLyBOT1RFIHdlIHNob3VsZCBleHBsb3JlIHdoZXRoZXIgdGhlcmUgaXMgYSBtb3JlIGVsZWdhbnQgc29sdXRpb25cbi8vIGUuZy4gYnkgbGV2ZXJhZ2luZyB0aGUgc2NoZW1hIHRvIHJlcGxhY2UgdGhlIHNlc3Npb25JZFN5bWJvbFxuZXhwb3J0IGNvbnN0IHJlcGxhY2VTZXNzaW9uSWRTeW1ib2wgPSAoYmluZFZhbHVlcywgc2Vzc2lvbklkKSA9PiB7XG4gICAgZGVlcFJlcGxhY2VWYWx1ZShiaW5kVmFsdWVzLCBTZXNzaW9uSWRTeW1ib2wsIHNlc3Npb25JZCk7XG59O1xuY29uc3QgZGVlcFJlcGxhY2VWYWx1ZSA9IChpbnB1dCwgc2VhcmNoVmFsdWUsIHJlcGxhY2VWYWx1ZSkgPT4ge1xuICAgIGlmIChBcnJheS5pc0FycmF5KGlucHV0KSkge1xuICAgICAgICBmb3IgKGNvbnN0IGkgaW4gaW5wdXQpIHtcbiAgICAgICAgICAgIGlmIChpbnB1dFtpXSA9PT0gc2VhcmNoVmFsdWUpIHtcbiAgICAgICAgICAgICAgICBpbnB1dFtpXSA9IHJlcGxhY2VWYWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGRlZXBSZXBsYWNlVmFsdWUoaW5wdXRbaV0sIHNlYXJjaFZhbHVlLCByZXBsYWNlVmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2UgaWYgKHR5cGVvZiBpbnB1dCA9PT0gJ29iamVjdCcgJiYgaW5wdXQgIT09IG51bGwpIHtcbiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gaW5wdXQpIHtcbiAgICAgICAgICAgIGlmIChpbnB1dFtrZXldID09PSBzZWFyY2hWYWx1ZSkge1xuICAgICAgICAgICAgICAgIGlucHV0W2tleV0gPSByZXBsYWNlVmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBkZWVwUmVwbGFjZVZhbHVlKGlucHV0W2tleV0sIHNlYXJjaFZhbHVlLCByZXBsYWNlVmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1hdGVyaWFsaXplci1oZWxwZXIuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/node_modules/@livestore/common/dist/materializer-helper.js\n");

/***/ }),

/***/ "(rsc)/./src/node_modules/@livestore/common/dist/otel.js":
/*!*********************************************************!*\
  !*** ./src/node_modules/@livestore/common/dist/otel.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getDurationMsFromSpan: () => (/* binding */ getDurationMsFromSpan),\n/* harmony export */   getStartTimeHighResFromSpan: () => (/* binding */ getStartTimeHighResFromSpan),\n/* harmony export */   provideOtel: () => (/* binding */ provideOtel)\n/* harmony export */ });\n/* harmony import */ var _livestore_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @livestore/utils */ \"(rsc)/./src/node_modules/@livestore/utils/dist/NoopTracer.js\");\n/* harmony import */ var _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @livestore/utils/effect */ \"(rsc)/./src/node_modules/effect/dist/esm/Layer.js\");\n/* harmony import */ var _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @livestore/utils/effect */ \"(rsc)/./src/node_modules/@effect/opentelemetry/dist/esm/Tracer.js\");\n/* harmony import */ var _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @livestore/utils/effect */ \"(rsc)/./src/node_modules/effect/dist/esm/Effect.js\");\n/* harmony import */ var _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @livestore/utils/effect */ \"(rsc)/./src/node_modules/effect/dist/esm/Function.js\");\n/* harmony import */ var _opentelemetry_api__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @opentelemetry/api */ \"(rsc)/./node_modules/next/dist/compiled/@opentelemetry/api/index.js\");\n\n\n\nconst provideOtel = ({ otelTracer, parentSpanContext }) => (effect) => {\n    const OtelTracerLive = _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_1__.succeed(_livestore_utils_effect__WEBPACK_IMPORTED_MODULE_2__.OtelTracer, otelTracer ?? (0,_livestore_utils__WEBPACK_IMPORTED_MODULE_3__.makeNoopTracer)());\n    const TracingLive = _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_1__.unwrapEffect(_livestore_utils_effect__WEBPACK_IMPORTED_MODULE_4__.map(_livestore_utils_effect__WEBPACK_IMPORTED_MODULE_2__.make, _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_1__.setTracer)).pipe(_livestore_utils_effect__WEBPACK_IMPORTED_MODULE_1__.provideMerge(OtelTracerLive));\n    return effect.pipe(parentSpanContext\n        ? _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_4__.withParentSpan(_livestore_utils_effect__WEBPACK_IMPORTED_MODULE_2__.makeExternalSpan(_opentelemetry_api__WEBPACK_IMPORTED_MODULE_0__.trace.getSpanContext(parentSpanContext)))\n        : _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_5__.identity, _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_4__.provide(TracingLive));\n};\nconst getDurationMsFromSpan = (span) => {\n    const durationHr = span._duration;\n    return durationHr[0] * 1000 + durationHr[1] / 1_000_000;\n};\nconst getStartTimeHighResFromSpan = (span) => span._performanceStartTime;\n//# sourceMappingURL=otel.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbm9kZV9tb2R1bGVzL0BsaXZlc3RvcmUvY29tbW9uL2Rpc3Qvb3RlbC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBa0Q7QUFDNEI7QUFDbkM7QUFDcEMsdUJBQXVCLCtCQUErQjtBQUM3RCwyQkFBMkIsNERBQWEsQ0FBQywrREFBcUIsZ0JBQWdCLGdFQUFjO0FBQzVGLHdCQUF3QixpRUFBa0IsQ0FBQyx3REFBVSxDQUFDLHlEQUFlLEVBQUUsOERBQWUsUUFBUSxpRUFBa0I7QUFDaEg7QUFDQSxVQUFVLG1FQUFxQixDQUFDLHFFQUEyQixDQUFDLHFEQUFVO0FBQ3RFLFVBQVUsNkRBQVEsRUFBRSw0REFBYztBQUNsQztBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ087QUFDUCIsInNvdXJjZXMiOlsid2VicGFjazovL2FuYWNvbmRhLWFzc2VzbWVudC0xLy4vc3JjL25vZGVfbW9kdWxlcy9AbGl2ZXN0b3JlL2NvbW1vbi9kaXN0L290ZWwuanM/NDZiNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBtYWtlTm9vcFRyYWNlciB9IGZyb20gJ0BsaXZlc3RvcmUvdXRpbHMnO1xuaW1wb3J0IHsgRWZmZWN0LCBpZGVudGl0eSwgTGF5ZXIsIE90ZWxUcmFjZXIgfSBmcm9tICdAbGl2ZXN0b3JlL3V0aWxzL2VmZmVjdCc7XG5pbXBvcnQgKiBhcyBvdGVsIGZyb20gJ0BvcGVudGVsZW1ldHJ5L2FwaSc7XG5leHBvcnQgY29uc3QgcHJvdmlkZU90ZWwgPSAoeyBvdGVsVHJhY2VyLCBwYXJlbnRTcGFuQ29udGV4dCB9KSA9PiAoZWZmZWN0KSA9PiB7XG4gICAgY29uc3QgT3RlbFRyYWNlckxpdmUgPSBMYXllci5zdWNjZWVkKE90ZWxUcmFjZXIuT3RlbFRyYWNlciwgb3RlbFRyYWNlciA/PyBtYWtlTm9vcFRyYWNlcigpKTtcbiAgICBjb25zdCBUcmFjaW5nTGl2ZSA9IExheWVyLnVud3JhcEVmZmVjdChFZmZlY3QubWFwKE90ZWxUcmFjZXIubWFrZSwgTGF5ZXIuc2V0VHJhY2VyKSkucGlwZShMYXllci5wcm92aWRlTWVyZ2UoT3RlbFRyYWNlckxpdmUpKTtcbiAgICByZXR1cm4gZWZmZWN0LnBpcGUocGFyZW50U3BhbkNvbnRleHRcbiAgICAgICAgPyBFZmZlY3Qud2l0aFBhcmVudFNwYW4oT3RlbFRyYWNlci5tYWtlRXh0ZXJuYWxTcGFuKG90ZWwudHJhY2UuZ2V0U3BhbkNvbnRleHQocGFyZW50U3BhbkNvbnRleHQpKSlcbiAgICAgICAgOiBpZGVudGl0eSwgRWZmZWN0LnByb3ZpZGUoVHJhY2luZ0xpdmUpKTtcbn07XG5leHBvcnQgY29uc3QgZ2V0RHVyYXRpb25Nc0Zyb21TcGFuID0gKHNwYW4pID0+IHtcbiAgICBjb25zdCBkdXJhdGlvbkhyID0gc3Bhbi5fZHVyYXRpb247XG4gICAgcmV0dXJuIGR1cmF0aW9uSHJbMF0gKiAxMDAwICsgZHVyYXRpb25IclsxXSAvIDFfMDAwXzAwMDtcbn07XG5leHBvcnQgY29uc3QgZ2V0U3RhcnRUaW1lSGlnaFJlc0Zyb21TcGFuID0gKHNwYW4pID0+IHNwYW4uX3BlcmZvcm1hbmNlU3RhcnRUaW1lO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9b3RlbC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/node_modules/@livestore/common/dist/otel.js\n");

/***/ }),

/***/ "(rsc)/./src/node_modules/@livestore/common/dist/schema/EventDef.js":
/*!********************************************************************!*\
  !*** ./src/node_modules/@livestore/common/dist/schema/EventDef.js ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   clientOnly: () => (/* binding */ clientOnly),\n/* harmony export */   defineEvent: () => (/* binding */ defineEvent),\n/* harmony export */   defineFacts: () => (/* binding */ defineFacts),\n/* harmony export */   defineMaterializer: () => (/* binding */ defineMaterializer),\n/* harmony export */   materializers: () => (/* binding */ materializers),\n/* harmony export */   rawSqlEvent: () => (/* binding */ rawSqlEvent),\n/* harmony export */   rawSqlMaterializer: () => (/* binding */ rawSqlMaterializer),\n/* harmony export */   synced: () => (/* binding */ synced)\n/* harmony export */ });\n/* harmony import */ var _livestore_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @livestore/utils */ \"(rsc)/./src/node_modules/@livestore/utils/dist/misc.js\");\n/* harmony import */ var _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @livestore/utils/effect */ \"(rsc)/./src/node_modules/effect/dist/esm/Schema.js\");\n\n\nconst defineFacts = (record) => record;\nconst defineEvent = (args) => {\n    const { name, schema, ...options } = args;\n    const makePartialEvent = (args) => {\n        const res = _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.validateEither(schema)(args);\n        if (res._tag === 'Left') {\n            (0,_livestore_utils__WEBPACK_IMPORTED_MODULE_1__.shouldNeverHappen)(`Invalid event args for event '${name}':`, res.left.message, '\\n');\n        }\n        return { name: name, args };\n    };\n    Object.defineProperty(makePartialEvent, 'name', { value: name });\n    Object.defineProperty(makePartialEvent, 'schema', { value: schema });\n    Object.defineProperty(makePartialEvent, 'encoded', {\n        value: (args) => ({ name: name, args }),\n    });\n    Object.defineProperty(makePartialEvent, 'options', {\n        value: {\n            clientOnly: options?.clientOnly ?? false,\n            facts: options?.facts\n                ? (args, currentFacts) => {\n                    const res = options.facts(args, currentFacts);\n                    return {\n                        modify: {\n                            set: res.modify?.set ? new Set(res.modify.set) : new Set(),\n                            unset: res.modify?.unset ? new Set(res.modify.unset) : new Set(),\n                        },\n                        require: res.require ? new Set(res.require) : new Set(),\n                    };\n                }\n                : undefined,\n            derived: options?.derived ?? false,\n        },\n    });\n    return makePartialEvent;\n};\nconst synced = (args) => defineEvent({ ...args, clientOnly: false });\nconst clientOnly = (args) => defineEvent({ ...args, clientOnly: true });\nconst defineMaterializer = (eventDef, materializer) => {\n    return materializer;\n};\nconst materializers = (eventDefRecord, handlers) => {\n    return handlers;\n};\nconst rawSqlEvent = defineEvent({\n    name: 'livestore.RawSql',\n    schema: _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.Struct({\n        sql: _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.String,\n        bindValues: _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.optional(_livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.Record({ key: _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.String, value: _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.Any })),\n        writeTables: _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.optional(_livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.ReadonlySet(_livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.String)),\n    }),\n    clientOnly: true,\n    derived: true,\n});\nconst rawSqlMaterializer = defineMaterializer(rawSqlEvent, ({ sql, bindValues, writeTables }) => ({\n    sql,\n    bindValues: bindValues ?? {},\n    writeTables,\n}));\n//# sourceMappingURL=EventDef.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbm9kZV9tb2R1bGVzL0BsaXZlc3RvcmUvY29tbW9uL2Rpc3Qvc2NoZW1hL0V2ZW50RGVmLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBcUQ7QUFDSjtBQUMxQztBQUNBO0FBQ1AsWUFBWSwyQkFBMkI7QUFDdkM7QUFDQSxvQkFBb0IsbUVBQXFCO0FBQ3pDO0FBQ0EsWUFBWSxtRUFBaUIsa0NBQWtDLEtBQUs7QUFDcEU7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxzREFBc0QsYUFBYTtBQUNuRSx3REFBd0QsZUFBZTtBQUN2RTtBQUNBLDRCQUE0QixrQkFBa0I7QUFDOUMsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsS0FBSztBQUNMO0FBQ0E7QUFDTyx1Q0FBdUMsNEJBQTRCO0FBQ25FLDJDQUEyQywyQkFBMkI7QUFDdEU7QUFDUDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ087QUFDUDtBQUNBLFlBQVksMkRBQWE7QUFDekIsYUFBYSwyREFBYTtBQUMxQixvQkFBb0IsNkRBQWUsQ0FBQywyREFBYSxHQUFHLEtBQUssMkRBQWEsU0FBUyx3REFBVSxFQUFFO0FBQzNGLHFCQUFxQiw2REFBZSxDQUFDLGdFQUFrQixDQUFDLDJEQUFhO0FBQ3JFLEtBQUs7QUFDTDtBQUNBO0FBQ0EsQ0FBQztBQUNNLDhEQUE4RCw4QkFBOEI7QUFDbkc7QUFDQSxnQ0FBZ0M7QUFDaEM7QUFDQSxDQUFDO0FBQ0QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hbmFjb25kYS1hc3Nlc21lbnQtMS8uL3NyYy9ub2RlX21vZHVsZXMvQGxpdmVzdG9yZS9jb21tb24vZGlzdC9zY2hlbWEvRXZlbnREZWYuanM/ZmMyZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBzaG91bGROZXZlckhhcHBlbiB9IGZyb20gJ0BsaXZlc3RvcmUvdXRpbHMnO1xuaW1wb3J0IHsgU2NoZW1hIH0gZnJvbSAnQGxpdmVzdG9yZS91dGlscy9lZmZlY3QnO1xuZXhwb3J0IGNvbnN0IGRlZmluZUZhY3RzID0gKHJlY29yZCkgPT4gcmVjb3JkO1xuZXhwb3J0IGNvbnN0IGRlZmluZUV2ZW50ID0gKGFyZ3MpID0+IHtcbiAgICBjb25zdCB7IG5hbWUsIHNjaGVtYSwgLi4ub3B0aW9ucyB9ID0gYXJncztcbiAgICBjb25zdCBtYWtlUGFydGlhbEV2ZW50ID0gKGFyZ3MpID0+IHtcbiAgICAgICAgY29uc3QgcmVzID0gU2NoZW1hLnZhbGlkYXRlRWl0aGVyKHNjaGVtYSkoYXJncyk7XG4gICAgICAgIGlmIChyZXMuX3RhZyA9PT0gJ0xlZnQnKSB7XG4gICAgICAgICAgICBzaG91bGROZXZlckhhcHBlbihgSW52YWxpZCBldmVudCBhcmdzIGZvciBldmVudCAnJHtuYW1lfSc6YCwgcmVzLmxlZnQubWVzc2FnZSwgJ1xcbicpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IG5hbWU6IG5hbWUsIGFyZ3MgfTtcbiAgICB9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShtYWtlUGFydGlhbEV2ZW50LCAnbmFtZScsIHsgdmFsdWU6IG5hbWUgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG1ha2VQYXJ0aWFsRXZlbnQsICdzY2hlbWEnLCB7IHZhbHVlOiBzY2hlbWEgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG1ha2VQYXJ0aWFsRXZlbnQsICdlbmNvZGVkJywge1xuICAgICAgICB2YWx1ZTogKGFyZ3MpID0+ICh7IG5hbWU6IG5hbWUsIGFyZ3MgfSksXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG1ha2VQYXJ0aWFsRXZlbnQsICdvcHRpb25zJywge1xuICAgICAgICB2YWx1ZToge1xuICAgICAgICAgICAgY2xpZW50T25seTogb3B0aW9ucz8uY2xpZW50T25seSA/PyBmYWxzZSxcbiAgICAgICAgICAgIGZhY3RzOiBvcHRpb25zPy5mYWN0c1xuICAgICAgICAgICAgICAgID8gKGFyZ3MsIGN1cnJlbnRGYWN0cykgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBvcHRpb25zLmZhY3RzKGFyZ3MsIGN1cnJlbnRGYWN0cyk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RpZnk6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXQ6IHJlcy5tb2RpZnk/LnNldCA/IG5ldyBTZXQocmVzLm1vZGlmeS5zZXQpIDogbmV3IFNldCgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuc2V0OiByZXMubW9kaWZ5Py51bnNldCA/IG5ldyBTZXQocmVzLm1vZGlmeS51bnNldCkgOiBuZXcgU2V0KCksXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZTogcmVzLnJlcXVpcmUgPyBuZXcgU2V0KHJlcy5yZXF1aXJlKSA6IG5ldyBTZXQoKSxcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgOiB1bmRlZmluZWQsXG4gICAgICAgICAgICBkZXJpdmVkOiBvcHRpb25zPy5kZXJpdmVkID8/IGZhbHNlLFxuICAgICAgICB9LFxuICAgIH0pO1xuICAgIHJldHVybiBtYWtlUGFydGlhbEV2ZW50O1xufTtcbmV4cG9ydCBjb25zdCBzeW5jZWQgPSAoYXJncykgPT4gZGVmaW5lRXZlbnQoeyAuLi5hcmdzLCBjbGllbnRPbmx5OiBmYWxzZSB9KTtcbmV4cG9ydCBjb25zdCBjbGllbnRPbmx5ID0gKGFyZ3MpID0+IGRlZmluZUV2ZW50KHsgLi4uYXJncywgY2xpZW50T25seTogdHJ1ZSB9KTtcbmV4cG9ydCBjb25zdCBkZWZpbmVNYXRlcmlhbGl6ZXIgPSAoZXZlbnREZWYsIG1hdGVyaWFsaXplcikgPT4ge1xuICAgIHJldHVybiBtYXRlcmlhbGl6ZXI7XG59O1xuZXhwb3J0IGNvbnN0IG1hdGVyaWFsaXplcnMgPSAoZXZlbnREZWZSZWNvcmQsIGhhbmRsZXJzKSA9PiB7XG4gICAgcmV0dXJuIGhhbmRsZXJzO1xufTtcbmV4cG9ydCBjb25zdCByYXdTcWxFdmVudCA9IGRlZmluZUV2ZW50KHtcbiAgICBuYW1lOiAnbGl2ZXN0b3JlLlJhd1NxbCcsXG4gICAgc2NoZW1hOiBTY2hlbWEuU3RydWN0KHtcbiAgICAgICAgc3FsOiBTY2hlbWEuU3RyaW5nLFxuICAgICAgICBiaW5kVmFsdWVzOiBTY2hlbWEub3B0aW9uYWwoU2NoZW1hLlJlY29yZCh7IGtleTogU2NoZW1hLlN0cmluZywgdmFsdWU6IFNjaGVtYS5BbnkgfSkpLFxuICAgICAgICB3cml0ZVRhYmxlczogU2NoZW1hLm9wdGlvbmFsKFNjaGVtYS5SZWFkb25seVNldChTY2hlbWEuU3RyaW5nKSksXG4gICAgfSksXG4gICAgY2xpZW50T25seTogdHJ1ZSxcbiAgICBkZXJpdmVkOiB0cnVlLFxufSk7XG5leHBvcnQgY29uc3QgcmF3U3FsTWF0ZXJpYWxpemVyID0gZGVmaW5lTWF0ZXJpYWxpemVyKHJhd1NxbEV2ZW50LCAoeyBzcWwsIGJpbmRWYWx1ZXMsIHdyaXRlVGFibGVzIH0pID0+ICh7XG4gICAgc3FsLFxuICAgIGJpbmRWYWx1ZXM6IGJpbmRWYWx1ZXMgPz8ge30sXG4gICAgd3JpdGVUYWJsZXMsXG59KSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1FdmVudERlZi5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/node_modules/@livestore/common/dist/schema/EventDef.js\n");

/***/ }),

/***/ "(rsc)/./src/node_modules/@livestore/common/dist/schema/EventSequenceNumber.js":
/*!*******************************************************************************!*\
  !*** ./src/node_modules/@livestore/common/dist/schema/EventSequenceNumber.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ClientEventSequenceNumber: () => (/* binding */ ClientEventSequenceNumber),\n/* harmony export */   EventSequenceNumber: () => (/* binding */ EventSequenceNumber),\n/* harmony export */   GlobalEventSequenceNumber: () => (/* binding */ GlobalEventSequenceNumber),\n/* harmony export */   ROOT: () => (/* binding */ ROOT),\n/* harmony export */   clientDefault: () => (/* binding */ clientDefault),\n/* harmony export */   compare: () => (/* binding */ compare),\n/* harmony export */   diff: () => (/* binding */ diff),\n/* harmony export */   fromString: () => (/* binding */ fromString),\n/* harmony export */   globalEventSequenceNumber: () => (/* binding */ globalEventSequenceNumber),\n/* harmony export */   isEqual: () => (/* binding */ isEqual),\n/* harmony export */   isGreaterThan: () => (/* binding */ isGreaterThan),\n/* harmony export */   isGreaterThanOrEqual: () => (/* binding */ isGreaterThanOrEqual),\n/* harmony export */   localEventSequenceNumber: () => (/* binding */ localEventSequenceNumber),\n/* harmony export */   make: () => (/* binding */ make),\n/* harmony export */   max: () => (/* binding */ max),\n/* harmony export */   nextPair: () => (/* binding */ nextPair),\n/* harmony export */   toString: () => (/* binding */ toString)\n/* harmony export */ });\n/* harmony import */ var _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @livestore/utils/effect */ \"(rsc)/./src/node_modules/effect/dist/esm/Brand.js\");\n/* harmony import */ var _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @livestore/utils/effect */ \"(rsc)/./src/node_modules/effect/dist/esm/Schema.js\");\n/* harmony import */ var _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @livestore/utils/effect */ \"(rsc)/./src/node_modules/effect/dist/esm/ParseResult.js\");\n\nconst localEventSequenceNumber = _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.nominal();\nconst ClientEventSequenceNumber = _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_1__.fromBrand(localEventSequenceNumber)(_livestore_utils_effect__WEBPACK_IMPORTED_MODULE_1__.Int);\nconst globalEventSequenceNumber = _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.nominal();\nconst GlobalEventSequenceNumber = _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_1__.fromBrand(globalEventSequenceNumber)(_livestore_utils_effect__WEBPACK_IMPORTED_MODULE_1__.Int);\nconst clientDefault = 0;\n// export const EventSequenceNumber = Schema.Struct({})\n// export const EventSequenceNumber = Schema.Struct({})\n// export const ClientEventSequenceNumber = Schema.Struct({})\n// export const GlobalEventSequenceNumber = Schema.Struct({})\n/**\n * NOTE: Client mutation events with a non-0 client id, won't be synced to the sync backend.\n */\nconst EventSequenceNumber = _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_1__.Struct({\n    global: GlobalEventSequenceNumber,\n    /** Only increments for clientOnly events */\n    client: ClientEventSequenceNumber,\n    // TODO also provide a way to see \"confirmation level\" of event (e.g. confirmed by leader/sync backend)\n    // TODO: actually add this field\n    // Client only\n    // generation: Schema.Number.pipe(Schema.optional),\n}).annotations({ title: 'LiveStore.EventSequenceNumber' });\n/**\n * Compare two event sequence numbers i.e. checks if the first event sequence number is less than the second.\n */\nconst compare = (a, b) => {\n    if (a.global !== b.global) {\n        return a.global - b.global;\n    }\n    return a.client - b.client;\n};\n/**\n * Convert an event sequence number to a string representation.\n */\nconst toString = (seqNum) => seqNum.client === 0 ? `e${seqNum.global}` : `e${seqNum.global}+${seqNum.client}`;\n/**\n * Convert a string representation of an event sequence number to an event sequence number.\n */\nconst fromString = (str) => {\n    const [global, client] = str.slice(1, -1).split(',').map(Number);\n    if (global === undefined || client === undefined) {\n        throw new Error('Invalid event sequence number string');\n    }\n    return { global, client };\n};\nconst isEqual = (a, b) => a.global === b.global && a.client === b.client;\nconst ROOT = {\n    global: 0,\n    client: clientDefault,\n};\nconst isGreaterThan = (a, b) => {\n    return a.global > b.global || (a.global === b.global && a.client > b.client);\n};\nconst isGreaterThanOrEqual = (a, b) => {\n    return a.global > b.global || (a.global === b.global && a.client >= b.client);\n};\nconst max = (a, b) => {\n    return a.global > b.global || (a.global === b.global && a.client > b.client) ? a : b;\n};\nconst diff = (a, b) => {\n    return {\n        global: a.global - b.global,\n        client: a.client - b.client,\n    };\n};\nconst make = (seqNum) => {\n    return _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_2__.is(EventSequenceNumber)(seqNum) ? seqNum : _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_2__.decodeSync(EventSequenceNumber)(seqNum);\n};\nconst nextPair = (seqNum, isLocal) => {\n    if (isLocal) {\n        return {\n            seqNum: { global: seqNum.global, client: (seqNum.client + 1) },\n            parentSeqNum: seqNum,\n        };\n    }\n    return {\n        seqNum: { global: (seqNum.global + 1), client: clientDefault },\n        // NOTE we always point to `client: 0` for non-clientOnly events\n        parentSeqNum: { global: seqNum.global, client: clientDefault },\n    };\n};\n//# sourceMappingURL=EventSequenceNumber.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbm9kZV9tb2R1bGVzL0BsaXZlc3RvcmUvY29tbW9uL2Rpc3Qvc2NoZW1hL0V2ZW50U2VxdWVuY2VOdW1iZXIuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBd0Q7QUFDakQsaUNBQWlDLDREQUFhO0FBQzlDLGtDQUFrQyw4REFBZ0IsMkJBQTJCLHdEQUFVO0FBQ3ZGLGtDQUFrQyw0REFBYTtBQUMvQyxrQ0FBa0MsOERBQWdCLDRCQUE0Qix3REFBVTtBQUN4RjtBQUNQLHNEQUFzRDtBQUN0RCxzREFBc0Q7QUFDdEQsNERBQTREO0FBQzVELDREQUE0RDtBQUM1RDtBQUNBO0FBQ0E7QUFDTyw0QkFBNEIsMkRBQWE7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLGdCQUFnQix3Q0FBd0M7QUFDekQ7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ08sdURBQXVELGNBQWMsUUFBUSxjQUFjLEdBQUcsY0FBYztBQUNuSDtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ087QUFDQTtBQUNQO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1AsV0FBVyx1REFBUyx5Q0FBeUMsK0RBQWlCO0FBQzlFO0FBQ087QUFDUDtBQUNBO0FBQ0Esc0JBQXNCLG9EQUFvRDtBQUMxRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixvREFBb0Q7QUFDdEU7QUFDQSx3QkFBd0IsOENBQThDO0FBQ3RFO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2FuYWNvbmRhLWFzc2VzbWVudC0xLy4vc3JjL25vZGVfbW9kdWxlcy9AbGl2ZXN0b3JlL2NvbW1vbi9kaXN0L3NjaGVtYS9FdmVudFNlcXVlbmNlTnVtYmVyLmpzPzAzNTgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQnJhbmQsIFNjaGVtYSB9IGZyb20gJ0BsaXZlc3RvcmUvdXRpbHMvZWZmZWN0JztcbmV4cG9ydCBjb25zdCBsb2NhbEV2ZW50U2VxdWVuY2VOdW1iZXIgPSBCcmFuZC5ub21pbmFsKCk7XG5leHBvcnQgY29uc3QgQ2xpZW50RXZlbnRTZXF1ZW5jZU51bWJlciA9IFNjaGVtYS5mcm9tQnJhbmQobG9jYWxFdmVudFNlcXVlbmNlTnVtYmVyKShTY2hlbWEuSW50KTtcbmV4cG9ydCBjb25zdCBnbG9iYWxFdmVudFNlcXVlbmNlTnVtYmVyID0gQnJhbmQubm9taW5hbCgpO1xuZXhwb3J0IGNvbnN0IEdsb2JhbEV2ZW50U2VxdWVuY2VOdW1iZXIgPSBTY2hlbWEuZnJvbUJyYW5kKGdsb2JhbEV2ZW50U2VxdWVuY2VOdW1iZXIpKFNjaGVtYS5JbnQpO1xuZXhwb3J0IGNvbnN0IGNsaWVudERlZmF1bHQgPSAwO1xuLy8gZXhwb3J0IGNvbnN0IEV2ZW50U2VxdWVuY2VOdW1iZXIgPSBTY2hlbWEuU3RydWN0KHt9KVxuLy8gZXhwb3J0IGNvbnN0IEV2ZW50U2VxdWVuY2VOdW1iZXIgPSBTY2hlbWEuU3RydWN0KHt9KVxuLy8gZXhwb3J0IGNvbnN0IENsaWVudEV2ZW50U2VxdWVuY2VOdW1iZXIgPSBTY2hlbWEuU3RydWN0KHt9KVxuLy8gZXhwb3J0IGNvbnN0IEdsb2JhbEV2ZW50U2VxdWVuY2VOdW1iZXIgPSBTY2hlbWEuU3RydWN0KHt9KVxuLyoqXG4gKiBOT1RFOiBDbGllbnQgbXV0YXRpb24gZXZlbnRzIHdpdGggYSBub24tMCBjbGllbnQgaWQsIHdvbid0IGJlIHN5bmNlZCB0byB0aGUgc3luYyBiYWNrZW5kLlxuICovXG5leHBvcnQgY29uc3QgRXZlbnRTZXF1ZW5jZU51bWJlciA9IFNjaGVtYS5TdHJ1Y3Qoe1xuICAgIGdsb2JhbDogR2xvYmFsRXZlbnRTZXF1ZW5jZU51bWJlcixcbiAgICAvKiogT25seSBpbmNyZW1lbnRzIGZvciBjbGllbnRPbmx5IGV2ZW50cyAqL1xuICAgIGNsaWVudDogQ2xpZW50RXZlbnRTZXF1ZW5jZU51bWJlcixcbiAgICAvLyBUT0RPIGFsc28gcHJvdmlkZSBhIHdheSB0byBzZWUgXCJjb25maXJtYXRpb24gbGV2ZWxcIiBvZiBldmVudCAoZS5nLiBjb25maXJtZWQgYnkgbGVhZGVyL3N5bmMgYmFja2VuZClcbiAgICAvLyBUT0RPOiBhY3R1YWxseSBhZGQgdGhpcyBmaWVsZFxuICAgIC8vIENsaWVudCBvbmx5XG4gICAgLy8gZ2VuZXJhdGlvbjogU2NoZW1hLk51bWJlci5waXBlKFNjaGVtYS5vcHRpb25hbCksXG59KS5hbm5vdGF0aW9ucyh7IHRpdGxlOiAnTGl2ZVN0b3JlLkV2ZW50U2VxdWVuY2VOdW1iZXInIH0pO1xuLyoqXG4gKiBDb21wYXJlIHR3byBldmVudCBzZXF1ZW5jZSBudW1iZXJzIGkuZS4gY2hlY2tzIGlmIHRoZSBmaXJzdCBldmVudCBzZXF1ZW5jZSBudW1iZXIgaXMgbGVzcyB0aGFuIHRoZSBzZWNvbmQuXG4gKi9cbmV4cG9ydCBjb25zdCBjb21wYXJlID0gKGEsIGIpID0+IHtcbiAgICBpZiAoYS5nbG9iYWwgIT09IGIuZ2xvYmFsKSB7XG4gICAgICAgIHJldHVybiBhLmdsb2JhbCAtIGIuZ2xvYmFsO1xuICAgIH1cbiAgICByZXR1cm4gYS5jbGllbnQgLSBiLmNsaWVudDtcbn07XG4vKipcbiAqIENvbnZlcnQgYW4gZXZlbnQgc2VxdWVuY2UgbnVtYmVyIHRvIGEgc3RyaW5nIHJlcHJlc2VudGF0aW9uLlxuICovXG5leHBvcnQgY29uc3QgdG9TdHJpbmcgPSAoc2VxTnVtKSA9PiBzZXFOdW0uY2xpZW50ID09PSAwID8gYGUke3NlcU51bS5nbG9iYWx9YCA6IGBlJHtzZXFOdW0uZ2xvYmFsfSske3NlcU51bS5jbGllbnR9YDtcbi8qKlxuICogQ29udmVydCBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiBhbiBldmVudCBzZXF1ZW5jZSBudW1iZXIgdG8gYW4gZXZlbnQgc2VxdWVuY2UgbnVtYmVyLlxuICovXG5leHBvcnQgY29uc3QgZnJvbVN0cmluZyA9IChzdHIpID0+IHtcbiAgICBjb25zdCBbZ2xvYmFsLCBjbGllbnRdID0gc3RyLnNsaWNlKDEsIC0xKS5zcGxpdCgnLCcpLm1hcChOdW1iZXIpO1xuICAgIGlmIChnbG9iYWwgPT09IHVuZGVmaW5lZCB8fCBjbGllbnQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgZXZlbnQgc2VxdWVuY2UgbnVtYmVyIHN0cmluZycpO1xuICAgIH1cbiAgICByZXR1cm4geyBnbG9iYWwsIGNsaWVudCB9O1xufTtcbmV4cG9ydCBjb25zdCBpc0VxdWFsID0gKGEsIGIpID0+IGEuZ2xvYmFsID09PSBiLmdsb2JhbCAmJiBhLmNsaWVudCA9PT0gYi5jbGllbnQ7XG5leHBvcnQgY29uc3QgUk9PVCA9IHtcbiAgICBnbG9iYWw6IDAsXG4gICAgY2xpZW50OiBjbGllbnREZWZhdWx0LFxufTtcbmV4cG9ydCBjb25zdCBpc0dyZWF0ZXJUaGFuID0gKGEsIGIpID0+IHtcbiAgICByZXR1cm4gYS5nbG9iYWwgPiBiLmdsb2JhbCB8fCAoYS5nbG9iYWwgPT09IGIuZ2xvYmFsICYmIGEuY2xpZW50ID4gYi5jbGllbnQpO1xufTtcbmV4cG9ydCBjb25zdCBpc0dyZWF0ZXJUaGFuT3JFcXVhbCA9IChhLCBiKSA9PiB7XG4gICAgcmV0dXJuIGEuZ2xvYmFsID4gYi5nbG9iYWwgfHwgKGEuZ2xvYmFsID09PSBiLmdsb2JhbCAmJiBhLmNsaWVudCA+PSBiLmNsaWVudCk7XG59O1xuZXhwb3J0IGNvbnN0IG1heCA9IChhLCBiKSA9PiB7XG4gICAgcmV0dXJuIGEuZ2xvYmFsID4gYi5nbG9iYWwgfHwgKGEuZ2xvYmFsID09PSBiLmdsb2JhbCAmJiBhLmNsaWVudCA+IGIuY2xpZW50KSA/IGEgOiBiO1xufTtcbmV4cG9ydCBjb25zdCBkaWZmID0gKGEsIGIpID0+IHtcbiAgICByZXR1cm4ge1xuICAgICAgICBnbG9iYWw6IGEuZ2xvYmFsIC0gYi5nbG9iYWwsXG4gICAgICAgIGNsaWVudDogYS5jbGllbnQgLSBiLmNsaWVudCxcbiAgICB9O1xufTtcbmV4cG9ydCBjb25zdCBtYWtlID0gKHNlcU51bSkgPT4ge1xuICAgIHJldHVybiBTY2hlbWEuaXMoRXZlbnRTZXF1ZW5jZU51bWJlcikoc2VxTnVtKSA/IHNlcU51bSA6IFNjaGVtYS5kZWNvZGVTeW5jKEV2ZW50U2VxdWVuY2VOdW1iZXIpKHNlcU51bSk7XG59O1xuZXhwb3J0IGNvbnN0IG5leHRQYWlyID0gKHNlcU51bSwgaXNMb2NhbCkgPT4ge1xuICAgIGlmIChpc0xvY2FsKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzZXFOdW06IHsgZ2xvYmFsOiBzZXFOdW0uZ2xvYmFsLCBjbGllbnQ6IChzZXFOdW0uY2xpZW50ICsgMSkgfSxcbiAgICAgICAgICAgIHBhcmVudFNlcU51bTogc2VxTnVtLFxuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBzZXFOdW06IHsgZ2xvYmFsOiAoc2VxTnVtLmdsb2JhbCArIDEpLCBjbGllbnQ6IGNsaWVudERlZmF1bHQgfSxcbiAgICAgICAgLy8gTk9URSB3ZSBhbHdheXMgcG9pbnQgdG8gYGNsaWVudDogMGAgZm9yIG5vbi1jbGllbnRPbmx5IGV2ZW50c1xuICAgICAgICBwYXJlbnRTZXFOdW06IHsgZ2xvYmFsOiBzZXFOdW0uZ2xvYmFsLCBjbGllbnQ6IGNsaWVudERlZmF1bHQgfSxcbiAgICB9O1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPUV2ZW50U2VxdWVuY2VOdW1iZXIuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/node_modules/@livestore/common/dist/schema/EventSequenceNumber.js\n");

/***/ }),

/***/ "(rsc)/./src/node_modules/@livestore/common/dist/schema/schema.js":
/*!******************************************************************!*\
  !*** ./src/node_modules/@livestore/common/dist/schema/schema.js ***!
  \******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LiveStoreSchemaSymbol: () => (/* binding */ LiveStoreSchemaSymbol),\n/* harmony export */   getEventDef: () => (/* binding */ getEventDef),\n/* harmony export */   makeSchema: () => (/* binding */ makeSchema)\n/* harmony export */ });\n/* harmony import */ var _livestore_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @livestore/utils */ \"(rsc)/./src/node_modules/@livestore/utils/dist/index.js\");\n/* harmony import */ var _livestore_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @livestore/utils */ \"(rsc)/./src/node_modules/@livestore/utils/dist/misc.js\");\n/* harmony import */ var _EventDef_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./EventDef.js */ \"(rsc)/./src/node_modules/@livestore/common/dist/schema/EventDef.js\");\n/* harmony import */ var _state_sqlite_client_document_def_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./state/sqlite/client-document-def.js */ \"(rsc)/./src/node_modules/@livestore/common/dist/schema/state/sqlite/client-document-def.js\");\n/* harmony import */ var _state_sqlite_system_tables_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./state/sqlite/system-tables.js */ \"(rsc)/./src/node_modules/@livestore/common/dist/schema/state/sqlite/system-tables.js\");\n\n\n\n\nconst LiveStoreSchemaSymbol = Symbol.for('livestore.LiveStoreSchema');\nconst makeSchema = (\n/** Note when using the object-notation for tables/events, the object keys are ignored and not used as table/mutation names */\ninputSchema) => {\n    const state = inputSchema.state;\n    const tables = inputSchema.state.sqlite.tables;\n    for (const tableDef of _state_sqlite_system_tables_js__WEBPACK_IMPORTED_MODULE_0__.stateSystemTables) {\n        tables.set(tableDef.sqliteDef.name, tableDef);\n    }\n    const eventsDefsMap = new Map();\n    if ((0,_livestore_utils__WEBPACK_IMPORTED_MODULE_1__.isReadonlyArray)(inputSchema.events)) {\n        for (const eventDef of inputSchema.events) {\n            eventsDefsMap.set(eventDef.name, eventDef);\n        }\n    }\n    else {\n        for (const eventDef of Object.values(inputSchema.events ?? {})) {\n            if (eventsDefsMap.has(eventDef.name)) {\n                (0,_livestore_utils__WEBPACK_IMPORTED_MODULE_2__.shouldNeverHappen)(`Duplicate event name: ${eventDef.name}. Please use unique names for events.`);\n            }\n            eventsDefsMap.set(eventDef.name, eventDef);\n        }\n    }\n    eventsDefsMap.set(_EventDef_js__WEBPACK_IMPORTED_MODULE_3__.rawSqlEvent.name, _EventDef_js__WEBPACK_IMPORTED_MODULE_3__.rawSqlEvent);\n    for (const tableDef of tables.values()) {\n        if ((0,_state_sqlite_client_document_def_js__WEBPACK_IMPORTED_MODULE_4__.tableIsClientDocumentTable)(tableDef) && eventsDefsMap.has(tableDef.set.name) === false) {\n            eventsDefsMap.set(tableDef.set.name, tableDef.set);\n        }\n    }\n    return {\n        LiveStoreSchemaSymbol,\n        _DbSchemaType: Symbol.for('livestore.DbSchemaType'),\n        _EventDefMapType: Symbol.for('livestore.EventDefMapType'),\n        state,\n        eventsDefsMap,\n        devtools: {\n            alias: inputSchema.devtools?.alias ?? 'default',\n        },\n    };\n};\nconst getEventDef = (schema, eventName) => {\n    const eventDef = schema.eventsDefsMap.get(eventName);\n    if (eventDef === undefined) {\n        return (0,_livestore_utils__WEBPACK_IMPORTED_MODULE_2__.shouldNeverHappen)(`No mutation definition found for \\`${eventName}\\`.`);\n    }\n    const materializer = schema.state.materializers.get(eventName);\n    if (materializer === undefined) {\n        return (0,_livestore_utils__WEBPACK_IMPORTED_MODULE_2__.shouldNeverHappen)(`No materializer found for \\`${eventName}\\`.`);\n    }\n    return { eventDef, materializer };\n};\n//# sourceMappingURL=schema.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbm9kZV9tb2R1bGVzL0BsaXZlc3RvcmUvY29tbW9uL2Rpc3Qvc2NoZW1hL3NjaGVtYS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFzRTtBQUMxQjtBQUN1QztBQUNmO0FBQzdEO0FBQ0E7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQiw2RUFBaUI7QUFDNUM7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBZTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUVBQXFFO0FBQ3JFO0FBQ0EsZ0JBQWdCLG1FQUFpQiwwQkFBMEIsY0FBYztBQUN6RTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixxREFBVyxPQUFPLHFEQUFXO0FBQ25EO0FBQ0EsWUFBWSxnR0FBMEI7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0EsZUFBZSxtRUFBaUIsdUNBQXVDLFVBQVU7QUFDakY7QUFDQTtBQUNBO0FBQ0EsZUFBZSxtRUFBaUIsZ0NBQWdDLFVBQVU7QUFDMUU7QUFDQSxhQUFhO0FBQ2I7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2FuYWNvbmRhLWFzc2VzbWVudC0xLy4vc3JjL25vZGVfbW9kdWxlcy9AbGl2ZXN0b3JlL2NvbW1vbi9kaXN0L3NjaGVtYS9zY2hlbWEuanM/NWQxOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBpc1JlYWRvbmx5QXJyYXksIHNob3VsZE5ldmVySGFwcGVuIH0gZnJvbSAnQGxpdmVzdG9yZS91dGlscyc7XG5pbXBvcnQgeyByYXdTcWxFdmVudCB9IGZyb20gJy4vRXZlbnREZWYuanMnO1xuaW1wb3J0IHsgdGFibGVJc0NsaWVudERvY3VtZW50VGFibGUgfSBmcm9tICcuL3N0YXRlL3NxbGl0ZS9jbGllbnQtZG9jdW1lbnQtZGVmLmpzJztcbmltcG9ydCB7IHN0YXRlU3lzdGVtVGFibGVzIH0gZnJvbSAnLi9zdGF0ZS9zcWxpdGUvc3lzdGVtLXRhYmxlcy5qcyc7XG5leHBvcnQgY29uc3QgTGl2ZVN0b3JlU2NoZW1hU3ltYm9sID0gU3ltYm9sLmZvcignbGl2ZXN0b3JlLkxpdmVTdG9yZVNjaGVtYScpO1xuZXhwb3J0IGNvbnN0IG1ha2VTY2hlbWEgPSAoXG4vKiogTm90ZSB3aGVuIHVzaW5nIHRoZSBvYmplY3Qtbm90YXRpb24gZm9yIHRhYmxlcy9ldmVudHMsIHRoZSBvYmplY3Qga2V5cyBhcmUgaWdub3JlZCBhbmQgbm90IHVzZWQgYXMgdGFibGUvbXV0YXRpb24gbmFtZXMgKi9cbmlucHV0U2NoZW1hKSA9PiB7XG4gICAgY29uc3Qgc3RhdGUgPSBpbnB1dFNjaGVtYS5zdGF0ZTtcbiAgICBjb25zdCB0YWJsZXMgPSBpbnB1dFNjaGVtYS5zdGF0ZS5zcWxpdGUudGFibGVzO1xuICAgIGZvciAoY29uc3QgdGFibGVEZWYgb2Ygc3RhdGVTeXN0ZW1UYWJsZXMpIHtcbiAgICAgICAgdGFibGVzLnNldCh0YWJsZURlZi5zcWxpdGVEZWYubmFtZSwgdGFibGVEZWYpO1xuICAgIH1cbiAgICBjb25zdCBldmVudHNEZWZzTWFwID0gbmV3IE1hcCgpO1xuICAgIGlmIChpc1JlYWRvbmx5QXJyYXkoaW5wdXRTY2hlbWEuZXZlbnRzKSkge1xuICAgICAgICBmb3IgKGNvbnN0IGV2ZW50RGVmIG9mIGlucHV0U2NoZW1hLmV2ZW50cykge1xuICAgICAgICAgICAgZXZlbnRzRGVmc01hcC5zZXQoZXZlbnREZWYubmFtZSwgZXZlbnREZWYpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBmb3IgKGNvbnN0IGV2ZW50RGVmIG9mIE9iamVjdC52YWx1ZXMoaW5wdXRTY2hlbWEuZXZlbnRzID8/IHt9KSkge1xuICAgICAgICAgICAgaWYgKGV2ZW50c0RlZnNNYXAuaGFzKGV2ZW50RGVmLm5hbWUpKSB7XG4gICAgICAgICAgICAgICAgc2hvdWxkTmV2ZXJIYXBwZW4oYER1cGxpY2F0ZSBldmVudCBuYW1lOiAke2V2ZW50RGVmLm5hbWV9LiBQbGVhc2UgdXNlIHVuaXF1ZSBuYW1lcyBmb3IgZXZlbnRzLmApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZXZlbnRzRGVmc01hcC5zZXQoZXZlbnREZWYubmFtZSwgZXZlbnREZWYpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGV2ZW50c0RlZnNNYXAuc2V0KHJhd1NxbEV2ZW50Lm5hbWUsIHJhd1NxbEV2ZW50KTtcbiAgICBmb3IgKGNvbnN0IHRhYmxlRGVmIG9mIHRhYmxlcy52YWx1ZXMoKSkge1xuICAgICAgICBpZiAodGFibGVJc0NsaWVudERvY3VtZW50VGFibGUodGFibGVEZWYpICYmIGV2ZW50c0RlZnNNYXAuaGFzKHRhYmxlRGVmLnNldC5uYW1lKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIGV2ZW50c0RlZnNNYXAuc2V0KHRhYmxlRGVmLnNldC5uYW1lLCB0YWJsZURlZi5zZXQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIExpdmVTdG9yZVNjaGVtYVN5bWJvbCxcbiAgICAgICAgX0RiU2NoZW1hVHlwZTogU3ltYm9sLmZvcignbGl2ZXN0b3JlLkRiU2NoZW1hVHlwZScpLFxuICAgICAgICBfRXZlbnREZWZNYXBUeXBlOiBTeW1ib2wuZm9yKCdsaXZlc3RvcmUuRXZlbnREZWZNYXBUeXBlJyksXG4gICAgICAgIHN0YXRlLFxuICAgICAgICBldmVudHNEZWZzTWFwLFxuICAgICAgICBkZXZ0b29sczoge1xuICAgICAgICAgICAgYWxpYXM6IGlucHV0U2NoZW1hLmRldnRvb2xzPy5hbGlhcyA/PyAnZGVmYXVsdCcsXG4gICAgICAgIH0sXG4gICAgfTtcbn07XG5leHBvcnQgY29uc3QgZ2V0RXZlbnREZWYgPSAoc2NoZW1hLCBldmVudE5hbWUpID0+IHtcbiAgICBjb25zdCBldmVudERlZiA9IHNjaGVtYS5ldmVudHNEZWZzTWFwLmdldChldmVudE5hbWUpO1xuICAgIGlmIChldmVudERlZiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBzaG91bGROZXZlckhhcHBlbihgTm8gbXV0YXRpb24gZGVmaW5pdGlvbiBmb3VuZCBmb3IgXFxgJHtldmVudE5hbWV9XFxgLmApO1xuICAgIH1cbiAgICBjb25zdCBtYXRlcmlhbGl6ZXIgPSBzY2hlbWEuc3RhdGUubWF0ZXJpYWxpemVycy5nZXQoZXZlbnROYW1lKTtcbiAgICBpZiAobWF0ZXJpYWxpemVyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIHNob3VsZE5ldmVySGFwcGVuKGBObyBtYXRlcmlhbGl6ZXIgZm91bmQgZm9yIFxcYCR7ZXZlbnROYW1lfVxcYC5gKTtcbiAgICB9XG4gICAgcmV0dXJuIHsgZXZlbnREZWYsIG1hdGVyaWFsaXplciB9O1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXNjaGVtYS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/node_modules/@livestore/common/dist/schema/schema.js\n");

/***/ }),

/***/ "(rsc)/./src/node_modules/@livestore/common/dist/schema/state/sqlite/client-document-def.js":
/*!********************************************************************************************!*\
  !*** ./src/node_modules/@livestore/common/dist/schema/state/sqlite/client-document-def.js ***!
  \********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ClientDocumentTableDefSymbol: () => (/* binding */ ClientDocumentTableDefSymbol),\n/* harmony export */   clientDocument: () => (/* binding */ clientDocument),\n/* harmony export */   deriveEventAndMaterializer: () => (/* binding */ deriveEventAndMaterializer),\n/* harmony export */   tableIsClientDocumentTable: () => (/* binding */ tableIsClientDocumentTable)\n/* harmony export */ });\n/* harmony import */ var _livestore_utils__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @livestore/utils */ \"(rsc)/./src/node_modules/@livestore/utils/dist/misc.js\");\n/* harmony import */ var _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @livestore/utils/effect */ \"(rsc)/./src/node_modules/effect/dist/esm/Schema.js\");\n/* harmony import */ var _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @livestore/utils/effect */ \"(rsc)/./src/node_modules/effect/dist/esm/SchemaAST.js\");\n/* harmony import */ var _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @livestore/utils/effect */ \"(rsc)/./src/node_modules/@livestore/utils/dist/effect/Schema/index.js\");\n/* harmony import */ var _adapter_types_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../adapter-types.js */ \"(rsc)/./src/node_modules/@livestore/common/dist/adapter-types.js\");\n/* harmony import */ var _util_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../util.js */ \"(rsc)/./src/node_modules/@livestore/common/dist/util.js\");\n/* harmony import */ var _EventDef_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../EventDef.js */ \"(rsc)/./src/node_modules/@livestore/common/dist/schema/EventDef.js\");\n/* harmony import */ var _db_schema_mod_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./db-schema/mod.js */ \"(rsc)/./src/node_modules/@livestore/common/dist/schema/state/sqlite/db-schema/dsl/field-defs.js\");\n/* harmony import */ var _query_builder_mod_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./query-builder/mod.js */ \"(rsc)/./src/node_modules/@livestore/common/dist/schema/state/sqlite/query-builder/api.js\");\n/* harmony import */ var _table_def_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./table-def.js */ \"(rsc)/./src/node_modules/@livestore/common/dist/schema/state/sqlite/table-def.js\");\n\n\n\n\n\n\n\n\n/**\n * Special:\n * - Synced across client sessions (e.g. tabs) but not across different clients\n * - Derived setters\n *   - Emits client-only events\n *   - Has implicit setter-reducers\n * - Similar to `React.useState` (except it's persisted)\n *\n * Careful:\n * - When changing the table definitions in a non-backwards compatible way, the state might be lost without\n *   explicit reducers to handle the old auto-generated events\n */\nconst clientDocument = ({ name, schema: valueSchema, ...inputOptions }) => {\n    const options = {\n        partialSet: inputOptions.partialSet ?? true,\n        default: {\n            id: inputOptions.default.id,\n            value: inputOptions.default.value,\n        },\n    };\n    const columns = {\n        id: _db_schema_mod_js__WEBPACK_IMPORTED_MODULE_0__.text({ primaryKey: true }),\n        value: _db_schema_mod_js__WEBPACK_IMPORTED_MODULE_0__.json({ schema: valueSchema }),\n    };\n    const tableDef = (0,_table_def_js__WEBPACK_IMPORTED_MODULE_1__.table)({ name, columns });\n    // @ts-expect-error TODO properly type this\n    tableDef.options.isClientDocumentTable = true;\n    const { eventDef: derivedSetEventDef, materializer: derivedSetMaterializer } = deriveEventAndMaterializer({\n        name,\n        valueSchema,\n        defaultValue: options.default.value,\n        partialSet: options.partialSet,\n    });\n    const setEventDef = (...args) => {\n        const [value, id = options.default.id] = args;\n        return derivedSetEventDef({ id, value });\n    };\n    Object.defineProperty(setEventDef, 'name', { value: `${name}Set` });\n    Object.defineProperty(setEventDef, 'schema', {\n        value: _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_2__.Struct({\n            id: _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_2__.String,\n            value: options.partialSet ? _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_2__.partial(valueSchema) : valueSchema,\n        }).annotations({ title: `${name}Set:Args` }),\n    });\n    Object.defineProperty(setEventDef, 'options', { value: { derived: true, clientOnly: true, facts: undefined } });\n    const clientDocumentTableDefTrait = {\n        get: makeGetQueryBuilder(() => clientDocumentTableDef),\n        set: setEventDef,\n        Value: 'only-for-type-inference',\n        default: options.default,\n        valueSchema,\n        [ClientDocumentTableDefSymbol]: {\n            derived: {\n                setEventDef: derivedSetEventDef,\n                setMaterializer: derivedSetMaterializer,\n            },\n            options,\n        },\n    };\n    const clientDocumentTableDef = {\n        ...tableDef,\n        ...clientDocumentTableDefTrait,\n    };\n    return clientDocumentTableDef;\n};\nconst mergeDefaultValues = (defaultValues, explicitDefaultValues) => {\n    if (typeof defaultValues !== 'object' ||\n        typeof explicitDefaultValues !== 'object' ||\n        defaultValues === null ||\n        explicitDefaultValues === null) {\n        return explicitDefaultValues;\n    }\n    return Object.keys(defaultValues).reduce((acc, key) => {\n        acc[key] = explicitDefaultValues[key] ?? defaultValues[key];\n        return acc;\n    }, {});\n};\nconst deriveEventAndMaterializer = ({ name, valueSchema, defaultValue, partialSet, }) => {\n    const derivedSetEventDef = (0,_EventDef_js__WEBPACK_IMPORTED_MODULE_3__.defineEvent)({\n        name: `${name}Set`,\n        schema: _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_2__.Struct({\n            id: _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_2__.Union(_livestore_utils_effect__WEBPACK_IMPORTED_MODULE_2__.String, _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_2__.UniqueSymbolFromSelf(_adapter_types_js__WEBPACK_IMPORTED_MODULE_4__.SessionIdSymbol)),\n            value: partialSet ? _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_2__.partial(valueSchema) : valueSchema,\n        }).annotations({ title: `${name}Set:Args` }),\n        clientOnly: true,\n        derived: true,\n    });\n    const derivedSetMaterializer = (0,_EventDef_js__WEBPACK_IMPORTED_MODULE_3__.defineMaterializer)(derivedSetEventDef, ({ id, value }) => {\n        if (id === _adapter_types_js__WEBPACK_IMPORTED_MODULE_4__.SessionIdSymbol) {\n            return (0,_livestore_utils__WEBPACK_IMPORTED_MODULE_5__.shouldNeverHappen)(`SessionIdSymbol needs to be replaced before materializing the set event`);\n        }\n        // Override the full value if it's not an object or no partial set is allowed\n        const schemaProps = _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_6__.getPropertySignatures(valueSchema.ast);\n        if (schemaProps.length === 0 || partialSet === false) {\n            const valueColJsonSchema = _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_2__.parseJson(valueSchema);\n            const encodedInsertValue = _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_7__.encodeSyncDebug(valueColJsonSchema)(value ?? defaultValue);\n            const encodedUpdateValue = _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_7__.encodeSyncDebug(valueColJsonSchema)(value);\n            return {\n                sql: `INSERT INTO '${name}' (id, value) VALUES (?, ?) ON CONFLICT (id) DO UPDATE SET value = ?`,\n                bindValues: [id, encodedInsertValue, encodedUpdateValue],\n                writeTables: new Set([name]),\n            };\n        }\n        else {\n            const valueColJsonSchema = _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_2__.parseJson(_livestore_utils_effect__WEBPACK_IMPORTED_MODULE_2__.partial(valueSchema));\n            const encodedInsertValue = _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_7__.encodeSyncDebug(valueColJsonSchema)(mergeDefaultValues(defaultValue, value));\n            let jsonSetSql = 'value';\n            const setBindValues = [];\n            const keys = Object.keys(value);\n            const partialUpdateSchema = valueSchema.pipe(_livestore_utils_effect__WEBPACK_IMPORTED_MODULE_2__.pick(...keys));\n            const encodedPartialUpdate = _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_7__.encodeSyncDebug(partialUpdateSchema)(value);\n            for (const key in encodedPartialUpdate) {\n                const encodedValueForKey = encodedPartialUpdate[key];\n                // Skipping undefined values\n                if (encodedValueForKey === undefined) {\n                    continue;\n                }\n                jsonSetSql = `json_set(${jsonSetSql}, ?, json(?))`;\n                setBindValues.push(`$.${key}`, JSON.stringify(encodedValueForKey));\n            }\n            const onConflictClause = setBindValues.length > 0\n                ? `ON CONFLICT (id) DO UPDATE SET value = ${jsonSetSql}`\n                : 'ON CONFLICT (id) DO NOTHING';\n            const sqlQuery = `\n      INSERT INTO '${name}' (id, value)\n      VALUES (?, ?)\n      ${onConflictClause}\n    `;\n            return {\n                sql: sqlQuery,\n                bindValues: [id, encodedInsertValue, ...setBindValues],\n                writeTables: new Set([name]),\n            };\n        }\n    });\n    return { eventDef: derivedSetEventDef, materializer: derivedSetMaterializer };\n};\nconst tableIsClientDocumentTable = (tableDef) => tableDef.options.isClientDocumentTable === true;\nconst makeGetQueryBuilder = (getTableDef) => {\n    return ((...args) => {\n        const tableDef = getTableDef();\n        const [id = tableDef[ClientDocumentTableDefSymbol].options.default.id, options = {}] = args;\n        const explicitDefaultValues = options.default ?? tableDef[ClientDocumentTableDefSymbol].options.default.value;\n        const ast = {\n            _tag: 'RowQuery',\n            tableDef,\n            id,\n            explicitDefaultValues,\n        };\n        const query = (0,_util_js__WEBPACK_IMPORTED_MODULE_8__.sql) `SELECT * FROM '${tableDef.sqliteDef.name}' WHERE id = ?`;\n        return {\n            [_query_builder_mod_js__WEBPACK_IMPORTED_MODULE_9__.QueryBuilderTypeId]: _query_builder_mod_js__WEBPACK_IMPORTED_MODULE_9__.QueryBuilderTypeId,\n            [_query_builder_mod_js__WEBPACK_IMPORTED_MODULE_9__.QueryBuilderAstSymbol]: ast,\n            ResultType: 'only-for-type-inference',\n            asSql: () => ({ query, bindValues: [id] }),\n            toString: () => query.toString(),\n            ...{}, // Needed for type cast\n        };\n    });\n};\nconst ClientDocumentTableDefSymbol = Symbol('ClientDocumentTableDef');\n//# sourceMappingURL=client-document-def.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbm9kZV9tb2R1bGVzL0BsaXZlc3RvcmUvY29tbW9uL2Rpc3Qvc2NoZW1hL3N0YXRlL3NxbGl0ZS9jbGllbnQtZG9jdW1lbnQtZGVmLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXFEO0FBQ087QUFDQTtBQUNyQjtBQUM2QjtBQUNyQjtBQUNvQztBQUM1QztBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTywwQkFBMEIsNENBQTRDO0FBQzdFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFlBQVksbURBQWMsR0FBRyxrQkFBa0I7QUFDL0MsZUFBZSxtREFBYyxHQUFHLHFCQUFxQjtBQUNyRDtBQUNBLHFCQUFxQixvREFBSyxHQUFHLGVBQWU7QUFDNUM7QUFDQTtBQUNBLFlBQVkscUVBQXFFO0FBQ2pGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxvQ0FBb0MsV0FBVztBQUMvQztBQUNBLGlEQUFpRCxVQUFVLEtBQUssTUFBTTtBQUN0RTtBQUNBLGVBQWUsMkRBQWE7QUFDNUIsZ0JBQWdCLDJEQUFhO0FBQzdCLHdDQUF3Qyw0REFBYztBQUN0RCxTQUFTLGdCQUFnQixVQUFVLEtBQUssV0FBVztBQUNuRCxLQUFLO0FBQ0wsb0RBQW9ELFNBQVMscURBQXFEO0FBQ2xIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLLElBQUk7QUFDVDtBQUNPLHNDQUFzQyw4Q0FBOEM7QUFDM0YsK0JBQStCLHlEQUFXO0FBQzFDLGlCQUFpQixLQUFLO0FBQ3RCLGdCQUFnQiwyREFBYTtBQUM3QixnQkFBZ0IsMERBQVksQ0FBQywyREFBYSxFQUFFLHlFQUEyQixDQUFDLDhEQUFlO0FBQ3ZGLGdDQUFnQyw0REFBYztBQUM5QyxTQUFTLGdCQUFnQixVQUFVLEtBQUssV0FBVztBQUNuRDtBQUNBO0FBQ0EsS0FBSztBQUNMLG1DQUFtQyxnRUFBa0Isd0JBQXdCLFdBQVc7QUFDeEYsbUJBQW1CLDhEQUFlO0FBQ2xDLG1CQUFtQixtRUFBaUI7QUFDcEM7QUFDQTtBQUNBLDRCQUE0QiwwRUFBK0I7QUFDM0Q7QUFDQSx1Q0FBdUMsOERBQWdCO0FBQ3ZELHVDQUF1QyxvRUFBc0I7QUFDN0QsdUNBQXVDLG9FQUFzQjtBQUM3RDtBQUNBLHFDQUFxQyxLQUFLO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMsOERBQWdCLENBQUMsNERBQWM7QUFDdEUsdUNBQXVDLG9FQUFzQjtBQUM3RDtBQUNBO0FBQ0E7QUFDQSx5REFBeUQseURBQVc7QUFDcEUseUNBQXlDLG9FQUFzQjtBQUMvRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUMsV0FBVztBQUNwRCx3Q0FBd0MsSUFBSTtBQUM1QztBQUNBO0FBQ0EsNERBQTRELFdBQVc7QUFDdkU7QUFDQTtBQUNBLHFCQUFxQixLQUFLO0FBQzFCO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLGFBQWE7QUFDYjtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsMkZBQTJGO0FBQzNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLDZDQUFHLG1CQUFtQix3QkFBd0I7QUFDcEU7QUFDQSxhQUFhLHFFQUFrQixHQUFHLHFFQUFrQjtBQUNwRCxhQUFhLHdFQUFxQjtBQUNsQztBQUNBLDRCQUE0Qix5QkFBeUI7QUFDckQ7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxLQUFLO0FBQ0w7QUFDTztBQUNQIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYW5hY29uZGEtYXNzZXNtZW50LTEvLi9zcmMvbm9kZV9tb2R1bGVzL0BsaXZlc3RvcmUvY29tbW9uL2Rpc3Qvc2NoZW1hL3N0YXRlL3NxbGl0ZS9jbGllbnQtZG9jdW1lbnQtZGVmLmpzPzNkZTQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgc2hvdWxkTmV2ZXJIYXBwZW4gfSBmcm9tICdAbGl2ZXN0b3JlL3V0aWxzJztcbmltcG9ydCB7IFNjaGVtYSwgU2NoZW1hQVNUIH0gZnJvbSAnQGxpdmVzdG9yZS91dGlscy9lZmZlY3QnO1xuaW1wb3J0IHsgU2Vzc2lvbklkU3ltYm9sIH0gZnJvbSAnLi4vLi4vLi4vYWRhcHRlci10eXBlcy5qcyc7XG5pbXBvcnQgeyBzcWwgfSBmcm9tICcuLi8uLi8uLi91dGlsLmpzJztcbmltcG9ydCB7IGRlZmluZUV2ZW50LCBkZWZpbmVNYXRlcmlhbGl6ZXIgfSBmcm9tICcuLi8uLi9FdmVudERlZi5qcyc7XG5pbXBvcnQgeyBTcWxpdGVEc2wgfSBmcm9tICcuL2RiLXNjaGVtYS9tb2QuanMnO1xuaW1wb3J0IHsgUXVlcnlCdWlsZGVyQXN0U3ltYm9sLCBRdWVyeUJ1aWxkZXJUeXBlSWQgfSBmcm9tICcuL3F1ZXJ5LWJ1aWxkZXIvbW9kLmpzJztcbmltcG9ydCB7IHRhYmxlIH0gZnJvbSAnLi90YWJsZS1kZWYuanMnO1xuLyoqXG4gKiBTcGVjaWFsOlxuICogLSBTeW5jZWQgYWNyb3NzIGNsaWVudCBzZXNzaW9ucyAoZS5nLiB0YWJzKSBidXQgbm90IGFjcm9zcyBkaWZmZXJlbnQgY2xpZW50c1xuICogLSBEZXJpdmVkIHNldHRlcnNcbiAqICAgLSBFbWl0cyBjbGllbnQtb25seSBldmVudHNcbiAqICAgLSBIYXMgaW1wbGljaXQgc2V0dGVyLXJlZHVjZXJzXG4gKiAtIFNpbWlsYXIgdG8gYFJlYWN0LnVzZVN0YXRlYCAoZXhjZXB0IGl0J3MgcGVyc2lzdGVkKVxuICpcbiAqIENhcmVmdWw6XG4gKiAtIFdoZW4gY2hhbmdpbmcgdGhlIHRhYmxlIGRlZmluaXRpb25zIGluIGEgbm9uLWJhY2t3YXJkcyBjb21wYXRpYmxlIHdheSwgdGhlIHN0YXRlIG1pZ2h0IGJlIGxvc3Qgd2l0aG91dFxuICogICBleHBsaWNpdCByZWR1Y2VycyB0byBoYW5kbGUgdGhlIG9sZCBhdXRvLWdlbmVyYXRlZCBldmVudHNcbiAqL1xuZXhwb3J0IGNvbnN0IGNsaWVudERvY3VtZW50ID0gKHsgbmFtZSwgc2NoZW1hOiB2YWx1ZVNjaGVtYSwgLi4uaW5wdXRPcHRpb25zIH0pID0+IHtcbiAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgICBwYXJ0aWFsU2V0OiBpbnB1dE9wdGlvbnMucGFydGlhbFNldCA/PyB0cnVlLFxuICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICBpZDogaW5wdXRPcHRpb25zLmRlZmF1bHQuaWQsXG4gICAgICAgICAgICB2YWx1ZTogaW5wdXRPcHRpb25zLmRlZmF1bHQudmFsdWUsXG4gICAgICAgIH0sXG4gICAgfTtcbiAgICBjb25zdCBjb2x1bW5zID0ge1xuICAgICAgICBpZDogU3FsaXRlRHNsLnRleHQoeyBwcmltYXJ5S2V5OiB0cnVlIH0pLFxuICAgICAgICB2YWx1ZTogU3FsaXRlRHNsLmpzb24oeyBzY2hlbWE6IHZhbHVlU2NoZW1hIH0pLFxuICAgIH07XG4gICAgY29uc3QgdGFibGVEZWYgPSB0YWJsZSh7IG5hbWUsIGNvbHVtbnMgfSk7XG4gICAgLy8gQHRzLWV4cGVjdC1lcnJvciBUT0RPIHByb3Blcmx5IHR5cGUgdGhpc1xuICAgIHRhYmxlRGVmLm9wdGlvbnMuaXNDbGllbnREb2N1bWVudFRhYmxlID0gdHJ1ZTtcbiAgICBjb25zdCB7IGV2ZW50RGVmOiBkZXJpdmVkU2V0RXZlbnREZWYsIG1hdGVyaWFsaXplcjogZGVyaXZlZFNldE1hdGVyaWFsaXplciB9ID0gZGVyaXZlRXZlbnRBbmRNYXRlcmlhbGl6ZXIoe1xuICAgICAgICBuYW1lLFxuICAgICAgICB2YWx1ZVNjaGVtYSxcbiAgICAgICAgZGVmYXVsdFZhbHVlOiBvcHRpb25zLmRlZmF1bHQudmFsdWUsXG4gICAgICAgIHBhcnRpYWxTZXQ6IG9wdGlvbnMucGFydGlhbFNldCxcbiAgICB9KTtcbiAgICBjb25zdCBzZXRFdmVudERlZiA9ICguLi5hcmdzKSA9PiB7XG4gICAgICAgIGNvbnN0IFt2YWx1ZSwgaWQgPSBvcHRpb25zLmRlZmF1bHQuaWRdID0gYXJncztcbiAgICAgICAgcmV0dXJuIGRlcml2ZWRTZXRFdmVudERlZih7IGlkLCB2YWx1ZSB9KTtcbiAgICB9O1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzZXRFdmVudERlZiwgJ25hbWUnLCB7IHZhbHVlOiBgJHtuYW1lfVNldGAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHNldEV2ZW50RGVmLCAnc2NoZW1hJywge1xuICAgICAgICB2YWx1ZTogU2NoZW1hLlN0cnVjdCh7XG4gICAgICAgICAgICBpZDogU2NoZW1hLlN0cmluZyxcbiAgICAgICAgICAgIHZhbHVlOiBvcHRpb25zLnBhcnRpYWxTZXQgPyBTY2hlbWEucGFydGlhbCh2YWx1ZVNjaGVtYSkgOiB2YWx1ZVNjaGVtYSxcbiAgICAgICAgfSkuYW5ub3RhdGlvbnMoeyB0aXRsZTogYCR7bmFtZX1TZXQ6QXJnc2AgfSksXG4gICAgfSk7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHNldEV2ZW50RGVmLCAnb3B0aW9ucycsIHsgdmFsdWU6IHsgZGVyaXZlZDogdHJ1ZSwgY2xpZW50T25seTogdHJ1ZSwgZmFjdHM6IHVuZGVmaW5lZCB9IH0pO1xuICAgIGNvbnN0IGNsaWVudERvY3VtZW50VGFibGVEZWZUcmFpdCA9IHtcbiAgICAgICAgZ2V0OiBtYWtlR2V0UXVlcnlCdWlsZGVyKCgpID0+IGNsaWVudERvY3VtZW50VGFibGVEZWYpLFxuICAgICAgICBzZXQ6IHNldEV2ZW50RGVmLFxuICAgICAgICBWYWx1ZTogJ29ubHktZm9yLXR5cGUtaW5mZXJlbmNlJyxcbiAgICAgICAgZGVmYXVsdDogb3B0aW9ucy5kZWZhdWx0LFxuICAgICAgICB2YWx1ZVNjaGVtYSxcbiAgICAgICAgW0NsaWVudERvY3VtZW50VGFibGVEZWZTeW1ib2xdOiB7XG4gICAgICAgICAgICBkZXJpdmVkOiB7XG4gICAgICAgICAgICAgICAgc2V0RXZlbnREZWY6IGRlcml2ZWRTZXRFdmVudERlZixcbiAgICAgICAgICAgICAgICBzZXRNYXRlcmlhbGl6ZXI6IGRlcml2ZWRTZXRNYXRlcmlhbGl6ZXIsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb3B0aW9ucyxcbiAgICAgICAgfSxcbiAgICB9O1xuICAgIGNvbnN0IGNsaWVudERvY3VtZW50VGFibGVEZWYgPSB7XG4gICAgICAgIC4uLnRhYmxlRGVmLFxuICAgICAgICAuLi5jbGllbnREb2N1bWVudFRhYmxlRGVmVHJhaXQsXG4gICAgfTtcbiAgICByZXR1cm4gY2xpZW50RG9jdW1lbnRUYWJsZURlZjtcbn07XG5jb25zdCBtZXJnZURlZmF1bHRWYWx1ZXMgPSAoZGVmYXVsdFZhbHVlcywgZXhwbGljaXREZWZhdWx0VmFsdWVzKSA9PiB7XG4gICAgaWYgKHR5cGVvZiBkZWZhdWx0VmFsdWVzICE9PSAnb2JqZWN0JyB8fFxuICAgICAgICB0eXBlb2YgZXhwbGljaXREZWZhdWx0VmFsdWVzICE9PSAnb2JqZWN0JyB8fFxuICAgICAgICBkZWZhdWx0VmFsdWVzID09PSBudWxsIHx8XG4gICAgICAgIGV4cGxpY2l0RGVmYXVsdFZhbHVlcyA9PT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gZXhwbGljaXREZWZhdWx0VmFsdWVzO1xuICAgIH1cbiAgICByZXR1cm4gT2JqZWN0LmtleXMoZGVmYXVsdFZhbHVlcykucmVkdWNlKChhY2MsIGtleSkgPT4ge1xuICAgICAgICBhY2Nba2V5XSA9IGV4cGxpY2l0RGVmYXVsdFZhbHVlc1trZXldID8/IGRlZmF1bHRWYWx1ZXNba2V5XTtcbiAgICAgICAgcmV0dXJuIGFjYztcbiAgICB9LCB7fSk7XG59O1xuZXhwb3J0IGNvbnN0IGRlcml2ZUV2ZW50QW5kTWF0ZXJpYWxpemVyID0gKHsgbmFtZSwgdmFsdWVTY2hlbWEsIGRlZmF1bHRWYWx1ZSwgcGFydGlhbFNldCwgfSkgPT4ge1xuICAgIGNvbnN0IGRlcml2ZWRTZXRFdmVudERlZiA9IGRlZmluZUV2ZW50KHtcbiAgICAgICAgbmFtZTogYCR7bmFtZX1TZXRgLFxuICAgICAgICBzY2hlbWE6IFNjaGVtYS5TdHJ1Y3Qoe1xuICAgICAgICAgICAgaWQ6IFNjaGVtYS5VbmlvbihTY2hlbWEuU3RyaW5nLCBTY2hlbWEuVW5pcXVlU3ltYm9sRnJvbVNlbGYoU2Vzc2lvbklkU3ltYm9sKSksXG4gICAgICAgICAgICB2YWx1ZTogcGFydGlhbFNldCA/IFNjaGVtYS5wYXJ0aWFsKHZhbHVlU2NoZW1hKSA6IHZhbHVlU2NoZW1hLFxuICAgICAgICB9KS5hbm5vdGF0aW9ucyh7IHRpdGxlOiBgJHtuYW1lfVNldDpBcmdzYCB9KSxcbiAgICAgICAgY2xpZW50T25seTogdHJ1ZSxcbiAgICAgICAgZGVyaXZlZDogdHJ1ZSxcbiAgICB9KTtcbiAgICBjb25zdCBkZXJpdmVkU2V0TWF0ZXJpYWxpemVyID0gZGVmaW5lTWF0ZXJpYWxpemVyKGRlcml2ZWRTZXRFdmVudERlZiwgKHsgaWQsIHZhbHVlIH0pID0+IHtcbiAgICAgICAgaWYgKGlkID09PSBTZXNzaW9uSWRTeW1ib2wpIHtcbiAgICAgICAgICAgIHJldHVybiBzaG91bGROZXZlckhhcHBlbihgU2Vzc2lvbklkU3ltYm9sIG5lZWRzIHRvIGJlIHJlcGxhY2VkIGJlZm9yZSBtYXRlcmlhbGl6aW5nIHRoZSBzZXQgZXZlbnRgKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBPdmVycmlkZSB0aGUgZnVsbCB2YWx1ZSBpZiBpdCdzIG5vdCBhbiBvYmplY3Qgb3Igbm8gcGFydGlhbCBzZXQgaXMgYWxsb3dlZFxuICAgICAgICBjb25zdCBzY2hlbWFQcm9wcyA9IFNjaGVtYUFTVC5nZXRQcm9wZXJ0eVNpZ25hdHVyZXModmFsdWVTY2hlbWEuYXN0KTtcbiAgICAgICAgaWYgKHNjaGVtYVByb3BzLmxlbmd0aCA9PT0gMCB8fCBwYXJ0aWFsU2V0ID09PSBmYWxzZSkge1xuICAgICAgICAgICAgY29uc3QgdmFsdWVDb2xKc29uU2NoZW1hID0gU2NoZW1hLnBhcnNlSnNvbih2YWx1ZVNjaGVtYSk7XG4gICAgICAgICAgICBjb25zdCBlbmNvZGVkSW5zZXJ0VmFsdWUgPSBTY2hlbWEuZW5jb2RlU3luY0RlYnVnKHZhbHVlQ29sSnNvblNjaGVtYSkodmFsdWUgPz8gZGVmYXVsdFZhbHVlKTtcbiAgICAgICAgICAgIGNvbnN0IGVuY29kZWRVcGRhdGVWYWx1ZSA9IFNjaGVtYS5lbmNvZGVTeW5jRGVidWcodmFsdWVDb2xKc29uU2NoZW1hKSh2YWx1ZSk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHNxbDogYElOU0VSVCBJTlRPICcke25hbWV9JyAoaWQsIHZhbHVlKSBWQUxVRVMgKD8sID8pIE9OIENPTkZMSUNUIChpZCkgRE8gVVBEQVRFIFNFVCB2YWx1ZSA9ID9gLFxuICAgICAgICAgICAgICAgIGJpbmRWYWx1ZXM6IFtpZCwgZW5jb2RlZEluc2VydFZhbHVlLCBlbmNvZGVkVXBkYXRlVmFsdWVdLFxuICAgICAgICAgICAgICAgIHdyaXRlVGFibGVzOiBuZXcgU2V0KFtuYW1lXSksXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgdmFsdWVDb2xKc29uU2NoZW1hID0gU2NoZW1hLnBhcnNlSnNvbihTY2hlbWEucGFydGlhbCh2YWx1ZVNjaGVtYSkpO1xuICAgICAgICAgICAgY29uc3QgZW5jb2RlZEluc2VydFZhbHVlID0gU2NoZW1hLmVuY29kZVN5bmNEZWJ1Zyh2YWx1ZUNvbEpzb25TY2hlbWEpKG1lcmdlRGVmYXVsdFZhbHVlcyhkZWZhdWx0VmFsdWUsIHZhbHVlKSk7XG4gICAgICAgICAgICBsZXQganNvblNldFNxbCA9ICd2YWx1ZSc7XG4gICAgICAgICAgICBjb25zdCBzZXRCaW5kVmFsdWVzID0gW107XG4gICAgICAgICAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXModmFsdWUpO1xuICAgICAgICAgICAgY29uc3QgcGFydGlhbFVwZGF0ZVNjaGVtYSA9IHZhbHVlU2NoZW1hLnBpcGUoU2NoZW1hLnBpY2soLi4ua2V5cykpO1xuICAgICAgICAgICAgY29uc3QgZW5jb2RlZFBhcnRpYWxVcGRhdGUgPSBTY2hlbWEuZW5jb2RlU3luY0RlYnVnKHBhcnRpYWxVcGRhdGVTY2hlbWEpKHZhbHVlKTtcbiAgICAgICAgICAgIGZvciAoY29uc3Qga2V5IGluIGVuY29kZWRQYXJ0aWFsVXBkYXRlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZW5jb2RlZFZhbHVlRm9yS2V5ID0gZW5jb2RlZFBhcnRpYWxVcGRhdGVba2V5XTtcbiAgICAgICAgICAgICAgICAvLyBTa2lwcGluZyB1bmRlZmluZWQgdmFsdWVzXG4gICAgICAgICAgICAgICAgaWYgKGVuY29kZWRWYWx1ZUZvcktleSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBqc29uU2V0U3FsID0gYGpzb25fc2V0KCR7anNvblNldFNxbH0sID8sIGpzb24oPykpYDtcbiAgICAgICAgICAgICAgICBzZXRCaW5kVmFsdWVzLnB1c2goYCQuJHtrZXl9YCwgSlNPTi5zdHJpbmdpZnkoZW5jb2RlZFZhbHVlRm9yS2V5KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBvbkNvbmZsaWN0Q2xhdXNlID0gc2V0QmluZFZhbHVlcy5sZW5ndGggPiAwXG4gICAgICAgICAgICAgICAgPyBgT04gQ09ORkxJQ1QgKGlkKSBETyBVUERBVEUgU0VUIHZhbHVlID0gJHtqc29uU2V0U3FsfWBcbiAgICAgICAgICAgICAgICA6ICdPTiBDT05GTElDVCAoaWQpIERPIE5PVEhJTkcnO1xuICAgICAgICAgICAgY29uc3Qgc3FsUXVlcnkgPSBgXG4gICAgICBJTlNFUlQgSU5UTyAnJHtuYW1lfScgKGlkLCB2YWx1ZSlcbiAgICAgIFZBTFVFUyAoPywgPylcbiAgICAgICR7b25Db25mbGljdENsYXVzZX1cbiAgICBgO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBzcWw6IHNxbFF1ZXJ5LFxuICAgICAgICAgICAgICAgIGJpbmRWYWx1ZXM6IFtpZCwgZW5jb2RlZEluc2VydFZhbHVlLCAuLi5zZXRCaW5kVmFsdWVzXSxcbiAgICAgICAgICAgICAgICB3cml0ZVRhYmxlczogbmV3IFNldChbbmFtZV0pLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiB7IGV2ZW50RGVmOiBkZXJpdmVkU2V0RXZlbnREZWYsIG1hdGVyaWFsaXplcjogZGVyaXZlZFNldE1hdGVyaWFsaXplciB9O1xufTtcbmV4cG9ydCBjb25zdCB0YWJsZUlzQ2xpZW50RG9jdW1lbnRUYWJsZSA9ICh0YWJsZURlZikgPT4gdGFibGVEZWYub3B0aW9ucy5pc0NsaWVudERvY3VtZW50VGFibGUgPT09IHRydWU7XG5jb25zdCBtYWtlR2V0UXVlcnlCdWlsZGVyID0gKGdldFRhYmxlRGVmKSA9PiB7XG4gICAgcmV0dXJuICgoLi4uYXJncykgPT4ge1xuICAgICAgICBjb25zdCB0YWJsZURlZiA9IGdldFRhYmxlRGVmKCk7XG4gICAgICAgIGNvbnN0IFtpZCA9IHRhYmxlRGVmW0NsaWVudERvY3VtZW50VGFibGVEZWZTeW1ib2xdLm9wdGlvbnMuZGVmYXVsdC5pZCwgb3B0aW9ucyA9IHt9XSA9IGFyZ3M7XG4gICAgICAgIGNvbnN0IGV4cGxpY2l0RGVmYXVsdFZhbHVlcyA9IG9wdGlvbnMuZGVmYXVsdCA/PyB0YWJsZURlZltDbGllbnREb2N1bWVudFRhYmxlRGVmU3ltYm9sXS5vcHRpb25zLmRlZmF1bHQudmFsdWU7XG4gICAgICAgIGNvbnN0IGFzdCA9IHtcbiAgICAgICAgICAgIF90YWc6ICdSb3dRdWVyeScsXG4gICAgICAgICAgICB0YWJsZURlZixcbiAgICAgICAgICAgIGlkLFxuICAgICAgICAgICAgZXhwbGljaXREZWZhdWx0VmFsdWVzLFxuICAgICAgICB9O1xuICAgICAgICBjb25zdCBxdWVyeSA9IHNxbCBgU0VMRUNUICogRlJPTSAnJHt0YWJsZURlZi5zcWxpdGVEZWYubmFtZX0nIFdIRVJFIGlkID0gP2A7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBbUXVlcnlCdWlsZGVyVHlwZUlkXTogUXVlcnlCdWlsZGVyVHlwZUlkLFxuICAgICAgICAgICAgW1F1ZXJ5QnVpbGRlckFzdFN5bWJvbF06IGFzdCxcbiAgICAgICAgICAgIFJlc3VsdFR5cGU6ICdvbmx5LWZvci10eXBlLWluZmVyZW5jZScsXG4gICAgICAgICAgICBhc1NxbDogKCkgPT4gKHsgcXVlcnksIGJpbmRWYWx1ZXM6IFtpZF0gfSksXG4gICAgICAgICAgICB0b1N0cmluZzogKCkgPT4gcXVlcnkudG9TdHJpbmcoKSxcbiAgICAgICAgICAgIC4uLnt9LCAvLyBOZWVkZWQgZm9yIHR5cGUgY2FzdFxuICAgICAgICB9O1xuICAgIH0pO1xufTtcbmV4cG9ydCBjb25zdCBDbGllbnREb2N1bWVudFRhYmxlRGVmU3ltYm9sID0gU3ltYm9sKCdDbGllbnREb2N1bWVudFRhYmxlRGVmJyk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jbGllbnQtZG9jdW1lbnQtZGVmLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/node_modules/@livestore/common/dist/schema/state/sqlite/client-document-def.js\n");

/***/ }),

/***/ "(rsc)/./src/node_modules/@livestore/common/dist/schema/state/sqlite/db-schema/dsl/field-defs.js":
/*!*************************************************************************************************!*\
  !*** ./src/node_modules/@livestore/common/dist/schema/state/sqlite/db-schema/dsl/field-defs.js ***!
  \*************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   NoDefault: () => (/* binding */ NoDefault),\n/* harmony export */   blob: () => (/* binding */ blob),\n/* harmony export */   boolean: () => (/* binding */ boolean),\n/* harmony export */   column: () => (/* binding */ column),\n/* harmony export */   datetime: () => (/* binding */ datetime),\n/* harmony export */   datetimeInteger: () => (/* binding */ datetimeInteger),\n/* harmony export */   defaultSchemaForColumnType: () => (/* binding */ defaultSchemaForColumnType),\n/* harmony export */   integer: () => (/* binding */ integer),\n/* harmony export */   isColumnDefinition: () => (/* binding */ isColumnDefinition),\n/* harmony export */   isSqlDefaultValue: () => (/* binding */ isSqlDefaultValue),\n/* harmony export */   json: () => (/* binding */ json),\n/* harmony export */   real: () => (/* binding */ real),\n/* harmony export */   text: () => (/* binding */ text)\n/* harmony export */ });\n/* harmony import */ var _livestore_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @livestore/utils */ \"(rsc)/./src/node_modules/@livestore/utils/dist/index.js\");\n/* harmony import */ var _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @livestore/utils/effect */ \"(rsc)/./src/node_modules/effect/dist/esm/Schema.js\");\n/* harmony import */ var _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @livestore/utils/effect */ \"(rsc)/./src/node_modules/effect/dist/esm/Option.js\");\n\n\nconst isColumnDefinition = (value) => {\n    const validColumnTypes = ['text', 'integer', 'real', 'blob'];\n    return (typeof value === 'object' &&\n        value !== null &&\n        'columnType' in value &&\n        validColumnTypes.includes(value['columnType']));\n};\nconst NoDefault = Symbol.for('NoDefault');\nconst isSqlDefaultValue = (value) => {\n    return typeof value === 'object' && value !== null && 'sql' in value && typeof value['sql'] === 'string';\n};\nconst makeColDef = (columnType) => (def) => {\n    const nullable = def?.nullable ?? false;\n    const schemaWithoutNull = def?.schema ?? defaultSchemaForColumnType(columnType);\n    const schema = nullable === true ? _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.NullOr(schemaWithoutNull) : schemaWithoutNull;\n    const default_ = def?.default === undefined || def.default === NoDefault ? _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_1__.none() : _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_1__.some(def.default);\n    return {\n        columnType,\n        schema,\n        default: default_,\n        nullable,\n        primaryKey: def?.primaryKey ?? false,\n    };\n};\nconst column = (columnType) => makeColDef(columnType);\n/// Column definitions\nconst text = makeColDef('text');\nconst integer = makeColDef('integer');\nconst real = makeColDef('real');\nconst blob = makeColDef('blob');\nconst makeSpecializedColDef = (columnType, opts) => (def) => {\n    const nullable = def?.nullable ?? false;\n    const schemaWithoutNull = opts._tag === 'baseSchemaFn' ? opts.baseSchemaFn(def?.schema) : opts.baseSchema;\n    const schema = nullable === true ? _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.NullOr(schemaWithoutNull) : schemaWithoutNull;\n    const default_ = def?.default === undefined || def.default === NoDefault ? _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_1__.none() : _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_1__.some(def.default);\n    return {\n        columnType,\n        schema,\n        default: default_,\n        nullable,\n        primaryKey: def?.primaryKey ?? false,\n    };\n};\nconst json = makeSpecializedColDef('text', {\n    _tag: 'baseSchemaFn',\n    baseSchemaFn: (customSchema) => _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.parseJson(customSchema ?? _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.Any),\n});\nconst datetime = makeSpecializedColDef('text', {\n    _tag: 'baseSchema',\n    baseSchema: _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.Date,\n});\nconst datetimeInteger = makeSpecializedColDef('integer', {\n    _tag: 'baseSchema',\n    baseSchema: _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.transform(_livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.Number, _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.DateFromSelf, {\n        decode: (ms) => new Date(ms),\n        encode: (date) => date.getTime(),\n    }),\n});\nconst boolean = makeSpecializedColDef('integer', {\n    _tag: 'baseSchema',\n    baseSchema: _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.transform(_livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.Number, _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.Boolean, {\n        decode: (_) => _ === 1,\n        encode: (_) => (_ ? 1 : 0),\n    }),\n});\nconst defaultSchemaForColumnType = (columnType) => {\n    switch (columnType) {\n        case 'text': {\n            return _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.String;\n        }\n        case 'integer': {\n            return _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.Number;\n        }\n        case 'real': {\n            return _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.Number;\n        }\n        case 'blob': {\n            return _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.Uint8ArrayFromSelf;\n        }\n        default: {\n            return (0,_livestore_utils__WEBPACK_IMPORTED_MODULE_2__.casesHandled)(columnType);\n        }\n    }\n};\n//# sourceMappingURL=field-defs.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbm9kZV9tb2R1bGVzL0BsaXZlc3RvcmUvY29tbW9uL2Rpc3Qvc2NoZW1hL3N0YXRlL3NxbGl0ZS9kYi1zY2hlbWEvZHNsL2ZpZWxkLWRlZnMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFnRDtBQUNTO0FBQ2xEO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDQTtBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1Q0FBdUMsMkRBQWE7QUFDcEQsK0VBQStFLHlEQUFXLEtBQUsseURBQVc7QUFDMUc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDTztBQUNBO0FBQ0E7QUFDQTtBQUNQO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QywyREFBYTtBQUNwRCwrRUFBK0UseURBQVcsS0FBSyx5REFBVztBQUMxRztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBLG9DQUFvQyw4REFBZ0IsaUJBQWlCLHdEQUFVO0FBQy9FLENBQUM7QUFDTTtBQUNQO0FBQ0EsZ0JBQWdCLHlEQUFXO0FBQzNCLENBQUM7QUFDTTtBQUNQO0FBQ0EsZ0JBQWdCLDhEQUFnQixDQUFDLDJEQUFhLEVBQUUsaUVBQW1CO0FBQ25FO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsQ0FBQztBQUNNO0FBQ1A7QUFDQSxnQkFBZ0IsOERBQWdCLENBQUMsMkRBQWEsRUFBRSw0REFBYztBQUM5RDtBQUNBO0FBQ0EsS0FBSztBQUNMLENBQUM7QUFDTTtBQUNQO0FBQ0E7QUFDQSxtQkFBbUIsMkRBQWE7QUFDaEM7QUFDQTtBQUNBLG1CQUFtQiwyREFBYTtBQUNoQztBQUNBO0FBQ0EsbUJBQW1CLDJEQUFhO0FBQ2hDO0FBQ0E7QUFDQSxtQkFBbUIsdUVBQXlCO0FBQzVDO0FBQ0E7QUFDQSxtQkFBbUIsOERBQVk7QUFDL0I7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hbmFjb25kYS1hc3Nlc21lbnQtMS8uL3NyYy9ub2RlX21vZHVsZXMvQGxpdmVzdG9yZS9jb21tb24vZGlzdC9zY2hlbWEvc3RhdGUvc3FsaXRlL2RiLXNjaGVtYS9kc2wvZmllbGQtZGVmcy5qcz9lMTM4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNhc2VzSGFuZGxlZCB9IGZyb20gJ0BsaXZlc3RvcmUvdXRpbHMnO1xuaW1wb3J0IHsgT3B0aW9uLCBTY2hlbWEgfSBmcm9tICdAbGl2ZXN0b3JlL3V0aWxzL2VmZmVjdCc7XG5leHBvcnQgY29uc3QgaXNDb2x1bW5EZWZpbml0aW9uID0gKHZhbHVlKSA9PiB7XG4gICAgY29uc3QgdmFsaWRDb2x1bW5UeXBlcyA9IFsndGV4dCcsICdpbnRlZ2VyJywgJ3JlYWwnLCAnYmxvYiddO1xuICAgIHJldHVybiAodHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJlxuICAgICAgICB2YWx1ZSAhPT0gbnVsbCAmJlxuICAgICAgICAnY29sdW1uVHlwZScgaW4gdmFsdWUgJiZcbiAgICAgICAgdmFsaWRDb2x1bW5UeXBlcy5pbmNsdWRlcyh2YWx1ZVsnY29sdW1uVHlwZSddKSk7XG59O1xuZXhwb3J0IGNvbnN0IE5vRGVmYXVsdCA9IFN5bWJvbC5mb3IoJ05vRGVmYXVsdCcpO1xuZXhwb3J0IGNvbnN0IGlzU3FsRGVmYXVsdFZhbHVlID0gKHZhbHVlKSA9PiB7XG4gICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgIT09IG51bGwgJiYgJ3NxbCcgaW4gdmFsdWUgJiYgdHlwZW9mIHZhbHVlWydzcWwnXSA9PT0gJ3N0cmluZyc7XG59O1xuY29uc3QgbWFrZUNvbERlZiA9IChjb2x1bW5UeXBlKSA9PiAoZGVmKSA9PiB7XG4gICAgY29uc3QgbnVsbGFibGUgPSBkZWY/Lm51bGxhYmxlID8/IGZhbHNlO1xuICAgIGNvbnN0IHNjaGVtYVdpdGhvdXROdWxsID0gZGVmPy5zY2hlbWEgPz8gZGVmYXVsdFNjaGVtYUZvckNvbHVtblR5cGUoY29sdW1uVHlwZSk7XG4gICAgY29uc3Qgc2NoZW1hID0gbnVsbGFibGUgPT09IHRydWUgPyBTY2hlbWEuTnVsbE9yKHNjaGVtYVdpdGhvdXROdWxsKSA6IHNjaGVtYVdpdGhvdXROdWxsO1xuICAgIGNvbnN0IGRlZmF1bHRfID0gZGVmPy5kZWZhdWx0ID09PSB1bmRlZmluZWQgfHwgZGVmLmRlZmF1bHQgPT09IE5vRGVmYXVsdCA/IE9wdGlvbi5ub25lKCkgOiBPcHRpb24uc29tZShkZWYuZGVmYXVsdCk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgY29sdW1uVHlwZSxcbiAgICAgICAgc2NoZW1hLFxuICAgICAgICBkZWZhdWx0OiBkZWZhdWx0XyxcbiAgICAgICAgbnVsbGFibGUsXG4gICAgICAgIHByaW1hcnlLZXk6IGRlZj8ucHJpbWFyeUtleSA/PyBmYWxzZSxcbiAgICB9O1xufTtcbmV4cG9ydCBjb25zdCBjb2x1bW4gPSAoY29sdW1uVHlwZSkgPT4gbWFrZUNvbERlZihjb2x1bW5UeXBlKTtcbi8vLyBDb2x1bW4gZGVmaW5pdGlvbnNcbmV4cG9ydCBjb25zdCB0ZXh0ID0gbWFrZUNvbERlZigndGV4dCcpO1xuZXhwb3J0IGNvbnN0IGludGVnZXIgPSBtYWtlQ29sRGVmKCdpbnRlZ2VyJyk7XG5leHBvcnQgY29uc3QgcmVhbCA9IG1ha2VDb2xEZWYoJ3JlYWwnKTtcbmV4cG9ydCBjb25zdCBibG9iID0gbWFrZUNvbERlZignYmxvYicpO1xuY29uc3QgbWFrZVNwZWNpYWxpemVkQ29sRGVmID0gKGNvbHVtblR5cGUsIG9wdHMpID0+IChkZWYpID0+IHtcbiAgICBjb25zdCBudWxsYWJsZSA9IGRlZj8ubnVsbGFibGUgPz8gZmFsc2U7XG4gICAgY29uc3Qgc2NoZW1hV2l0aG91dE51bGwgPSBvcHRzLl90YWcgPT09ICdiYXNlU2NoZW1hRm4nID8gb3B0cy5iYXNlU2NoZW1hRm4oZGVmPy5zY2hlbWEpIDogb3B0cy5iYXNlU2NoZW1hO1xuICAgIGNvbnN0IHNjaGVtYSA9IG51bGxhYmxlID09PSB0cnVlID8gU2NoZW1hLk51bGxPcihzY2hlbWFXaXRob3V0TnVsbCkgOiBzY2hlbWFXaXRob3V0TnVsbDtcbiAgICBjb25zdCBkZWZhdWx0XyA9IGRlZj8uZGVmYXVsdCA9PT0gdW5kZWZpbmVkIHx8IGRlZi5kZWZhdWx0ID09PSBOb0RlZmF1bHQgPyBPcHRpb24ubm9uZSgpIDogT3B0aW9uLnNvbWUoZGVmLmRlZmF1bHQpO1xuICAgIHJldHVybiB7XG4gICAgICAgIGNvbHVtblR5cGUsXG4gICAgICAgIHNjaGVtYSxcbiAgICAgICAgZGVmYXVsdDogZGVmYXVsdF8sXG4gICAgICAgIG51bGxhYmxlLFxuICAgICAgICBwcmltYXJ5S2V5OiBkZWY/LnByaW1hcnlLZXkgPz8gZmFsc2UsXG4gICAgfTtcbn07XG5leHBvcnQgY29uc3QganNvbiA9IG1ha2VTcGVjaWFsaXplZENvbERlZigndGV4dCcsIHtcbiAgICBfdGFnOiAnYmFzZVNjaGVtYUZuJyxcbiAgICBiYXNlU2NoZW1hRm46IChjdXN0b21TY2hlbWEpID0+IFNjaGVtYS5wYXJzZUpzb24oY3VzdG9tU2NoZW1hID8/IFNjaGVtYS5BbnkpLFxufSk7XG5leHBvcnQgY29uc3QgZGF0ZXRpbWUgPSBtYWtlU3BlY2lhbGl6ZWRDb2xEZWYoJ3RleHQnLCB7XG4gICAgX3RhZzogJ2Jhc2VTY2hlbWEnLFxuICAgIGJhc2VTY2hlbWE6IFNjaGVtYS5EYXRlLFxufSk7XG5leHBvcnQgY29uc3QgZGF0ZXRpbWVJbnRlZ2VyID0gbWFrZVNwZWNpYWxpemVkQ29sRGVmKCdpbnRlZ2VyJywge1xuICAgIF90YWc6ICdiYXNlU2NoZW1hJyxcbiAgICBiYXNlU2NoZW1hOiBTY2hlbWEudHJhbnNmb3JtKFNjaGVtYS5OdW1iZXIsIFNjaGVtYS5EYXRlRnJvbVNlbGYsIHtcbiAgICAgICAgZGVjb2RlOiAobXMpID0+IG5ldyBEYXRlKG1zKSxcbiAgICAgICAgZW5jb2RlOiAoZGF0ZSkgPT4gZGF0ZS5nZXRUaW1lKCksXG4gICAgfSksXG59KTtcbmV4cG9ydCBjb25zdCBib29sZWFuID0gbWFrZVNwZWNpYWxpemVkQ29sRGVmKCdpbnRlZ2VyJywge1xuICAgIF90YWc6ICdiYXNlU2NoZW1hJyxcbiAgICBiYXNlU2NoZW1hOiBTY2hlbWEudHJhbnNmb3JtKFNjaGVtYS5OdW1iZXIsIFNjaGVtYS5Cb29sZWFuLCB7XG4gICAgICAgIGRlY29kZTogKF8pID0+IF8gPT09IDEsXG4gICAgICAgIGVuY29kZTogKF8pID0+IChfID8gMSA6IDApLFxuICAgIH0pLFxufSk7XG5leHBvcnQgY29uc3QgZGVmYXVsdFNjaGVtYUZvckNvbHVtblR5cGUgPSAoY29sdW1uVHlwZSkgPT4ge1xuICAgIHN3aXRjaCAoY29sdW1uVHlwZSkge1xuICAgICAgICBjYXNlICd0ZXh0Jzoge1xuICAgICAgICAgICAgcmV0dXJuIFNjaGVtYS5TdHJpbmc7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSAnaW50ZWdlcic6IHtcbiAgICAgICAgICAgIHJldHVybiBTY2hlbWEuTnVtYmVyO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgJ3JlYWwnOiB7XG4gICAgICAgICAgICByZXR1cm4gU2NoZW1hLk51bWJlcjtcbiAgICAgICAgfVxuICAgICAgICBjYXNlICdibG9iJzoge1xuICAgICAgICAgICAgcmV0dXJuIFNjaGVtYS5VaW50OEFycmF5RnJvbVNlbGY7XG4gICAgICAgIH1cbiAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgcmV0dXJuIGNhc2VzSGFuZGxlZChjb2x1bW5UeXBlKTtcbiAgICAgICAgfVxuICAgIH1cbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1maWVsZC1kZWZzLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/node_modules/@livestore/common/dist/schema/state/sqlite/db-schema/dsl/field-defs.js\n");

/***/ }),

/***/ "(rsc)/./src/node_modules/@livestore/common/dist/schema/state/sqlite/db-schema/dsl/mod.js":
/*!******************************************************************************************!*\
  !*** ./src/node_modules/@livestore/common/dist/schema/state/sqlite/db-schema/dsl/mod.js ***!
  \******************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   NoDefault: () => (/* reexport safe */ _field_defs_js__WEBPACK_IMPORTED_MODULE_0__.NoDefault),\n/* harmony export */   blob: () => (/* reexport safe */ _field_defs_js__WEBPACK_IMPORTED_MODULE_0__.blob),\n/* harmony export */   boolean: () => (/* reexport safe */ _field_defs_js__WEBPACK_IMPORTED_MODULE_0__.boolean),\n/* harmony export */   column: () => (/* reexport safe */ _field_defs_js__WEBPACK_IMPORTED_MODULE_0__.column),\n/* harmony export */   datetime: () => (/* reexport safe */ _field_defs_js__WEBPACK_IMPORTED_MODULE_0__.datetime),\n/* harmony export */   datetimeInteger: () => (/* reexport safe */ _field_defs_js__WEBPACK_IMPORTED_MODULE_0__.datetimeInteger),\n/* harmony export */   defaultSchemaForColumnType: () => (/* reexport safe */ _field_defs_js__WEBPACK_IMPORTED_MODULE_0__.defaultSchemaForColumnType),\n/* harmony export */   insertStructSchemaForTable: () => (/* binding */ insertStructSchemaForTable),\n/* harmony export */   integer: () => (/* reexport safe */ _field_defs_js__WEBPACK_IMPORTED_MODULE_0__.integer),\n/* harmony export */   isColumnDefinition: () => (/* reexport safe */ _field_defs_js__WEBPACK_IMPORTED_MODULE_0__.isColumnDefinition),\n/* harmony export */   isSqlDefaultValue: () => (/* reexport safe */ _field_defs_js__WEBPACK_IMPORTED_MODULE_0__.isSqlDefaultValue),\n/* harmony export */   json: () => (/* reexport safe */ _field_defs_js__WEBPACK_IMPORTED_MODULE_0__.json),\n/* harmony export */   makeDbSchema: () => (/* binding */ makeDbSchema),\n/* harmony export */   real: () => (/* reexport safe */ _field_defs_js__WEBPACK_IMPORTED_MODULE_0__.real),\n/* harmony export */   structSchemaForTable: () => (/* binding */ structSchemaForTable),\n/* harmony export */   table: () => (/* binding */ table),\n/* harmony export */   text: () => (/* reexport safe */ _field_defs_js__WEBPACK_IMPORTED_MODULE_0__.text)\n/* harmony export */ });\n/* harmony import */ var _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @livestore/utils/effect */ \"(rsc)/./src/node_modules/effect/dist/esm/Schema.js\");\n/* harmony import */ var _field_defs_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./field-defs.js */ \"(rsc)/./src/node_modules/@livestore/common/dist/schema/state/sqlite/db-schema/dsl/field-defs.js\");\n\n\n// TODO ensure via runtime check (possibly even via type-level check) that all index names are unique\nconst makeDbSchema = (schema) => {\n    return Array.isArray(schema) ? Object.fromEntries(schema.map((_) => [_.name, _])) : schema;\n};\nconst table = (name, columns, indexes) => {\n    const ast = {\n        _tag: 'table',\n        name,\n        columns: columsToAst(columns),\n        indexes: indexesToAst(indexes ?? []),\n    };\n    return { name, columns, indexes, ast };\n};\nconst structSchemaForTable = (tableDef) => _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_1__.Struct(Object.fromEntries(tableDef.ast.columns.map((column) => [column.name, column.schema]))).annotations({\n    title: tableDef.name,\n});\nconst insertStructSchemaForTable = (tableDef) => _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_1__.Struct(Object.fromEntries(tableDef.ast.columns.map((column) => [\n    column.name,\n    column.nullable === true || column.default._tag === 'Some' ? _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_1__.optional(column.schema) : column.schema,\n]))).annotations({\n    title: tableDef.name,\n});\nconst columsToAst = (columns) => {\n    return Object.entries(columns).map(([name, column]) => {\n        return {\n            _tag: 'column',\n            name,\n            schema: column.schema,\n            default: column.default,\n            nullable: column.nullable ?? false,\n            primaryKey: column.primaryKey ?? false,\n            type: { _tag: column.columnType },\n        };\n    });\n};\nconst indexesToAst = (indexes) => {\n    return indexes.map((_) => ({ _tag: 'index', columns: _.columns, name: _.name, unique: _.isUnique ?? false }));\n};\n//# sourceMappingURL=mod.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbm9kZV9tb2R1bGVzL0BsaXZlc3RvcmUvY29tbW9uL2Rpc3Qvc2NoZW1hL3N0YXRlL3NxbGl0ZS9kYi1zY2hlbWEvZHNsL21vZC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQWlEO0FBQ2pCO0FBQ2hDO0FBQ087QUFDUDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDTywyQ0FBMkMsMkRBQWE7QUFDL0Q7QUFDQSxDQUFDO0FBQ00saURBQWlELDJEQUFhO0FBQ3JFO0FBQ0EsaUVBQWlFLDZEQUFlO0FBQ2hGO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHlCQUF5QjtBQUM3QztBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsaUNBQWlDLDhFQUE4RTtBQUMvRztBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYW5hY29uZGEtYXNzZXNtZW50LTEvLi9zcmMvbm9kZV9tb2R1bGVzL0BsaXZlc3RvcmUvY29tbW9uL2Rpc3Qvc2NoZW1hL3N0YXRlL3NxbGl0ZS9kYi1zY2hlbWEvZHNsL21vZC5qcz9iNTU2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFNjaGVtYSB9IGZyb20gJ0BsaXZlc3RvcmUvdXRpbHMvZWZmZWN0JztcbmV4cG9ydCAqIGZyb20gJy4vZmllbGQtZGVmcy5qcyc7XG4vLyBUT0RPIGVuc3VyZSB2aWEgcnVudGltZSBjaGVjayAocG9zc2libHkgZXZlbiB2aWEgdHlwZS1sZXZlbCBjaGVjaykgdGhhdCBhbGwgaW5kZXggbmFtZXMgYXJlIHVuaXF1ZVxuZXhwb3J0IGNvbnN0IG1ha2VEYlNjaGVtYSA9IChzY2hlbWEpID0+IHtcbiAgICByZXR1cm4gQXJyYXkuaXNBcnJheShzY2hlbWEpID8gT2JqZWN0LmZyb21FbnRyaWVzKHNjaGVtYS5tYXAoKF8pID0+IFtfLm5hbWUsIF9dKSkgOiBzY2hlbWE7XG59O1xuZXhwb3J0IGNvbnN0IHRhYmxlID0gKG5hbWUsIGNvbHVtbnMsIGluZGV4ZXMpID0+IHtcbiAgICBjb25zdCBhc3QgPSB7XG4gICAgICAgIF90YWc6ICd0YWJsZScsXG4gICAgICAgIG5hbWUsXG4gICAgICAgIGNvbHVtbnM6IGNvbHVtc1RvQXN0KGNvbHVtbnMpLFxuICAgICAgICBpbmRleGVzOiBpbmRleGVzVG9Bc3QoaW5kZXhlcyA/PyBbXSksXG4gICAgfTtcbiAgICByZXR1cm4geyBuYW1lLCBjb2x1bW5zLCBpbmRleGVzLCBhc3QgfTtcbn07XG5leHBvcnQgY29uc3Qgc3RydWN0U2NoZW1hRm9yVGFibGUgPSAodGFibGVEZWYpID0+IFNjaGVtYS5TdHJ1Y3QoT2JqZWN0LmZyb21FbnRyaWVzKHRhYmxlRGVmLmFzdC5jb2x1bW5zLm1hcCgoY29sdW1uKSA9PiBbY29sdW1uLm5hbWUsIGNvbHVtbi5zY2hlbWFdKSkpLmFubm90YXRpb25zKHtcbiAgICB0aXRsZTogdGFibGVEZWYubmFtZSxcbn0pO1xuZXhwb3J0IGNvbnN0IGluc2VydFN0cnVjdFNjaGVtYUZvclRhYmxlID0gKHRhYmxlRGVmKSA9PiBTY2hlbWEuU3RydWN0KE9iamVjdC5mcm9tRW50cmllcyh0YWJsZURlZi5hc3QuY29sdW1ucy5tYXAoKGNvbHVtbikgPT4gW1xuICAgIGNvbHVtbi5uYW1lLFxuICAgIGNvbHVtbi5udWxsYWJsZSA9PT0gdHJ1ZSB8fCBjb2x1bW4uZGVmYXVsdC5fdGFnID09PSAnU29tZScgPyBTY2hlbWEub3B0aW9uYWwoY29sdW1uLnNjaGVtYSkgOiBjb2x1bW4uc2NoZW1hLFxuXSkpKS5hbm5vdGF0aW9ucyh7XG4gICAgdGl0bGU6IHRhYmxlRGVmLm5hbWUsXG59KTtcbmNvbnN0IGNvbHVtc1RvQXN0ID0gKGNvbHVtbnMpID0+IHtcbiAgICByZXR1cm4gT2JqZWN0LmVudHJpZXMoY29sdW1ucykubWFwKChbbmFtZSwgY29sdW1uXSkgPT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgX3RhZzogJ2NvbHVtbicsXG4gICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgc2NoZW1hOiBjb2x1bW4uc2NoZW1hLFxuICAgICAgICAgICAgZGVmYXVsdDogY29sdW1uLmRlZmF1bHQsXG4gICAgICAgICAgICBudWxsYWJsZTogY29sdW1uLm51bGxhYmxlID8/IGZhbHNlLFxuICAgICAgICAgICAgcHJpbWFyeUtleTogY29sdW1uLnByaW1hcnlLZXkgPz8gZmFsc2UsXG4gICAgICAgICAgICB0eXBlOiB7IF90YWc6IGNvbHVtbi5jb2x1bW5UeXBlIH0sXG4gICAgICAgIH07XG4gICAgfSk7XG59O1xuY29uc3QgaW5kZXhlc1RvQXN0ID0gKGluZGV4ZXMpID0+IHtcbiAgICByZXR1cm4gaW5kZXhlcy5tYXAoKF8pID0+ICh7IF90YWc6ICdpbmRleCcsIGNvbHVtbnM6IF8uY29sdW1ucywgbmFtZTogXy5uYW1lLCB1bmlxdWU6IF8uaXNVbmlxdWUgPz8gZmFsc2UgfSkpO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1vZC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/node_modules/@livestore/common/dist/schema/state/sqlite/db-schema/dsl/mod.js\n");

/***/ }),

/***/ "(rsc)/./src/node_modules/@livestore/common/dist/schema/state/sqlite/query-builder/api.js":
/*!******************************************************************************************!*\
  !*** ./src/node_modules/@livestore/common/dist/schema/state/sqlite/query-builder/api.js ***!
  \******************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   QueryBuilderAstSymbol: () => (/* binding */ QueryBuilderAstSymbol),\n/* harmony export */   QueryBuilderResultSymbol: () => (/* binding */ QueryBuilderResultSymbol),\n/* harmony export */   QueryBuilderTypeId: () => (/* binding */ QueryBuilderTypeId),\n/* harmony export */   isQueryBuilder: () => (/* binding */ isQueryBuilder)\n/* harmony export */ });\n/* harmony import */ var _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @livestore/utils/effect */ \"(rsc)/./src/node_modules/effect/dist/esm/Predicate.js\");\n\nconst QueryBuilderAstSymbol = Symbol.for('QueryBuilderAst');\nconst QueryBuilderResultSymbol = Symbol.for('QueryBuilderResult');\nconst QueryBuilderTypeId = Symbol.for('QueryBuilder');\nconst isQueryBuilder = (value) => _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.hasProperty(value, QueryBuilderTypeId);\n//# sourceMappingURL=api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbm9kZV9tb2R1bGVzL0BsaXZlc3RvcmUvY29tbW9uL2Rpc3Qvc2NoZW1hL3N0YXRlL3NxbGl0ZS9xdWVyeS1idWlsZGVyL2FwaS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFvRDtBQUM3QztBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MsZ0VBQXFCO0FBQzlEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYW5hY29uZGEtYXNzZXNtZW50LTEvLi9zcmMvbm9kZV9tb2R1bGVzL0BsaXZlc3RvcmUvY29tbW9uL2Rpc3Qvc2NoZW1hL3N0YXRlL3NxbGl0ZS9xdWVyeS1idWlsZGVyL2FwaS5qcz81YmY0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFByZWRpY2F0ZSB9IGZyb20gJ0BsaXZlc3RvcmUvdXRpbHMvZWZmZWN0JztcbmV4cG9ydCBjb25zdCBRdWVyeUJ1aWxkZXJBc3RTeW1ib2wgPSBTeW1ib2wuZm9yKCdRdWVyeUJ1aWxkZXJBc3QnKTtcbmV4cG9ydCBjb25zdCBRdWVyeUJ1aWxkZXJSZXN1bHRTeW1ib2wgPSBTeW1ib2wuZm9yKCdRdWVyeUJ1aWxkZXJSZXN1bHQnKTtcbmV4cG9ydCBjb25zdCBRdWVyeUJ1aWxkZXJUeXBlSWQgPSBTeW1ib2wuZm9yKCdRdWVyeUJ1aWxkZXInKTtcbmV4cG9ydCBjb25zdCBpc1F1ZXJ5QnVpbGRlciA9ICh2YWx1ZSkgPT4gUHJlZGljYXRlLmhhc1Byb3BlcnR5KHZhbHVlLCBRdWVyeUJ1aWxkZXJUeXBlSWQpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBpLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/node_modules/@livestore/common/dist/schema/state/sqlite/query-builder/api.js\n");

/***/ }),

/***/ "(rsc)/./src/node_modules/@livestore/common/dist/schema/state/sqlite/query-builder/astToSql.js":
/*!***********************************************************************************************!*\
  !*** ./src/node_modules/@livestore/common/dist/schema/state/sqlite/query-builder/astToSql.js ***!
  \***********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   astToSql: () => (/* binding */ astToSql)\n/* harmony export */ });\n/* harmony import */ var _livestore_utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @livestore/utils */ \"(rsc)/./src/node_modules/@livestore/utils/dist/misc.js\");\n/* harmony import */ var _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @livestore/utils/effect */ \"(rsc)/./src/node_modules/effect/dist/esm/ParseResult.js\");\n/* harmony import */ var _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @livestore/utils/effect */ \"(rsc)/./src/node_modules/effect/dist/esm/Schema.js\");\n/* harmony import */ var _adapter_types_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../../adapter-types.js */ \"(rsc)/./src/node_modules/@livestore/common/dist/adapter-types.js\");\n\n\n\n// Helper functions for SQL generation\nconst formatWhereClause = (whereConditions, tableDef, bindValues) => {\n    if (whereConditions.length === 0)\n        return '';\n    const whereClause = whereConditions\n        .map(({ col, op, value }) => {\n        // Handle NULL values\n        if (value === null) {\n            if (op !== '=' && op !== '!=') {\n                throw new Error(`Unsupported operator for NULL value: ${op}`);\n            }\n            const opStmt = op === '=' ? 'IS' : 'IS NOT';\n            return `${col} ${opStmt} NULL`;\n        }\n        // Get column definition and encode value\n        const colDef = tableDef.sqliteDef.columns[col];\n        if (colDef === undefined) {\n            throw new Error(`Column ${col} not found`);\n        }\n        // Handle array values for IN/NOT IN operators\n        const isArray = op === 'IN' || op === 'NOT IN';\n        if (isArray) {\n            // Verify value is an array\n            if (!Array.isArray(value)) {\n                return (0,_livestore_utils__WEBPACK_IMPORTED_MODULE_0__.shouldNeverHappen)(`Expected array value for ${op} operator but got`, value);\n            }\n            // Handle empty arrays\n            if (value.length === 0) {\n                return op === 'IN' ? '0=1' : '1=1';\n            }\n            const encodedValues = value.map((v) => _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_1__.encodeSync(colDef.schema)(v));\n            bindValues.push(...encodedValues);\n            const placeholders = encodedValues.map(() => '?').join(', ');\n            return `${col} ${op} (${placeholders})`;\n        }\n        else {\n            const encodedValue = _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_1__.encodeSync(colDef.schema)(value);\n            bindValues.push(encodedValue);\n            return `${col} ${op} ?`;\n        }\n    })\n        .join(' AND ');\n    return `WHERE ${whereClause}`;\n};\nconst formatReturningClause = (returning) => {\n    if (!returning || returning.length === 0)\n        return '';\n    return ` RETURNING ${returning.join(', ')}`;\n};\nconst astToSql = (ast) => {\n    const bindValues = [];\n    // INSERT query\n    if (ast._tag === 'InsertQuery') {\n        const columns = Object.keys(ast.values);\n        const placeholders = columns.map(() => '?').join(', ');\n        const encodedValues = _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_1__.encodeSync(ast.tableDef.insertSchema)(ast.values);\n        // Ensure bind values are added in the same order as columns\n        columns.forEach((col) => {\n            bindValues.push(encodedValues[col]);\n        });\n        let insertVerb = 'INSERT';\n        let conflictClause = ''; // Store the ON CONFLICT clause separately\n        // Handle ON CONFLICT clause\n        if (ast.onConflict) {\n            // Handle REPLACE specifically as it changes the INSERT verb\n            if (ast.onConflict.action._tag === 'replace') {\n                insertVerb = 'INSERT OR REPLACE';\n                // For REPLACE, the conflict target is implied and no further clause is needed\n            }\n            else {\n                // Build the ON CONFLICT clause for IGNORE or UPDATE\n                conflictClause = ` ON CONFLICT (${ast.onConflict.targets.join(', ')}) `;\n                if (ast.onConflict.action._tag === 'ignore') {\n                    conflictClause += 'DO NOTHING';\n                }\n                else {\n                    // Handle the update record case\n                    const updateValues = ast.onConflict.action.update;\n                    const updateCols = Object.keys(updateValues);\n                    if (updateCols.length === 0) {\n                        throw new Error('No update columns provided for ON CONFLICT DO UPDATE');\n                    }\n                    const updates = updateCols\n                        .map((col) => {\n                        const value = updateValues[col];\n                        // If the value is undefined, use excluded.col\n                        return value === undefined ? `${col} = excluded.${col}` : `${col} = ?`;\n                    })\n                        .join(', ');\n                    // Add values for the parameters\n                    updateCols.forEach((col) => {\n                        const value = updateValues[col];\n                        if (value !== undefined) {\n                            const colDef = ast.tableDef.sqliteDef.columns[col];\n                            if (colDef === undefined) {\n                                throw new Error(`Column ${col} not found`);\n                            }\n                            const encodedValue = _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_1__.encodeSync(colDef.schema)(value);\n                            bindValues.push(encodedValue);\n                        }\n                    });\n                    conflictClause += `DO UPDATE SET ${updates}`;\n                }\n            }\n        }\n        // Construct the main query part\n        let query = `${insertVerb} INTO '${ast.tableDef.sqliteDef.name}' (${columns.join(', ')}) VALUES (${placeholders})`;\n        // Append the conflict clause if it was generated (i.e., not for REPLACE)\n        query += conflictClause;\n        query += formatReturningClause(ast.returning);\n        return { query, bindValues };\n    }\n    // UPDATE query\n    if (ast._tag === 'UpdateQuery') {\n        const setColumns = Object.keys(ast.values);\n        if (setColumns.length === 0) {\n            console.warn(`UPDATE query requires at least one column to set (for table ${ast.tableDef.sqliteDef.name}). Running no-op query instead to skip this update query.`);\n            return { query: 'SELECT 1', bindValues: [] };\n            // return shouldNeverHappen('UPDATE query requires at least one column to set.')\n        }\n        const encodedValues = _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_1__.encodeSync(_livestore_utils_effect__WEBPACK_IMPORTED_MODULE_2__.partial(ast.tableDef.rowSchema))(ast.values);\n        // Ensure bind values are added in the same order as columns\n        setColumns.forEach((col) => {\n            bindValues.push(encodedValues[col]);\n        });\n        let query = `UPDATE '${ast.tableDef.sqliteDef.name}' SET ${setColumns.map((col) => `${col} = ?`).join(', ')}`;\n        const whereClause = formatWhereClause(ast.where, ast.tableDef, bindValues);\n        if (whereClause)\n            query += ` ${whereClause}`;\n        query += formatReturningClause(ast.returning);\n        return { query, bindValues };\n    }\n    // DELETE query\n    if (ast._tag === 'DeleteQuery') {\n        let query = `DELETE FROM '${ast.tableDef.sqliteDef.name}'`;\n        const whereClause = formatWhereClause(ast.where, ast.tableDef, bindValues);\n        if (whereClause)\n            query += ` ${whereClause}`;\n        query += formatReturningClause(ast.returning);\n        return { query, bindValues };\n    }\n    // COUNT query\n    if (ast._tag === 'CountQuery') {\n        const query = [\n            `SELECT COUNT(*) as count FROM '${ast.tableDef.sqliteDef.name}'`,\n            formatWhereClause(ast.where, ast.tableDef, bindValues),\n        ]\n            .filter((clause) => clause.length > 0)\n            .join(' ');\n        return { query, bindValues };\n    }\n    // ROW query\n    if (ast._tag === 'RowQuery') {\n        // Handle the id value by encoding it with the id column schema\n        const idColDef = ast.tableDef.sqliteDef.columns.id;\n        if (idColDef === undefined) {\n            throw new Error('Column id not found for ROW query');\n        }\n        // NOTE we're not encoding the id if it's the session id symbol, which needs to be taken care of by the caller\n        const encodedId = ast.id === _adapter_types_js__WEBPACK_IMPORTED_MODULE_3__.SessionIdSymbol ? ast.id : _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_1__.encodeSync(idColDef.schema)(ast.id);\n        return {\n            query: `SELECT * FROM '${ast.tableDef.sqliteDef.name}' WHERE id = ?`,\n            bindValues: [encodedId],\n        };\n    }\n    // SELECT query\n    const columnsStmt = ast.select.columns.length === 0 ? '*' : ast.select.columns.join(', ');\n    const selectStmt = `SELECT ${columnsStmt}`;\n    const fromStmt = `FROM '${ast.tableDef.sqliteDef.name}'`;\n    const whereStmt = formatWhereClause(ast.where, ast.tableDef, bindValues);\n    const orderByStmt = ast.orderBy.length > 0\n        ? `ORDER BY ${ast.orderBy.map(({ col, direction }) => `${col} ${direction}`).join(', ')}`\n        : '';\n    const limitStmt = ast.limit._tag === 'Some' ? `LIMIT ?` : '';\n    const offsetStmt = ast.offset._tag === 'Some' ? `OFFSET ?` : '';\n    // Push offset and limit values in the correct order matching the query string\n    if (ast.offset._tag === 'Some')\n        bindValues.push(ast.offset.value);\n    if (ast.limit._tag === 'Some')\n        bindValues.push(ast.limit.value);\n    const query = [selectStmt, fromStmt, whereStmt, orderByStmt, offsetStmt, limitStmt]\n        .map((clause) => clause.trim())\n        .filter((clause) => clause.length > 0)\n        .join(' ');\n    return { query, bindValues };\n};\n//# sourceMappingURL=astToSql.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbm9kZV9tb2R1bGVzL0BsaXZlc3RvcmUvY29tbW9uL2Rpc3Qvc2NoZW1hL3N0YXRlL3NxbGl0ZS9xdWVyeS1idWlsZGVyL2FzdFRvU3FsLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQXFEO0FBQ0o7QUFDYztBQUMvRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLGdCQUFnQjtBQUNoQztBQUNBO0FBQ0E7QUFDQSx3RUFBd0UsR0FBRztBQUMzRTtBQUNBO0FBQ0Esc0JBQXNCLEtBQUssRUFBRSxRQUFRO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLEtBQUs7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLG1FQUFpQiw2QkFBNkIsSUFBSTtBQUN6RTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQW1ELCtEQUFpQjtBQUNwRTtBQUNBO0FBQ0Esc0JBQXNCLEtBQUssRUFBRSxJQUFJLEdBQUcsYUFBYTtBQUNqRDtBQUNBO0FBQ0EsaUNBQWlDLCtEQUFpQjtBQUNsRDtBQUNBLHNCQUFzQixLQUFLLEVBQUUsSUFBSTtBQUNqQztBQUNBLEtBQUs7QUFDTDtBQUNBLG9CQUFvQixZQUFZO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLHFCQUFxQjtBQUM5QztBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QiwrREFBaUI7QUFDL0M7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsaUNBQWlDO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtEQUFrRCxrQ0FBa0M7QUFDcEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdEQUF3RCxLQUFLLGFBQWEsSUFBSSxPQUFPLEtBQUs7QUFDMUYscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMERBQTBELEtBQUs7QUFDL0Q7QUFDQSxpREFBaUQsK0RBQWlCO0FBQ2xFO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckIsdURBQXVELFFBQVE7QUFDL0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsWUFBWSxRQUFRLDRCQUE0QixLQUFLLG1CQUFtQixZQUFZLGFBQWE7QUFDeEg7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3RkFBd0YsNEJBQTRCO0FBQ3BILHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0EsOEJBQThCLCtEQUFpQixDQUFDLDREQUFjO0FBQzlEO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCwrQkFBK0IsNEJBQTRCLFFBQVEsMkJBQTJCLEtBQUssaUJBQWlCO0FBQ3BIO0FBQ0E7QUFDQSx5QkFBeUIsWUFBWTtBQUNyQztBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0MsNEJBQTRCO0FBQ2hFO0FBQ0E7QUFDQSx5QkFBeUIsWUFBWTtBQUNyQztBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE4Qyw0QkFBNEI7QUFDMUU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLDhEQUFlLFlBQVksK0RBQWlCO0FBQ2pGO0FBQ0EscUNBQXFDLDRCQUE0QjtBQUNqRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDLFlBQVk7QUFDN0MsOEJBQThCLDRCQUE0QjtBQUMxRDtBQUNBO0FBQ0Esc0JBQXNCLG1CQUFtQixnQkFBZ0IsUUFBUSxLQUFLLEVBQUUsVUFBVSxjQUFjO0FBQ2hHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYW5hY29uZGEtYXNzZXNtZW50LTEvLi9zcmMvbm9kZV9tb2R1bGVzL0BsaXZlc3RvcmUvY29tbW9uL2Rpc3Qvc2NoZW1hL3N0YXRlL3NxbGl0ZS9xdWVyeS1idWlsZGVyL2FzdFRvU3FsLmpzPzczZTAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgc2hvdWxkTmV2ZXJIYXBwZW4gfSBmcm9tICdAbGl2ZXN0b3JlL3V0aWxzJztcbmltcG9ydCB7IFNjaGVtYSB9IGZyb20gJ0BsaXZlc3RvcmUvdXRpbHMvZWZmZWN0JztcbmltcG9ydCB7IFNlc3Npb25JZFN5bWJvbCB9IGZyb20gJy4uLy4uLy4uLy4uL2FkYXB0ZXItdHlwZXMuanMnO1xuLy8gSGVscGVyIGZ1bmN0aW9ucyBmb3IgU1FMIGdlbmVyYXRpb25cbmNvbnN0IGZvcm1hdFdoZXJlQ2xhdXNlID0gKHdoZXJlQ29uZGl0aW9ucywgdGFibGVEZWYsIGJpbmRWYWx1ZXMpID0+IHtcbiAgICBpZiAod2hlcmVDb25kaXRpb25zLmxlbmd0aCA9PT0gMClcbiAgICAgICAgcmV0dXJuICcnO1xuICAgIGNvbnN0IHdoZXJlQ2xhdXNlID0gd2hlcmVDb25kaXRpb25zXG4gICAgICAgIC5tYXAoKHsgY29sLCBvcCwgdmFsdWUgfSkgPT4ge1xuICAgICAgICAvLyBIYW5kbGUgTlVMTCB2YWx1ZXNcbiAgICAgICAgaWYgKHZhbHVlID09PSBudWxsKSB7XG4gICAgICAgICAgICBpZiAob3AgIT09ICc9JyAmJiBvcCAhPT0gJyE9Jykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5zdXBwb3J0ZWQgb3BlcmF0b3IgZm9yIE5VTEwgdmFsdWU6ICR7b3B9YCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBvcFN0bXQgPSBvcCA9PT0gJz0nID8gJ0lTJyA6ICdJUyBOT1QnO1xuICAgICAgICAgICAgcmV0dXJuIGAke2NvbH0gJHtvcFN0bXR9IE5VTExgO1xuICAgICAgICB9XG4gICAgICAgIC8vIEdldCBjb2x1bW4gZGVmaW5pdGlvbiBhbmQgZW5jb2RlIHZhbHVlXG4gICAgICAgIGNvbnN0IGNvbERlZiA9IHRhYmxlRGVmLnNxbGl0ZURlZi5jb2x1bW5zW2NvbF07XG4gICAgICAgIGlmIChjb2xEZWYgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDb2x1bW4gJHtjb2x9IG5vdCBmb3VuZGApO1xuICAgICAgICB9XG4gICAgICAgIC8vIEhhbmRsZSBhcnJheSB2YWx1ZXMgZm9yIElOL05PVCBJTiBvcGVyYXRvcnNcbiAgICAgICAgY29uc3QgaXNBcnJheSA9IG9wID09PSAnSU4nIHx8IG9wID09PSAnTk9UIElOJztcbiAgICAgICAgaWYgKGlzQXJyYXkpIHtcbiAgICAgICAgICAgIC8vIFZlcmlmeSB2YWx1ZSBpcyBhbiBhcnJheVxuICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBzaG91bGROZXZlckhhcHBlbihgRXhwZWN0ZWQgYXJyYXkgdmFsdWUgZm9yICR7b3B9IG9wZXJhdG9yIGJ1dCBnb3RgLCB2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBIYW5kbGUgZW1wdHkgYXJyYXlzXG4gICAgICAgICAgICBpZiAodmFsdWUubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG9wID09PSAnSU4nID8gJzA9MScgOiAnMT0xJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IGVuY29kZWRWYWx1ZXMgPSB2YWx1ZS5tYXAoKHYpID0+IFNjaGVtYS5lbmNvZGVTeW5jKGNvbERlZi5zY2hlbWEpKHYpKTtcbiAgICAgICAgICAgIGJpbmRWYWx1ZXMucHVzaCguLi5lbmNvZGVkVmFsdWVzKTtcbiAgICAgICAgICAgIGNvbnN0IHBsYWNlaG9sZGVycyA9IGVuY29kZWRWYWx1ZXMubWFwKCgpID0+ICc/Jykuam9pbignLCAnKTtcbiAgICAgICAgICAgIHJldHVybiBgJHtjb2x9ICR7b3B9ICgke3BsYWNlaG9sZGVyc30pYDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IGVuY29kZWRWYWx1ZSA9IFNjaGVtYS5lbmNvZGVTeW5jKGNvbERlZi5zY2hlbWEpKHZhbHVlKTtcbiAgICAgICAgICAgIGJpbmRWYWx1ZXMucHVzaChlbmNvZGVkVmFsdWUpO1xuICAgICAgICAgICAgcmV0dXJuIGAke2NvbH0gJHtvcH0gP2A7XG4gICAgICAgIH1cbiAgICB9KVxuICAgICAgICAuam9pbignIEFORCAnKTtcbiAgICByZXR1cm4gYFdIRVJFICR7d2hlcmVDbGF1c2V9YDtcbn07XG5jb25zdCBmb3JtYXRSZXR1cm5pbmdDbGF1c2UgPSAocmV0dXJuaW5nKSA9PiB7XG4gICAgaWYgKCFyZXR1cm5pbmcgfHwgcmV0dXJuaW5nLmxlbmd0aCA9PT0gMClcbiAgICAgICAgcmV0dXJuICcnO1xuICAgIHJldHVybiBgIFJFVFVSTklORyAke3JldHVybmluZy5qb2luKCcsICcpfWA7XG59O1xuZXhwb3J0IGNvbnN0IGFzdFRvU3FsID0gKGFzdCkgPT4ge1xuICAgIGNvbnN0IGJpbmRWYWx1ZXMgPSBbXTtcbiAgICAvLyBJTlNFUlQgcXVlcnlcbiAgICBpZiAoYXN0Ll90YWcgPT09ICdJbnNlcnRRdWVyeScpIHtcbiAgICAgICAgY29uc3QgY29sdW1ucyA9IE9iamVjdC5rZXlzKGFzdC52YWx1ZXMpO1xuICAgICAgICBjb25zdCBwbGFjZWhvbGRlcnMgPSBjb2x1bW5zLm1hcCgoKSA9PiAnPycpLmpvaW4oJywgJyk7XG4gICAgICAgIGNvbnN0IGVuY29kZWRWYWx1ZXMgPSBTY2hlbWEuZW5jb2RlU3luYyhhc3QudGFibGVEZWYuaW5zZXJ0U2NoZW1hKShhc3QudmFsdWVzKTtcbiAgICAgICAgLy8gRW5zdXJlIGJpbmQgdmFsdWVzIGFyZSBhZGRlZCBpbiB0aGUgc2FtZSBvcmRlciBhcyBjb2x1bW5zXG4gICAgICAgIGNvbHVtbnMuZm9yRWFjaCgoY29sKSA9PiB7XG4gICAgICAgICAgICBiaW5kVmFsdWVzLnB1c2goZW5jb2RlZFZhbHVlc1tjb2xdKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGxldCBpbnNlcnRWZXJiID0gJ0lOU0VSVCc7XG4gICAgICAgIGxldCBjb25mbGljdENsYXVzZSA9ICcnOyAvLyBTdG9yZSB0aGUgT04gQ09ORkxJQ1QgY2xhdXNlIHNlcGFyYXRlbHlcbiAgICAgICAgLy8gSGFuZGxlIE9OIENPTkZMSUNUIGNsYXVzZVxuICAgICAgICBpZiAoYXN0Lm9uQ29uZmxpY3QpIHtcbiAgICAgICAgICAgIC8vIEhhbmRsZSBSRVBMQUNFIHNwZWNpZmljYWxseSBhcyBpdCBjaGFuZ2VzIHRoZSBJTlNFUlQgdmVyYlxuICAgICAgICAgICAgaWYgKGFzdC5vbkNvbmZsaWN0LmFjdGlvbi5fdGFnID09PSAncmVwbGFjZScpIHtcbiAgICAgICAgICAgICAgICBpbnNlcnRWZXJiID0gJ0lOU0VSVCBPUiBSRVBMQUNFJztcbiAgICAgICAgICAgICAgICAvLyBGb3IgUkVQTEFDRSwgdGhlIGNvbmZsaWN0IHRhcmdldCBpcyBpbXBsaWVkIGFuZCBubyBmdXJ0aGVyIGNsYXVzZSBpcyBuZWVkZWRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIEJ1aWxkIHRoZSBPTiBDT05GTElDVCBjbGF1c2UgZm9yIElHTk9SRSBvciBVUERBVEVcbiAgICAgICAgICAgICAgICBjb25mbGljdENsYXVzZSA9IGAgT04gQ09ORkxJQ1QgKCR7YXN0Lm9uQ29uZmxpY3QudGFyZ2V0cy5qb2luKCcsICcpfSkgYDtcbiAgICAgICAgICAgICAgICBpZiAoYXN0Lm9uQ29uZmxpY3QuYWN0aW9uLl90YWcgPT09ICdpZ25vcmUnKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbmZsaWN0Q2xhdXNlICs9ICdETyBOT1RISU5HJztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEhhbmRsZSB0aGUgdXBkYXRlIHJlY29yZCBjYXNlXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHVwZGF0ZVZhbHVlcyA9IGFzdC5vbkNvbmZsaWN0LmFjdGlvbi51cGRhdGU7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHVwZGF0ZUNvbHMgPSBPYmplY3Qua2V5cyh1cGRhdGVWYWx1ZXMpO1xuICAgICAgICAgICAgICAgICAgICBpZiAodXBkYXRlQ29scy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gdXBkYXRlIGNvbHVtbnMgcHJvdmlkZWQgZm9yIE9OIENPTkZMSUNUIERPIFVQREFURScpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHVwZGF0ZXMgPSB1cGRhdGVDb2xzXG4gICAgICAgICAgICAgICAgICAgICAgICAubWFwKChjb2wpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gdXBkYXRlVmFsdWVzW2NvbF07XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgdmFsdWUgaXMgdW5kZWZpbmVkLCB1c2UgZXhjbHVkZWQuY29sXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWUgPT09IHVuZGVmaW5lZCA/IGAke2NvbH0gPSBleGNsdWRlZC4ke2NvbH1gIDogYCR7Y29sfSA9ID9gO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLmpvaW4oJywgJyk7XG4gICAgICAgICAgICAgICAgICAgIC8vIEFkZCB2YWx1ZXMgZm9yIHRoZSBwYXJhbWV0ZXJzXG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZUNvbHMuZm9yRWFjaCgoY29sKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB2YWx1ZSA9IHVwZGF0ZVZhbHVlc1tjb2xdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb2xEZWYgPSBhc3QudGFibGVEZWYuc3FsaXRlRGVmLmNvbHVtbnNbY29sXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29sRGVmID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDb2x1bW4gJHtjb2x9IG5vdCBmb3VuZGApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlbmNvZGVkVmFsdWUgPSBTY2hlbWEuZW5jb2RlU3luYyhjb2xEZWYuc2NoZW1hKSh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmluZFZhbHVlcy5wdXNoKGVuY29kZWRWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBjb25mbGljdENsYXVzZSArPSBgRE8gVVBEQVRFIFNFVCAke3VwZGF0ZXN9YDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ29uc3RydWN0IHRoZSBtYWluIHF1ZXJ5IHBhcnRcbiAgICAgICAgbGV0IHF1ZXJ5ID0gYCR7aW5zZXJ0VmVyYn0gSU5UTyAnJHthc3QudGFibGVEZWYuc3FsaXRlRGVmLm5hbWV9JyAoJHtjb2x1bW5zLmpvaW4oJywgJyl9KSBWQUxVRVMgKCR7cGxhY2Vob2xkZXJzfSlgO1xuICAgICAgICAvLyBBcHBlbmQgdGhlIGNvbmZsaWN0IGNsYXVzZSBpZiBpdCB3YXMgZ2VuZXJhdGVkIChpLmUuLCBub3QgZm9yIFJFUExBQ0UpXG4gICAgICAgIHF1ZXJ5ICs9IGNvbmZsaWN0Q2xhdXNlO1xuICAgICAgICBxdWVyeSArPSBmb3JtYXRSZXR1cm5pbmdDbGF1c2UoYXN0LnJldHVybmluZyk7XG4gICAgICAgIHJldHVybiB7IHF1ZXJ5LCBiaW5kVmFsdWVzIH07XG4gICAgfVxuICAgIC8vIFVQREFURSBxdWVyeVxuICAgIGlmIChhc3QuX3RhZyA9PT0gJ1VwZGF0ZVF1ZXJ5Jykge1xuICAgICAgICBjb25zdCBzZXRDb2x1bW5zID0gT2JqZWN0LmtleXMoYXN0LnZhbHVlcyk7XG4gICAgICAgIGlmIChzZXRDb2x1bW5zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgY29uc29sZS53YXJuKGBVUERBVEUgcXVlcnkgcmVxdWlyZXMgYXQgbGVhc3Qgb25lIGNvbHVtbiB0byBzZXQgKGZvciB0YWJsZSAke2FzdC50YWJsZURlZi5zcWxpdGVEZWYubmFtZX0pLiBSdW5uaW5nIG5vLW9wIHF1ZXJ5IGluc3RlYWQgdG8gc2tpcCB0aGlzIHVwZGF0ZSBxdWVyeS5gKTtcbiAgICAgICAgICAgIHJldHVybiB7IHF1ZXJ5OiAnU0VMRUNUIDEnLCBiaW5kVmFsdWVzOiBbXSB9O1xuICAgICAgICAgICAgLy8gcmV0dXJuIHNob3VsZE5ldmVySGFwcGVuKCdVUERBVEUgcXVlcnkgcmVxdWlyZXMgYXQgbGVhc3Qgb25lIGNvbHVtbiB0byBzZXQuJylcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBlbmNvZGVkVmFsdWVzID0gU2NoZW1hLmVuY29kZVN5bmMoU2NoZW1hLnBhcnRpYWwoYXN0LnRhYmxlRGVmLnJvd1NjaGVtYSkpKGFzdC52YWx1ZXMpO1xuICAgICAgICAvLyBFbnN1cmUgYmluZCB2YWx1ZXMgYXJlIGFkZGVkIGluIHRoZSBzYW1lIG9yZGVyIGFzIGNvbHVtbnNcbiAgICAgICAgc2V0Q29sdW1ucy5mb3JFYWNoKChjb2wpID0+IHtcbiAgICAgICAgICAgIGJpbmRWYWx1ZXMucHVzaChlbmNvZGVkVmFsdWVzW2NvbF0pO1xuICAgICAgICB9KTtcbiAgICAgICAgbGV0IHF1ZXJ5ID0gYFVQREFURSAnJHthc3QudGFibGVEZWYuc3FsaXRlRGVmLm5hbWV9JyBTRVQgJHtzZXRDb2x1bW5zLm1hcCgoY29sKSA9PiBgJHtjb2x9ID0gP2ApLmpvaW4oJywgJyl9YDtcbiAgICAgICAgY29uc3Qgd2hlcmVDbGF1c2UgPSBmb3JtYXRXaGVyZUNsYXVzZShhc3Qud2hlcmUsIGFzdC50YWJsZURlZiwgYmluZFZhbHVlcyk7XG4gICAgICAgIGlmICh3aGVyZUNsYXVzZSlcbiAgICAgICAgICAgIHF1ZXJ5ICs9IGAgJHt3aGVyZUNsYXVzZX1gO1xuICAgICAgICBxdWVyeSArPSBmb3JtYXRSZXR1cm5pbmdDbGF1c2UoYXN0LnJldHVybmluZyk7XG4gICAgICAgIHJldHVybiB7IHF1ZXJ5LCBiaW5kVmFsdWVzIH07XG4gICAgfVxuICAgIC8vIERFTEVURSBxdWVyeVxuICAgIGlmIChhc3QuX3RhZyA9PT0gJ0RlbGV0ZVF1ZXJ5Jykge1xuICAgICAgICBsZXQgcXVlcnkgPSBgREVMRVRFIEZST00gJyR7YXN0LnRhYmxlRGVmLnNxbGl0ZURlZi5uYW1lfSdgO1xuICAgICAgICBjb25zdCB3aGVyZUNsYXVzZSA9IGZvcm1hdFdoZXJlQ2xhdXNlKGFzdC53aGVyZSwgYXN0LnRhYmxlRGVmLCBiaW5kVmFsdWVzKTtcbiAgICAgICAgaWYgKHdoZXJlQ2xhdXNlKVxuICAgICAgICAgICAgcXVlcnkgKz0gYCAke3doZXJlQ2xhdXNlfWA7XG4gICAgICAgIHF1ZXJ5ICs9IGZvcm1hdFJldHVybmluZ0NsYXVzZShhc3QucmV0dXJuaW5nKTtcbiAgICAgICAgcmV0dXJuIHsgcXVlcnksIGJpbmRWYWx1ZXMgfTtcbiAgICB9XG4gICAgLy8gQ09VTlQgcXVlcnlcbiAgICBpZiAoYXN0Ll90YWcgPT09ICdDb3VudFF1ZXJ5Jykge1xuICAgICAgICBjb25zdCBxdWVyeSA9IFtcbiAgICAgICAgICAgIGBTRUxFQ1QgQ09VTlQoKikgYXMgY291bnQgRlJPTSAnJHthc3QudGFibGVEZWYuc3FsaXRlRGVmLm5hbWV9J2AsXG4gICAgICAgICAgICBmb3JtYXRXaGVyZUNsYXVzZShhc3Qud2hlcmUsIGFzdC50YWJsZURlZiwgYmluZFZhbHVlcyksXG4gICAgICAgIF1cbiAgICAgICAgICAgIC5maWx0ZXIoKGNsYXVzZSkgPT4gY2xhdXNlLmxlbmd0aCA+IDApXG4gICAgICAgICAgICAuam9pbignICcpO1xuICAgICAgICByZXR1cm4geyBxdWVyeSwgYmluZFZhbHVlcyB9O1xuICAgIH1cbiAgICAvLyBST1cgcXVlcnlcbiAgICBpZiAoYXN0Ll90YWcgPT09ICdSb3dRdWVyeScpIHtcbiAgICAgICAgLy8gSGFuZGxlIHRoZSBpZCB2YWx1ZSBieSBlbmNvZGluZyBpdCB3aXRoIHRoZSBpZCBjb2x1bW4gc2NoZW1hXG4gICAgICAgIGNvbnN0IGlkQ29sRGVmID0gYXN0LnRhYmxlRGVmLnNxbGl0ZURlZi5jb2x1bW5zLmlkO1xuICAgICAgICBpZiAoaWRDb2xEZWYgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDb2x1bW4gaWQgbm90IGZvdW5kIGZvciBST1cgcXVlcnknKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBOT1RFIHdlJ3JlIG5vdCBlbmNvZGluZyB0aGUgaWQgaWYgaXQncyB0aGUgc2Vzc2lvbiBpZCBzeW1ib2wsIHdoaWNoIG5lZWRzIHRvIGJlIHRha2VuIGNhcmUgb2YgYnkgdGhlIGNhbGxlclxuICAgICAgICBjb25zdCBlbmNvZGVkSWQgPSBhc3QuaWQgPT09IFNlc3Npb25JZFN5bWJvbCA/IGFzdC5pZCA6IFNjaGVtYS5lbmNvZGVTeW5jKGlkQ29sRGVmLnNjaGVtYSkoYXN0LmlkKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHF1ZXJ5OiBgU0VMRUNUICogRlJPTSAnJHthc3QudGFibGVEZWYuc3FsaXRlRGVmLm5hbWV9JyBXSEVSRSBpZCA9ID9gLFxuICAgICAgICAgICAgYmluZFZhbHVlczogW2VuY29kZWRJZF0sXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8vIFNFTEVDVCBxdWVyeVxuICAgIGNvbnN0IGNvbHVtbnNTdG10ID0gYXN0LnNlbGVjdC5jb2x1bW5zLmxlbmd0aCA9PT0gMCA/ICcqJyA6IGFzdC5zZWxlY3QuY29sdW1ucy5qb2luKCcsICcpO1xuICAgIGNvbnN0IHNlbGVjdFN0bXQgPSBgU0VMRUNUICR7Y29sdW1uc1N0bXR9YDtcbiAgICBjb25zdCBmcm9tU3RtdCA9IGBGUk9NICcke2FzdC50YWJsZURlZi5zcWxpdGVEZWYubmFtZX0nYDtcbiAgICBjb25zdCB3aGVyZVN0bXQgPSBmb3JtYXRXaGVyZUNsYXVzZShhc3Qud2hlcmUsIGFzdC50YWJsZURlZiwgYmluZFZhbHVlcyk7XG4gICAgY29uc3Qgb3JkZXJCeVN0bXQgPSBhc3Qub3JkZXJCeS5sZW5ndGggPiAwXG4gICAgICAgID8gYE9SREVSIEJZICR7YXN0Lm9yZGVyQnkubWFwKCh7IGNvbCwgZGlyZWN0aW9uIH0pID0+IGAke2NvbH0gJHtkaXJlY3Rpb259YCkuam9pbignLCAnKX1gXG4gICAgICAgIDogJyc7XG4gICAgY29uc3QgbGltaXRTdG10ID0gYXN0LmxpbWl0Ll90YWcgPT09ICdTb21lJyA/IGBMSU1JVCA/YCA6ICcnO1xuICAgIGNvbnN0IG9mZnNldFN0bXQgPSBhc3Qub2Zmc2V0Ll90YWcgPT09ICdTb21lJyA/IGBPRkZTRVQgP2AgOiAnJztcbiAgICAvLyBQdXNoIG9mZnNldCBhbmQgbGltaXQgdmFsdWVzIGluIHRoZSBjb3JyZWN0IG9yZGVyIG1hdGNoaW5nIHRoZSBxdWVyeSBzdHJpbmdcbiAgICBpZiAoYXN0Lm9mZnNldC5fdGFnID09PSAnU29tZScpXG4gICAgICAgIGJpbmRWYWx1ZXMucHVzaChhc3Qub2Zmc2V0LnZhbHVlKTtcbiAgICBpZiAoYXN0LmxpbWl0Ll90YWcgPT09ICdTb21lJylcbiAgICAgICAgYmluZFZhbHVlcy5wdXNoKGFzdC5saW1pdC52YWx1ZSk7XG4gICAgY29uc3QgcXVlcnkgPSBbc2VsZWN0U3RtdCwgZnJvbVN0bXQsIHdoZXJlU3RtdCwgb3JkZXJCeVN0bXQsIG9mZnNldFN0bXQsIGxpbWl0U3RtdF1cbiAgICAgICAgLm1hcCgoY2xhdXNlKSA9PiBjbGF1c2UudHJpbSgpKVxuICAgICAgICAuZmlsdGVyKChjbGF1c2UpID0+IGNsYXVzZS5sZW5ndGggPiAwKVxuICAgICAgICAuam9pbignICcpO1xuICAgIHJldHVybiB7IHF1ZXJ5LCBiaW5kVmFsdWVzIH07XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXN0VG9TcWwuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/node_modules/@livestore/common/dist/schema/state/sqlite/query-builder/astToSql.js\n");

/***/ }),

/***/ "(rsc)/./src/node_modules/@livestore/common/dist/schema/state/sqlite/query-builder/impl.js":
/*!*******************************************************************************************!*\
  !*** ./src/node_modules/@livestore/common/dist/schema/state/sqlite/query-builder/impl.js ***!
  \*******************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getResultSchema: () => (/* binding */ getResultSchema),\n/* harmony export */   invalidQueryBuilder: () => (/* binding */ invalidQueryBuilder),\n/* harmony export */   makeQueryBuilder: () => (/* binding */ makeQueryBuilder)\n/* harmony export */ });\n/* harmony import */ var _livestore_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @livestore/utils */ \"(rsc)/./src/node_modules/@livestore/utils/dist/index.js\");\n/* harmony import */ var _livestore_utils__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @livestore/utils */ \"(rsc)/./src/node_modules/@livestore/utils/dist/misc.js\");\n/* harmony import */ var _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @livestore/utils/effect */ \"(rsc)/./src/node_modules/effect/dist/esm/Schema.js\");\n/* harmony import */ var _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @livestore/utils/effect */ \"(rsc)/./src/node_modules/effect/dist/esm/Predicate.js\");\n/* harmony import */ var _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @livestore/utils/effect */ \"(rsc)/./src/node_modules/effect/dist/esm/Option.js\");\n/* harmony import */ var _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @livestore/utils/effect */ \"(rsc)/./src/node_modules/effect/dist/esm/Match.js\");\n/* harmony import */ var _api_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./api.js */ \"(rsc)/./src/node_modules/@livestore/common/dist/schema/state/sqlite/query-builder/api.js\");\n/* harmony import */ var _astToSql_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./astToSql.js */ \"(rsc)/./src/node_modules/@livestore/common/dist/schema/state/sqlite/query-builder/astToSql.js\");\n\n\n\n\nconst makeQueryBuilder = (tableDef, ast = emptyAst(tableDef)) => {\n    const api = {\n        // eslint-disable-next-line prefer-arrow/prefer-arrow-functions\n        select() {\n            assertSelectQueryBuilderAst(ast);\n            // eslint-disable-next-line prefer-rest-params\n            const params = [...arguments];\n            // Pluck if there's only one column selected\n            if (params.length === 1) {\n                const [col] = params;\n                return makeQueryBuilder(tableDef, {\n                    ...ast,\n                    resultSchemaSingle: ast.resultSchemaSingle.pipe(_livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.pluck(col)),\n                    select: { columns: [col] },\n                });\n            }\n            const columns = params;\n            return makeQueryBuilder(tableDef, {\n                ...ast,\n                resultSchemaSingle: columns.length === 0 ? ast.resultSchemaSingle : ast.resultSchemaSingle.pipe(_livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.pick(...columns)),\n                select: { columns },\n            });\n        },\n        // eslint-disable-next-line prefer-arrow/prefer-arrow-functions\n        where: function () {\n            if (ast._tag === 'InsertQuery')\n                return invalidQueryBuilder('Cannot use where with insert');\n            if (ast._tag === 'RowQuery')\n                return invalidQueryBuilder('Cannot use where with row');\n            if (arguments.length === 1) {\n                // eslint-disable-next-line prefer-rest-params\n                const params = arguments[0];\n                const newOps = Object.entries(params)\n                    .filter(([, value]) => value !== undefined)\n                    .map(([col, value]) => _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_1__.hasProperty(value, 'op') && _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_1__.hasProperty(value, 'value')\n                    ? { col, op: value.op, value: value.value }\n                    : { col, op: '=', value });\n                switch (ast._tag) {\n                    case 'CountQuery':\n                    case 'SelectQuery':\n                    case 'UpdateQuery':\n                    case 'DeleteQuery': {\n                        return makeQueryBuilder(tableDef, {\n                            ...ast,\n                            where: [...ast.where, ...newOps],\n                        });\n                    }\n                    default: {\n                        return (0,_livestore_utils__WEBPACK_IMPORTED_MODULE_2__.casesHandled)(ast);\n                    }\n                }\n            }\n            // eslint-disable-next-line prefer-rest-params\n            const [col, opOrValue, valueOrUndefined] = arguments;\n            const op = valueOrUndefined === undefined ? '=' : opOrValue;\n            const value = valueOrUndefined === undefined ? opOrValue : valueOrUndefined;\n            switch (ast._tag) {\n                case 'CountQuery':\n                case 'SelectQuery':\n                case 'UpdateQuery':\n                case 'DeleteQuery': {\n                    return makeQueryBuilder(tableDef, {\n                        ...ast,\n                        where: [...ast.where, { col, op, value }],\n                    });\n                }\n                default: {\n                    return (0,_livestore_utils__WEBPACK_IMPORTED_MODULE_2__.casesHandled)(ast);\n                }\n            }\n        },\n        // eslint-disable-next-line prefer-arrow/prefer-arrow-functions\n        orderBy() {\n            assertSelectQueryBuilderAst(ast);\n            if (arguments.length === 0 || arguments.length > 2)\n                return invalidQueryBuilder();\n            if (arguments.length === 1) {\n                // eslint-disable-next-line prefer-rest-params\n                const params = arguments[0];\n                return makeQueryBuilder(tableDef, {\n                    ...ast,\n                    orderBy: [...ast.orderBy, ...params],\n                });\n            }\n            // eslint-disable-next-line prefer-rest-params\n            const [col, direction] = arguments;\n            return makeQueryBuilder(tableDef, {\n                ...ast,\n                orderBy: [...ast.orderBy, { col, direction }],\n            });\n        },\n        limit: (limit) => {\n            assertSelectQueryBuilderAst(ast);\n            return makeQueryBuilder(tableDef, { ...ast, limit: _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_3__.some(limit) });\n        },\n        offset: (offset) => {\n            assertSelectQueryBuilderAst(ast);\n            return makeQueryBuilder(tableDef, { ...ast, offset: _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_3__.some(offset) });\n        },\n        count: () => {\n            if (isRowQuery(ast) || ast._tag === 'InsertQuery' || ast._tag === 'UpdateQuery' || ast._tag === 'DeleteQuery')\n                return invalidQueryBuilder();\n            return makeQueryBuilder(tableDef, {\n                _tag: 'CountQuery',\n                tableDef,\n                where: ast.where,\n                resultSchema: _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.Struct({ count: _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.Number }).pipe(_livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.pluck('count'), _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.Array, _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.headOrElse()),\n            });\n        },\n        first: (options) => {\n            assertSelectQueryBuilderAst(ast);\n            if (ast.limit._tag === 'Some')\n                return invalidQueryBuilder(`.first() can't be called after .limit()`);\n            return makeQueryBuilder(tableDef, {\n                ...ast,\n                limit: _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_3__.some(1),\n                pickFirst: options?.fallback !== undefined && options.fallback !== 'throws' ? { fallback: options.fallback } : 'throws',\n            });\n        },\n        // // eslint-disable-next-line prefer-arrow/prefer-arrow-functions\n        // getOrCreate() {\n        //   if (tableDef.options.isClientDocumentTable === false) {\n        //     return invalidQueryBuilder(`getOrCreate() is not allowed when table is not a client document table`)\n        //   }\n        //   // eslint-disable-next-line prefer-rest-params\n        //   const params = [...arguments]\n        //   let id: string | number\n        //   // TODO refactor to handle default id\n        //   id = params[0] as string | number\n        //   if (id === undefined) {\n        //     invalidQueryBuilder(`Id missing for row query on non-singleton table ${tableDef.sqliteDef.name}`)\n        //   }\n        //   // TODO validate all required columns are present and values are matching the schema\n        //   const insertValues: Record<string, unknown> = params[1]?.insertValues ?? {}\n        //   return makeQueryBuilder(tableDef, {\n        //     _tag: 'RowQuery',\n        //     id,\n        //     tableDef,\n        //     insertValues,\n        //   }) as any\n        // },\n        insert: (values) => {\n            const filteredValues = Object.fromEntries(Object.entries(values).filter(([, value]) => value !== undefined));\n            return makeQueryBuilder(tableDef, {\n                _tag: 'InsertQuery',\n                tableDef,\n                values: filteredValues,\n                onConflict: undefined,\n                returning: undefined,\n                resultSchema: _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.Void,\n            });\n        },\n        onConflict: (targetOrTargets, action, updateValues) => {\n            const targets = Array.isArray(targetOrTargets) ? targetOrTargets : [targetOrTargets];\n            assertInsertQueryBuilderAst(ast);\n            const onConflict = _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_4__.value(action).pipe(_livestore_utils_effect__WEBPACK_IMPORTED_MODULE_4__.when('ignore', () => ({ targets, action: { _tag: 'ignore' } })), _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_4__.when('replace', () => ({ targets, action: { _tag: 'replace' } })), _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_4__.when('update', () => ({ targets, action: { _tag: 'update', update: updateValues } })), _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_4__.exhaustive);\n            return makeQueryBuilder(tableDef, {\n                ...ast,\n                onConflict,\n            });\n        },\n        returning: (...columns) => {\n            assertWriteQueryBuilderAst(ast);\n            return makeQueryBuilder(tableDef, {\n                ...ast,\n                returning: columns,\n                resultSchema: tableDef.rowSchema.pipe(_livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.pick(...columns), _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.Array),\n            });\n        },\n        update: (values) => {\n            const filteredValues = Object.fromEntries(Object.entries(values).filter(([, value]) => value !== undefined));\n            return makeQueryBuilder(tableDef, {\n                _tag: 'UpdateQuery',\n                tableDef,\n                values: filteredValues,\n                where: [],\n                returning: undefined,\n                resultSchema: _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.Void,\n            });\n        },\n        delete: () => {\n            return makeQueryBuilder(tableDef, {\n                _tag: 'DeleteQuery',\n                tableDef,\n                where: [],\n                returning: undefined,\n                resultSchema: _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.Void,\n            });\n        },\n    };\n    return {\n        [_api_js__WEBPACK_IMPORTED_MODULE_5__.QueryBuilderTypeId]: _api_js__WEBPACK_IMPORTED_MODULE_5__.QueryBuilderTypeId,\n        [_api_js__WEBPACK_IMPORTED_MODULE_5__.QueryBuilderAstSymbol]: ast,\n        ['ResultType']: 'only-for-type-inference',\n        asSql: () => (0,_astToSql_js__WEBPACK_IMPORTED_MODULE_6__.astToSql)(ast),\n        toString: () => {\n            try {\n                return (0,_astToSql_js__WEBPACK_IMPORTED_MODULE_6__.astToSql)(ast).query;\n            }\n            catch (cause) {\n                console.debug(`QueryBuilder.toString(): Error converting query builder to string`, cause, ast);\n                return `Error converting query builder to string`;\n            }\n        },\n        ...api,\n    };\n};\nconst emptyAst = (tableDef) => ({\n    _tag: 'SelectQuery',\n    columns: [],\n    pickFirst: false,\n    select: { columns: [] },\n    orderBy: [],\n    offset: _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_3__.none(),\n    limit: _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_3__.none(),\n    tableDef,\n    where: [],\n    resultSchemaSingle: tableDef.rowSchema,\n});\n// Helper functions\n// eslint-disable-next-line prefer-arrow/prefer-arrow-functions\nfunction assertSelectQueryBuilderAst(ast) {\n    if (ast._tag !== 'SelectQuery') {\n        return (0,_livestore_utils__WEBPACK_IMPORTED_MODULE_7__.shouldNeverHappen)('Expected SelectQuery but got ' + ast._tag);\n    }\n}\n// eslint-disable-next-line prefer-arrow/prefer-arrow-functions\nfunction assertInsertQueryBuilderAst(ast) {\n    if (ast._tag !== 'InsertQuery') {\n        return (0,_livestore_utils__WEBPACK_IMPORTED_MODULE_7__.shouldNeverHappen)('Expected InsertQuery but got ' + ast._tag);\n    }\n}\n// eslint-disable-next-line prefer-arrow/prefer-arrow-functions\nfunction assertWriteQueryBuilderAst(ast) {\n    if (ast._tag !== 'InsertQuery' && ast._tag !== 'UpdateQuery' && ast._tag !== 'DeleteQuery') {\n        return (0,_livestore_utils__WEBPACK_IMPORTED_MODULE_7__.shouldNeverHappen)('Expected WriteQuery but got ' + ast._tag);\n    }\n}\nconst isRowQuery = (ast) => ast._tag === 'RowQuery';\nconst invalidQueryBuilder = (msg) => {\n    return (0,_livestore_utils__WEBPACK_IMPORTED_MODULE_7__.shouldNeverHappen)('Invalid query builder' + (msg ? `: ${msg}` : ''));\n};\nconst getResultSchema = (qb) => {\n    const queryAst = qb[_api_js__WEBPACK_IMPORTED_MODULE_5__.QueryBuilderAstSymbol];\n    switch (queryAst._tag) {\n        case 'SelectQuery': {\n            const arraySchema = _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.Array(queryAst.resultSchemaSingle);\n            if (queryAst.pickFirst === false) {\n                return arraySchema;\n            }\n            else if (queryAst.pickFirst === 'throws') {\n                // Will throw if the array is empty\n                return arraySchema.pipe(_livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.headOrElse());\n            }\n            else {\n                const fallbackValue = queryAst.pickFirst.fallback();\n                return _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.Union(arraySchema, _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.Tuple(_livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.Literal(fallbackValue))).pipe(_livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.headOrElse(() => fallbackValue));\n            }\n        }\n        case 'CountQuery': {\n            return _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.Struct({ count: _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.Number }).pipe(_livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.pluck('count'), _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.Array, _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.headOrElse());\n        }\n        case 'InsertQuery':\n        case 'UpdateQuery':\n        case 'DeleteQuery': {\n            // For write operations with RETURNING clause, we need to return the appropriate schema\n            if (queryAst.returning && queryAst.returning.length > 0) {\n                // Create a schema for the returned columns\n                return queryAst.tableDef.rowSchema.pipe(_livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.pick(...queryAst.returning), _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.Array);\n            }\n            // For write operations without RETURNING, the result is the number of affected rows\n            return _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.Number;\n        }\n        case 'RowQuery': {\n            return queryAst.tableDef.rowSchema.pipe(_livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.pluck('value'), _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.annotations({ title: `${queryAst.tableDef.sqliteDef.name}.value` }), _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.Array, _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.headOrElse());\n        }\n        default: {\n            (0,_livestore_utils__WEBPACK_IMPORTED_MODULE_2__.casesHandled)(queryAst);\n        }\n    }\n};\n//# sourceMappingURL=impl.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbm9kZV9tb2R1bGVzL0BsaXZlc3RvcmUvY29tbW9uL2Rpc3Qvc2NoZW1hL3N0YXRlL3NxbGl0ZS9xdWVyeS1idWlsZGVyL2ltcGwuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBbUU7QUFDUTtBQUNOO0FBQzVCO0FBQ2xDO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9FQUFvRSwwREFBWTtBQUNoRiw4QkFBOEIsZ0JBQWdCO0FBQzlDLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLGdIQUFnSCx5REFBVztBQUMzSCwwQkFBMEIsU0FBUztBQUNuQyxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkMsZ0VBQXFCLGlCQUFpQixnRUFBcUI7QUFDdEcsd0JBQXdCO0FBQ3hCLHdCQUF3QixxQkFBcUI7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0EsK0JBQStCLDhEQUFZO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnREFBZ0QsZ0JBQWdCO0FBQ2hFLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0EsMkJBQTJCLDhEQUFZO0FBQ3ZDO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDLGdCQUFnQjtBQUM1RCxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQSxnREFBZ0QsZUFBZSx5REFBVyxTQUFTO0FBQ25GLFNBQVM7QUFDVDtBQUNBO0FBQ0EsZ0RBQWdELGdCQUFnQix5REFBVyxVQUFVO0FBQ3JGLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QiwyREFBYSxHQUFHLE9BQU8sMkRBQWEsRUFBRSxPQUFPLDBEQUFZLFdBQVcsMERBQVksRUFBRSwrREFBaUI7QUFDakksYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIseURBQVc7QUFDbEMsZ0dBQWdHLDZCQUE2QjtBQUM3SCxhQUFhO0FBQ2IsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzRkFBc0Ysd0JBQXdCO0FBQzlHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjO0FBQ2QsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIseURBQVc7QUFDekMsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsMERBQVcsY0FBYyx5REFBVSxvQkFBb0IsbUJBQW1CLGtCQUFrQixJQUFJLHlEQUFVLHFCQUFxQixtQkFBbUIsbUJBQW1CLElBQUkseURBQVUsb0JBQW9CLG1CQUFtQix3Q0FBd0MsSUFBSSwrREFBZ0I7QUFDclQ7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0RBQXNELHlEQUFXLGNBQWMsMERBQVk7QUFDM0YsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLHlEQUFXO0FBQ3pDLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLHlEQUFXO0FBQ3pDLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVMsdURBQWtCLEdBQUcsdURBQWtCO0FBQ2hELFNBQVMsMERBQXFCO0FBQzlCO0FBQ0EscUJBQXFCLHNEQUFRO0FBQzdCO0FBQ0E7QUFDQSx1QkFBdUIsc0RBQVE7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsYUFBYTtBQUMzQjtBQUNBLFlBQVkseURBQVc7QUFDdkIsV0FBVyx5REFBVztBQUN0QjtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLG1FQUFpQjtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxtRUFBaUI7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsbUVBQWlCO0FBQ2hDO0FBQ0E7QUFDQTtBQUNPO0FBQ1AsV0FBVyxtRUFBaUIsdUNBQXVDLElBQUk7QUFDdkU7QUFDTztBQUNQLHdCQUF3QiwwREFBcUI7QUFDN0M7QUFDQTtBQUNBLGdDQUFnQywwREFBWTtBQUM1QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDLCtEQUFpQjtBQUN6RDtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsMERBQVksY0FBYywwREFBWSxDQUFDLDREQUFjLHVCQUF1QiwrREFBaUI7QUFDcEg7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLDJEQUFhLEdBQUcsT0FBTywyREFBYSxFQUFFLE9BQU8sMERBQVksV0FBVywwREFBWSxFQUFFLCtEQUFpQjtBQUN0SDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdEQUF3RCx5REFBVyx5QkFBeUIsMERBQVk7QUFDeEc7QUFDQTtBQUNBLG1CQUFtQiwyREFBYTtBQUNoQztBQUNBO0FBQ0Esb0RBQW9ELDBEQUFZLFdBQVcsZ0VBQWtCLEdBQUcsVUFBVSxpQ0FBaUMsU0FBUyxHQUFHLDBEQUFZLEVBQUUsK0RBQWlCO0FBQ3RMO0FBQ0E7QUFDQSxZQUFZLDhEQUFZO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYW5hY29uZGEtYXNzZXNtZW50LTEvLi9zcmMvbm9kZV9tb2R1bGVzL0BsaXZlc3RvcmUvY29tbW9uL2Rpc3Qvc2NoZW1hL3N0YXRlL3NxbGl0ZS9xdWVyeS1idWlsZGVyL2ltcGwuanM/MDFmNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjYXNlc0hhbmRsZWQsIHNob3VsZE5ldmVySGFwcGVuIH0gZnJvbSAnQGxpdmVzdG9yZS91dGlscyc7XG5pbXBvcnQgeyBNYXRjaCwgT3B0aW9uLCBQcmVkaWNhdGUsIFNjaGVtYSB9IGZyb20gJ0BsaXZlc3RvcmUvdXRpbHMvZWZmZWN0JztcbmltcG9ydCB7IFF1ZXJ5QnVpbGRlckFzdFN5bWJvbCwgUXVlcnlCdWlsZGVyVHlwZUlkIH0gZnJvbSAnLi9hcGkuanMnO1xuaW1wb3J0IHsgYXN0VG9TcWwgfSBmcm9tICcuL2FzdFRvU3FsLmpzJztcbmV4cG9ydCBjb25zdCBtYWtlUXVlcnlCdWlsZGVyID0gKHRhYmxlRGVmLCBhc3QgPSBlbXB0eUFzdCh0YWJsZURlZikpID0+IHtcbiAgICBjb25zdCBhcGkgPSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwcmVmZXItYXJyb3cvcHJlZmVyLWFycm93LWZ1bmN0aW9uc1xuICAgICAgICBzZWxlY3QoKSB7XG4gICAgICAgICAgICBhc3NlcnRTZWxlY3RRdWVyeUJ1aWxkZXJBc3QoYXN0KTtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwcmVmZXItcmVzdC1wYXJhbXNcbiAgICAgICAgICAgIGNvbnN0IHBhcmFtcyA9IFsuLi5hcmd1bWVudHNdO1xuICAgICAgICAgICAgLy8gUGx1Y2sgaWYgdGhlcmUncyBvbmx5IG9uZSBjb2x1bW4gc2VsZWN0ZWRcbiAgICAgICAgICAgIGlmIChwYXJhbXMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgW2NvbF0gPSBwYXJhbXM7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG1ha2VRdWVyeUJ1aWxkZXIodGFibGVEZWYsIHtcbiAgICAgICAgICAgICAgICAgICAgLi4uYXN0LFxuICAgICAgICAgICAgICAgICAgICByZXN1bHRTY2hlbWFTaW5nbGU6IGFzdC5yZXN1bHRTY2hlbWFTaW5nbGUucGlwZShTY2hlbWEucGx1Y2soY29sKSksXG4gICAgICAgICAgICAgICAgICAgIHNlbGVjdDogeyBjb2x1bW5zOiBbY29sXSB9LFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgY29sdW1ucyA9IHBhcmFtcztcbiAgICAgICAgICAgIHJldHVybiBtYWtlUXVlcnlCdWlsZGVyKHRhYmxlRGVmLCB7XG4gICAgICAgICAgICAgICAgLi4uYXN0LFxuICAgICAgICAgICAgICAgIHJlc3VsdFNjaGVtYVNpbmdsZTogY29sdW1ucy5sZW5ndGggPT09IDAgPyBhc3QucmVzdWx0U2NoZW1hU2luZ2xlIDogYXN0LnJlc3VsdFNjaGVtYVNpbmdsZS5waXBlKFNjaGVtYS5waWNrKC4uLmNvbHVtbnMpKSxcbiAgICAgICAgICAgICAgICBzZWxlY3Q6IHsgY29sdW1ucyB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwcmVmZXItYXJyb3cvcHJlZmVyLWFycm93LWZ1bmN0aW9uc1xuICAgICAgICB3aGVyZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKGFzdC5fdGFnID09PSAnSW5zZXJ0UXVlcnknKVxuICAgICAgICAgICAgICAgIHJldHVybiBpbnZhbGlkUXVlcnlCdWlsZGVyKCdDYW5ub3QgdXNlIHdoZXJlIHdpdGggaW5zZXJ0Jyk7XG4gICAgICAgICAgICBpZiAoYXN0Ll90YWcgPT09ICdSb3dRdWVyeScpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGludmFsaWRRdWVyeUJ1aWxkZXIoJ0Nhbm5vdCB1c2Ugd2hlcmUgd2l0aCByb3cnKTtcbiAgICAgICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHByZWZlci1yZXN0LXBhcmFtc1xuICAgICAgICAgICAgICAgIGNvbnN0IHBhcmFtcyA9IGFyZ3VtZW50c1swXTtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdPcHMgPSBPYmplY3QuZW50cmllcyhwYXJhbXMpXG4gICAgICAgICAgICAgICAgICAgIC5maWx0ZXIoKFssIHZhbHVlXSkgPT4gdmFsdWUgIT09IHVuZGVmaW5lZClcbiAgICAgICAgICAgICAgICAgICAgLm1hcCgoW2NvbCwgdmFsdWVdKSA9PiBQcmVkaWNhdGUuaGFzUHJvcGVydHkodmFsdWUsICdvcCcpICYmIFByZWRpY2F0ZS5oYXNQcm9wZXJ0eSh2YWx1ZSwgJ3ZhbHVlJylcbiAgICAgICAgICAgICAgICAgICAgPyB7IGNvbCwgb3A6IHZhbHVlLm9wLCB2YWx1ZTogdmFsdWUudmFsdWUgfVxuICAgICAgICAgICAgICAgICAgICA6IHsgY29sLCBvcDogJz0nLCB2YWx1ZSB9KTtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGFzdC5fdGFnKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ0NvdW50UXVlcnknOlxuICAgICAgICAgICAgICAgICAgICBjYXNlICdTZWxlY3RRdWVyeSc6XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ1VwZGF0ZVF1ZXJ5JzpcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnRGVsZXRlUXVlcnknOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWFrZVF1ZXJ5QnVpbGRlcih0YWJsZURlZiwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLmFzdCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aGVyZTogWy4uLmFzdC53aGVyZSwgLi4ubmV3T3BzXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjYXNlc0hhbmRsZWQoYXN0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwcmVmZXItcmVzdC1wYXJhbXNcbiAgICAgICAgICAgIGNvbnN0IFtjb2wsIG9wT3JWYWx1ZSwgdmFsdWVPclVuZGVmaW5lZF0gPSBhcmd1bWVudHM7XG4gICAgICAgICAgICBjb25zdCBvcCA9IHZhbHVlT3JVbmRlZmluZWQgPT09IHVuZGVmaW5lZCA/ICc9JyA6IG9wT3JWYWx1ZTtcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gdmFsdWVPclVuZGVmaW5lZCA9PT0gdW5kZWZpbmVkID8gb3BPclZhbHVlIDogdmFsdWVPclVuZGVmaW5lZDtcbiAgICAgICAgICAgIHN3aXRjaCAoYXN0Ll90YWcpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdDb3VudFF1ZXJ5JzpcbiAgICAgICAgICAgICAgICBjYXNlICdTZWxlY3RRdWVyeSc6XG4gICAgICAgICAgICAgICAgY2FzZSAnVXBkYXRlUXVlcnknOlxuICAgICAgICAgICAgICAgIGNhc2UgJ0RlbGV0ZVF1ZXJ5Jzoge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWFrZVF1ZXJ5QnVpbGRlcih0YWJsZURlZiwge1xuICAgICAgICAgICAgICAgICAgICAgICAgLi4uYXN0LFxuICAgICAgICAgICAgICAgICAgICAgICAgd2hlcmU6IFsuLi5hc3Qud2hlcmUsIHsgY29sLCBvcCwgdmFsdWUgfV0sXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBkZWZhdWx0OiB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjYXNlc0hhbmRsZWQoYXN0KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwcmVmZXItYXJyb3cvcHJlZmVyLWFycm93LWZ1bmN0aW9uc1xuICAgICAgICBvcmRlckJ5KCkge1xuICAgICAgICAgICAgYXNzZXJ0U2VsZWN0UXVlcnlCdWlsZGVyQXN0KGFzdCk7XG4gICAgICAgICAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMCB8fCBhcmd1bWVudHMubGVuZ3RoID4gMilcbiAgICAgICAgICAgICAgICByZXR1cm4gaW52YWxpZFF1ZXJ5QnVpbGRlcigpO1xuICAgICAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcHJlZmVyLXJlc3QtcGFyYW1zXG4gICAgICAgICAgICAgICAgY29uc3QgcGFyYW1zID0gYXJndW1lbnRzWzBdO1xuICAgICAgICAgICAgICAgIHJldHVybiBtYWtlUXVlcnlCdWlsZGVyKHRhYmxlRGVmLCB7XG4gICAgICAgICAgICAgICAgICAgIC4uLmFzdCxcbiAgICAgICAgICAgICAgICAgICAgb3JkZXJCeTogWy4uLmFzdC5vcmRlckJ5LCAuLi5wYXJhbXNdLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHByZWZlci1yZXN0LXBhcmFtc1xuICAgICAgICAgICAgY29uc3QgW2NvbCwgZGlyZWN0aW9uXSA9IGFyZ3VtZW50cztcbiAgICAgICAgICAgIHJldHVybiBtYWtlUXVlcnlCdWlsZGVyKHRhYmxlRGVmLCB7XG4gICAgICAgICAgICAgICAgLi4uYXN0LFxuICAgICAgICAgICAgICAgIG9yZGVyQnk6IFsuLi5hc3Qub3JkZXJCeSwgeyBjb2wsIGRpcmVjdGlvbiB9XSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBsaW1pdDogKGxpbWl0KSA9PiB7XG4gICAgICAgICAgICBhc3NlcnRTZWxlY3RRdWVyeUJ1aWxkZXJBc3QoYXN0KTtcbiAgICAgICAgICAgIHJldHVybiBtYWtlUXVlcnlCdWlsZGVyKHRhYmxlRGVmLCB7IC4uLmFzdCwgbGltaXQ6IE9wdGlvbi5zb21lKGxpbWl0KSB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgb2Zmc2V0OiAob2Zmc2V0KSA9PiB7XG4gICAgICAgICAgICBhc3NlcnRTZWxlY3RRdWVyeUJ1aWxkZXJBc3QoYXN0KTtcbiAgICAgICAgICAgIHJldHVybiBtYWtlUXVlcnlCdWlsZGVyKHRhYmxlRGVmLCB7IC4uLmFzdCwgb2Zmc2V0OiBPcHRpb24uc29tZShvZmZzZXQpIH0pO1xuICAgICAgICB9LFxuICAgICAgICBjb3VudDogKCkgPT4ge1xuICAgICAgICAgICAgaWYgKGlzUm93UXVlcnkoYXN0KSB8fCBhc3QuX3RhZyA9PT0gJ0luc2VydFF1ZXJ5JyB8fCBhc3QuX3RhZyA9PT0gJ1VwZGF0ZVF1ZXJ5JyB8fCBhc3QuX3RhZyA9PT0gJ0RlbGV0ZVF1ZXJ5JylcbiAgICAgICAgICAgICAgICByZXR1cm4gaW52YWxpZFF1ZXJ5QnVpbGRlcigpO1xuICAgICAgICAgICAgcmV0dXJuIG1ha2VRdWVyeUJ1aWxkZXIodGFibGVEZWYsIHtcbiAgICAgICAgICAgICAgICBfdGFnOiAnQ291bnRRdWVyeScsXG4gICAgICAgICAgICAgICAgdGFibGVEZWYsXG4gICAgICAgICAgICAgICAgd2hlcmU6IGFzdC53aGVyZSxcbiAgICAgICAgICAgICAgICByZXN1bHRTY2hlbWE6IFNjaGVtYS5TdHJ1Y3QoeyBjb3VudDogU2NoZW1hLk51bWJlciB9KS5waXBlKFNjaGVtYS5wbHVjaygnY291bnQnKSwgU2NoZW1hLkFycmF5LCBTY2hlbWEuaGVhZE9yRWxzZSgpKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBmaXJzdDogKG9wdGlvbnMpID0+IHtcbiAgICAgICAgICAgIGFzc2VydFNlbGVjdFF1ZXJ5QnVpbGRlckFzdChhc3QpO1xuICAgICAgICAgICAgaWYgKGFzdC5saW1pdC5fdGFnID09PSAnU29tZScpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGludmFsaWRRdWVyeUJ1aWxkZXIoYC5maXJzdCgpIGNhbid0IGJlIGNhbGxlZCBhZnRlciAubGltaXQoKWApO1xuICAgICAgICAgICAgcmV0dXJuIG1ha2VRdWVyeUJ1aWxkZXIodGFibGVEZWYsIHtcbiAgICAgICAgICAgICAgICAuLi5hc3QsXG4gICAgICAgICAgICAgICAgbGltaXQ6IE9wdGlvbi5zb21lKDEpLFxuICAgICAgICAgICAgICAgIHBpY2tGaXJzdDogb3B0aW9ucz8uZmFsbGJhY2sgIT09IHVuZGVmaW5lZCAmJiBvcHRpb25zLmZhbGxiYWNrICE9PSAndGhyb3dzJyA/IHsgZmFsbGJhY2s6IG9wdGlvbnMuZmFsbGJhY2sgfSA6ICd0aHJvd3MnLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sXG4gICAgICAgIC8vIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwcmVmZXItYXJyb3cvcHJlZmVyLWFycm93LWZ1bmN0aW9uc1xuICAgICAgICAvLyBnZXRPckNyZWF0ZSgpIHtcbiAgICAgICAgLy8gICBpZiAodGFibGVEZWYub3B0aW9ucy5pc0NsaWVudERvY3VtZW50VGFibGUgPT09IGZhbHNlKSB7XG4gICAgICAgIC8vICAgICByZXR1cm4gaW52YWxpZFF1ZXJ5QnVpbGRlcihgZ2V0T3JDcmVhdGUoKSBpcyBub3QgYWxsb3dlZCB3aGVuIHRhYmxlIGlzIG5vdCBhIGNsaWVudCBkb2N1bWVudCB0YWJsZWApXG4gICAgICAgIC8vICAgfVxuICAgICAgICAvLyAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwcmVmZXItcmVzdC1wYXJhbXNcbiAgICAgICAgLy8gICBjb25zdCBwYXJhbXMgPSBbLi4uYXJndW1lbnRzXVxuICAgICAgICAvLyAgIGxldCBpZDogc3RyaW5nIHwgbnVtYmVyXG4gICAgICAgIC8vICAgLy8gVE9ETyByZWZhY3RvciB0byBoYW5kbGUgZGVmYXVsdCBpZFxuICAgICAgICAvLyAgIGlkID0gcGFyYW1zWzBdIGFzIHN0cmluZyB8IG51bWJlclxuICAgICAgICAvLyAgIGlmIChpZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIC8vICAgICBpbnZhbGlkUXVlcnlCdWlsZGVyKGBJZCBtaXNzaW5nIGZvciByb3cgcXVlcnkgb24gbm9uLXNpbmdsZXRvbiB0YWJsZSAke3RhYmxlRGVmLnNxbGl0ZURlZi5uYW1lfWApXG4gICAgICAgIC8vICAgfVxuICAgICAgICAvLyAgIC8vIFRPRE8gdmFsaWRhdGUgYWxsIHJlcXVpcmVkIGNvbHVtbnMgYXJlIHByZXNlbnQgYW5kIHZhbHVlcyBhcmUgbWF0Y2hpbmcgdGhlIHNjaGVtYVxuICAgICAgICAvLyAgIGNvbnN0IGluc2VydFZhbHVlczogUmVjb3JkPHN0cmluZywgdW5rbm93bj4gPSBwYXJhbXNbMV0/Lmluc2VydFZhbHVlcyA/PyB7fVxuICAgICAgICAvLyAgIHJldHVybiBtYWtlUXVlcnlCdWlsZGVyKHRhYmxlRGVmLCB7XG4gICAgICAgIC8vICAgICBfdGFnOiAnUm93UXVlcnknLFxuICAgICAgICAvLyAgICAgaWQsXG4gICAgICAgIC8vICAgICB0YWJsZURlZixcbiAgICAgICAgLy8gICAgIGluc2VydFZhbHVlcyxcbiAgICAgICAgLy8gICB9KSBhcyBhbnlcbiAgICAgICAgLy8gfSxcbiAgICAgICAgaW5zZXJ0OiAodmFsdWVzKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBmaWx0ZXJlZFZhbHVlcyA9IE9iamVjdC5mcm9tRW50cmllcyhPYmplY3QuZW50cmllcyh2YWx1ZXMpLmZpbHRlcigoWywgdmFsdWVdKSA9PiB2YWx1ZSAhPT0gdW5kZWZpbmVkKSk7XG4gICAgICAgICAgICByZXR1cm4gbWFrZVF1ZXJ5QnVpbGRlcih0YWJsZURlZiwge1xuICAgICAgICAgICAgICAgIF90YWc6ICdJbnNlcnRRdWVyeScsXG4gICAgICAgICAgICAgICAgdGFibGVEZWYsXG4gICAgICAgICAgICAgICAgdmFsdWVzOiBmaWx0ZXJlZFZhbHVlcyxcbiAgICAgICAgICAgICAgICBvbkNvbmZsaWN0OiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgcmV0dXJuaW5nOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgcmVzdWx0U2NoZW1hOiBTY2hlbWEuVm9pZCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBvbkNvbmZsaWN0OiAodGFyZ2V0T3JUYXJnZXRzLCBhY3Rpb24sIHVwZGF0ZVZhbHVlcykgPT4ge1xuICAgICAgICAgICAgY29uc3QgdGFyZ2V0cyA9IEFycmF5LmlzQXJyYXkodGFyZ2V0T3JUYXJnZXRzKSA/IHRhcmdldE9yVGFyZ2V0cyA6IFt0YXJnZXRPclRhcmdldHNdO1xuICAgICAgICAgICAgYXNzZXJ0SW5zZXJ0UXVlcnlCdWlsZGVyQXN0KGFzdCk7XG4gICAgICAgICAgICBjb25zdCBvbkNvbmZsaWN0ID0gTWF0Y2gudmFsdWUoYWN0aW9uKS5waXBlKE1hdGNoLndoZW4oJ2lnbm9yZScsICgpID0+ICh7IHRhcmdldHMsIGFjdGlvbjogeyBfdGFnOiAnaWdub3JlJyB9IH0pKSwgTWF0Y2gud2hlbigncmVwbGFjZScsICgpID0+ICh7IHRhcmdldHMsIGFjdGlvbjogeyBfdGFnOiAncmVwbGFjZScgfSB9KSksIE1hdGNoLndoZW4oJ3VwZGF0ZScsICgpID0+ICh7IHRhcmdldHMsIGFjdGlvbjogeyBfdGFnOiAndXBkYXRlJywgdXBkYXRlOiB1cGRhdGVWYWx1ZXMgfSB9KSksIE1hdGNoLmV4aGF1c3RpdmUpO1xuICAgICAgICAgICAgcmV0dXJuIG1ha2VRdWVyeUJ1aWxkZXIodGFibGVEZWYsIHtcbiAgICAgICAgICAgICAgICAuLi5hc3QsXG4gICAgICAgICAgICAgICAgb25Db25mbGljdCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICByZXR1cm5pbmc6ICguLi5jb2x1bW5zKSA9PiB7XG4gICAgICAgICAgICBhc3NlcnRXcml0ZVF1ZXJ5QnVpbGRlckFzdChhc3QpO1xuICAgICAgICAgICAgcmV0dXJuIG1ha2VRdWVyeUJ1aWxkZXIodGFibGVEZWYsIHtcbiAgICAgICAgICAgICAgICAuLi5hc3QsXG4gICAgICAgICAgICAgICAgcmV0dXJuaW5nOiBjb2x1bW5zLFxuICAgICAgICAgICAgICAgIHJlc3VsdFNjaGVtYTogdGFibGVEZWYucm93U2NoZW1hLnBpcGUoU2NoZW1hLnBpY2soLi4uY29sdW1ucyksIFNjaGVtYS5BcnJheSksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSxcbiAgICAgICAgdXBkYXRlOiAodmFsdWVzKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBmaWx0ZXJlZFZhbHVlcyA9IE9iamVjdC5mcm9tRW50cmllcyhPYmplY3QuZW50cmllcyh2YWx1ZXMpLmZpbHRlcigoWywgdmFsdWVdKSA9PiB2YWx1ZSAhPT0gdW5kZWZpbmVkKSk7XG4gICAgICAgICAgICByZXR1cm4gbWFrZVF1ZXJ5QnVpbGRlcih0YWJsZURlZiwge1xuICAgICAgICAgICAgICAgIF90YWc6ICdVcGRhdGVRdWVyeScsXG4gICAgICAgICAgICAgICAgdGFibGVEZWYsXG4gICAgICAgICAgICAgICAgdmFsdWVzOiBmaWx0ZXJlZFZhbHVlcyxcbiAgICAgICAgICAgICAgICB3aGVyZTogW10sXG4gICAgICAgICAgICAgICAgcmV0dXJuaW5nOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgcmVzdWx0U2NoZW1hOiBTY2hlbWEuVm9pZCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgICAgICBkZWxldGU6ICgpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBtYWtlUXVlcnlCdWlsZGVyKHRhYmxlRGVmLCB7XG4gICAgICAgICAgICAgICAgX3RhZzogJ0RlbGV0ZVF1ZXJ5JyxcbiAgICAgICAgICAgICAgICB0YWJsZURlZixcbiAgICAgICAgICAgICAgICB3aGVyZTogW10sXG4gICAgICAgICAgICAgICAgcmV0dXJuaW5nOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgcmVzdWx0U2NoZW1hOiBTY2hlbWEuVm9pZCxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9LFxuICAgIH07XG4gICAgcmV0dXJuIHtcbiAgICAgICAgW1F1ZXJ5QnVpbGRlclR5cGVJZF06IFF1ZXJ5QnVpbGRlclR5cGVJZCxcbiAgICAgICAgW1F1ZXJ5QnVpbGRlckFzdFN5bWJvbF06IGFzdCxcbiAgICAgICAgWydSZXN1bHRUeXBlJ106ICdvbmx5LWZvci10eXBlLWluZmVyZW5jZScsXG4gICAgICAgIGFzU3FsOiAoKSA9PiBhc3RUb1NxbChhc3QpLFxuICAgICAgICB0b1N0cmluZzogKCkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYXN0VG9TcWwoYXN0KS5xdWVyeTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChjYXVzZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoYFF1ZXJ5QnVpbGRlci50b1N0cmluZygpOiBFcnJvciBjb252ZXJ0aW5nIHF1ZXJ5IGJ1aWxkZXIgdG8gc3RyaW5nYCwgY2F1c2UsIGFzdCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGBFcnJvciBjb252ZXJ0aW5nIHF1ZXJ5IGJ1aWxkZXIgdG8gc3RyaW5nYDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgLi4uYXBpLFxuICAgIH07XG59O1xuY29uc3QgZW1wdHlBc3QgPSAodGFibGVEZWYpID0+ICh7XG4gICAgX3RhZzogJ1NlbGVjdFF1ZXJ5JyxcbiAgICBjb2x1bW5zOiBbXSxcbiAgICBwaWNrRmlyc3Q6IGZhbHNlLFxuICAgIHNlbGVjdDogeyBjb2x1bW5zOiBbXSB9LFxuICAgIG9yZGVyQnk6IFtdLFxuICAgIG9mZnNldDogT3B0aW9uLm5vbmUoKSxcbiAgICBsaW1pdDogT3B0aW9uLm5vbmUoKSxcbiAgICB0YWJsZURlZixcbiAgICB3aGVyZTogW10sXG4gICAgcmVzdWx0U2NoZW1hU2luZ2xlOiB0YWJsZURlZi5yb3dTY2hlbWEsXG59KTtcbi8vIEhlbHBlciBmdW5jdGlvbnNcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBwcmVmZXItYXJyb3cvcHJlZmVyLWFycm93LWZ1bmN0aW9uc1xuZnVuY3Rpb24gYXNzZXJ0U2VsZWN0UXVlcnlCdWlsZGVyQXN0KGFzdCkge1xuICAgIGlmIChhc3QuX3RhZyAhPT0gJ1NlbGVjdFF1ZXJ5Jykge1xuICAgICAgICByZXR1cm4gc2hvdWxkTmV2ZXJIYXBwZW4oJ0V4cGVjdGVkIFNlbGVjdFF1ZXJ5IGJ1dCBnb3QgJyArIGFzdC5fdGFnKTtcbiAgICB9XG59XG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcHJlZmVyLWFycm93L3ByZWZlci1hcnJvdy1mdW5jdGlvbnNcbmZ1bmN0aW9uIGFzc2VydEluc2VydFF1ZXJ5QnVpbGRlckFzdChhc3QpIHtcbiAgICBpZiAoYXN0Ll90YWcgIT09ICdJbnNlcnRRdWVyeScpIHtcbiAgICAgICAgcmV0dXJuIHNob3VsZE5ldmVySGFwcGVuKCdFeHBlY3RlZCBJbnNlcnRRdWVyeSBidXQgZ290ICcgKyBhc3QuX3RhZyk7XG4gICAgfVxufVxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHByZWZlci1hcnJvdy9wcmVmZXItYXJyb3ctZnVuY3Rpb25zXG5mdW5jdGlvbiBhc3NlcnRXcml0ZVF1ZXJ5QnVpbGRlckFzdChhc3QpIHtcbiAgICBpZiAoYXN0Ll90YWcgIT09ICdJbnNlcnRRdWVyeScgJiYgYXN0Ll90YWcgIT09ICdVcGRhdGVRdWVyeScgJiYgYXN0Ll90YWcgIT09ICdEZWxldGVRdWVyeScpIHtcbiAgICAgICAgcmV0dXJuIHNob3VsZE5ldmVySGFwcGVuKCdFeHBlY3RlZCBXcml0ZVF1ZXJ5IGJ1dCBnb3QgJyArIGFzdC5fdGFnKTtcbiAgICB9XG59XG5jb25zdCBpc1Jvd1F1ZXJ5ID0gKGFzdCkgPT4gYXN0Ll90YWcgPT09ICdSb3dRdWVyeSc7XG5leHBvcnQgY29uc3QgaW52YWxpZFF1ZXJ5QnVpbGRlciA9IChtc2cpID0+IHtcbiAgICByZXR1cm4gc2hvdWxkTmV2ZXJIYXBwZW4oJ0ludmFsaWQgcXVlcnkgYnVpbGRlcicgKyAobXNnID8gYDogJHttc2d9YCA6ICcnKSk7XG59O1xuZXhwb3J0IGNvbnN0IGdldFJlc3VsdFNjaGVtYSA9IChxYikgPT4ge1xuICAgIGNvbnN0IHF1ZXJ5QXN0ID0gcWJbUXVlcnlCdWlsZGVyQXN0U3ltYm9sXTtcbiAgICBzd2l0Y2ggKHF1ZXJ5QXN0Ll90YWcpIHtcbiAgICAgICAgY2FzZSAnU2VsZWN0UXVlcnknOiB7XG4gICAgICAgICAgICBjb25zdCBhcnJheVNjaGVtYSA9IFNjaGVtYS5BcnJheShxdWVyeUFzdC5yZXN1bHRTY2hlbWFTaW5nbGUpO1xuICAgICAgICAgICAgaWYgKHF1ZXJ5QXN0LnBpY2tGaXJzdCA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gYXJyYXlTY2hlbWE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChxdWVyeUFzdC5waWNrRmlyc3QgPT09ICd0aHJvd3MnKSB7XG4gICAgICAgICAgICAgICAgLy8gV2lsbCB0aHJvdyBpZiB0aGUgYXJyYXkgaXMgZW1wdHlcbiAgICAgICAgICAgICAgICByZXR1cm4gYXJyYXlTY2hlbWEucGlwZShTY2hlbWEuaGVhZE9yRWxzZSgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZhbGxiYWNrVmFsdWUgPSBxdWVyeUFzdC5waWNrRmlyc3QuZmFsbGJhY2soKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gU2NoZW1hLlVuaW9uKGFycmF5U2NoZW1hLCBTY2hlbWEuVHVwbGUoU2NoZW1hLkxpdGVyYWwoZmFsbGJhY2tWYWx1ZSkpKS5waXBlKFNjaGVtYS5oZWFkT3JFbHNlKCgpID0+IGZhbGxiYWNrVmFsdWUpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXNlICdDb3VudFF1ZXJ5Jzoge1xuICAgICAgICAgICAgcmV0dXJuIFNjaGVtYS5TdHJ1Y3QoeyBjb3VudDogU2NoZW1hLk51bWJlciB9KS5waXBlKFNjaGVtYS5wbHVjaygnY291bnQnKSwgU2NoZW1hLkFycmF5LCBTY2hlbWEuaGVhZE9yRWxzZSgpKTtcbiAgICAgICAgfVxuICAgICAgICBjYXNlICdJbnNlcnRRdWVyeSc6XG4gICAgICAgIGNhc2UgJ1VwZGF0ZVF1ZXJ5JzpcbiAgICAgICAgY2FzZSAnRGVsZXRlUXVlcnknOiB7XG4gICAgICAgICAgICAvLyBGb3Igd3JpdGUgb3BlcmF0aW9ucyB3aXRoIFJFVFVSTklORyBjbGF1c2UsIHdlIG5lZWQgdG8gcmV0dXJuIHRoZSBhcHByb3ByaWF0ZSBzY2hlbWFcbiAgICAgICAgICAgIGlmIChxdWVyeUFzdC5yZXR1cm5pbmcgJiYgcXVlcnlBc3QucmV0dXJuaW5nLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAvLyBDcmVhdGUgYSBzY2hlbWEgZm9yIHRoZSByZXR1cm5lZCBjb2x1bW5zXG4gICAgICAgICAgICAgICAgcmV0dXJuIHF1ZXJ5QXN0LnRhYmxlRGVmLnJvd1NjaGVtYS5waXBlKFNjaGVtYS5waWNrKC4uLnF1ZXJ5QXN0LnJldHVybmluZyksIFNjaGVtYS5BcnJheSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBGb3Igd3JpdGUgb3BlcmF0aW9ucyB3aXRob3V0IFJFVFVSTklORywgdGhlIHJlc3VsdCBpcyB0aGUgbnVtYmVyIG9mIGFmZmVjdGVkIHJvd3NcbiAgICAgICAgICAgIHJldHVybiBTY2hlbWEuTnVtYmVyO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgJ1Jvd1F1ZXJ5Jzoge1xuICAgICAgICAgICAgcmV0dXJuIHF1ZXJ5QXN0LnRhYmxlRGVmLnJvd1NjaGVtYS5waXBlKFNjaGVtYS5wbHVjaygndmFsdWUnKSwgU2NoZW1hLmFubm90YXRpb25zKHsgdGl0bGU6IGAke3F1ZXJ5QXN0LnRhYmxlRGVmLnNxbGl0ZURlZi5uYW1lfS52YWx1ZWAgfSksIFNjaGVtYS5BcnJheSwgU2NoZW1hLmhlYWRPckVsc2UoKSk7XG4gICAgICAgIH1cbiAgICAgICAgZGVmYXVsdDoge1xuICAgICAgICAgICAgY2FzZXNIYW5kbGVkKHF1ZXJ5QXN0KTtcbiAgICAgICAgfVxuICAgIH1cbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbXBsLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/node_modules/@livestore/common/dist/schema/state/sqlite/query-builder/impl.js\n");

/***/ }),

/***/ "(rsc)/./src/node_modules/@livestore/common/dist/schema/state/sqlite/system-tables.js":
/*!**************************************************************************************!*\
  !*** ./src/node_modules/@livestore/common/dist/schema/state/sqlite/system-tables.js ***!
  \**************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   EVENTLOG_META_TABLE: () => (/* binding */ EVENTLOG_META_TABLE),\n/* harmony export */   LEADER_MERGE_COUNTER_TABLE: () => (/* binding */ LEADER_MERGE_COUNTER_TABLE),\n/* harmony export */   SCHEMA_EVENT_DEFS_META_TABLE: () => (/* binding */ SCHEMA_EVENT_DEFS_META_TABLE),\n/* harmony export */   SCHEMA_META_TABLE: () => (/* binding */ SCHEMA_META_TABLE),\n/* harmony export */   SESSION_CHANGESET_META_TABLE: () => (/* binding */ SESSION_CHANGESET_META_TABLE),\n/* harmony export */   SYNC_STATUS_TABLE: () => (/* binding */ SYNC_STATUS_TABLE),\n/* harmony export */   eventlogMetaTable: () => (/* binding */ eventlogMetaTable),\n/* harmony export */   eventlogSystemTables: () => (/* binding */ eventlogSystemTables),\n/* harmony export */   isStateSystemTable: () => (/* binding */ isStateSystemTable),\n/* harmony export */   leaderMergeCounterTable: () => (/* binding */ leaderMergeCounterTable),\n/* harmony export */   schemaEventDefsMetaTable: () => (/* binding */ schemaEventDefsMetaTable),\n/* harmony export */   schemaMetaTable: () => (/* binding */ schemaMetaTable),\n/* harmony export */   sessionChangesetMetaTable: () => (/* binding */ sessionChangesetMetaTable),\n/* harmony export */   stateSystemTables: () => (/* binding */ stateSystemTables),\n/* harmony export */   syncStatusTable: () => (/* binding */ syncStatusTable)\n/* harmony export */ });\n/* harmony import */ var _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @livestore/utils/effect */ \"(rsc)/./src/node_modules/effect/dist/esm/Schema.js\");\n/* harmony import */ var _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @livestore/utils/effect */ \"(rsc)/./src/node_modules/@livestore/utils/dist/effect/Schema/index.js\");\n/* harmony import */ var _EventSequenceNumber_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../EventSequenceNumber.js */ \"(rsc)/./src/node_modules/@livestore/common/dist/schema/EventSequenceNumber.js\");\n/* harmony import */ var _db_schema_mod_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./db-schema/mod.js */ \"(rsc)/./src/node_modules/@livestore/common/dist/schema/state/sqlite/db-schema/dsl/field-defs.js\");\n/* harmony import */ var _table_def_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./table-def.js */ \"(rsc)/./src/node_modules/@livestore/common/dist/schema/state/sqlite/table-def.js\");\n\n\n\n\n/// Read model DB\nconst SCHEMA_META_TABLE = '__livestore_schema';\nconst schemaMetaTable = (0,_table_def_js__WEBPACK_IMPORTED_MODULE_0__.table)({\n    name: SCHEMA_META_TABLE,\n    columns: {\n        tableName: _db_schema_mod_js__WEBPACK_IMPORTED_MODULE_1__.text({ primaryKey: true }),\n        schemaHash: _db_schema_mod_js__WEBPACK_IMPORTED_MODULE_1__.integer({ nullable: false }),\n        /** ISO date format */\n        updatedAt: _db_schema_mod_js__WEBPACK_IMPORTED_MODULE_1__.text({ nullable: false }),\n    },\n});\nconst SCHEMA_EVENT_DEFS_META_TABLE = '__livestore_schema_event_defs';\nconst schemaEventDefsMetaTable = (0,_table_def_js__WEBPACK_IMPORTED_MODULE_0__.table)({\n    name: SCHEMA_EVENT_DEFS_META_TABLE,\n    columns: {\n        eventName: _db_schema_mod_js__WEBPACK_IMPORTED_MODULE_1__.text({ primaryKey: true }),\n        schemaHash: _db_schema_mod_js__WEBPACK_IMPORTED_MODULE_1__.integer({ nullable: false }),\n        /** ISO date format */\n        updatedAt: _db_schema_mod_js__WEBPACK_IMPORTED_MODULE_1__.text({ nullable: false }),\n    },\n});\n/**\n * Table which stores SQLite changeset blobs which is used for rolling back\n * read-model state during rebasing.\n */\nconst SESSION_CHANGESET_META_TABLE = '__livestore_session_changeset';\nconst sessionChangesetMetaTable = (0,_table_def_js__WEBPACK_IMPORTED_MODULE_0__.table)({\n    name: SESSION_CHANGESET_META_TABLE,\n    columns: {\n        // TODO bring back primary key\n        seqNumGlobal: _db_schema_mod_js__WEBPACK_IMPORTED_MODULE_1__.integer({ schema: _EventSequenceNumber_js__WEBPACK_IMPORTED_MODULE_2__.GlobalEventSequenceNumber }),\n        seqNumClient: _db_schema_mod_js__WEBPACK_IMPORTED_MODULE_1__.integer({ schema: _EventSequenceNumber_js__WEBPACK_IMPORTED_MODULE_2__.ClientEventSequenceNumber }),\n        changeset: _db_schema_mod_js__WEBPACK_IMPORTED_MODULE_1__.blob({ nullable: true }),\n        debug: _db_schema_mod_js__WEBPACK_IMPORTED_MODULE_1__.json({ nullable: true }),\n    },\n    indexes: [{ columns: ['seqNumGlobal', 'seqNumClient'], name: 'idx_session_changeset_id' }],\n});\nconst LEADER_MERGE_COUNTER_TABLE = '__livestore_leader_merge_counter';\n// TODO get rid of this table in favour of client-only merge generation\nconst leaderMergeCounterTable = (0,_table_def_js__WEBPACK_IMPORTED_MODULE_0__.table)({\n    name: LEADER_MERGE_COUNTER_TABLE,\n    columns: {\n        id: _db_schema_mod_js__WEBPACK_IMPORTED_MODULE_1__.integer({ primaryKey: true, schema: _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_3__.Literal(0) }),\n        mergeCounter: _db_schema_mod_js__WEBPACK_IMPORTED_MODULE_1__.integer({ primaryKey: true }),\n    },\n});\nconst stateSystemTables = [\n    schemaMetaTable,\n    schemaEventDefsMetaTable,\n    sessionChangesetMetaTable,\n    leaderMergeCounterTable,\n];\nconst isStateSystemTable = (tableName) => stateSystemTables.some((_) => _.sqliteDef.name === tableName);\n/// Eventlog DB\nconst EVENTLOG_META_TABLE = 'eventlog';\nconst eventlogMetaTable = (0,_table_def_js__WEBPACK_IMPORTED_MODULE_0__.table)({\n    name: EVENTLOG_META_TABLE,\n    columns: {\n        // TODO Adjust modeling so a global event never needs a client id component\n        seqNumGlobal: _db_schema_mod_js__WEBPACK_IMPORTED_MODULE_1__.integer({ primaryKey: true, schema: _EventSequenceNumber_js__WEBPACK_IMPORTED_MODULE_2__.GlobalEventSequenceNumber }),\n        seqNumClient: _db_schema_mod_js__WEBPACK_IMPORTED_MODULE_1__.integer({ primaryKey: true, schema: _EventSequenceNumber_js__WEBPACK_IMPORTED_MODULE_2__.ClientEventSequenceNumber }),\n        parentSeqNumGlobal: _db_schema_mod_js__WEBPACK_IMPORTED_MODULE_1__.integer({ schema: _EventSequenceNumber_js__WEBPACK_IMPORTED_MODULE_2__.GlobalEventSequenceNumber }),\n        parentSeqNumClient: _db_schema_mod_js__WEBPACK_IMPORTED_MODULE_1__.integer({ schema: _EventSequenceNumber_js__WEBPACK_IMPORTED_MODULE_2__.ClientEventSequenceNumber }),\n        name: _db_schema_mod_js__WEBPACK_IMPORTED_MODULE_1__.text({}),\n        argsJson: _db_schema_mod_js__WEBPACK_IMPORTED_MODULE_1__.text({ schema: _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_3__.parseJson(_livestore_utils_effect__WEBPACK_IMPORTED_MODULE_3__.Any) }),\n        clientId: _db_schema_mod_js__WEBPACK_IMPORTED_MODULE_1__.text({}),\n        sessionId: _db_schema_mod_js__WEBPACK_IMPORTED_MODULE_1__.text({}),\n        schemaHash: _db_schema_mod_js__WEBPACK_IMPORTED_MODULE_1__.integer({}),\n        syncMetadataJson: _db_schema_mod_js__WEBPACK_IMPORTED_MODULE_1__.text({ schema: _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_3__.parseJson(_livestore_utils_effect__WEBPACK_IMPORTED_MODULE_3__.Option(_livestore_utils_effect__WEBPACK_IMPORTED_MODULE_4__.JsonValue)) }),\n    },\n    indexes: [\n        { columns: ['seqNumGlobal'], name: 'idx_eventlog_seqNumGlobal' },\n        { columns: ['seqNumGlobal', 'seqNumClient'], name: 'idx_eventlog_seqNum' },\n    ],\n});\nconst SYNC_STATUS_TABLE = '__livestore_sync_status';\nconst syncStatusTable = (0,_table_def_js__WEBPACK_IMPORTED_MODULE_0__.table)({\n    name: SYNC_STATUS_TABLE,\n    columns: {\n        head: _db_schema_mod_js__WEBPACK_IMPORTED_MODULE_1__.integer({ primaryKey: true }),\n    },\n});\nconst eventlogSystemTables = [eventlogMetaTable, syncStatusTable];\n//# sourceMappingURL=system-tables.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbm9kZV9tb2R1bGVzL0BsaXZlc3RvcmUvY29tbW9uL2Rpc3Qvc2NoZW1hL3N0YXRlL3NxbGl0ZS9zeXN0ZW0tdGFibGVzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQWlEO0FBQ21CO0FBQ3JCO0FBQ1I7QUFDdkM7QUFDTztBQUNBLHdCQUF3QixvREFBSztBQUNwQztBQUNBO0FBQ0EsbUJBQW1CLG1EQUFjLEdBQUcsa0JBQWtCO0FBQ3RELG9CQUFvQixzREFBaUIsR0FBRyxpQkFBaUI7QUFDekQ7QUFDQSxtQkFBbUIsbURBQWMsR0FBRyxpQkFBaUI7QUFDckQsS0FBSztBQUNMLENBQUM7QUFDTTtBQUNBLGlDQUFpQyxvREFBSztBQUM3QztBQUNBO0FBQ0EsbUJBQW1CLG1EQUFjLEdBQUcsa0JBQWtCO0FBQ3RELG9CQUFvQixzREFBaUIsR0FBRyxpQkFBaUI7QUFDekQ7QUFDQSxtQkFBbUIsbURBQWMsR0FBRyxpQkFBaUI7QUFDckQsS0FBSztBQUNMLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ0Esa0NBQWtDLG9EQUFLO0FBQzlDO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQixzREFBaUIsR0FBRyxRQUFRLDhFQUE2QyxFQUFFO0FBQ2pHLHNCQUFzQixzREFBaUIsR0FBRyxRQUFRLDhFQUE2QyxFQUFFO0FBQ2pHLG1CQUFtQixtREFBYyxHQUFHLGdCQUFnQjtBQUNwRCxlQUFlLG1EQUFjLEdBQUcsZ0JBQWdCO0FBQ2hELEtBQUs7QUFDTCxnQkFBZ0IsNkVBQTZFO0FBQzdGLENBQUM7QUFDTTtBQUNQO0FBQ08sZ0NBQWdDLG9EQUFLO0FBQzVDO0FBQ0E7QUFDQSxZQUFZLHNEQUFpQixHQUFHLDBCQUEwQiw0REFBYyxLQUFLO0FBQzdFLHNCQUFzQixzREFBaUIsR0FBRyxrQkFBa0I7QUFDNUQsS0FBSztBQUNMLENBQUM7QUFDTTtBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ087QUFDQSwwQkFBMEIsb0RBQUs7QUFDdEM7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCLHNEQUFpQixHQUFHLDBCQUEwQiw4RUFBNkMsRUFBRTtBQUNuSCxzQkFBc0Isc0RBQWlCLEdBQUcsMEJBQTBCLDhFQUE2QyxFQUFFO0FBQ25ILDRCQUE0QixzREFBaUIsR0FBRyxRQUFRLDhFQUE2QyxFQUFFO0FBQ3ZHLDRCQUE0QixzREFBaUIsR0FBRyxRQUFRLDhFQUE2QyxFQUFFO0FBQ3ZHLGNBQWMsbURBQWMsR0FBRztBQUMvQixrQkFBa0IsbURBQWMsR0FBRyxRQUFRLDhEQUFnQixDQUFDLHdEQUFVLEdBQUc7QUFDekUsa0JBQWtCLG1EQUFjLEdBQUc7QUFDbkMsbUJBQW1CLG1EQUFjLEdBQUc7QUFDcEMsb0JBQW9CLHNEQUFpQixHQUFHO0FBQ3hDLDBCQUEwQixtREFBYyxHQUFHLFFBQVEsOERBQWdCLENBQUMsMkRBQWEsQ0FBQyw4REFBZ0IsSUFBSTtBQUN0RyxLQUFLO0FBQ0w7QUFDQSxVQUFVLDhEQUE4RDtBQUN4RSxVQUFVLHdFQUF3RTtBQUNsRjtBQUNBLENBQUM7QUFDTTtBQUNBLHdCQUF3QixvREFBSztBQUNwQztBQUNBO0FBQ0EsY0FBYyxzREFBaUIsR0FBRyxrQkFBa0I7QUFDcEQsS0FBSztBQUNMLENBQUM7QUFDTTtBQUNQIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYW5hY29uZGEtYXNzZXNtZW50LTEvLi9zcmMvbm9kZV9tb2R1bGVzL0BsaXZlc3RvcmUvY29tbW9uL2Rpc3Qvc2NoZW1hL3N0YXRlL3NxbGl0ZS9zeXN0ZW0tdGFibGVzLmpzP2NkYjciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU2NoZW1hIH0gZnJvbSAnQGxpdmVzdG9yZS91dGlscy9lZmZlY3QnO1xuaW1wb3J0ICogYXMgRXZlbnRTZXF1ZW5jZU51bWJlciBmcm9tICcuLi8uLi9FdmVudFNlcXVlbmNlTnVtYmVyLmpzJztcbmltcG9ydCB7IFNxbGl0ZURzbCB9IGZyb20gJy4vZGItc2NoZW1hL21vZC5qcyc7XG5pbXBvcnQgeyB0YWJsZSB9IGZyb20gJy4vdGFibGUtZGVmLmpzJztcbi8vLyBSZWFkIG1vZGVsIERCXG5leHBvcnQgY29uc3QgU0NIRU1BX01FVEFfVEFCTEUgPSAnX19saXZlc3RvcmVfc2NoZW1hJztcbmV4cG9ydCBjb25zdCBzY2hlbWFNZXRhVGFibGUgPSB0YWJsZSh7XG4gICAgbmFtZTogU0NIRU1BX01FVEFfVEFCTEUsXG4gICAgY29sdW1uczoge1xuICAgICAgICB0YWJsZU5hbWU6IFNxbGl0ZURzbC50ZXh0KHsgcHJpbWFyeUtleTogdHJ1ZSB9KSxcbiAgICAgICAgc2NoZW1hSGFzaDogU3FsaXRlRHNsLmludGVnZXIoeyBudWxsYWJsZTogZmFsc2UgfSksXG4gICAgICAgIC8qKiBJU08gZGF0ZSBmb3JtYXQgKi9cbiAgICAgICAgdXBkYXRlZEF0OiBTcWxpdGVEc2wudGV4dCh7IG51bGxhYmxlOiBmYWxzZSB9KSxcbiAgICB9LFxufSk7XG5leHBvcnQgY29uc3QgU0NIRU1BX0VWRU5UX0RFRlNfTUVUQV9UQUJMRSA9ICdfX2xpdmVzdG9yZV9zY2hlbWFfZXZlbnRfZGVmcyc7XG5leHBvcnQgY29uc3Qgc2NoZW1hRXZlbnREZWZzTWV0YVRhYmxlID0gdGFibGUoe1xuICAgIG5hbWU6IFNDSEVNQV9FVkVOVF9ERUZTX01FVEFfVEFCTEUsXG4gICAgY29sdW1uczoge1xuICAgICAgICBldmVudE5hbWU6IFNxbGl0ZURzbC50ZXh0KHsgcHJpbWFyeUtleTogdHJ1ZSB9KSxcbiAgICAgICAgc2NoZW1hSGFzaDogU3FsaXRlRHNsLmludGVnZXIoeyBudWxsYWJsZTogZmFsc2UgfSksXG4gICAgICAgIC8qKiBJU08gZGF0ZSBmb3JtYXQgKi9cbiAgICAgICAgdXBkYXRlZEF0OiBTcWxpdGVEc2wudGV4dCh7IG51bGxhYmxlOiBmYWxzZSB9KSxcbiAgICB9LFxufSk7XG4vKipcbiAqIFRhYmxlIHdoaWNoIHN0b3JlcyBTUUxpdGUgY2hhbmdlc2V0IGJsb2JzIHdoaWNoIGlzIHVzZWQgZm9yIHJvbGxpbmcgYmFja1xuICogcmVhZC1tb2RlbCBzdGF0ZSBkdXJpbmcgcmViYXNpbmcuXG4gKi9cbmV4cG9ydCBjb25zdCBTRVNTSU9OX0NIQU5HRVNFVF9NRVRBX1RBQkxFID0gJ19fbGl2ZXN0b3JlX3Nlc3Npb25fY2hhbmdlc2V0JztcbmV4cG9ydCBjb25zdCBzZXNzaW9uQ2hhbmdlc2V0TWV0YVRhYmxlID0gdGFibGUoe1xuICAgIG5hbWU6IFNFU1NJT05fQ0hBTkdFU0VUX01FVEFfVEFCTEUsXG4gICAgY29sdW1uczoge1xuICAgICAgICAvLyBUT0RPIGJyaW5nIGJhY2sgcHJpbWFyeSBrZXlcbiAgICAgICAgc2VxTnVtR2xvYmFsOiBTcWxpdGVEc2wuaW50ZWdlcih7IHNjaGVtYTogRXZlbnRTZXF1ZW5jZU51bWJlci5HbG9iYWxFdmVudFNlcXVlbmNlTnVtYmVyIH0pLFxuICAgICAgICBzZXFOdW1DbGllbnQ6IFNxbGl0ZURzbC5pbnRlZ2VyKHsgc2NoZW1hOiBFdmVudFNlcXVlbmNlTnVtYmVyLkNsaWVudEV2ZW50U2VxdWVuY2VOdW1iZXIgfSksXG4gICAgICAgIGNoYW5nZXNldDogU3FsaXRlRHNsLmJsb2IoeyBudWxsYWJsZTogdHJ1ZSB9KSxcbiAgICAgICAgZGVidWc6IFNxbGl0ZURzbC5qc29uKHsgbnVsbGFibGU6IHRydWUgfSksXG4gICAgfSxcbiAgICBpbmRleGVzOiBbeyBjb2x1bW5zOiBbJ3NlcU51bUdsb2JhbCcsICdzZXFOdW1DbGllbnQnXSwgbmFtZTogJ2lkeF9zZXNzaW9uX2NoYW5nZXNldF9pZCcgfV0sXG59KTtcbmV4cG9ydCBjb25zdCBMRUFERVJfTUVSR0VfQ09VTlRFUl9UQUJMRSA9ICdfX2xpdmVzdG9yZV9sZWFkZXJfbWVyZ2VfY291bnRlcic7XG4vLyBUT0RPIGdldCByaWQgb2YgdGhpcyB0YWJsZSBpbiBmYXZvdXIgb2YgY2xpZW50LW9ubHkgbWVyZ2UgZ2VuZXJhdGlvblxuZXhwb3J0IGNvbnN0IGxlYWRlck1lcmdlQ291bnRlclRhYmxlID0gdGFibGUoe1xuICAgIG5hbWU6IExFQURFUl9NRVJHRV9DT1VOVEVSX1RBQkxFLFxuICAgIGNvbHVtbnM6IHtcbiAgICAgICAgaWQ6IFNxbGl0ZURzbC5pbnRlZ2VyKHsgcHJpbWFyeUtleTogdHJ1ZSwgc2NoZW1hOiBTY2hlbWEuTGl0ZXJhbCgwKSB9KSxcbiAgICAgICAgbWVyZ2VDb3VudGVyOiBTcWxpdGVEc2wuaW50ZWdlcih7IHByaW1hcnlLZXk6IHRydWUgfSksXG4gICAgfSxcbn0pO1xuZXhwb3J0IGNvbnN0IHN0YXRlU3lzdGVtVGFibGVzID0gW1xuICAgIHNjaGVtYU1ldGFUYWJsZSxcbiAgICBzY2hlbWFFdmVudERlZnNNZXRhVGFibGUsXG4gICAgc2Vzc2lvbkNoYW5nZXNldE1ldGFUYWJsZSxcbiAgICBsZWFkZXJNZXJnZUNvdW50ZXJUYWJsZSxcbl07XG5leHBvcnQgY29uc3QgaXNTdGF0ZVN5c3RlbVRhYmxlID0gKHRhYmxlTmFtZSkgPT4gc3RhdGVTeXN0ZW1UYWJsZXMuc29tZSgoXykgPT4gXy5zcWxpdGVEZWYubmFtZSA9PT0gdGFibGVOYW1lKTtcbi8vLyBFdmVudGxvZyBEQlxuZXhwb3J0IGNvbnN0IEVWRU5UTE9HX01FVEFfVEFCTEUgPSAnZXZlbnRsb2cnO1xuZXhwb3J0IGNvbnN0IGV2ZW50bG9nTWV0YVRhYmxlID0gdGFibGUoe1xuICAgIG5hbWU6IEVWRU5UTE9HX01FVEFfVEFCTEUsXG4gICAgY29sdW1uczoge1xuICAgICAgICAvLyBUT0RPIEFkanVzdCBtb2RlbGluZyBzbyBhIGdsb2JhbCBldmVudCBuZXZlciBuZWVkcyBhIGNsaWVudCBpZCBjb21wb25lbnRcbiAgICAgICAgc2VxTnVtR2xvYmFsOiBTcWxpdGVEc2wuaW50ZWdlcih7IHByaW1hcnlLZXk6IHRydWUsIHNjaGVtYTogRXZlbnRTZXF1ZW5jZU51bWJlci5HbG9iYWxFdmVudFNlcXVlbmNlTnVtYmVyIH0pLFxuICAgICAgICBzZXFOdW1DbGllbnQ6IFNxbGl0ZURzbC5pbnRlZ2VyKHsgcHJpbWFyeUtleTogdHJ1ZSwgc2NoZW1hOiBFdmVudFNlcXVlbmNlTnVtYmVyLkNsaWVudEV2ZW50U2VxdWVuY2VOdW1iZXIgfSksXG4gICAgICAgIHBhcmVudFNlcU51bUdsb2JhbDogU3FsaXRlRHNsLmludGVnZXIoeyBzY2hlbWE6IEV2ZW50U2VxdWVuY2VOdW1iZXIuR2xvYmFsRXZlbnRTZXF1ZW5jZU51bWJlciB9KSxcbiAgICAgICAgcGFyZW50U2VxTnVtQ2xpZW50OiBTcWxpdGVEc2wuaW50ZWdlcih7IHNjaGVtYTogRXZlbnRTZXF1ZW5jZU51bWJlci5DbGllbnRFdmVudFNlcXVlbmNlTnVtYmVyIH0pLFxuICAgICAgICBuYW1lOiBTcWxpdGVEc2wudGV4dCh7fSksXG4gICAgICAgIGFyZ3NKc29uOiBTcWxpdGVEc2wudGV4dCh7IHNjaGVtYTogU2NoZW1hLnBhcnNlSnNvbihTY2hlbWEuQW55KSB9KSxcbiAgICAgICAgY2xpZW50SWQ6IFNxbGl0ZURzbC50ZXh0KHt9KSxcbiAgICAgICAgc2Vzc2lvbklkOiBTcWxpdGVEc2wudGV4dCh7fSksXG4gICAgICAgIHNjaGVtYUhhc2g6IFNxbGl0ZURzbC5pbnRlZ2VyKHt9KSxcbiAgICAgICAgc3luY01ldGFkYXRhSnNvbjogU3FsaXRlRHNsLnRleHQoeyBzY2hlbWE6IFNjaGVtYS5wYXJzZUpzb24oU2NoZW1hLk9wdGlvbihTY2hlbWEuSnNvblZhbHVlKSkgfSksXG4gICAgfSxcbiAgICBpbmRleGVzOiBbXG4gICAgICAgIHsgY29sdW1uczogWydzZXFOdW1HbG9iYWwnXSwgbmFtZTogJ2lkeF9ldmVudGxvZ19zZXFOdW1HbG9iYWwnIH0sXG4gICAgICAgIHsgY29sdW1uczogWydzZXFOdW1HbG9iYWwnLCAnc2VxTnVtQ2xpZW50J10sIG5hbWU6ICdpZHhfZXZlbnRsb2dfc2VxTnVtJyB9LFxuICAgIF0sXG59KTtcbmV4cG9ydCBjb25zdCBTWU5DX1NUQVRVU19UQUJMRSA9ICdfX2xpdmVzdG9yZV9zeW5jX3N0YXR1cyc7XG5leHBvcnQgY29uc3Qgc3luY1N0YXR1c1RhYmxlID0gdGFibGUoe1xuICAgIG5hbWU6IFNZTkNfU1RBVFVTX1RBQkxFLFxuICAgIGNvbHVtbnM6IHtcbiAgICAgICAgaGVhZDogU3FsaXRlRHNsLmludGVnZXIoeyBwcmltYXJ5S2V5OiB0cnVlIH0pLFxuICAgIH0sXG59KTtcbmV4cG9ydCBjb25zdCBldmVudGxvZ1N5c3RlbVRhYmxlcyA9IFtldmVudGxvZ01ldGFUYWJsZSwgc3luY1N0YXR1c1RhYmxlXTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXN5c3RlbS10YWJsZXMuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/node_modules/@livestore/common/dist/schema/state/sqlite/system-tables.js\n");

/***/ }),

/***/ "(rsc)/./src/node_modules/@livestore/common/dist/schema/state/sqlite/table-def.js":
/*!**********************************************************************************!*\
  !*** ./src/node_modules/@livestore/common/dist/schema/state/sqlite/table-def.js ***!
  \**********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TableDefInternalsSymbol: () => (/* binding */ TableDefInternalsSymbol),\n/* harmony export */   blob: () => (/* binding */ blob),\n/* harmony export */   boolean: () => (/* binding */ boolean),\n/* harmony export */   column: () => (/* binding */ column),\n/* harmony export */   datetime: () => (/* binding */ datetime),\n/* harmony export */   integer: () => (/* binding */ integer),\n/* harmony export */   isColumnDefinition: () => (/* binding */ isColumnDefinition),\n/* harmony export */   json: () => (/* binding */ json),\n/* harmony export */   real: () => (/* binding */ real),\n/* harmony export */   table: () => (/* binding */ table),\n/* harmony export */   text: () => (/* binding */ text)\n/* harmony export */ });\n/* harmony import */ var _db_schema_mod_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./db-schema/mod.js */ \"(rsc)/./src/node_modules/@livestore/common/dist/schema/state/sqlite/db-schema/dsl/mod.js\");\n/* harmony import */ var _db_schema_mod_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./db-schema/mod.js */ \"(rsc)/./src/node_modules/@livestore/common/dist/schema/state/sqlite/db-schema/dsl/field-defs.js\");\n/* harmony import */ var _query_builder_mod_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./query-builder/mod.js */ \"(rsc)/./src/node_modules/@livestore/common/dist/schema/state/sqlite/query-builder/impl.js\");\n/* harmony import */ var _query_builder_mod_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./query-builder/mod.js */ \"(rsc)/./src/node_modules/@livestore/common/dist/schema/state/sqlite/query-builder/api.js\");\n\n\nconst { blob, boolean, column, datetime, integer, isColumnDefinition, json, real, text } = _db_schema_mod_js__WEBPACK_IMPORTED_MODULE_0__;\n// TODO use to hide table def internals\nconst TableDefInternalsSymbol = Symbol('TableDefInternals');\nconst table = (args) => {\n    const { name, columns: columnOrColumns, ...options } = args;\n    const tablePath = name;\n    const options_ = {\n        isClientDocumentTable: false,\n    };\n    const columns = (_db_schema_mod_js__WEBPACK_IMPORTED_MODULE_1__.isColumnDefinition(columnOrColumns) ? { value: columnOrColumns } : columnOrColumns);\n    const sqliteDef = _db_schema_mod_js__WEBPACK_IMPORTED_MODULE_0__.table(tablePath, columns, options?.indexes ?? []);\n    const rowSchema = _db_schema_mod_js__WEBPACK_IMPORTED_MODULE_0__.structSchemaForTable(sqliteDef);\n    const insertSchema = _db_schema_mod_js__WEBPACK_IMPORTED_MODULE_0__.insertStructSchemaForTable(sqliteDef);\n    const tableDef = {\n        sqliteDef,\n        options: options_,\n        rowSchema,\n        insertSchema,\n    };\n    const query = (0,_query_builder_mod_js__WEBPACK_IMPORTED_MODULE_2__.makeQueryBuilder)(tableDef);\n    // tableDef.query = query\n    // NOTE we're currently patching the existing tableDef object\n    // as it's being used as part of the query builder API\n    for (const key of Object.keys(query)) {\n        // @ts-expect-error TODO properly implement this\n        tableDef[key] = query[key];\n    }\n    // @ts-expect-error TODO properly type this\n    tableDef[_query_builder_mod_js__WEBPACK_IMPORTED_MODULE_3__.QueryBuilderAstSymbol] = query[_query_builder_mod_js__WEBPACK_IMPORTED_MODULE_3__.QueryBuilderAstSymbol];\n    // @ts-expect-error TODO properly type this\n    tableDef[_query_builder_mod_js__WEBPACK_IMPORTED_MODULE_3__.QueryBuilderTypeId] = query[_query_builder_mod_js__WEBPACK_IMPORTED_MODULE_3__.QueryBuilderTypeId];\n    return tableDef;\n};\n//# sourceMappingURL=table-def.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbm9kZV9tb2R1bGVzL0BsaXZlc3RvcmUvY29tbW9uL2Rpc3Qvc2NoZW1hL3N0YXRlL3NxbGl0ZS90YWJsZS1kZWYuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQStDO0FBQ3NEO0FBQzlGLFFBQVEsaUZBQWlGLEVBQUUsOENBQVM7QUFDM0c7QUFDTztBQUNBO0FBQ1AsWUFBWSw2Q0FBNkM7QUFDekQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsaUVBQTRCLHNCQUFzQix5QkFBeUI7QUFDaEcsc0JBQXNCLG9EQUFlO0FBQ3JDLHNCQUFzQixtRUFBOEI7QUFDcEQseUJBQXlCLHlFQUFvQztBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0IsdUVBQWdCO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLHdFQUFxQixVQUFVLHdFQUFxQjtBQUNqRTtBQUNBLGFBQWEscUVBQWtCLFVBQVUscUVBQWtCO0FBQzNEO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2FuYWNvbmRhLWFzc2VzbWVudC0xLy4vc3JjL25vZGVfbW9kdWxlcy9AbGl2ZXN0b3JlL2NvbW1vbi9kaXN0L3NjaGVtYS9zdGF0ZS9zcWxpdGUvdGFibGUtZGVmLmpzPzA1NzgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU3FsaXRlRHNsIH0gZnJvbSAnLi9kYi1zY2hlbWEvbW9kLmpzJztcbmltcG9ydCB7IG1ha2VRdWVyeUJ1aWxkZXIsIFF1ZXJ5QnVpbGRlckFzdFN5bWJvbCwgUXVlcnlCdWlsZGVyVHlwZUlkIH0gZnJvbSAnLi9xdWVyeS1idWlsZGVyL21vZC5qcyc7XG5leHBvcnQgY29uc3QgeyBibG9iLCBib29sZWFuLCBjb2x1bW4sIGRhdGV0aW1lLCBpbnRlZ2VyLCBpc0NvbHVtbkRlZmluaXRpb24sIGpzb24sIHJlYWwsIHRleHQgfSA9IFNxbGl0ZURzbDtcbi8vIFRPRE8gdXNlIHRvIGhpZGUgdGFibGUgZGVmIGludGVybmFsc1xuZXhwb3J0IGNvbnN0IFRhYmxlRGVmSW50ZXJuYWxzU3ltYm9sID0gU3ltYm9sKCdUYWJsZURlZkludGVybmFscycpO1xuZXhwb3J0IGNvbnN0IHRhYmxlID0gKGFyZ3MpID0+IHtcbiAgICBjb25zdCB7IG5hbWUsIGNvbHVtbnM6IGNvbHVtbk9yQ29sdW1ucywgLi4ub3B0aW9ucyB9ID0gYXJncztcbiAgICBjb25zdCB0YWJsZVBhdGggPSBuYW1lO1xuICAgIGNvbnN0IG9wdGlvbnNfID0ge1xuICAgICAgICBpc0NsaWVudERvY3VtZW50VGFibGU6IGZhbHNlLFxuICAgIH07XG4gICAgY29uc3QgY29sdW1ucyA9IChTcWxpdGVEc2wuaXNDb2x1bW5EZWZpbml0aW9uKGNvbHVtbk9yQ29sdW1ucykgPyB7IHZhbHVlOiBjb2x1bW5PckNvbHVtbnMgfSA6IGNvbHVtbk9yQ29sdW1ucyk7XG4gICAgY29uc3Qgc3FsaXRlRGVmID0gU3FsaXRlRHNsLnRhYmxlKHRhYmxlUGF0aCwgY29sdW1ucywgb3B0aW9ucz8uaW5kZXhlcyA/PyBbXSk7XG4gICAgY29uc3Qgcm93U2NoZW1hID0gU3FsaXRlRHNsLnN0cnVjdFNjaGVtYUZvclRhYmxlKHNxbGl0ZURlZik7XG4gICAgY29uc3QgaW5zZXJ0U2NoZW1hID0gU3FsaXRlRHNsLmluc2VydFN0cnVjdFNjaGVtYUZvclRhYmxlKHNxbGl0ZURlZik7XG4gICAgY29uc3QgdGFibGVEZWYgPSB7XG4gICAgICAgIHNxbGl0ZURlZixcbiAgICAgICAgb3B0aW9uczogb3B0aW9uc18sXG4gICAgICAgIHJvd1NjaGVtYSxcbiAgICAgICAgaW5zZXJ0U2NoZW1hLFxuICAgIH07XG4gICAgY29uc3QgcXVlcnkgPSBtYWtlUXVlcnlCdWlsZGVyKHRhYmxlRGVmKTtcbiAgICAvLyB0YWJsZURlZi5xdWVyeSA9IHF1ZXJ5XG4gICAgLy8gTk9URSB3ZSdyZSBjdXJyZW50bHkgcGF0Y2hpbmcgdGhlIGV4aXN0aW5nIHRhYmxlRGVmIG9iamVjdFxuICAgIC8vIGFzIGl0J3MgYmVpbmcgdXNlZCBhcyBwYXJ0IG9mIHRoZSBxdWVyeSBidWlsZGVyIEFQSVxuICAgIGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKHF1ZXJ5KSkge1xuICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRPRE8gcHJvcGVybHkgaW1wbGVtZW50IHRoaXNcbiAgICAgICAgdGFibGVEZWZba2V5XSA9IHF1ZXJ5W2tleV07XG4gICAgfVxuICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVE9ETyBwcm9wZXJseSB0eXBlIHRoaXNcbiAgICB0YWJsZURlZltRdWVyeUJ1aWxkZXJBc3RTeW1ib2xdID0gcXVlcnlbUXVlcnlCdWlsZGVyQXN0U3ltYm9sXTtcbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRPRE8gcHJvcGVybHkgdHlwZSB0aGlzXG4gICAgdGFibGVEZWZbUXVlcnlCdWlsZGVyVHlwZUlkXSA9IHF1ZXJ5W1F1ZXJ5QnVpbGRlclR5cGVJZF07XG4gICAgcmV0dXJuIHRhYmxlRGVmO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXRhYmxlLWRlZi5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/node_modules/@livestore/common/dist/schema/state/sqlite/table-def.js\n");

/***/ }),

/***/ "(rsc)/./src/node_modules/@livestore/common/dist/util.js":
/*!*********************************************************!*\
  !*** ./src/node_modules/@livestore/common/dist/util.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PreparedBindValues: () => (/* binding */ PreparedBindValues),\n/* harmony export */   SqlValueSchema: () => (/* binding */ SqlValueSchema),\n/* harmony export */   prepareBindValues: () => (/* binding */ prepareBindValues),\n/* harmony export */   sql: () => (/* binding */ sql)\n/* harmony export */ });\n/* harmony import */ var _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @livestore/utils/effect */ \"(rsc)/./src/node_modules/effect/dist/esm/Schema.js\");\n/// <reference lib=\"es2022\" />\n\nconst SqlValueSchema = _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.Union(_livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.String, _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.Number, _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.Uint8Array, _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.Null);\nconst PreparedBindValues = _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.Union(_livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.Array(SqlValueSchema), _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.Record({ key: _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.String, value: SqlValueSchema })).pipe(_livestore_utils_effect__WEBPACK_IMPORTED_MODULE_0__.brand('PreparedBindValues'));\n/**\n * This is a tag function for tagged literals.\n * it lets us get syntax highlighting on SQL queries in VSCode, but\n * doesn't do anything at runtime.\n * Code copied from: https://esdiscuss.org/topic/string-identity-template-tag\n */\nconst sql = (template, ...args) => {\n    let str = '';\n    for (const [i, arg] of args.entries()) {\n        str += template[i] + String(arg);\n    }\n    // eslint-disable-next-line unicorn/prefer-at\n    return str + template[template.length - 1];\n};\n/**\n * Prepare bind values to send to SQLite\n * Add $ to the beginning of keys; which we use as our interpolation syntax\n * We also strip out any params that aren't used in the statement,\n * because rusqlite doesn't allow unused named params\n * TODO: Search for unused params via proper parsing, not string search\n * TODO: Also make sure that the SQLite binding limit of 1000 is respected\n */\nconst prepareBindValues = (values, statement) => {\n    if (Array.isArray(values))\n        return values;\n    const result = {};\n    for (const [key, value] of Object.entries(values)) {\n        if (statement.includes(key)) {\n            result[`$${key}`] = value;\n        }\n    }\n    return result;\n};\n//# sourceMappingURL=util.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbm9kZV9tb2R1bGVzL0BsaXZlc3RvcmUvY29tbW9uL2Rpc3QvdXRpbC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBO0FBQ2lEO0FBQzFDLHVCQUF1QiwwREFBWSxDQUFDLDJEQUFhLEVBQUUsMkRBQWEsRUFBRSwrREFBaUIsRUFBRSx5REFBVztBQUNoRywyQkFBMkIsMERBQVksQ0FBQywwREFBWSxrQkFBa0IsMkRBQWEsR0FBRyxLQUFLLDJEQUFhLHlCQUF5QixRQUFRLDBEQUFZO0FBQzVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DO0FBQ25DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx1QkFBdUIsSUFBSTtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYW5hY29uZGEtYXNzZXNtZW50LTEvLi9zcmMvbm9kZV9tb2R1bGVzL0BsaXZlc3RvcmUvY29tbW9uL2Rpc3QvdXRpbC5qcz82ZmZkIl0sInNvdXJjZXNDb250ZW50IjpbIi8vLyA8cmVmZXJlbmNlIGxpYj1cImVzMjAyMlwiIC8+XG5pbXBvcnQgeyBTY2hlbWEgfSBmcm9tICdAbGl2ZXN0b3JlL3V0aWxzL2VmZmVjdCc7XG5leHBvcnQgY29uc3QgU3FsVmFsdWVTY2hlbWEgPSBTY2hlbWEuVW5pb24oU2NoZW1hLlN0cmluZywgU2NoZW1hLk51bWJlciwgU2NoZW1hLlVpbnQ4QXJyYXksIFNjaGVtYS5OdWxsKTtcbmV4cG9ydCBjb25zdCBQcmVwYXJlZEJpbmRWYWx1ZXMgPSBTY2hlbWEuVW5pb24oU2NoZW1hLkFycmF5KFNxbFZhbHVlU2NoZW1hKSwgU2NoZW1hLlJlY29yZCh7IGtleTogU2NoZW1hLlN0cmluZywgdmFsdWU6IFNxbFZhbHVlU2NoZW1hIH0pKS5waXBlKFNjaGVtYS5icmFuZCgnUHJlcGFyZWRCaW5kVmFsdWVzJykpO1xuLyoqXG4gKiBUaGlzIGlzIGEgdGFnIGZ1bmN0aW9uIGZvciB0YWdnZWQgbGl0ZXJhbHMuXG4gKiBpdCBsZXRzIHVzIGdldCBzeW50YXggaGlnaGxpZ2h0aW5nIG9uIFNRTCBxdWVyaWVzIGluIFZTQ29kZSwgYnV0XG4gKiBkb2Vzbid0IGRvIGFueXRoaW5nIGF0IHJ1bnRpbWUuXG4gKiBDb2RlIGNvcGllZCBmcm9tOiBodHRwczovL2VzZGlzY3Vzcy5vcmcvdG9waWMvc3RyaW5nLWlkZW50aXR5LXRlbXBsYXRlLXRhZ1xuICovXG5leHBvcnQgY29uc3Qgc3FsID0gKHRlbXBsYXRlLCAuLi5hcmdzKSA9PiB7XG4gICAgbGV0IHN0ciA9ICcnO1xuICAgIGZvciAoY29uc3QgW2ksIGFyZ10gb2YgYXJncy5lbnRyaWVzKCkpIHtcbiAgICAgICAgc3RyICs9IHRlbXBsYXRlW2ldICsgU3RyaW5nKGFyZyk7XG4gICAgfVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSB1bmljb3JuL3ByZWZlci1hdFxuICAgIHJldHVybiBzdHIgKyB0ZW1wbGF0ZVt0ZW1wbGF0ZS5sZW5ndGggLSAxXTtcbn07XG4vKipcbiAqIFByZXBhcmUgYmluZCB2YWx1ZXMgdG8gc2VuZCB0byBTUUxpdGVcbiAqIEFkZCAkIHRvIHRoZSBiZWdpbm5pbmcgb2Yga2V5czsgd2hpY2ggd2UgdXNlIGFzIG91ciBpbnRlcnBvbGF0aW9uIHN5bnRheFxuICogV2UgYWxzbyBzdHJpcCBvdXQgYW55IHBhcmFtcyB0aGF0IGFyZW4ndCB1c2VkIGluIHRoZSBzdGF0ZW1lbnQsXG4gKiBiZWNhdXNlIHJ1c3FsaXRlIGRvZXNuJ3QgYWxsb3cgdW51c2VkIG5hbWVkIHBhcmFtc1xuICogVE9ETzogU2VhcmNoIGZvciB1bnVzZWQgcGFyYW1zIHZpYSBwcm9wZXIgcGFyc2luZywgbm90IHN0cmluZyBzZWFyY2hcbiAqIFRPRE86IEFsc28gbWFrZSBzdXJlIHRoYXQgdGhlIFNRTGl0ZSBiaW5kaW5nIGxpbWl0IG9mIDEwMDAgaXMgcmVzcGVjdGVkXG4gKi9cbmV4cG9ydCBjb25zdCBwcmVwYXJlQmluZFZhbHVlcyA9ICh2YWx1ZXMsIHN0YXRlbWVudCkgPT4ge1xuICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlcykpXG4gICAgICAgIHJldHVybiB2YWx1ZXM7XG4gICAgY29uc3QgcmVzdWx0ID0ge307XG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXModmFsdWVzKSkge1xuICAgICAgICBpZiAoc3RhdGVtZW50LmluY2x1ZGVzKGtleSkpIHtcbiAgICAgICAgICAgIHJlc3VsdFtgJCR7a2V5fWBdID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD11dGlsLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/node_modules/@livestore/common/dist/util.js\n");

/***/ }),

/***/ "(rsc)/./src/node_modules/@livestore/livestore/dist/live-queries/base-class.js":
/*!*******************************************************************************!*\
  !*** ./src/node_modules/@livestore/livestore/dist/live-queries/base-class.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LiveStoreQueryBase: () => (/* binding */ LiveStoreQueryBase),\n/* harmony export */   TypeId: () => (/* binding */ TypeId),\n/* harmony export */   depsToString: () => (/* binding */ depsToString),\n/* harmony export */   makeGetAtomResult: () => (/* binding */ makeGetAtomResult),\n/* harmony export */   makeReactivityGraph: () => (/* binding */ makeReactivityGraph),\n/* harmony export */   withRCMap: () => (/* binding */ withRCMap)\n/* harmony export */ });\n/* harmony import */ var _livestore_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @livestore/utils */ \"(rsc)/./src/node_modules/@livestore/utils/dist/guards.js\");\n/* harmony import */ var _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @livestore/utils/effect */ \"(rsc)/./src/node_modules/effect/dist/esm/Predicate.js\");\n/* harmony import */ var _reactive_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../reactive.js */ \"(rsc)/./src/node_modules/@livestore/livestore/dist/reactive.js\");\n\n\n\nconst makeReactivityGraph = () => new _reactive_js__WEBPACK_IMPORTED_MODULE_0__.ReactiveGraph();\nlet queryIdCounter = 0;\nconst TypeId = Symbol.for('LiveQuery');\nconst depsToString = (deps) => {\n    if (typeof deps === 'string' || typeof deps === 'number') {\n        return deps.toString();\n    }\n    return deps.filter(_livestore_utils__WEBPACK_IMPORTED_MODULE_1__.isNotNil).join(',');\n};\nclass LiveStoreQueryBase {\n    '__result!';\n    id = queryIdCounter++;\n    [TypeId] = TypeId;\n    activeSubscriptions = new Set();\n    get runs() {\n        if (this.results$._tag === 'thunk') {\n            return this.results$.recomputations;\n        }\n        return 0;\n    }\n    executionTimes = [];\n    // TODO double check if this is needed\n    isDestroyed = false;\n    run = (args) => {\n        return this.results$.computeResult(args.otelContext, args.debugRefreshReason);\n    };\n    dependencyQueriesRef = new Set();\n}\nconst makeGetAtomResult = (get, ctx, otelContext, dependencyQueriesRef) => {\n    // NOTE we're using the `otelContext` from `makeGetAtomResult` here, not the `otelContext` from `getAtom`\n    const getAtom = (atom, _otelContext, debugRefreshReason) => {\n        // ReactivityGraph atoms case\n        if (atom._tag === 'thunk' || atom._tag === 'ref')\n            return get(atom, otelContext, debugRefreshReason);\n        // def case\n        if (atom._tag === 'def' || atom._tag === 'signal-def') {\n            const query = atom.make(ctx);\n            dependencyQueriesRef.add(query);\n            // TODO deref the query on destroy\n            return getAtom(query.value, _otelContext, debugRefreshReason);\n        }\n        // Signal case\n        if (atom._tag === 'signal' && _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_2__.hasProperty(atom, 'ref')) {\n            return get(atom.ref, otelContext, debugRefreshReason);\n        }\n        // LiveQuery case\n        return get(atom.results$, otelContext, debugRefreshReason);\n    };\n    return getAtom;\n};\nconst withRCMap = (id, make) => {\n    return (ctx, otelContext) => {\n        let item = ctx.defRcMap.get(id);\n        if (item) {\n            item.rc++;\n            return item;\n        }\n        const query$ = make(ctx, otelContext);\n        item = {\n            rc: 1,\n            value: query$,\n            deref: () => {\n                item.rc--;\n                if (item.rc === 0) {\n                    item.value.destroy();\n                    ctx.defRcMap.delete(id);\n                }\n            },\n        };\n        ctx.defRcMap.set(id, item);\n        return item;\n    };\n};\n//# sourceMappingURL=base-class.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbm9kZV9tb2R1bGVzL0BsaXZlc3RvcmUvbGl2ZXN0b3JlL2Rpc3QvbGl2ZS1xdWVyaWVzL2Jhc2UtY2xhc3MuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQTRDO0FBQ1E7QUFDZjtBQUM5QixzQ0FBc0MsdURBQWdCO0FBQzdEO0FBQ087QUFDQTtBQUNQO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixzREFBUTtBQUMvQjtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQyxnRUFBcUI7QUFDM0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2FuYWNvbmRhLWFzc2VzbWVudC0xLy4vc3JjL25vZGVfbW9kdWxlcy9AbGl2ZXN0b3JlL2xpdmVzdG9yZS9kaXN0L2xpdmUtcXVlcmllcy9iYXNlLWNsYXNzLmpzP2FlYmYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaXNOb3ROaWwgfSBmcm9tICdAbGl2ZXN0b3JlL3V0aWxzJztcbmltcG9ydCB7IFByZWRpY2F0ZSB9IGZyb20gJ0BsaXZlc3RvcmUvdXRpbHMvZWZmZWN0JztcbmltcG9ydCAqIGFzIFJHIGZyb20gJy4uL3JlYWN0aXZlLmpzJztcbmV4cG9ydCBjb25zdCBtYWtlUmVhY3Rpdml0eUdyYXBoID0gKCkgPT4gbmV3IFJHLlJlYWN0aXZlR3JhcGgoKTtcbmxldCBxdWVyeUlkQ291bnRlciA9IDA7XG5leHBvcnQgY29uc3QgVHlwZUlkID0gU3ltYm9sLmZvcignTGl2ZVF1ZXJ5Jyk7XG5leHBvcnQgY29uc3QgZGVwc1RvU3RyaW5nID0gKGRlcHMpID0+IHtcbiAgICBpZiAodHlwZW9mIGRlcHMgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiBkZXBzID09PSAnbnVtYmVyJykge1xuICAgICAgICByZXR1cm4gZGVwcy50b1N0cmluZygpO1xuICAgIH1cbiAgICByZXR1cm4gZGVwcy5maWx0ZXIoaXNOb3ROaWwpLmpvaW4oJywnKTtcbn07XG5leHBvcnQgY2xhc3MgTGl2ZVN0b3JlUXVlcnlCYXNlIHtcbiAgICAnX19yZXN1bHQhJztcbiAgICBpZCA9IHF1ZXJ5SWRDb3VudGVyKys7XG4gICAgW1R5cGVJZF0gPSBUeXBlSWQ7XG4gICAgYWN0aXZlU3Vic2NyaXB0aW9ucyA9IG5ldyBTZXQoKTtcbiAgICBnZXQgcnVucygpIHtcbiAgICAgICAgaWYgKHRoaXMucmVzdWx0cyQuX3RhZyA9PT0gJ3RodW5rJykge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVzdWx0cyQucmVjb21wdXRhdGlvbnM7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxuICAgIGV4ZWN1dGlvblRpbWVzID0gW107XG4gICAgLy8gVE9ETyBkb3VibGUgY2hlY2sgaWYgdGhpcyBpcyBuZWVkZWRcbiAgICBpc0Rlc3Ryb3llZCA9IGZhbHNlO1xuICAgIHJ1biA9IChhcmdzKSA9PiB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlc3VsdHMkLmNvbXB1dGVSZXN1bHQoYXJncy5vdGVsQ29udGV4dCwgYXJncy5kZWJ1Z1JlZnJlc2hSZWFzb24pO1xuICAgIH07XG4gICAgZGVwZW5kZW5jeVF1ZXJpZXNSZWYgPSBuZXcgU2V0KCk7XG59XG5leHBvcnQgY29uc3QgbWFrZUdldEF0b21SZXN1bHQgPSAoZ2V0LCBjdHgsIG90ZWxDb250ZXh0LCBkZXBlbmRlbmN5UXVlcmllc1JlZikgPT4ge1xuICAgIC8vIE5PVEUgd2UncmUgdXNpbmcgdGhlIGBvdGVsQ29udGV4dGAgZnJvbSBgbWFrZUdldEF0b21SZXN1bHRgIGhlcmUsIG5vdCB0aGUgYG90ZWxDb250ZXh0YCBmcm9tIGBnZXRBdG9tYFxuICAgIGNvbnN0IGdldEF0b20gPSAoYXRvbSwgX290ZWxDb250ZXh0LCBkZWJ1Z1JlZnJlc2hSZWFzb24pID0+IHtcbiAgICAgICAgLy8gUmVhY3Rpdml0eUdyYXBoIGF0b21zIGNhc2VcbiAgICAgICAgaWYgKGF0b20uX3RhZyA9PT0gJ3RodW5rJyB8fCBhdG9tLl90YWcgPT09ICdyZWYnKVxuICAgICAgICAgICAgcmV0dXJuIGdldChhdG9tLCBvdGVsQ29udGV4dCwgZGVidWdSZWZyZXNoUmVhc29uKTtcbiAgICAgICAgLy8gZGVmIGNhc2VcbiAgICAgICAgaWYgKGF0b20uX3RhZyA9PT0gJ2RlZicgfHwgYXRvbS5fdGFnID09PSAnc2lnbmFsLWRlZicpIHtcbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5ID0gYXRvbS5tYWtlKGN0eCk7XG4gICAgICAgICAgICBkZXBlbmRlbmN5UXVlcmllc1JlZi5hZGQocXVlcnkpO1xuICAgICAgICAgICAgLy8gVE9ETyBkZXJlZiB0aGUgcXVlcnkgb24gZGVzdHJveVxuICAgICAgICAgICAgcmV0dXJuIGdldEF0b20ocXVlcnkudmFsdWUsIF9vdGVsQ29udGV4dCwgZGVidWdSZWZyZXNoUmVhc29uKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBTaWduYWwgY2FzZVxuICAgICAgICBpZiAoYXRvbS5fdGFnID09PSAnc2lnbmFsJyAmJiBQcmVkaWNhdGUuaGFzUHJvcGVydHkoYXRvbSwgJ3JlZicpKSB7XG4gICAgICAgICAgICByZXR1cm4gZ2V0KGF0b20ucmVmLCBvdGVsQ29udGV4dCwgZGVidWdSZWZyZXNoUmVhc29uKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBMaXZlUXVlcnkgY2FzZVxuICAgICAgICByZXR1cm4gZ2V0KGF0b20ucmVzdWx0cyQsIG90ZWxDb250ZXh0LCBkZWJ1Z1JlZnJlc2hSZWFzb24pO1xuICAgIH07XG4gICAgcmV0dXJuIGdldEF0b207XG59O1xuZXhwb3J0IGNvbnN0IHdpdGhSQ01hcCA9IChpZCwgbWFrZSkgPT4ge1xuICAgIHJldHVybiAoY3R4LCBvdGVsQ29udGV4dCkgPT4ge1xuICAgICAgICBsZXQgaXRlbSA9IGN0eC5kZWZSY01hcC5nZXQoaWQpO1xuICAgICAgICBpZiAoaXRlbSkge1xuICAgICAgICAgICAgaXRlbS5yYysrO1xuICAgICAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgcXVlcnkkID0gbWFrZShjdHgsIG90ZWxDb250ZXh0KTtcbiAgICAgICAgaXRlbSA9IHtcbiAgICAgICAgICAgIHJjOiAxLFxuICAgICAgICAgICAgdmFsdWU6IHF1ZXJ5JCxcbiAgICAgICAgICAgIGRlcmVmOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgaXRlbS5yYy0tO1xuICAgICAgICAgICAgICAgIGlmIChpdGVtLnJjID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGl0ZW0udmFsdWUuZGVzdHJveSgpO1xuICAgICAgICAgICAgICAgICAgICBjdHguZGVmUmNNYXAuZGVsZXRlKGlkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgICAgICBjdHguZGVmUmNNYXAuc2V0KGlkLCBpdGVtKTtcbiAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgfTtcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1iYXNlLWNsYXNzLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/node_modules/@livestore/livestore/dist/live-queries/base-class.js\n");

/***/ }),

/***/ "(rsc)/./src/node_modules/@livestore/livestore/dist/live-queries/client-document-get-query.js":
/*!**********************************************************************************************!*\
  !*** ./src/node_modules/@livestore/livestore/dist/live-queries/client-document-get-query.js ***!
  \**********************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   makeExecBeforeFirstRun: () => (/* binding */ makeExecBeforeFirstRun),\n/* harmony export */   rowQueryLabel: () => (/* binding */ rowQueryLabel)\n/* harmony export */ });\n/* harmony import */ var _livestore_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @livestore/common */ \"(rsc)/./src/node_modules/@livestore/common/dist/adapter-types.js\");\n/* harmony import */ var _livestore_common_schema__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @livestore/common/schema */ \"(rsc)/./src/node_modules/@livestore/common/dist/schema/state/sqlite/client-document-def.js\");\n/* harmony import */ var _livestore_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @livestore/utils */ \"(rsc)/./src/node_modules/@livestore/utils/dist/misc.js\");\n\n\n\nconst rowQueryLabel = (table, id) => `${table.sqliteDef.name}.get:${id === undefined ? table.default.id : id === _livestore_common__WEBPACK_IMPORTED_MODULE_0__.SessionIdSymbol ? 'sessionId' : id}`;\nconst makeExecBeforeFirstRun = ({ id, explicitDefaultValues, table, otelContext: otelContext_, }) => ({ store }) => {\n    if (_livestore_common_schema__WEBPACK_IMPORTED_MODULE_1__.tableIsClientDocumentTable(table) === false) {\n        return (0,_livestore_utils__WEBPACK_IMPORTED_MODULE_2__.shouldNeverHappen)(`Cannot insert row for table \"${table.sqliteDef.name}\" which does not have 'deriveEvents: true' set`);\n    }\n    const otelContext = otelContext_ ?? store.otel.queriesSpanContext;\n    const idVal = id === _livestore_common__WEBPACK_IMPORTED_MODULE_0__.SessionIdSymbol ? store.sessionId : id;\n    const rowExists = store.sqliteDbWrapper.cachedSelect(`SELECT 1 FROM '${table.sqliteDef.name}' WHERE id = ?`, [idVal], { otelContext }).length === 1;\n    if (rowExists)\n        return;\n    // It's important that we only commit and don't refresh here, as this function might be called during a render\n    // and otherwise we might end up in a \"reactive loop\"\n    store.commit({ otelContext, skipRefresh: true, label: `${table.sqliteDef.name}.set:${idVal}` }, table.set(explicitDefaultValues, idVal));\n};\n//# sourceMappingURL=client-document-get-query.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbm9kZV9tb2R1bGVzL0BsaXZlc3RvcmUvbGl2ZXN0b3JlL2Rpc3QvbGl2ZS1xdWVyaWVzL2NsaWVudC1kb2N1bWVudC1nZXQtcXVlcnkuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBb0Q7QUFDSDtBQUNJO0FBQzlDLHdDQUF3QyxxQkFBcUIsT0FBTyw2Q0FBNkMsOERBQWUsb0JBQW9CO0FBQ3BKLGtDQUFrQyw4REFBOEQsUUFBUSxPQUFPO0FBQ3RILFFBQVEsZ0ZBQXVDO0FBQy9DLGVBQWUsbUVBQWlCLGlDQUFpQyxxQkFBcUI7QUFDdEY7QUFDQTtBQUNBLHlCQUF5Qiw4REFBZTtBQUN4QywyRUFBMkUscUJBQXFCLDRCQUE0QixhQUFhO0FBQ3pJO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLDBDQUEwQyxxQkFBcUIsT0FBTyxNQUFNLEdBQUc7QUFDbEc7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2FuYWNvbmRhLWFzc2VzbWVudC0xLy4vc3JjL25vZGVfbW9kdWxlcy9AbGl2ZXN0b3JlL2xpdmVzdG9yZS9kaXN0L2xpdmUtcXVlcmllcy9jbGllbnQtZG9jdW1lbnQtZ2V0LXF1ZXJ5LmpzP2JhMTYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU2Vzc2lvbklkU3ltYm9sIH0gZnJvbSAnQGxpdmVzdG9yZS9jb21tb24nO1xuaW1wb3J0IHsgU3RhdGUgfSBmcm9tICdAbGl2ZXN0b3JlL2NvbW1vbi9zY2hlbWEnO1xuaW1wb3J0IHsgc2hvdWxkTmV2ZXJIYXBwZW4gfSBmcm9tICdAbGl2ZXN0b3JlL3V0aWxzJztcbmV4cG9ydCBjb25zdCByb3dRdWVyeUxhYmVsID0gKHRhYmxlLCBpZCkgPT4gYCR7dGFibGUuc3FsaXRlRGVmLm5hbWV9LmdldDoke2lkID09PSB1bmRlZmluZWQgPyB0YWJsZS5kZWZhdWx0LmlkIDogaWQgPT09IFNlc3Npb25JZFN5bWJvbCA/ICdzZXNzaW9uSWQnIDogaWR9YDtcbmV4cG9ydCBjb25zdCBtYWtlRXhlY0JlZm9yZUZpcnN0UnVuID0gKHsgaWQsIGV4cGxpY2l0RGVmYXVsdFZhbHVlcywgdGFibGUsIG90ZWxDb250ZXh0OiBvdGVsQ29udGV4dF8sIH0pID0+ICh7IHN0b3JlIH0pID0+IHtcbiAgICBpZiAoU3RhdGUuU1FMaXRlLnRhYmxlSXNDbGllbnREb2N1bWVudFRhYmxlKHRhYmxlKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgcmV0dXJuIHNob3VsZE5ldmVySGFwcGVuKGBDYW5ub3QgaW5zZXJ0IHJvdyBmb3IgdGFibGUgXCIke3RhYmxlLnNxbGl0ZURlZi5uYW1lfVwiIHdoaWNoIGRvZXMgbm90IGhhdmUgJ2Rlcml2ZUV2ZW50czogdHJ1ZScgc2V0YCk7XG4gICAgfVxuICAgIGNvbnN0IG90ZWxDb250ZXh0ID0gb3RlbENvbnRleHRfID8/IHN0b3JlLm90ZWwucXVlcmllc1NwYW5Db250ZXh0O1xuICAgIGNvbnN0IGlkVmFsID0gaWQgPT09IFNlc3Npb25JZFN5bWJvbCA/IHN0b3JlLnNlc3Npb25JZCA6IGlkO1xuICAgIGNvbnN0IHJvd0V4aXN0cyA9IHN0b3JlLnNxbGl0ZURiV3JhcHBlci5jYWNoZWRTZWxlY3QoYFNFTEVDVCAxIEZST00gJyR7dGFibGUuc3FsaXRlRGVmLm5hbWV9JyBXSEVSRSBpZCA9ID9gLCBbaWRWYWxdLCB7IG90ZWxDb250ZXh0IH0pLmxlbmd0aCA9PT0gMTtcbiAgICBpZiAocm93RXhpc3RzKVxuICAgICAgICByZXR1cm47XG4gICAgLy8gSXQncyBpbXBvcnRhbnQgdGhhdCB3ZSBvbmx5IGNvbW1pdCBhbmQgZG9uJ3QgcmVmcmVzaCBoZXJlLCBhcyB0aGlzIGZ1bmN0aW9uIG1pZ2h0IGJlIGNhbGxlZCBkdXJpbmcgYSByZW5kZXJcbiAgICAvLyBhbmQgb3RoZXJ3aXNlIHdlIG1pZ2h0IGVuZCB1cCBpbiBhIFwicmVhY3RpdmUgbG9vcFwiXG4gICAgc3RvcmUuY29tbWl0KHsgb3RlbENvbnRleHQsIHNraXBSZWZyZXNoOiB0cnVlLCBsYWJlbDogYCR7dGFibGUuc3FsaXRlRGVmLm5hbWV9LnNldDoke2lkVmFsfWAgfSwgdGFibGUuc2V0KGV4cGxpY2l0RGVmYXVsdFZhbHVlcywgaWRWYWwpKTtcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1jbGllbnQtZG9jdW1lbnQtZ2V0LXF1ZXJ5LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/node_modules/@livestore/livestore/dist/live-queries/client-document-get-query.js\n");

/***/ }),

/***/ "(rsc)/./src/node_modules/@livestore/livestore/dist/live-queries/db-query.js":
/*!*****************************************************************************!*\
  !*** ./src/node_modules/@livestore/livestore/dist/live-queries/db-query.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   LiveStoreDbQuery: () => (/* binding */ LiveStoreDbQuery),\n/* harmony export */   isQueryInputRaw: () => (/* binding */ isQueryInputRaw),\n/* harmony export */   queryDb: () => (/* binding */ queryDb)\n/* harmony export */ });\n/* harmony import */ var _livestore_common__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @livestore/common */ \"(rsc)/./src/node_modules/@livestore/common/dist/adapter-types.js\");\n/* harmony import */ var _livestore_common__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! @livestore/common */ \"(rsc)/./src/node_modules/@livestore/common/dist/schema/state/sqlite/query-builder/api.js\");\n/* harmony import */ var _livestore_common__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @livestore/common */ \"(rsc)/./src/node_modules/@livestore/common/dist/schema/state/sqlite/query-builder/impl.js\");\n/* harmony import */ var _livestore_common__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! @livestore/common */ \"(rsc)/./src/node_modules/@livestore/common/dist/materializer-helper.js\");\n/* harmony import */ var _livestore_common__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @livestore/common */ \"(rsc)/./src/node_modules/@livestore/common/dist/util.js\");\n/* harmony import */ var _livestore_common__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @livestore/common */ \"(rsc)/./src/node_modules/@livestore/common/dist/otel.js\");\n/* harmony import */ var _livestore_utils__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @livestore/utils */ \"(rsc)/./src/node_modules/@livestore/utils/dist/misc.js\");\n/* harmony import */ var _livestore_utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @livestore/utils */ \"(rsc)/./src/node_modules/@livestore/utils/dist/fast-deep-equal.js\");\n/* harmony import */ var _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @livestore/utils/effect */ \"(rsc)/./src/node_modules/effect/dist/esm/Predicate.js\");\n/* harmony import */ var _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! @livestore/utils/effect */ \"(rsc)/./src/node_modules/effect/dist/esm/Schema.js\");\n/* harmony import */ var _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @livestore/utils/effect */ \"(rsc)/./src/node_modules/effect/dist/esm/ParseResult.js\");\n/* harmony import */ var _opentelemetry_api__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @opentelemetry/api */ \"(rsc)/./node_modules/next/dist/compiled/@opentelemetry/api/index.js\");\n/* harmony import */ var _reactive_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ../reactive.js */ \"(rsc)/./src/node_modules/@livestore/livestore/dist/reactive.js\");\n/* harmony import */ var _utils_function_string_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../utils/function-string.js */ \"(rsc)/./src/node_modules/@livestore/livestore/dist/utils/function-string.js\");\n/* harmony import */ var _base_class_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./base-class.js */ \"(rsc)/./src/node_modules/@livestore/livestore/dist/live-queries/base-class.js\");\n/* harmony import */ var _client_document_get_query_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./client-document-get-query.js */ \"(rsc)/./src/node_modules/@livestore/livestore/dist/live-queries/client-document-get-query.js\");\n\n\n\n\n\n\n\n\nconst isQueryInputRaw = (value) => _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_1__.hasProperty(value, 'query') && _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_1__.hasProperty(value, 'schema');\n/**\n * NOTE `queryDb` is only supposed to read data. Don't use it to insert/update/delete data but use events instead.\n *\n * When using contextual data when constructing the query, please make sure to include it in the `deps` option.\n *\n * @example\n * ```ts\n * const todos$ = queryDb(tables.todos.where({ complete: true }))\n * ```\n *\n * @example\n * ```ts\n * // Group-by raw SQL query\n * const colorCounts$ = queryDb({\n *   query: sql`SELECT color, COUNT(*) as count FROM todos WHERE complete = ? GROUP BY color`,\n *   schema: Schema.Array(Schema.Struct({\n *     color: Schema.String,\n *     count: Schema.Number,\n *   })),\n *   bindValues: [1],\n * })\n * ```\n *\n * @example\n * ```ts\n * // Using contextual data when constructing the query\n * const makeFilteredQuery = (filter: string) =>\n *   queryDb(tables.todos.where({ title: { op: 'like', value: filter } }), { deps: [filter] })\n *\n * const filteredTodos$ = makeFilteredQuery('buy coffee')\n * ```\n */\nconst queryDb = (queryInput, options) => {\n    const { queryString, extraDeps } = getQueryStringAndExtraDeps(queryInput);\n    const hash = [queryString, options?.deps ? (0,_base_class_js__WEBPACK_IMPORTED_MODULE_2__.depsToString)(options.deps) : undefined, (0,_base_class_js__WEBPACK_IMPORTED_MODULE_2__.depsToString)(extraDeps)]\n        .filter(Boolean)\n        .join('-');\n    if ((0,_utils_function_string_js__WEBPACK_IMPORTED_MODULE_3__.isValidFunctionString)(hash)._tag === 'invalid') {\n        throw new Error(`On Expo/React Native, db queries must provide a \\`deps\\` option`);\n    }\n    if (hash.trim() === '') {\n        return (0,_livestore_utils__WEBPACK_IMPORTED_MODULE_4__.shouldNeverHappen)(`Invalid query hash for query: ${queryInput}`);\n    }\n    const label = options?.label ?? queryString;\n    const def = {\n        _tag: 'def',\n        make: (0,_base_class_js__WEBPACK_IMPORTED_MODULE_2__.withRCMap)(hash, (ctx, otelContext) => {\n            // TODO onDestroy\n            return new LiveStoreDbQuery({\n                reactivityGraph: ctx.reactivityGraph.deref(),\n                queryInput,\n                label,\n                map: options?.map,\n                otelContext,\n                def,\n            });\n        }),\n        label,\n        hash,\n    };\n    return def;\n};\nconst bindValuesToDepKey = (bindValues) => {\n    if (bindValues === undefined) {\n        return [];\n    }\n    return Object.entries(bindValues)\n        .map(([key, value]) => `${key}:${value === _livestore_common__WEBPACK_IMPORTED_MODULE_5__.SessionIdSymbol ? 'SessionIdSymbol' : value}`)\n        .join(',');\n};\nconst getQueryStringAndExtraDeps = (queryInput) => {\n    if ((0,_livestore_common__WEBPACK_IMPORTED_MODULE_6__.isQueryBuilder)(queryInput)) {\n        const { query, bindValues } = queryInput.asSql();\n        return { queryString: query, extraDeps: bindValuesToDepKey(bindValues) };\n    }\n    if (isQueryInputRaw(queryInput)) {\n        return { queryString: queryInput.query, extraDeps: bindValuesToDepKey(queryInput.bindValues) };\n    }\n    if (typeof queryInput === 'function') {\n        return { queryString: queryInput.toString(), extraDeps: [] };\n    }\n    return (0,_livestore_utils__WEBPACK_IMPORTED_MODULE_4__.shouldNeverHappen)(`Invalid query input: ${queryInput}`);\n};\n/* An object encapsulating a reactive SQL query */\nclass LiveStoreDbQuery extends _base_class_js__WEBPACK_IMPORTED_MODULE_2__.LiveStoreQueryBase {\n    _tag = 'db';\n    /** A reactive thunk representing the query text */\n    queryInput$;\n    /** A reactive thunk representing the query results */\n    results$;\n    label;\n    reactivityGraph;\n    mapResult;\n    def;\n    constructor({ queryInput, label: inputLabel, reactivityGraph, map, otelContext, def, }) {\n        super();\n        let label = inputLabel ?? 'db(unknown)';\n        this.reactivityGraph = reactivityGraph;\n        this.def = def;\n        this.mapResult = map === undefined ? (rows) => rows : map;\n        const schemaRef = {\n            current: typeof queryInput === 'function' ? undefined : (0,_livestore_common__WEBPACK_IMPORTED_MODULE_6__.isQueryBuilder)(queryInput) ? undefined : queryInput.schema,\n        };\n        const execBeforeFirstRunRef = {\n            current: undefined,\n        };\n        let queryInputRaw$OrQueryInputRaw;\n        const fromQueryBuilder = (qb, otelContext) => {\n            try {\n                const qbRes = qb.asSql();\n                const schema = (0,_livestore_common__WEBPACK_IMPORTED_MODULE_7__.getResultSchema)(qb);\n                const ast = qb[_livestore_common__WEBPACK_IMPORTED_MODULE_6__.QueryBuilderAstSymbol];\n                return {\n                    queryInputRaw: {\n                        query: qbRes.query,\n                        schema,\n                        bindValues: qbRes.bindValues,\n                        queriedTables: new Set([ast.tableDef.sqliteDef.name]),\n                    },\n                    label: ast._tag === 'RowQuery' ? (0,_client_document_get_query_js__WEBPACK_IMPORTED_MODULE_8__.rowQueryLabel)(ast.tableDef, ast.id) : qb.toString(),\n                    execBeforeFirstRun: ast._tag === 'RowQuery'\n                        ? (0,_client_document_get_query_js__WEBPACK_IMPORTED_MODULE_8__.makeExecBeforeFirstRun)({\n                            table: ast.tableDef,\n                            explicitDefaultValues: ast.explicitDefaultValues,\n                            id: ast.id,\n                            otelContext,\n                        })\n                        : undefined,\n                };\n            }\n            catch (cause) {\n                throw new _livestore_common__WEBPACK_IMPORTED_MODULE_5__.UnexpectedError({ cause, note: `Error building query for ${qb.toString()}`, payload: { qb } });\n            }\n        };\n        if (typeof queryInput === 'function') {\n            queryInputRaw$OrQueryInputRaw = this.reactivityGraph.makeThunk((get, setDebugInfo, ctx, otelContext) => {\n                const startMs = performance.now();\n                const queryInputResult = queryInput((0,_base_class_js__WEBPACK_IMPORTED_MODULE_2__.makeGetAtomResult)(get, ctx, otelContext ?? ctx.rootOtelContext, this.dependencyQueriesRef), ctx);\n                const durationMs = performance.now() - startMs;\n                let queryInputRaw;\n                if ((0,_livestore_common__WEBPACK_IMPORTED_MODULE_6__.isQueryBuilder)(queryInputResult)) {\n                    const res = fromQueryBuilder(queryInputResult, otelContext);\n                    queryInputRaw = res.queryInputRaw;\n                    // setting label dynamically here\n                    this.label = res.label;\n                    execBeforeFirstRunRef.current = res.execBeforeFirstRun;\n                }\n                else {\n                    queryInputRaw = queryInputResult;\n                }\n                setDebugInfo({ _tag: 'computed', label: `${this.label}:queryInput`, query: queryInputRaw.query, durationMs });\n                schemaRef.current = queryInputRaw.schema;\n                return queryInputRaw;\n            }, {\n                label: `${label}:query`,\n                meta: { liveStoreThunkType: 'db.query' },\n                // NOTE we're not checking the schema here as we assume the query string to always change when the schema might change\n                equal: (a, b) => a.query === b.query && (0,_livestore_utils__WEBPACK_IMPORTED_MODULE_9__.deepEqual)(a.bindValues, b.bindValues),\n            });\n            this.queryInput$ = queryInputRaw$OrQueryInputRaw;\n        }\n        else {\n            let queryInputRaw;\n            if ((0,_livestore_common__WEBPACK_IMPORTED_MODULE_6__.isQueryBuilder)(queryInput)) {\n                const res = fromQueryBuilder(queryInput, otelContext);\n                queryInputRaw = res.queryInputRaw;\n                label = res.label;\n                execBeforeFirstRunRef.current = res.execBeforeFirstRun;\n            }\n            else {\n                queryInputRaw = queryInput;\n            }\n            schemaRef.current = queryInputRaw.schema;\n            queryInputRaw$OrQueryInputRaw = queryInputRaw;\n            // this.label = inputLabel ? this.label : `db(${})`\n            if (inputLabel === undefined && (0,_livestore_common__WEBPACK_IMPORTED_MODULE_6__.isQueryBuilder)(queryInput)) {\n                const ast = queryInput[_livestore_common__WEBPACK_IMPORTED_MODULE_6__.QueryBuilderAstSymbol];\n                if (ast._tag === 'RowQuery') {\n                    label = `db(${(0,_client_document_get_query_js__WEBPACK_IMPORTED_MODULE_8__.rowQueryLabel)(ast.tableDef, ast.id)})`;\n                }\n            }\n        }\n        const queriedTablesRef = { current: undefined };\n        const makeResultsEqual = (resultSchema) => (a, b) => a === _reactive_js__WEBPACK_IMPORTED_MODULE_10__.NOT_REFRESHED_YET || b === _reactive_js__WEBPACK_IMPORTED_MODULE_10__.NOT_REFRESHED_YET ? false : _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_11__.equivalence(resultSchema)(a, b);\n        // NOTE we try to create the equality function eagerly as it might be expensive\n        // TODO also support derived equality for `map` (probably will depend on having an easy way to transform a schema without an `encode` step)\n        // This would mean dropping the `map` option\n        const resultsEqual = map === undefined\n            ? schemaRef.current === undefined\n                ? (a, b) => makeResultsEqual(schemaRef.current)(a, b)\n                : makeResultsEqual(schemaRef.current)\n            : undefined;\n        const results$ = this.reactivityGraph.makeThunk((get, setDebugInfo, queryContext, otelContext, debugRefreshReason) => queryContext.otelTracer.startActiveSpan('db:...', // NOTE span name will be overridden further down\n        {\n            attributes: {\n                'livestore.debugRefreshReason': _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_1__.hasProperty(debugRefreshReason, 'label')\n                    ? debugRefreshReason.label\n                    : debugRefreshReason?._tag,\n            },\n        }, otelContext ?? queryContext.rootOtelContext, (span) => {\n            const otelContext = _opentelemetry_api__WEBPACK_IMPORTED_MODULE_0__.trace.setSpan(_opentelemetry_api__WEBPACK_IMPORTED_MODULE_0__.context.active(), span);\n            const { store } = queryContext;\n            if (execBeforeFirstRunRef.current !== undefined) {\n                execBeforeFirstRunRef.current(queryContext, otelContext);\n                execBeforeFirstRunRef.current = undefined;\n            }\n            const queryInputResult = (0,_reactive_js__WEBPACK_IMPORTED_MODULE_10__.isThunk)(queryInputRaw$OrQueryInputRaw)\n                ? get(queryInputRaw$OrQueryInputRaw, otelContext, debugRefreshReason)\n                : queryInputRaw$OrQueryInputRaw;\n            const sqlString = queryInputResult.query;\n            const bindValues = queryInputResult.bindValues;\n            if (queriedTablesRef.current === undefined) {\n                queriedTablesRef.current = store.sqliteDbWrapper.getTablesUsed(sqlString);\n            }\n            if (bindValues !== undefined) {\n                (0,_livestore_common__WEBPACK_IMPORTED_MODULE_12__.replaceSessionIdSymbol)(bindValues, store.clientSession.sessionId);\n            }\n            // Establish a reactive dependency on the tables used in the query\n            for (const tableName of queriedTablesRef.current) {\n                const tableRef = store.tableRefs[tableName] ?? (0,_livestore_utils__WEBPACK_IMPORTED_MODULE_4__.shouldNeverHappen)(`No table ref found for ${tableName}`);\n                get(tableRef, otelContext, debugRefreshReason);\n            }\n            span.setAttribute('sql.query', sqlString);\n            span.updateName(`db:${sqlString.slice(0, 50)}`);\n            const rawDbResults = store.sqliteDbWrapper.cachedSelect(sqlString, bindValues ? (0,_livestore_common__WEBPACK_IMPORTED_MODULE_13__.prepareBindValues)(bindValues, sqlString) : undefined, {\n                queriedTables: queriedTablesRef.current,\n                otelContext,\n            });\n            span.setAttribute('sql.rowsCount', rawDbResults.length);\n            const parsedResult = _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_11__.decodeEither(schemaRef.current)(rawDbResults);\n            if (parsedResult._tag === 'Left') {\n                const parseErrorStr = _livestore_utils_effect__WEBPACK_IMPORTED_MODULE_14__.TreeFormatter.formatErrorSync(parsedResult.left);\n                const expectedSchemaStr = String(schemaRef.current.ast);\n                const bindValuesStr = bindValues === undefined ? '' : `\\nBind values: ${JSON.stringify(bindValues)}`;\n                return (0,_livestore_utils__WEBPACK_IMPORTED_MODULE_4__.shouldNeverHappen)(`\\\nError parsing SQL query result (${label}).\n\nQuery: ${sqlString}\\\n${bindValuesStr}\n\nExpected schema: ${expectedSchemaStr}\n\nError: ${parseErrorStr}\n\nResult:`, rawDbResults, '\\n');\n            }\n            const result = this.mapResult(parsedResult.right);\n            span.end();\n            const durationMs = (0,_livestore_common__WEBPACK_IMPORTED_MODULE_15__.getDurationMsFromSpan)(span);\n            this.executionTimes.push(durationMs);\n            setDebugInfo({ _tag: 'db', label: `${label}:results`, query: sqlString, durationMs });\n            return result;\n        }), { label: `${label}:results`, meta: { liveStoreThunkType: 'db.result' }, equal: resultsEqual });\n        this.results$ = results$;\n        this.label = label;\n    }\n    destroy = () => {\n        this.isDestroyed = true;\n        if (this.queryInput$ !== undefined) {\n            this.reactivityGraph.destroyNode(this.queryInput$);\n        }\n        this.reactivityGraph.destroyNode(this.results$);\n        for (const query of this.dependencyQueriesRef) {\n            query.deref();\n        }\n    };\n}\n//# sourceMappingURL=db-query.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbm9kZV9tb2R1bGVzL0BsaXZlc3RvcmUvbGl2ZXN0b3JlL2Rpc3QvbGl2ZS1xdWVyaWVzL2RiLXF1ZXJ5LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBZ007QUFDaEk7QUFDVztBQUNoQztBQUNpQjtBQUNRO0FBQzZCO0FBQ1Y7QUFDaEYsbUNBQW1DLGdFQUFxQixvQkFBb0IsZ0VBQXFCO0FBQ3hHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLGdCQUFnQjtBQUMvRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQ0FBa0MsU0FBUyw2QkFBNkIsS0FBSyxnQkFBZ0I7QUFDN0Y7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQLFlBQVkseUJBQXlCO0FBQ3JDLCtDQUErQyw0REFBWSw0QkFBNEIsNERBQVk7QUFDbkc7QUFDQTtBQUNBLFFBQVEsZ0ZBQXFCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBLGVBQWUsbUVBQWlCLGtDQUFrQyxXQUFXO0FBQzdFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyx5REFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyxJQUFJLEdBQUcsVUFBVSw4REFBZSw2QkFBNkI7QUFDL0Y7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBYztBQUN0QixnQkFBZ0Isb0JBQW9CO0FBQ3BDLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxXQUFXLG1FQUFpQix5QkFBeUIsV0FBVztBQUNoRTtBQUNBO0FBQ08sK0JBQStCLDhEQUFrQjtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0Isd0VBQXdFO0FBQzFGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9FQUFvRSxpRUFBYztBQUNsRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLGtFQUFlO0FBQzlDLCtCQUErQixvRUFBcUI7QUFDcEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCLHFEQUFxRCw0RUFBYTtBQUNsRTtBQUNBLDBCQUEwQixxRkFBc0I7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsOERBQWUsR0FBRyx5Q0FBeUMsY0FBYyxjQUFjLE1BQU07QUFDdkg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9EQUFvRCxpRUFBaUI7QUFDckU7QUFDQTtBQUNBLG9CQUFvQixpRUFBYztBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsNEJBQTRCLFdBQVcsc0RBQXNEO0FBQzVIO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsMEJBQTBCLE1BQU07QUFDaEMsd0JBQXdCLGdDQUFnQztBQUN4RDtBQUNBLHdEQUF3RCwyREFBUztBQUNqRSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsaUVBQWM7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2REFBNkQ7QUFDN0QsNENBQTRDLGlFQUFjO0FBQzFELHVDQUF1QyxvRUFBcUI7QUFDNUQ7QUFDQSxrQ0FBa0MsNEVBQWEsdUJBQXVCO0FBQ3RFO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQztBQUNuQyxtRUFBbUUsNERBQWlCLFVBQVUsNERBQWlCLFdBQVcsaUVBQWtCO0FBQzVJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnREFBZ0QsZ0VBQXFCO0FBQ3JFO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsU0FBUztBQUNULGdDQUFnQyxxREFBVSxTQUFTLHVEQUFZO0FBQy9ELG9CQUFvQixRQUFRO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUNBQXFDLHNEQUFPO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsMEVBQXNCO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBLCtEQUErRCxtRUFBaUIsMkJBQTJCLFVBQVU7QUFDckg7QUFDQTtBQUNBO0FBQ0Esa0NBQWtDLHVCQUF1QjtBQUN6RCw0RkFBNEYscUVBQWlCO0FBQzdHO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSxpQ0FBaUMsa0VBQW1CO0FBQ3BEO0FBQ0Esc0NBQXNDLG1FQUFhO0FBQ25EO0FBQ0Esd0ZBQXdGLDJCQUEyQjtBQUNuSCx1QkFBdUIsbUVBQWlCO0FBQ3hDLGtDQUFrQyxNQUFNOztBQUV4QyxTQUFTLFVBQVU7QUFDbkIsRUFBRTs7QUFFRixtQkFBbUI7O0FBRW5CLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IseUVBQXFCO0FBQ3BEO0FBQ0EsMkJBQTJCLHNCQUFzQixNQUFNLHlDQUF5QztBQUNoRztBQUNBLFNBQVMsS0FBSyxVQUFVLE1BQU0sbUJBQW1CLGlDQUFpQyx1QkFBdUI7QUFDekc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYW5hY29uZGEtYXNzZXNtZW50LTEvLi9zcmMvbm9kZV9tb2R1bGVzL0BsaXZlc3RvcmUvbGl2ZXN0b3JlL2Rpc3QvbGl2ZS1xdWVyaWVzL2RiLXF1ZXJ5LmpzP2RhNWEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZ2V0RHVyYXRpb25Nc0Zyb21TcGFuLCBnZXRSZXN1bHRTY2hlbWEsIGlzUXVlcnlCdWlsZGVyLCBwcmVwYXJlQmluZFZhbHVlcywgUXVlcnlCdWlsZGVyQXN0U3ltYm9sLCByZXBsYWNlU2Vzc2lvbklkU3ltYm9sLCBTZXNzaW9uSWRTeW1ib2wsIFVuZXhwZWN0ZWRFcnJvciwgfSBmcm9tICdAbGl2ZXN0b3JlL2NvbW1vbic7XG5pbXBvcnQgeyBkZWVwRXF1YWwsIHNob3VsZE5ldmVySGFwcGVuIH0gZnJvbSAnQGxpdmVzdG9yZS91dGlscyc7XG5pbXBvcnQgeyBQcmVkaWNhdGUsIFNjaGVtYSwgVHJlZUZvcm1hdHRlciB9IGZyb20gJ0BsaXZlc3RvcmUvdXRpbHMvZWZmZWN0JztcbmltcG9ydCAqIGFzIG90ZWwgZnJvbSAnQG9wZW50ZWxlbWV0cnkvYXBpJztcbmltcG9ydCB7IGlzVGh1bmssIE5PVF9SRUZSRVNIRURfWUVUIH0gZnJvbSAnLi4vcmVhY3RpdmUuanMnO1xuaW1wb3J0IHsgaXNWYWxpZEZ1bmN0aW9uU3RyaW5nIH0gZnJvbSAnLi4vdXRpbHMvZnVuY3Rpb24tc3RyaW5nLmpzJztcbmltcG9ydCB7IGRlcHNUb1N0cmluZywgTGl2ZVN0b3JlUXVlcnlCYXNlLCBtYWtlR2V0QXRvbVJlc3VsdCwgd2l0aFJDTWFwIH0gZnJvbSAnLi9iYXNlLWNsYXNzLmpzJztcbmltcG9ydCB7IG1ha2VFeGVjQmVmb3JlRmlyc3RSdW4sIHJvd1F1ZXJ5TGFiZWwgfSBmcm9tICcuL2NsaWVudC1kb2N1bWVudC1nZXQtcXVlcnkuanMnO1xuZXhwb3J0IGNvbnN0IGlzUXVlcnlJbnB1dFJhdyA9ICh2YWx1ZSkgPT4gUHJlZGljYXRlLmhhc1Byb3BlcnR5KHZhbHVlLCAncXVlcnknKSAmJiBQcmVkaWNhdGUuaGFzUHJvcGVydHkodmFsdWUsICdzY2hlbWEnKTtcbi8qKlxuICogTk9URSBgcXVlcnlEYmAgaXMgb25seSBzdXBwb3NlZCB0byByZWFkIGRhdGEuIERvbid0IHVzZSBpdCB0byBpbnNlcnQvdXBkYXRlL2RlbGV0ZSBkYXRhIGJ1dCB1c2UgZXZlbnRzIGluc3RlYWQuXG4gKlxuICogV2hlbiB1c2luZyBjb250ZXh0dWFsIGRhdGEgd2hlbiBjb25zdHJ1Y3RpbmcgdGhlIHF1ZXJ5LCBwbGVhc2UgbWFrZSBzdXJlIHRvIGluY2x1ZGUgaXQgaW4gdGhlIGBkZXBzYCBvcHRpb24uXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHRzXG4gKiBjb25zdCB0b2RvcyQgPSBxdWVyeURiKHRhYmxlcy50b2Rvcy53aGVyZSh7IGNvbXBsZXRlOiB0cnVlIH0pKVxuICogYGBgXG4gKlxuICogQGV4YW1wbGVcbiAqIGBgYHRzXG4gKiAvLyBHcm91cC1ieSByYXcgU1FMIHF1ZXJ5XG4gKiBjb25zdCBjb2xvckNvdW50cyQgPSBxdWVyeURiKHtcbiAqICAgcXVlcnk6IHNxbGBTRUxFQ1QgY29sb3IsIENPVU5UKCopIGFzIGNvdW50IEZST00gdG9kb3MgV0hFUkUgY29tcGxldGUgPSA/IEdST1VQIEJZIGNvbG9yYCxcbiAqICAgc2NoZW1hOiBTY2hlbWEuQXJyYXkoU2NoZW1hLlN0cnVjdCh7XG4gKiAgICAgY29sb3I6IFNjaGVtYS5TdHJpbmcsXG4gKiAgICAgY291bnQ6IFNjaGVtYS5OdW1iZXIsXG4gKiAgIH0pKSxcbiAqICAgYmluZFZhbHVlczogWzFdLFxuICogfSlcbiAqIGBgYFxuICpcbiAqIEBleGFtcGxlXG4gKiBgYGB0c1xuICogLy8gVXNpbmcgY29udGV4dHVhbCBkYXRhIHdoZW4gY29uc3RydWN0aW5nIHRoZSBxdWVyeVxuICogY29uc3QgbWFrZUZpbHRlcmVkUXVlcnkgPSAoZmlsdGVyOiBzdHJpbmcpID0+XG4gKiAgIHF1ZXJ5RGIodGFibGVzLnRvZG9zLndoZXJlKHsgdGl0bGU6IHsgb3A6ICdsaWtlJywgdmFsdWU6IGZpbHRlciB9IH0pLCB7IGRlcHM6IFtmaWx0ZXJdIH0pXG4gKlxuICogY29uc3QgZmlsdGVyZWRUb2RvcyQgPSBtYWtlRmlsdGVyZWRRdWVyeSgnYnV5IGNvZmZlZScpXG4gKiBgYGBcbiAqL1xuZXhwb3J0IGNvbnN0IHF1ZXJ5RGIgPSAocXVlcnlJbnB1dCwgb3B0aW9ucykgPT4ge1xuICAgIGNvbnN0IHsgcXVlcnlTdHJpbmcsIGV4dHJhRGVwcyB9ID0gZ2V0UXVlcnlTdHJpbmdBbmRFeHRyYURlcHMocXVlcnlJbnB1dCk7XG4gICAgY29uc3QgaGFzaCA9IFtxdWVyeVN0cmluZywgb3B0aW9ucz8uZGVwcyA/IGRlcHNUb1N0cmluZyhvcHRpb25zLmRlcHMpIDogdW5kZWZpbmVkLCBkZXBzVG9TdHJpbmcoZXh0cmFEZXBzKV1cbiAgICAgICAgLmZpbHRlcihCb29sZWFuKVxuICAgICAgICAuam9pbignLScpO1xuICAgIGlmIChpc1ZhbGlkRnVuY3Rpb25TdHJpbmcoaGFzaCkuX3RhZyA9PT0gJ2ludmFsaWQnKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgT24gRXhwby9SZWFjdCBOYXRpdmUsIGRiIHF1ZXJpZXMgbXVzdCBwcm92aWRlIGEgXFxgZGVwc1xcYCBvcHRpb25gKTtcbiAgICB9XG4gICAgaWYgKGhhc2gudHJpbSgpID09PSAnJykge1xuICAgICAgICByZXR1cm4gc2hvdWxkTmV2ZXJIYXBwZW4oYEludmFsaWQgcXVlcnkgaGFzaCBmb3IgcXVlcnk6ICR7cXVlcnlJbnB1dH1gKTtcbiAgICB9XG4gICAgY29uc3QgbGFiZWwgPSBvcHRpb25zPy5sYWJlbCA/PyBxdWVyeVN0cmluZztcbiAgICBjb25zdCBkZWYgPSB7XG4gICAgICAgIF90YWc6ICdkZWYnLFxuICAgICAgICBtYWtlOiB3aXRoUkNNYXAoaGFzaCwgKGN0eCwgb3RlbENvbnRleHQpID0+IHtcbiAgICAgICAgICAgIC8vIFRPRE8gb25EZXN0cm95XG4gICAgICAgICAgICByZXR1cm4gbmV3IExpdmVTdG9yZURiUXVlcnkoe1xuICAgICAgICAgICAgICAgIHJlYWN0aXZpdHlHcmFwaDogY3R4LnJlYWN0aXZpdHlHcmFwaC5kZXJlZigpLFxuICAgICAgICAgICAgICAgIHF1ZXJ5SW5wdXQsXG4gICAgICAgICAgICAgICAgbGFiZWwsXG4gICAgICAgICAgICAgICAgbWFwOiBvcHRpb25zPy5tYXAsXG4gICAgICAgICAgICAgICAgb3RlbENvbnRleHQsXG4gICAgICAgICAgICAgICAgZGVmLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pLFxuICAgICAgICBsYWJlbCxcbiAgICAgICAgaGFzaCxcbiAgICB9O1xuICAgIHJldHVybiBkZWY7XG59O1xuY29uc3QgYmluZFZhbHVlc1RvRGVwS2V5ID0gKGJpbmRWYWx1ZXMpID0+IHtcbiAgICBpZiAoYmluZFZhbHVlcyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gICAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKGJpbmRWYWx1ZXMpXG4gICAgICAgIC5tYXAoKFtrZXksIHZhbHVlXSkgPT4gYCR7a2V5fToke3ZhbHVlID09PSBTZXNzaW9uSWRTeW1ib2wgPyAnU2Vzc2lvbklkU3ltYm9sJyA6IHZhbHVlfWApXG4gICAgICAgIC5qb2luKCcsJyk7XG59O1xuY29uc3QgZ2V0UXVlcnlTdHJpbmdBbmRFeHRyYURlcHMgPSAocXVlcnlJbnB1dCkgPT4ge1xuICAgIGlmIChpc1F1ZXJ5QnVpbGRlcihxdWVyeUlucHV0KSkge1xuICAgICAgICBjb25zdCB7IHF1ZXJ5LCBiaW5kVmFsdWVzIH0gPSBxdWVyeUlucHV0LmFzU3FsKCk7XG4gICAgICAgIHJldHVybiB7IHF1ZXJ5U3RyaW5nOiBxdWVyeSwgZXh0cmFEZXBzOiBiaW5kVmFsdWVzVG9EZXBLZXkoYmluZFZhbHVlcykgfTtcbiAgICB9XG4gICAgaWYgKGlzUXVlcnlJbnB1dFJhdyhxdWVyeUlucHV0KSkge1xuICAgICAgICByZXR1cm4geyBxdWVyeVN0cmluZzogcXVlcnlJbnB1dC5xdWVyeSwgZXh0cmFEZXBzOiBiaW5kVmFsdWVzVG9EZXBLZXkocXVlcnlJbnB1dC5iaW5kVmFsdWVzKSB9O1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHF1ZXJ5SW5wdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgcmV0dXJuIHsgcXVlcnlTdHJpbmc6IHF1ZXJ5SW5wdXQudG9TdHJpbmcoKSwgZXh0cmFEZXBzOiBbXSB9O1xuICAgIH1cbiAgICByZXR1cm4gc2hvdWxkTmV2ZXJIYXBwZW4oYEludmFsaWQgcXVlcnkgaW5wdXQ6ICR7cXVlcnlJbnB1dH1gKTtcbn07XG4vKiBBbiBvYmplY3QgZW5jYXBzdWxhdGluZyBhIHJlYWN0aXZlIFNRTCBxdWVyeSAqL1xuZXhwb3J0IGNsYXNzIExpdmVTdG9yZURiUXVlcnkgZXh0ZW5kcyBMaXZlU3RvcmVRdWVyeUJhc2Uge1xuICAgIF90YWcgPSAnZGInO1xuICAgIC8qKiBBIHJlYWN0aXZlIHRodW5rIHJlcHJlc2VudGluZyB0aGUgcXVlcnkgdGV4dCAqL1xuICAgIHF1ZXJ5SW5wdXQkO1xuICAgIC8qKiBBIHJlYWN0aXZlIHRodW5rIHJlcHJlc2VudGluZyB0aGUgcXVlcnkgcmVzdWx0cyAqL1xuICAgIHJlc3VsdHMkO1xuICAgIGxhYmVsO1xuICAgIHJlYWN0aXZpdHlHcmFwaDtcbiAgICBtYXBSZXN1bHQ7XG4gICAgZGVmO1xuICAgIGNvbnN0cnVjdG9yKHsgcXVlcnlJbnB1dCwgbGFiZWw6IGlucHV0TGFiZWwsIHJlYWN0aXZpdHlHcmFwaCwgbWFwLCBvdGVsQ29udGV4dCwgZGVmLCB9KSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIGxldCBsYWJlbCA9IGlucHV0TGFiZWwgPz8gJ2RiKHVua25vd24pJztcbiAgICAgICAgdGhpcy5yZWFjdGl2aXR5R3JhcGggPSByZWFjdGl2aXR5R3JhcGg7XG4gICAgICAgIHRoaXMuZGVmID0gZGVmO1xuICAgICAgICB0aGlzLm1hcFJlc3VsdCA9IG1hcCA9PT0gdW5kZWZpbmVkID8gKHJvd3MpID0+IHJvd3MgOiBtYXA7XG4gICAgICAgIGNvbnN0IHNjaGVtYVJlZiA9IHtcbiAgICAgICAgICAgIGN1cnJlbnQ6IHR5cGVvZiBxdWVyeUlucHV0ID09PSAnZnVuY3Rpb24nID8gdW5kZWZpbmVkIDogaXNRdWVyeUJ1aWxkZXIocXVlcnlJbnB1dCkgPyB1bmRlZmluZWQgOiBxdWVyeUlucHV0LnNjaGVtYSxcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgZXhlY0JlZm9yZUZpcnN0UnVuUmVmID0ge1xuICAgICAgICAgICAgY3VycmVudDogdW5kZWZpbmVkLFxuICAgICAgICB9O1xuICAgICAgICBsZXQgcXVlcnlJbnB1dFJhdyRPclF1ZXJ5SW5wdXRSYXc7XG4gICAgICAgIGNvbnN0IGZyb21RdWVyeUJ1aWxkZXIgPSAocWIsIG90ZWxDb250ZXh0KSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHFiUmVzID0gcWIuYXNTcWwoKTtcbiAgICAgICAgICAgICAgICBjb25zdCBzY2hlbWEgPSBnZXRSZXN1bHRTY2hlbWEocWIpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGFzdCA9IHFiW1F1ZXJ5QnVpbGRlckFzdFN5bWJvbF07XG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgcXVlcnlJbnB1dFJhdzoge1xuICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnk6IHFiUmVzLnF1ZXJ5LFxuICAgICAgICAgICAgICAgICAgICAgICAgc2NoZW1hLFxuICAgICAgICAgICAgICAgICAgICAgICAgYmluZFZhbHVlczogcWJSZXMuYmluZFZhbHVlcyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJpZWRUYWJsZXM6IG5ldyBTZXQoW2FzdC50YWJsZURlZi5zcWxpdGVEZWYubmFtZV0pLFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBsYWJlbDogYXN0Ll90YWcgPT09ICdSb3dRdWVyeScgPyByb3dRdWVyeUxhYmVsKGFzdC50YWJsZURlZiwgYXN0LmlkKSA6IHFiLnRvU3RyaW5nKCksXG4gICAgICAgICAgICAgICAgICAgIGV4ZWNCZWZvcmVGaXJzdFJ1bjogYXN0Ll90YWcgPT09ICdSb3dRdWVyeSdcbiAgICAgICAgICAgICAgICAgICAgICAgID8gbWFrZUV4ZWNCZWZvcmVGaXJzdFJ1bih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGU6IGFzdC50YWJsZURlZixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBsaWNpdERlZmF1bHRWYWx1ZXM6IGFzdC5leHBsaWNpdERlZmF1bHRWYWx1ZXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGFzdC5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdGVsQ29udGV4dCxcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGNhdXNlKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFVuZXhwZWN0ZWRFcnJvcih7IGNhdXNlLCBub3RlOiBgRXJyb3IgYnVpbGRpbmcgcXVlcnkgZm9yICR7cWIudG9TdHJpbmcoKX1gLCBwYXlsb2FkOiB7IHFiIH0gfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGlmICh0eXBlb2YgcXVlcnlJbnB1dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgcXVlcnlJbnB1dFJhdyRPclF1ZXJ5SW5wdXRSYXcgPSB0aGlzLnJlYWN0aXZpdHlHcmFwaC5tYWtlVGh1bmsoKGdldCwgc2V0RGVidWdJbmZvLCBjdHgsIG90ZWxDb250ZXh0KSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3RhcnRNcyA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHF1ZXJ5SW5wdXRSZXN1bHQgPSBxdWVyeUlucHV0KG1ha2VHZXRBdG9tUmVzdWx0KGdldCwgY3R4LCBvdGVsQ29udGV4dCA/PyBjdHgucm9vdE90ZWxDb250ZXh0LCB0aGlzLmRlcGVuZGVuY3lRdWVyaWVzUmVmKSwgY3R4KTtcbiAgICAgICAgICAgICAgICBjb25zdCBkdXJhdGlvbk1zID0gcGVyZm9ybWFuY2Uubm93KCkgLSBzdGFydE1zO1xuICAgICAgICAgICAgICAgIGxldCBxdWVyeUlucHV0UmF3O1xuICAgICAgICAgICAgICAgIGlmIChpc1F1ZXJ5QnVpbGRlcihxdWVyeUlucHV0UmVzdWx0KSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBmcm9tUXVlcnlCdWlsZGVyKHF1ZXJ5SW5wdXRSZXN1bHQsIG90ZWxDb250ZXh0KTtcbiAgICAgICAgICAgICAgICAgICAgcXVlcnlJbnB1dFJhdyA9IHJlcy5xdWVyeUlucHV0UmF3O1xuICAgICAgICAgICAgICAgICAgICAvLyBzZXR0aW5nIGxhYmVsIGR5bmFtaWNhbGx5IGhlcmVcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5sYWJlbCA9IHJlcy5sYWJlbDtcbiAgICAgICAgICAgICAgICAgICAgZXhlY0JlZm9yZUZpcnN0UnVuUmVmLmN1cnJlbnQgPSByZXMuZXhlY0JlZm9yZUZpcnN0UnVuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcXVlcnlJbnB1dFJhdyA9IHF1ZXJ5SW5wdXRSZXN1bHQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHNldERlYnVnSW5mbyh7IF90YWc6ICdjb21wdXRlZCcsIGxhYmVsOiBgJHt0aGlzLmxhYmVsfTpxdWVyeUlucHV0YCwgcXVlcnk6IHF1ZXJ5SW5wdXRSYXcucXVlcnksIGR1cmF0aW9uTXMgfSk7XG4gICAgICAgICAgICAgICAgc2NoZW1hUmVmLmN1cnJlbnQgPSBxdWVyeUlucHV0UmF3LnNjaGVtYTtcbiAgICAgICAgICAgICAgICByZXR1cm4gcXVlcnlJbnB1dFJhdztcbiAgICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgICAgICBsYWJlbDogYCR7bGFiZWx9OnF1ZXJ5YCxcbiAgICAgICAgICAgICAgICBtZXRhOiB7IGxpdmVTdG9yZVRodW5rVHlwZTogJ2RiLnF1ZXJ5JyB9LFxuICAgICAgICAgICAgICAgIC8vIE5PVEUgd2UncmUgbm90IGNoZWNraW5nIHRoZSBzY2hlbWEgaGVyZSBhcyB3ZSBhc3N1bWUgdGhlIHF1ZXJ5IHN0cmluZyB0byBhbHdheXMgY2hhbmdlIHdoZW4gdGhlIHNjaGVtYSBtaWdodCBjaGFuZ2VcbiAgICAgICAgICAgICAgICBlcXVhbDogKGEsIGIpID0+IGEucXVlcnkgPT09IGIucXVlcnkgJiYgZGVlcEVxdWFsKGEuYmluZFZhbHVlcywgYi5iaW5kVmFsdWVzKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5xdWVyeUlucHV0JCA9IHF1ZXJ5SW5wdXRSYXckT3JRdWVyeUlucHV0UmF3O1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbGV0IHF1ZXJ5SW5wdXRSYXc7XG4gICAgICAgICAgICBpZiAoaXNRdWVyeUJ1aWxkZXIocXVlcnlJbnB1dCkpIHtcbiAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBmcm9tUXVlcnlCdWlsZGVyKHF1ZXJ5SW5wdXQsIG90ZWxDb250ZXh0KTtcbiAgICAgICAgICAgICAgICBxdWVyeUlucHV0UmF3ID0gcmVzLnF1ZXJ5SW5wdXRSYXc7XG4gICAgICAgICAgICAgICAgbGFiZWwgPSByZXMubGFiZWw7XG4gICAgICAgICAgICAgICAgZXhlY0JlZm9yZUZpcnN0UnVuUmVmLmN1cnJlbnQgPSByZXMuZXhlY0JlZm9yZUZpcnN0UnVuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcXVlcnlJbnB1dFJhdyA9IHF1ZXJ5SW5wdXQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzY2hlbWFSZWYuY3VycmVudCA9IHF1ZXJ5SW5wdXRSYXcuc2NoZW1hO1xuICAgICAgICAgICAgcXVlcnlJbnB1dFJhdyRPclF1ZXJ5SW5wdXRSYXcgPSBxdWVyeUlucHV0UmF3O1xuICAgICAgICAgICAgLy8gdGhpcy5sYWJlbCA9IGlucHV0TGFiZWwgPyB0aGlzLmxhYmVsIDogYGRiKCR7fSlgXG4gICAgICAgICAgICBpZiAoaW5wdXRMYWJlbCA9PT0gdW5kZWZpbmVkICYmIGlzUXVlcnlCdWlsZGVyKHF1ZXJ5SW5wdXQpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYXN0ID0gcXVlcnlJbnB1dFtRdWVyeUJ1aWxkZXJBc3RTeW1ib2xdO1xuICAgICAgICAgICAgICAgIGlmIChhc3QuX3RhZyA9PT0gJ1Jvd1F1ZXJ5Jykge1xuICAgICAgICAgICAgICAgICAgICBsYWJlbCA9IGBkYigke3Jvd1F1ZXJ5TGFiZWwoYXN0LnRhYmxlRGVmLCBhc3QuaWQpfSlgO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjb25zdCBxdWVyaWVkVGFibGVzUmVmID0geyBjdXJyZW50OiB1bmRlZmluZWQgfTtcbiAgICAgICAgY29uc3QgbWFrZVJlc3VsdHNFcXVhbCA9IChyZXN1bHRTY2hlbWEpID0+IChhLCBiKSA9PiBhID09PSBOT1RfUkVGUkVTSEVEX1lFVCB8fCBiID09PSBOT1RfUkVGUkVTSEVEX1lFVCA/IGZhbHNlIDogU2NoZW1hLmVxdWl2YWxlbmNlKHJlc3VsdFNjaGVtYSkoYSwgYik7XG4gICAgICAgIC8vIE5PVEUgd2UgdHJ5IHRvIGNyZWF0ZSB0aGUgZXF1YWxpdHkgZnVuY3Rpb24gZWFnZXJseSBhcyBpdCBtaWdodCBiZSBleHBlbnNpdmVcbiAgICAgICAgLy8gVE9ETyBhbHNvIHN1cHBvcnQgZGVyaXZlZCBlcXVhbGl0eSBmb3IgYG1hcGAgKHByb2JhYmx5IHdpbGwgZGVwZW5kIG9uIGhhdmluZyBhbiBlYXN5IHdheSB0byB0cmFuc2Zvcm0gYSBzY2hlbWEgd2l0aG91dCBhbiBgZW5jb2RlYCBzdGVwKVxuICAgICAgICAvLyBUaGlzIHdvdWxkIG1lYW4gZHJvcHBpbmcgdGhlIGBtYXBgIG9wdGlvblxuICAgICAgICBjb25zdCByZXN1bHRzRXF1YWwgPSBtYXAgPT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgPyBzY2hlbWFSZWYuY3VycmVudCA9PT0gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgPyAoYSwgYikgPT4gbWFrZVJlc3VsdHNFcXVhbChzY2hlbWFSZWYuY3VycmVudCkoYSwgYilcbiAgICAgICAgICAgICAgICA6IG1ha2VSZXN1bHRzRXF1YWwoc2NoZW1hUmVmLmN1cnJlbnQpXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgY29uc3QgcmVzdWx0cyQgPSB0aGlzLnJlYWN0aXZpdHlHcmFwaC5tYWtlVGh1bmsoKGdldCwgc2V0RGVidWdJbmZvLCBxdWVyeUNvbnRleHQsIG90ZWxDb250ZXh0LCBkZWJ1Z1JlZnJlc2hSZWFzb24pID0+IHF1ZXJ5Q29udGV4dC5vdGVsVHJhY2VyLnN0YXJ0QWN0aXZlU3BhbignZGI6Li4uJywgLy8gTk9URSBzcGFuIG5hbWUgd2lsbCBiZSBvdmVycmlkZGVuIGZ1cnRoZXIgZG93blxuICAgICAgICB7XG4gICAgICAgICAgICBhdHRyaWJ1dGVzOiB7XG4gICAgICAgICAgICAgICAgJ2xpdmVzdG9yZS5kZWJ1Z1JlZnJlc2hSZWFzb24nOiBQcmVkaWNhdGUuaGFzUHJvcGVydHkoZGVidWdSZWZyZXNoUmVhc29uLCAnbGFiZWwnKVxuICAgICAgICAgICAgICAgICAgICA/IGRlYnVnUmVmcmVzaFJlYXNvbi5sYWJlbFxuICAgICAgICAgICAgICAgICAgICA6IGRlYnVnUmVmcmVzaFJlYXNvbj8uX3RhZyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgIH0sIG90ZWxDb250ZXh0ID8/IHF1ZXJ5Q29udGV4dC5yb290T3RlbENvbnRleHQsIChzcGFuKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBvdGVsQ29udGV4dCA9IG90ZWwudHJhY2Uuc2V0U3BhbihvdGVsLmNvbnRleHQuYWN0aXZlKCksIHNwYW4pO1xuICAgICAgICAgICAgY29uc3QgeyBzdG9yZSB9ID0gcXVlcnlDb250ZXh0O1xuICAgICAgICAgICAgaWYgKGV4ZWNCZWZvcmVGaXJzdFJ1blJlZi5jdXJyZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBleGVjQmVmb3JlRmlyc3RSdW5SZWYuY3VycmVudChxdWVyeUNvbnRleHQsIG90ZWxDb250ZXh0KTtcbiAgICAgICAgICAgICAgICBleGVjQmVmb3JlRmlyc3RSdW5SZWYuY3VycmVudCA9IHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5SW5wdXRSZXN1bHQgPSBpc1RodW5rKHF1ZXJ5SW5wdXRSYXckT3JRdWVyeUlucHV0UmF3KVxuICAgICAgICAgICAgICAgID8gZ2V0KHF1ZXJ5SW5wdXRSYXckT3JRdWVyeUlucHV0UmF3LCBvdGVsQ29udGV4dCwgZGVidWdSZWZyZXNoUmVhc29uKVxuICAgICAgICAgICAgICAgIDogcXVlcnlJbnB1dFJhdyRPclF1ZXJ5SW5wdXRSYXc7XG4gICAgICAgICAgICBjb25zdCBzcWxTdHJpbmcgPSBxdWVyeUlucHV0UmVzdWx0LnF1ZXJ5O1xuICAgICAgICAgICAgY29uc3QgYmluZFZhbHVlcyA9IHF1ZXJ5SW5wdXRSZXN1bHQuYmluZFZhbHVlcztcbiAgICAgICAgICAgIGlmIChxdWVyaWVkVGFibGVzUmVmLmN1cnJlbnQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgIHF1ZXJpZWRUYWJsZXNSZWYuY3VycmVudCA9IHN0b3JlLnNxbGl0ZURiV3JhcHBlci5nZXRUYWJsZXNVc2VkKHNxbFN0cmluZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYmluZFZhbHVlcyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgcmVwbGFjZVNlc3Npb25JZFN5bWJvbChiaW5kVmFsdWVzLCBzdG9yZS5jbGllbnRTZXNzaW9uLnNlc3Npb25JZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBFc3RhYmxpc2ggYSByZWFjdGl2ZSBkZXBlbmRlbmN5IG9uIHRoZSB0YWJsZXMgdXNlZCBpbiB0aGUgcXVlcnlcbiAgICAgICAgICAgIGZvciAoY29uc3QgdGFibGVOYW1lIG9mIHF1ZXJpZWRUYWJsZXNSZWYuY3VycmVudCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRhYmxlUmVmID0gc3RvcmUudGFibGVSZWZzW3RhYmxlTmFtZV0gPz8gc2hvdWxkTmV2ZXJIYXBwZW4oYE5vIHRhYmxlIHJlZiBmb3VuZCBmb3IgJHt0YWJsZU5hbWV9YCk7XG4gICAgICAgICAgICAgICAgZ2V0KHRhYmxlUmVmLCBvdGVsQ29udGV4dCwgZGVidWdSZWZyZXNoUmVhc29uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNwYW4uc2V0QXR0cmlidXRlKCdzcWwucXVlcnknLCBzcWxTdHJpbmcpO1xuICAgICAgICAgICAgc3Bhbi51cGRhdGVOYW1lKGBkYjoke3NxbFN0cmluZy5zbGljZSgwLCA1MCl9YCk7XG4gICAgICAgICAgICBjb25zdCByYXdEYlJlc3VsdHMgPSBzdG9yZS5zcWxpdGVEYldyYXBwZXIuY2FjaGVkU2VsZWN0KHNxbFN0cmluZywgYmluZFZhbHVlcyA/IHByZXBhcmVCaW5kVmFsdWVzKGJpbmRWYWx1ZXMsIHNxbFN0cmluZykgOiB1bmRlZmluZWQsIHtcbiAgICAgICAgICAgICAgICBxdWVyaWVkVGFibGVzOiBxdWVyaWVkVGFibGVzUmVmLmN1cnJlbnQsXG4gICAgICAgICAgICAgICAgb3RlbENvbnRleHQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHNwYW4uc2V0QXR0cmlidXRlKCdzcWwucm93c0NvdW50JywgcmF3RGJSZXN1bHRzLmxlbmd0aCk7XG4gICAgICAgICAgICBjb25zdCBwYXJzZWRSZXN1bHQgPSBTY2hlbWEuZGVjb2RlRWl0aGVyKHNjaGVtYVJlZi5jdXJyZW50KShyYXdEYlJlc3VsdHMpO1xuICAgICAgICAgICAgaWYgKHBhcnNlZFJlc3VsdC5fdGFnID09PSAnTGVmdCcpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJzZUVycm9yU3RyID0gVHJlZUZvcm1hdHRlci5mb3JtYXRFcnJvclN5bmMocGFyc2VkUmVzdWx0LmxlZnQpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGV4cGVjdGVkU2NoZW1hU3RyID0gU3RyaW5nKHNjaGVtYVJlZi5jdXJyZW50LmFzdCk7XG4gICAgICAgICAgICAgICAgY29uc3QgYmluZFZhbHVlc1N0ciA9IGJpbmRWYWx1ZXMgPT09IHVuZGVmaW5lZCA/ICcnIDogYFxcbkJpbmQgdmFsdWVzOiAke0pTT04uc3RyaW5naWZ5KGJpbmRWYWx1ZXMpfWA7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNob3VsZE5ldmVySGFwcGVuKGBcXFxuRXJyb3IgcGFyc2luZyBTUUwgcXVlcnkgcmVzdWx0ICgke2xhYmVsfSkuXG5cblF1ZXJ5OiAke3NxbFN0cmluZ31cXFxuJHtiaW5kVmFsdWVzU3RyfVxuXG5FeHBlY3RlZCBzY2hlbWE6ICR7ZXhwZWN0ZWRTY2hlbWFTdHJ9XG5cbkVycm9yOiAke3BhcnNlRXJyb3JTdHJ9XG5cblJlc3VsdDpgLCByYXdEYlJlc3VsdHMsICdcXG4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMubWFwUmVzdWx0KHBhcnNlZFJlc3VsdC5yaWdodCk7XG4gICAgICAgICAgICBzcGFuLmVuZCgpO1xuICAgICAgICAgICAgY29uc3QgZHVyYXRpb25NcyA9IGdldER1cmF0aW9uTXNGcm9tU3BhbihzcGFuKTtcbiAgICAgICAgICAgIHRoaXMuZXhlY3V0aW9uVGltZXMucHVzaChkdXJhdGlvbk1zKTtcbiAgICAgICAgICAgIHNldERlYnVnSW5mbyh7IF90YWc6ICdkYicsIGxhYmVsOiBgJHtsYWJlbH06cmVzdWx0c2AsIHF1ZXJ5OiBzcWxTdHJpbmcsIGR1cmF0aW9uTXMgfSk7XG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9KSwgeyBsYWJlbDogYCR7bGFiZWx9OnJlc3VsdHNgLCBtZXRhOiB7IGxpdmVTdG9yZVRodW5rVHlwZTogJ2RiLnJlc3VsdCcgfSwgZXF1YWw6IHJlc3VsdHNFcXVhbCB9KTtcbiAgICAgICAgdGhpcy5yZXN1bHRzJCA9IHJlc3VsdHMkO1xuICAgICAgICB0aGlzLmxhYmVsID0gbGFiZWw7XG4gICAgfVxuICAgIGRlc3Ryb3kgPSAoKSA9PiB7XG4gICAgICAgIHRoaXMuaXNEZXN0cm95ZWQgPSB0cnVlO1xuICAgICAgICBpZiAodGhpcy5xdWVyeUlucHV0JCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLnJlYWN0aXZpdHlHcmFwaC5kZXN0cm95Tm9kZSh0aGlzLnF1ZXJ5SW5wdXQkKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlYWN0aXZpdHlHcmFwaC5kZXN0cm95Tm9kZSh0aGlzLnJlc3VsdHMkKTtcbiAgICAgICAgZm9yIChjb25zdCBxdWVyeSBvZiB0aGlzLmRlcGVuZGVuY3lRdWVyaWVzUmVmKSB7XG4gICAgICAgICAgICBxdWVyeS5kZXJlZigpO1xuICAgICAgICB9XG4gICAgfTtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRiLXF1ZXJ5LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/node_modules/@livestore/livestore/dist/live-queries/db-query.js\n");

/***/ }),

/***/ "(rsc)/./src/node_modules/@livestore/livestore/dist/reactive.js":
/*!****************************************************************!*\
  !*** ./src/node_modules/@livestore/livestore/dist/reactive.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   NOT_REFRESHED_YET: () => (/* binding */ NOT_REFRESHED_YET),\n/* harmony export */   ReactiveGraph: () => (/* binding */ ReactiveGraph),\n/* harmony export */   __resetIds: () => (/* binding */ __resetIds),\n/* harmony export */   isThunk: () => (/* binding */ isThunk),\n/* harmony export */   throwContextNotSetError: () => (/* binding */ throwContextNotSetError)\n/* harmony export */ });\n/* harmony import */ var _livestore_common__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @livestore/common */ \"(rsc)/./src/node_modules/@livestore/common/dist/bounded-collections.js\");\n/* harmony import */ var _livestore_utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @livestore/utils */ \"(rsc)/./src/node_modules/@livestore/utils/dist/fast-deep-equal.js\");\n/* harmony import */ var _livestore_utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @livestore/utils */ \"(rsc)/./src/node_modules/@livestore/utils/dist/misc.js\");\n// This is a simple implementation of a reactive dependency graph.\n// Key Terminology:\n// Ref: a mutable cell where values can be set\n// Thunk: a pure computation that depends on other values\n// Effect: a side effect that runs when a value changes; return value is ignored\n// Atom: a node returning a value that can be depended on: Ref | Thunk\n// Super computation: Nodes that depend on a given node (\"downstream\")\n// Sub computation: Nodes that a given node depends on (\"upstream\")\n// This vocabulary comes from the MiniAdapton paper linked below, although\n// we don't actually implement the MiniAdapton algorithm because we don't need lazy recomputation.\n// https://arxiv.org/abs/1609.05337\n// Features:\n// - Dependencies are tracked automatically in thunk computations by using a getter function\n//   to reference other atoms.\n// - Whenever a ref is updated, the graph is eagerly refreshed to be consistent with the new values.\n// - We minimize recomputation by refreshing the graph in topological sort order. (The topological height\n//   is maintained eagerly as edges are added and removed.)\n// - At every thunk we check value equality with the previous value and cutoff propagation if possible.\n/* eslint-disable prefer-arrow/prefer-arrow-functions */\n\n\n// import { getDurationMsFromSpan } from './otel.js'\nconst NOT_REFRESHED_YET = Symbol.for('NOT_REFRESHED_YET');\nconst isThunk = (obj) => {\n    return typeof obj === 'object' && obj !== null && '_tag' in obj && obj._tag === 'thunk';\n};\nconst unknownRefreshReason = () => {\n    // debugger\n    return { _tag: 'unknown' };\n};\nconst encodedOptionSome = (value) => ({ _tag: 'Some', value });\nconst encodedOptionNone = () => ({ _tag: 'None' });\nlet globalGraphIdCounter = 0;\nconst uniqueGraphId = () => `graph-${++globalGraphIdCounter}`;\n/** Used for testing */\nconst __resetIds = () => {\n    globalGraphIdCounter = 0;\n};\nclass ReactiveGraph {\n    id = uniqueGraphId();\n    atoms = new Set();\n    effects = new Set();\n    context;\n    debugRefreshInfos = new _livestore_common__WEBPACK_IMPORTED_MODULE_0__.BoundArray(200);\n    currentDebugRefresh;\n    deferredEffects = new Map();\n    refreshCallbacks = new Set();\n    nodeIdCounter = 0;\n    uniqueNodeId = () => `node-${++this.nodeIdCounter}`;\n    refreshInfoIdCounter = 0;\n    uniqueRefreshInfoId = () => `refresh-info-${++this.refreshInfoIdCounter}`;\n    makeRef(val, options) {\n        const ref = {\n            _tag: 'ref',\n            id: this.uniqueNodeId(),\n            isDirty: false,\n            isDestroyed: false,\n            previousResult: val,\n            computeResult: () => ref.previousResult,\n            sub: new Set(),\n            super: new Set(),\n            label: options?.label,\n            meta: options?.meta,\n            equal: options?.equal ?? _livestore_utils__WEBPACK_IMPORTED_MODULE_1__.deepEqual,\n            refreshes: 0,\n        };\n        this.atoms.add(ref);\n        return ref;\n    }\n    makeThunk(getResult, options) {\n        const thunk = {\n            _tag: 'thunk',\n            id: this.uniqueNodeId(),\n            previousResult: NOT_REFRESHED_YET,\n            isDirty: true,\n            isDestroyed: false,\n            computeResult: (otelContext, debugRefreshReason) => {\n                if (thunk.isDirty) {\n                    const neededCurrentRefresh = this.currentDebugRefresh === undefined;\n                    if (neededCurrentRefresh) {\n                        this.currentDebugRefresh = { refreshedAtoms: [], startMs: performance.now() };\n                    }\n                    // Reset previous subcomputations as we're about to re-add them as part of the `doEffect` call below\n                    thunk.sub = new Set();\n                    const getAtom = (atom, otelContext) => {\n                        this.addEdge(thunk, atom);\n                        return compute(atom, otelContext, debugRefreshReason);\n                    };\n                    let debugInfo = undefined;\n                    const setDebugInfo = (debugInfo_) => {\n                        debugInfo = debugInfo_;\n                    };\n                    const result = getResult(getAtom, setDebugInfo, this.context ?? throwContextNotSetError(this), otelContext, debugRefreshReason);\n                    const resultChanged = thunk.equal(thunk.previousResult, result) === false;\n                    const debugInfoForAtom = {\n                        atom: serializeAtom(thunk, false),\n                        resultChanged,\n                        debugInfo: debugInfo ?? unknownRefreshReason(),\n                    };\n                    this.currentDebugRefresh.refreshedAtoms.push(debugInfoForAtom);\n                    thunk.isDirty = false;\n                    thunk.previousResult = result;\n                    thunk.recomputations++;\n                    if (neededCurrentRefresh) {\n                        const refreshedAtoms = this.currentDebugRefresh.refreshedAtoms;\n                        const durationMs = performance.now() - this.currentDebugRefresh.startMs;\n                        this.currentDebugRefresh = undefined;\n                        this.debugRefreshInfos.push({\n                            id: this.uniqueRefreshInfoId(),\n                            reason: debugRefreshReason ?? { _tag: 'makeThunk', label: options?.label },\n                            skippedRefresh: false,\n                            refreshedAtoms,\n                            durationMs,\n                            completedTimestamp: Date.now(),\n                            graphSnapshot: this.getSnapshot({ includeResults: false }),\n                        });\n                    }\n                    return result;\n                }\n                else {\n                    return thunk.previousResult;\n                }\n            },\n            sub: new Set(),\n            super: new Set(),\n            recomputations: 0,\n            label: options?.label,\n            meta: options?.meta,\n            equal: options?.equal ?? _livestore_utils__WEBPACK_IMPORTED_MODULE_1__.deepEqual,\n            __getResult: getResult,\n        };\n        this.atoms.add(thunk);\n        return thunk;\n    }\n    destroyNode(node) {\n        // console.debug(`destroying node (${node._tag})`, node.id, node.label)\n        // Recursively destroy any supercomputations\n        if (node._tag === 'ref' || node._tag === 'thunk') {\n            for (const superComp of node.super) {\n                this.destroyNode(superComp);\n            }\n        }\n        // Destroy this node\n        if (node._tag !== 'ref') {\n            for (const subComp of node.sub) {\n                this.removeEdge(node, subComp);\n            }\n        }\n        if (node._tag === 'effect') {\n            this.deferredEffects.delete(node);\n            this.effects.delete(node);\n        }\n        else {\n            this.atoms.delete(node);\n        }\n        node.isDestroyed = true;\n    }\n    destroy() {\n        // NOTE we don't need to sort the atoms first, as `destroyNode` will recursively destroy all supercomputations\n        for (const node of this.atoms) {\n            this.destroyNode(node);\n        }\n    }\n    makeEffect(doEffect, options) {\n        const effect = {\n            _tag: 'effect',\n            id: this.uniqueNodeId(),\n            isDestroyed: false,\n            doEffect: (otelContext, debugRefreshReason) => {\n                effect.invocations++;\n                // NOTE we're not tracking any debug refresh info for effects as they're tracked by the thunks they depend on\n                // Reset previous subcomputations as we're about to re-add them as part of the `doEffect` call below\n                effect.sub = new Set();\n                const getAtom = (atom, otelContext, debugRefreshReason) => {\n                    this.addEdge(effect, atom);\n                    return compute(atom, otelContext, debugRefreshReason);\n                };\n                doEffect(getAtom, otelContext, debugRefreshReason);\n            },\n            sub: new Set(),\n            label: options?.label,\n            invocations: 0,\n        };\n        this.effects.add(effect);\n        return effect;\n    }\n    setRef(ref, val, options) {\n        this.setRefs([[ref, val]], options);\n    }\n    setRefs(refs, options) {\n        const effectsToRefresh = new Set();\n        for (const [ref, val] of refs) {\n            ref.previousResult = val;\n            ref.refreshes++;\n            markSuperCompDirtyRec(ref, effectsToRefresh);\n        }\n        if (options?.skipRefresh) {\n            for (const effect of effectsToRefresh) {\n                if (this.deferredEffects.has(effect) === false) {\n                    this.deferredEffects.set(effect, new Set());\n                }\n                if (options?.debugRefreshReason !== undefined) {\n                    this.deferredEffects.get(effect).add(options.debugRefreshReason);\n                }\n            }\n        }\n        else {\n            this.runEffects(effectsToRefresh, {\n                debugRefreshReason: options?.debugRefreshReason ?? unknownRefreshReason(),\n                otelContext: options?.otelContext,\n            });\n        }\n    }\n    runEffects = (effectsToRefresh, options) => {\n        const effectsWrapper = this.context?.effectsWrapper ?? ((runEffects) => runEffects());\n        effectsWrapper(() => {\n            this.currentDebugRefresh = { refreshedAtoms: [], startMs: performance.now() };\n            for (const effect of effectsToRefresh) {\n                effect.doEffect(options?.otelContext, options.debugRefreshReason);\n            }\n            const refreshedAtoms = this.currentDebugRefresh.refreshedAtoms;\n            const durationMs = performance.now() - this.currentDebugRefresh.startMs;\n            this.currentDebugRefresh = undefined;\n            const refreshDebugInfo = {\n                id: this.uniqueRefreshInfoId(),\n                reason: options.debugRefreshReason,\n                skippedRefresh: false,\n                refreshedAtoms,\n                durationMs,\n                completedTimestamp: Date.now(),\n                graphSnapshot: this.getSnapshot({ includeResults: false }),\n            };\n            this.debugRefreshInfos.push(refreshDebugInfo);\n            this.runRefreshCallbacks();\n        });\n    };\n    runDeferredEffects = (options) => {\n        // TODO improve how refresh reasons are propagated for deferred effect execution\n        // TODO also improve \"batching\" of running deferred effects (i.e. in a single `this.runEffects` call)\n        // but need to be careful to not overwhelm the main thread\n        for (const [effect, debugRefreshReasons] of this.deferredEffects) {\n            this.runEffects(new Set([effect]), {\n                debugRefreshReason: {\n                    _tag: 'runDeferredEffects',\n                    originalRefreshReasons: Array.from(debugRefreshReasons),\n                    manualRefreshReason: options?.debugRefreshReason,\n                },\n                otelContext: options?.otelContext,\n            });\n        }\n    };\n    runRefreshCallbacks = () => {\n        for (const cb of this.refreshCallbacks) {\n            cb();\n        }\n    };\n    addEdge(superComp, subComp) {\n        superComp.sub.add(subComp);\n        subComp.super.add(superComp);\n        if (this.currentDebugRefresh === undefined) {\n            this.runRefreshCallbacks();\n        }\n    }\n    removeEdge(superComp, subComp) {\n        superComp.sub.delete(subComp);\n        const effectsToRefresh = new Set();\n        markSuperCompDirtyRec(subComp, effectsToRefresh);\n        for (const effect of effectsToRefresh) {\n            this.deferredEffects.set(effect, new Set());\n        }\n        subComp.super.delete(superComp);\n        if (this.currentDebugRefresh === undefined) {\n            this.runRefreshCallbacks();\n        }\n    }\n    // NOTE This function is performance-optimized (i.e. not using `Array.from`)\n    getSnapshot = (opts) => {\n        const { includeResults = false } = opts ?? {};\n        const atoms = [];\n        for (const atom of this.atoms) {\n            atoms.push(serializeAtom(atom, includeResults));\n        }\n        const effects = [];\n        for (const effect of this.effects) {\n            effects.push(serializeEffect(effect));\n        }\n        const deferredEffects = [];\n        for (const [effect] of this.deferredEffects) {\n            deferredEffects.push(effect.id);\n        }\n        return { atoms, effects, deferredEffects };\n    };\n    subscribeToRefresh = (cb) => {\n        this.refreshCallbacks.add(cb);\n        return () => {\n            this.refreshCallbacks.delete(cb);\n        };\n    };\n}\nconst compute = (atom, otelContext, debugRefreshReason) => {\n    // const __getResult = atom._tag === 'thunk' ? atom.__getResult.toString() : ''\n    if (atom.isDestroyed) {\n        (0,_livestore_utils__WEBPACK_IMPORTED_MODULE_2__.shouldNeverHappen)(`LiveStore Error: Attempted to compute destroyed ${atom._tag} (${atom.id}): ${atom.label ?? ''}`);\n    }\n    if (atom.isDirty) {\n        // console.log('atom is dirty', atom.id, atom.label ?? '', atom._tag, __getResult)\n        const result = atom.computeResult(otelContext, debugRefreshReason);\n        atom.isDirty = false;\n        atom.previousResult = result;\n        return result;\n    }\n    else {\n        // console.log('atom is clean', atom.id, atom.label ?? '', atom._tag, __getResult)\n        return atom.previousResult;\n    }\n};\nconst markSuperCompDirtyRec = (atom, effectsToRefresh) => {\n    for (const superComp of atom.super) {\n        if (superComp._tag === 'thunk') {\n            superComp.isDirty = true;\n            markSuperCompDirtyRec(superComp, effectsToRefresh);\n        }\n        else {\n            effectsToRefresh.add(superComp);\n        }\n    }\n};\nconst throwContextNotSetError = (graph) => {\n    throw new Error(`LiveStore Error: \\`context\\` not set on ReactiveGraph (${graph.id})`);\n};\n// NOTE This function is performance-optimized (i.e. not using `pick` and `Array.from`)\nconst serializeAtom = (atom, includeResult) => {\n    const sub = [];\n    for (const a of atom.sub) {\n        sub.push(a.id);\n    }\n    const super_ = [];\n    for (const a of atom.super) {\n        super_.push(a.id);\n    }\n    const previousResult = includeResult\n        ? encodedOptionSome(atom.previousResult === NOT_REFRESHED_YET ? '\"SYMBOL_NOT_REFRESHED_YET\"' : JSON.stringify(atom.previousResult))\n        : encodedOptionNone();\n    if (atom._tag === 'ref') {\n        return {\n            _tag: atom._tag,\n            id: atom.id,\n            label: atom.label,\n            meta: atom.meta,\n            isDirty: atom.isDirty,\n            sub,\n            super: super_,\n            isDestroyed: atom.isDestroyed,\n            refreshes: atom.refreshes,\n            previousResult,\n        };\n    }\n    return {\n        _tag: 'thunk',\n        id: atom.id,\n        label: atom.label,\n        meta: atom.meta,\n        isDirty: atom.isDirty,\n        sub,\n        super: super_,\n        isDestroyed: atom.isDestroyed,\n        recomputations: atom.recomputations,\n        previousResult,\n    };\n};\n// NOTE This function is performance-optimized (i.e. not using `pick` and `Array.from`)\nconst serializeEffect = (effect) => {\n    const sub = [];\n    for (const a of effect.sub) {\n        sub.push(a.id);\n    }\n    return {\n        _tag: effect._tag,\n        id: effect.id,\n        label: effect.label,\n        sub,\n        invocations: effect.invocations,\n        isDestroyed: effect.isDestroyed,\n    };\n};\n//# sourceMappingURL=reactive.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbm9kZV9tb2R1bGVzL0BsaXZlc3RvcmUvbGl2ZXN0b3JlL2Rpc3QvcmVhY3RpdmUuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlEQUF5RDtBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQytDO0FBQ2lCO0FBQ2hFLFlBQVksd0JBQXdCO0FBQzdCO0FBQ0E7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBLHdDQUF3QyxxQkFBcUI7QUFDN0QsbUNBQW1DLGNBQWM7QUFDakQ7QUFDQSxxQ0FBcUMsdUJBQXVCO0FBQzVEO0FBQ087QUFDUDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0Qix5REFBVTtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxxQkFBcUI7QUFDdEQ7QUFDQSxnREFBZ0QsNEJBQTRCO0FBQzVFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyx1REFBUztBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFEQUFxRDtBQUNyRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDREQUE0RCwwQ0FBMEM7QUFDdEc7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4REFBOEQsdUJBQXVCO0FBQ3JGLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQyx1REFBUztBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkMsVUFBVTtBQUN2RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlDQUF5QztBQUN6QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtEQUFrRCx1QkFBdUI7QUFDekU7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IseUJBQXlCO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxtRUFBaUIsb0RBQW9ELFdBQVcsR0FBRyxRQUFRLEtBQUssaUJBQWlCO0FBQ3pIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1AsOEVBQThFLFNBQVM7QUFDdkY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYW5hY29uZGEtYXNzZXNtZW50LTEvLi9zcmMvbm9kZV9tb2R1bGVzL0BsaXZlc3RvcmUvbGl2ZXN0b3JlL2Rpc3QvcmVhY3RpdmUuanM/MjUzZCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGlzIGlzIGEgc2ltcGxlIGltcGxlbWVudGF0aW9uIG9mIGEgcmVhY3RpdmUgZGVwZW5kZW5jeSBncmFwaC5cbi8vIEtleSBUZXJtaW5vbG9neTpcbi8vIFJlZjogYSBtdXRhYmxlIGNlbGwgd2hlcmUgdmFsdWVzIGNhbiBiZSBzZXRcbi8vIFRodW5rOiBhIHB1cmUgY29tcHV0YXRpb24gdGhhdCBkZXBlbmRzIG9uIG90aGVyIHZhbHVlc1xuLy8gRWZmZWN0OiBhIHNpZGUgZWZmZWN0IHRoYXQgcnVucyB3aGVuIGEgdmFsdWUgY2hhbmdlczsgcmV0dXJuIHZhbHVlIGlzIGlnbm9yZWRcbi8vIEF0b206IGEgbm9kZSByZXR1cm5pbmcgYSB2YWx1ZSB0aGF0IGNhbiBiZSBkZXBlbmRlZCBvbjogUmVmIHwgVGh1bmtcbi8vIFN1cGVyIGNvbXB1dGF0aW9uOiBOb2RlcyB0aGF0IGRlcGVuZCBvbiBhIGdpdmVuIG5vZGUgKFwiZG93bnN0cmVhbVwiKVxuLy8gU3ViIGNvbXB1dGF0aW9uOiBOb2RlcyB0aGF0IGEgZ2l2ZW4gbm9kZSBkZXBlbmRzIG9uIChcInVwc3RyZWFtXCIpXG4vLyBUaGlzIHZvY2FidWxhcnkgY29tZXMgZnJvbSB0aGUgTWluaUFkYXB0b24gcGFwZXIgbGlua2VkIGJlbG93LCBhbHRob3VnaFxuLy8gd2UgZG9uJ3QgYWN0dWFsbHkgaW1wbGVtZW50IHRoZSBNaW5pQWRhcHRvbiBhbGdvcml0aG0gYmVjYXVzZSB3ZSBkb24ndCBuZWVkIGxhenkgcmVjb21wdXRhdGlvbi5cbi8vIGh0dHBzOi8vYXJ4aXYub3JnL2Ficy8xNjA5LjA1MzM3XG4vLyBGZWF0dXJlczpcbi8vIC0gRGVwZW5kZW5jaWVzIGFyZSB0cmFja2VkIGF1dG9tYXRpY2FsbHkgaW4gdGh1bmsgY29tcHV0YXRpb25zIGJ5IHVzaW5nIGEgZ2V0dGVyIGZ1bmN0aW9uXG4vLyAgIHRvIHJlZmVyZW5jZSBvdGhlciBhdG9tcy5cbi8vIC0gV2hlbmV2ZXIgYSByZWYgaXMgdXBkYXRlZCwgdGhlIGdyYXBoIGlzIGVhZ2VybHkgcmVmcmVzaGVkIHRvIGJlIGNvbnNpc3RlbnQgd2l0aCB0aGUgbmV3IHZhbHVlcy5cbi8vIC0gV2UgbWluaW1pemUgcmVjb21wdXRhdGlvbiBieSByZWZyZXNoaW5nIHRoZSBncmFwaCBpbiB0b3BvbG9naWNhbCBzb3J0IG9yZGVyLiAoVGhlIHRvcG9sb2dpY2FsIGhlaWdodFxuLy8gICBpcyBtYWludGFpbmVkIGVhZ2VybHkgYXMgZWRnZXMgYXJlIGFkZGVkIGFuZCByZW1vdmVkLilcbi8vIC0gQXQgZXZlcnkgdGh1bmsgd2UgY2hlY2sgdmFsdWUgZXF1YWxpdHkgd2l0aCB0aGUgcHJldmlvdXMgdmFsdWUgYW5kIGN1dG9mZiBwcm9wYWdhdGlvbiBpZiBwb3NzaWJsZS5cbi8qIGVzbGludC1kaXNhYmxlIHByZWZlci1hcnJvdy9wcmVmZXItYXJyb3ctZnVuY3Rpb25zICovXG5pbXBvcnQgeyBCb3VuZEFycmF5IH0gZnJvbSAnQGxpdmVzdG9yZS9jb21tb24nO1xuaW1wb3J0IHsgZGVlcEVxdWFsLCBzaG91bGROZXZlckhhcHBlbiB9IGZyb20gJ0BsaXZlc3RvcmUvdXRpbHMnO1xuLy8gaW1wb3J0IHsgZ2V0RHVyYXRpb25Nc0Zyb21TcGFuIH0gZnJvbSAnLi9vdGVsLmpzJ1xuZXhwb3J0IGNvbnN0IE5PVF9SRUZSRVNIRURfWUVUID0gU3ltYm9sLmZvcignTk9UX1JFRlJFU0hFRF9ZRVQnKTtcbmV4cG9ydCBjb25zdCBpc1RodW5rID0gKG9iaikgPT4ge1xuICAgIHJldHVybiB0eXBlb2Ygb2JqID09PSAnb2JqZWN0JyAmJiBvYmogIT09IG51bGwgJiYgJ190YWcnIGluIG9iaiAmJiBvYmouX3RhZyA9PT0gJ3RodW5rJztcbn07XG5jb25zdCB1bmtub3duUmVmcmVzaFJlYXNvbiA9ICgpID0+IHtcbiAgICAvLyBkZWJ1Z2dlclxuICAgIHJldHVybiB7IF90YWc6ICd1bmtub3duJyB9O1xufTtcbmNvbnN0IGVuY29kZWRPcHRpb25Tb21lID0gKHZhbHVlKSA9PiAoeyBfdGFnOiAnU29tZScsIHZhbHVlIH0pO1xuY29uc3QgZW5jb2RlZE9wdGlvbk5vbmUgPSAoKSA9PiAoeyBfdGFnOiAnTm9uZScgfSk7XG5sZXQgZ2xvYmFsR3JhcGhJZENvdW50ZXIgPSAwO1xuY29uc3QgdW5pcXVlR3JhcGhJZCA9ICgpID0+IGBncmFwaC0keysrZ2xvYmFsR3JhcGhJZENvdW50ZXJ9YDtcbi8qKiBVc2VkIGZvciB0ZXN0aW5nICovXG5leHBvcnQgY29uc3QgX19yZXNldElkcyA9ICgpID0+IHtcbiAgICBnbG9iYWxHcmFwaElkQ291bnRlciA9IDA7XG59O1xuZXhwb3J0IGNsYXNzIFJlYWN0aXZlR3JhcGgge1xuICAgIGlkID0gdW5pcXVlR3JhcGhJZCgpO1xuICAgIGF0b21zID0gbmV3IFNldCgpO1xuICAgIGVmZmVjdHMgPSBuZXcgU2V0KCk7XG4gICAgY29udGV4dDtcbiAgICBkZWJ1Z1JlZnJlc2hJbmZvcyA9IG5ldyBCb3VuZEFycmF5KDIwMCk7XG4gICAgY3VycmVudERlYnVnUmVmcmVzaDtcbiAgICBkZWZlcnJlZEVmZmVjdHMgPSBuZXcgTWFwKCk7XG4gICAgcmVmcmVzaENhbGxiYWNrcyA9IG5ldyBTZXQoKTtcbiAgICBub2RlSWRDb3VudGVyID0gMDtcbiAgICB1bmlxdWVOb2RlSWQgPSAoKSA9PiBgbm9kZS0keysrdGhpcy5ub2RlSWRDb3VudGVyfWA7XG4gICAgcmVmcmVzaEluZm9JZENvdW50ZXIgPSAwO1xuICAgIHVuaXF1ZVJlZnJlc2hJbmZvSWQgPSAoKSA9PiBgcmVmcmVzaC1pbmZvLSR7Kyt0aGlzLnJlZnJlc2hJbmZvSWRDb3VudGVyfWA7XG4gICAgbWFrZVJlZih2YWwsIG9wdGlvbnMpIHtcbiAgICAgICAgY29uc3QgcmVmID0ge1xuICAgICAgICAgICAgX3RhZzogJ3JlZicsXG4gICAgICAgICAgICBpZDogdGhpcy51bmlxdWVOb2RlSWQoKSxcbiAgICAgICAgICAgIGlzRGlydHk6IGZhbHNlLFxuICAgICAgICAgICAgaXNEZXN0cm95ZWQ6IGZhbHNlLFxuICAgICAgICAgICAgcHJldmlvdXNSZXN1bHQ6IHZhbCxcbiAgICAgICAgICAgIGNvbXB1dGVSZXN1bHQ6ICgpID0+IHJlZi5wcmV2aW91c1Jlc3VsdCxcbiAgICAgICAgICAgIHN1YjogbmV3IFNldCgpLFxuICAgICAgICAgICAgc3VwZXI6IG5ldyBTZXQoKSxcbiAgICAgICAgICAgIGxhYmVsOiBvcHRpb25zPy5sYWJlbCxcbiAgICAgICAgICAgIG1ldGE6IG9wdGlvbnM/Lm1ldGEsXG4gICAgICAgICAgICBlcXVhbDogb3B0aW9ucz8uZXF1YWwgPz8gZGVlcEVxdWFsLFxuICAgICAgICAgICAgcmVmcmVzaGVzOiAwLFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmF0b21zLmFkZChyZWYpO1xuICAgICAgICByZXR1cm4gcmVmO1xuICAgIH1cbiAgICBtYWtlVGh1bmsoZ2V0UmVzdWx0LCBvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IHRodW5rID0ge1xuICAgICAgICAgICAgX3RhZzogJ3RodW5rJyxcbiAgICAgICAgICAgIGlkOiB0aGlzLnVuaXF1ZU5vZGVJZCgpLFxuICAgICAgICAgICAgcHJldmlvdXNSZXN1bHQ6IE5PVF9SRUZSRVNIRURfWUVULFxuICAgICAgICAgICAgaXNEaXJ0eTogdHJ1ZSxcbiAgICAgICAgICAgIGlzRGVzdHJveWVkOiBmYWxzZSxcbiAgICAgICAgICAgIGNvbXB1dGVSZXN1bHQ6IChvdGVsQ29udGV4dCwgZGVidWdSZWZyZXNoUmVhc29uKSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKHRodW5rLmlzRGlydHkpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmVlZGVkQ3VycmVudFJlZnJlc2ggPSB0aGlzLmN1cnJlbnREZWJ1Z1JlZnJlc2ggPT09IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5lZWRlZEN1cnJlbnRSZWZyZXNoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnREZWJ1Z1JlZnJlc2ggPSB7IHJlZnJlc2hlZEF0b21zOiBbXSwgc3RhcnRNczogcGVyZm9ybWFuY2Uubm93KCkgfTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBSZXNldCBwcmV2aW91cyBzdWJjb21wdXRhdGlvbnMgYXMgd2UncmUgYWJvdXQgdG8gcmUtYWRkIHRoZW0gYXMgcGFydCBvZiB0aGUgYGRvRWZmZWN0YCBjYWxsIGJlbG93XG4gICAgICAgICAgICAgICAgICAgIHRodW5rLnN1YiA9IG5ldyBTZXQoKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZ2V0QXRvbSA9IChhdG9tLCBvdGVsQ29udGV4dCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRFZGdlKHRodW5rLCBhdG9tKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjb21wdXRlKGF0b20sIG90ZWxDb250ZXh0LCBkZWJ1Z1JlZnJlc2hSZWFzb24pO1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBsZXQgZGVidWdJbmZvID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzZXREZWJ1Z0luZm8gPSAoZGVidWdJbmZvXykgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVidWdJbmZvID0gZGVidWdJbmZvXztcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gZ2V0UmVzdWx0KGdldEF0b20sIHNldERlYnVnSW5mbywgdGhpcy5jb250ZXh0ID8/IHRocm93Q29udGV4dE5vdFNldEVycm9yKHRoaXMpLCBvdGVsQ29udGV4dCwgZGVidWdSZWZyZXNoUmVhc29uKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0Q2hhbmdlZCA9IHRodW5rLmVxdWFsKHRodW5rLnByZXZpb3VzUmVzdWx0LCByZXN1bHQpID09PSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGVidWdJbmZvRm9yQXRvbSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF0b206IHNlcmlhbGl6ZUF0b20odGh1bmssIGZhbHNlKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdENoYW5nZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWJ1Z0luZm86IGRlYnVnSW5mbyA/PyB1bmtub3duUmVmcmVzaFJlYXNvbigpLFxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnREZWJ1Z1JlZnJlc2gucmVmcmVzaGVkQXRvbXMucHVzaChkZWJ1Z0luZm9Gb3JBdG9tKTtcbiAgICAgICAgICAgICAgICAgICAgdGh1bmsuaXNEaXJ0eSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB0aHVuay5wcmV2aW91c1Jlc3VsdCA9IHJlc3VsdDtcbiAgICAgICAgICAgICAgICAgICAgdGh1bmsucmVjb21wdXRhdGlvbnMrKztcbiAgICAgICAgICAgICAgICAgICAgaWYgKG5lZWRlZEN1cnJlbnRSZWZyZXNoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZWZyZXNoZWRBdG9tcyA9IHRoaXMuY3VycmVudERlYnVnUmVmcmVzaC5yZWZyZXNoZWRBdG9tcztcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGR1cmF0aW9uTXMgPSBwZXJmb3JtYW5jZS5ub3coKSAtIHRoaXMuY3VycmVudERlYnVnUmVmcmVzaC5zdGFydE1zO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50RGVidWdSZWZyZXNoID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWJ1Z1JlZnJlc2hJbmZvcy5wdXNoKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogdGhpcy51bmlxdWVSZWZyZXNoSW5mb0lkKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVhc29uOiBkZWJ1Z1JlZnJlc2hSZWFzb24gPz8geyBfdGFnOiAnbWFrZVRodW5rJywgbGFiZWw6IG9wdGlvbnM/LmxhYmVsIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2tpcHBlZFJlZnJlc2g6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZnJlc2hlZEF0b21zLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGR1cmF0aW9uTXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tcGxldGVkVGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyYXBoU25hcHNob3Q6IHRoaXMuZ2V0U25hcHNob3QoeyBpbmNsdWRlUmVzdWx0czogZmFsc2UgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRodW5rLnByZXZpb3VzUmVzdWx0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzdWI6IG5ldyBTZXQoKSxcbiAgICAgICAgICAgIHN1cGVyOiBuZXcgU2V0KCksXG4gICAgICAgICAgICByZWNvbXB1dGF0aW9uczogMCxcbiAgICAgICAgICAgIGxhYmVsOiBvcHRpb25zPy5sYWJlbCxcbiAgICAgICAgICAgIG1ldGE6IG9wdGlvbnM/Lm1ldGEsXG4gICAgICAgICAgICBlcXVhbDogb3B0aW9ucz8uZXF1YWwgPz8gZGVlcEVxdWFsLFxuICAgICAgICAgICAgX19nZXRSZXN1bHQ6IGdldFJlc3VsdCxcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5hdG9tcy5hZGQodGh1bmspO1xuICAgICAgICByZXR1cm4gdGh1bms7XG4gICAgfVxuICAgIGRlc3Ryb3lOb2RlKG5vZGUpIHtcbiAgICAgICAgLy8gY29uc29sZS5kZWJ1ZyhgZGVzdHJveWluZyBub2RlICgke25vZGUuX3RhZ30pYCwgbm9kZS5pZCwgbm9kZS5sYWJlbClcbiAgICAgICAgLy8gUmVjdXJzaXZlbHkgZGVzdHJveSBhbnkgc3VwZXJjb21wdXRhdGlvbnNcbiAgICAgICAgaWYgKG5vZGUuX3RhZyA9PT0gJ3JlZicgfHwgbm9kZS5fdGFnID09PSAndGh1bmsnKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHN1cGVyQ29tcCBvZiBub2RlLnN1cGVyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kZXN0cm95Tm9kZShzdXBlckNvbXApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8vIERlc3Ryb3kgdGhpcyBub2RlXG4gICAgICAgIGlmIChub2RlLl90YWcgIT09ICdyZWYnKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHN1YkNvbXAgb2Ygbm9kZS5zdWIpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUVkZ2Uobm9kZSwgc3ViQ29tcCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG5vZGUuX3RhZyA9PT0gJ2VmZmVjdCcpIHtcbiAgICAgICAgICAgIHRoaXMuZGVmZXJyZWRFZmZlY3RzLmRlbGV0ZShub2RlKTtcbiAgICAgICAgICAgIHRoaXMuZWZmZWN0cy5kZWxldGUobm9kZSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmF0b21zLmRlbGV0ZShub2RlKTtcbiAgICAgICAgfVxuICAgICAgICBub2RlLmlzRGVzdHJveWVkID0gdHJ1ZTtcbiAgICB9XG4gICAgZGVzdHJveSgpIHtcbiAgICAgICAgLy8gTk9URSB3ZSBkb24ndCBuZWVkIHRvIHNvcnQgdGhlIGF0b21zIGZpcnN0LCBhcyBgZGVzdHJveU5vZGVgIHdpbGwgcmVjdXJzaXZlbHkgZGVzdHJveSBhbGwgc3VwZXJjb21wdXRhdGlvbnNcbiAgICAgICAgZm9yIChjb25zdCBub2RlIG9mIHRoaXMuYXRvbXMpIHtcbiAgICAgICAgICAgIHRoaXMuZGVzdHJveU5vZGUobm9kZSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgbWFrZUVmZmVjdChkb0VmZmVjdCwgb3B0aW9ucykge1xuICAgICAgICBjb25zdCBlZmZlY3QgPSB7XG4gICAgICAgICAgICBfdGFnOiAnZWZmZWN0JyxcbiAgICAgICAgICAgIGlkOiB0aGlzLnVuaXF1ZU5vZGVJZCgpLFxuICAgICAgICAgICAgaXNEZXN0cm95ZWQ6IGZhbHNlLFxuICAgICAgICAgICAgZG9FZmZlY3Q6IChvdGVsQ29udGV4dCwgZGVidWdSZWZyZXNoUmVhc29uKSA9PiB7XG4gICAgICAgICAgICAgICAgZWZmZWN0Lmludm9jYXRpb25zKys7XG4gICAgICAgICAgICAgICAgLy8gTk9URSB3ZSdyZSBub3QgdHJhY2tpbmcgYW55IGRlYnVnIHJlZnJlc2ggaW5mbyBmb3IgZWZmZWN0cyBhcyB0aGV5J3JlIHRyYWNrZWQgYnkgdGhlIHRodW5rcyB0aGV5IGRlcGVuZCBvblxuICAgICAgICAgICAgICAgIC8vIFJlc2V0IHByZXZpb3VzIHN1YmNvbXB1dGF0aW9ucyBhcyB3ZSdyZSBhYm91dCB0byByZS1hZGQgdGhlbSBhcyBwYXJ0IG9mIHRoZSBgZG9FZmZlY3RgIGNhbGwgYmVsb3dcbiAgICAgICAgICAgICAgICBlZmZlY3Quc3ViID0gbmV3IFNldCgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGdldEF0b20gPSAoYXRvbSwgb3RlbENvbnRleHQsIGRlYnVnUmVmcmVzaFJlYXNvbikgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZEVkZ2UoZWZmZWN0LCBhdG9tKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbXB1dGUoYXRvbSwgb3RlbENvbnRleHQsIGRlYnVnUmVmcmVzaFJlYXNvbik7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBkb0VmZmVjdChnZXRBdG9tLCBvdGVsQ29udGV4dCwgZGVidWdSZWZyZXNoUmVhc29uKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzdWI6IG5ldyBTZXQoKSxcbiAgICAgICAgICAgIGxhYmVsOiBvcHRpb25zPy5sYWJlbCxcbiAgICAgICAgICAgIGludm9jYXRpb25zOiAwLFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmVmZmVjdHMuYWRkKGVmZmVjdCk7XG4gICAgICAgIHJldHVybiBlZmZlY3Q7XG4gICAgfVxuICAgIHNldFJlZihyZWYsIHZhbCwgb3B0aW9ucykge1xuICAgICAgICB0aGlzLnNldFJlZnMoW1tyZWYsIHZhbF1dLCBvcHRpb25zKTtcbiAgICB9XG4gICAgc2V0UmVmcyhyZWZzLCBvcHRpb25zKSB7XG4gICAgICAgIGNvbnN0IGVmZmVjdHNUb1JlZnJlc2ggPSBuZXcgU2V0KCk7XG4gICAgICAgIGZvciAoY29uc3QgW3JlZiwgdmFsXSBvZiByZWZzKSB7XG4gICAgICAgICAgICByZWYucHJldmlvdXNSZXN1bHQgPSB2YWw7XG4gICAgICAgICAgICByZWYucmVmcmVzaGVzKys7XG4gICAgICAgICAgICBtYXJrU3VwZXJDb21wRGlydHlSZWMocmVmLCBlZmZlY3RzVG9SZWZyZXNoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0aW9ucz8uc2tpcFJlZnJlc2gpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgZWZmZWN0IG9mIGVmZmVjdHNUb1JlZnJlc2gpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5kZWZlcnJlZEVmZmVjdHMuaGFzKGVmZmVjdCkgPT09IGZhbHNlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGVmZXJyZWRFZmZlY3RzLnNldChlZmZlY3QsIG5ldyBTZXQoKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zPy5kZWJ1Z1JlZnJlc2hSZWFzb24gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRlZmVycmVkRWZmZWN0cy5nZXQoZWZmZWN0KS5hZGQob3B0aW9ucy5kZWJ1Z1JlZnJlc2hSZWFzb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucnVuRWZmZWN0cyhlZmZlY3RzVG9SZWZyZXNoLCB7XG4gICAgICAgICAgICAgICAgZGVidWdSZWZyZXNoUmVhc29uOiBvcHRpb25zPy5kZWJ1Z1JlZnJlc2hSZWFzb24gPz8gdW5rbm93blJlZnJlc2hSZWFzb24oKSxcbiAgICAgICAgICAgICAgICBvdGVsQ29udGV4dDogb3B0aW9ucz8ub3RlbENvbnRleHQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBydW5FZmZlY3RzID0gKGVmZmVjdHNUb1JlZnJlc2gsIG9wdGlvbnMpID0+IHtcbiAgICAgICAgY29uc3QgZWZmZWN0c1dyYXBwZXIgPSB0aGlzLmNvbnRleHQ/LmVmZmVjdHNXcmFwcGVyID8/ICgocnVuRWZmZWN0cykgPT4gcnVuRWZmZWN0cygpKTtcbiAgICAgICAgZWZmZWN0c1dyYXBwZXIoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50RGVidWdSZWZyZXNoID0geyByZWZyZXNoZWRBdG9tczogW10sIHN0YXJ0TXM6IHBlcmZvcm1hbmNlLm5vdygpIH07XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGVmZmVjdCBvZiBlZmZlY3RzVG9SZWZyZXNoKSB7XG4gICAgICAgICAgICAgICAgZWZmZWN0LmRvRWZmZWN0KG9wdGlvbnM/Lm90ZWxDb250ZXh0LCBvcHRpb25zLmRlYnVnUmVmcmVzaFJlYXNvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCByZWZyZXNoZWRBdG9tcyA9IHRoaXMuY3VycmVudERlYnVnUmVmcmVzaC5yZWZyZXNoZWRBdG9tcztcbiAgICAgICAgICAgIGNvbnN0IGR1cmF0aW9uTXMgPSBwZXJmb3JtYW5jZS5ub3coKSAtIHRoaXMuY3VycmVudERlYnVnUmVmcmVzaC5zdGFydE1zO1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50RGVidWdSZWZyZXNoID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgY29uc3QgcmVmcmVzaERlYnVnSW5mbyA9IHtcbiAgICAgICAgICAgICAgICBpZDogdGhpcy51bmlxdWVSZWZyZXNoSW5mb0lkKCksXG4gICAgICAgICAgICAgICAgcmVhc29uOiBvcHRpb25zLmRlYnVnUmVmcmVzaFJlYXNvbixcbiAgICAgICAgICAgICAgICBza2lwcGVkUmVmcmVzaDogZmFsc2UsXG4gICAgICAgICAgICAgICAgcmVmcmVzaGVkQXRvbXMsXG4gICAgICAgICAgICAgICAgZHVyYXRpb25NcyxcbiAgICAgICAgICAgICAgICBjb21wbGV0ZWRUaW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICAgICAgICAgICAgZ3JhcGhTbmFwc2hvdDogdGhpcy5nZXRTbmFwc2hvdCh7IGluY2x1ZGVSZXN1bHRzOiBmYWxzZSB9KSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB0aGlzLmRlYnVnUmVmcmVzaEluZm9zLnB1c2gocmVmcmVzaERlYnVnSW5mbyk7XG4gICAgICAgICAgICB0aGlzLnJ1blJlZnJlc2hDYWxsYmFja3MoKTtcbiAgICAgICAgfSk7XG4gICAgfTtcbiAgICBydW5EZWZlcnJlZEVmZmVjdHMgPSAob3B0aW9ucykgPT4ge1xuICAgICAgICAvLyBUT0RPIGltcHJvdmUgaG93IHJlZnJlc2ggcmVhc29ucyBhcmUgcHJvcGFnYXRlZCBmb3IgZGVmZXJyZWQgZWZmZWN0IGV4ZWN1dGlvblxuICAgICAgICAvLyBUT0RPIGFsc28gaW1wcm92ZSBcImJhdGNoaW5nXCIgb2YgcnVubmluZyBkZWZlcnJlZCBlZmZlY3RzIChpLmUuIGluIGEgc2luZ2xlIGB0aGlzLnJ1bkVmZmVjdHNgIGNhbGwpXG4gICAgICAgIC8vIGJ1dCBuZWVkIHRvIGJlIGNhcmVmdWwgdG8gbm90IG92ZXJ3aGVsbSB0aGUgbWFpbiB0aHJlYWRcbiAgICAgICAgZm9yIChjb25zdCBbZWZmZWN0LCBkZWJ1Z1JlZnJlc2hSZWFzb25zXSBvZiB0aGlzLmRlZmVycmVkRWZmZWN0cykge1xuICAgICAgICAgICAgdGhpcy5ydW5FZmZlY3RzKG5ldyBTZXQoW2VmZmVjdF0pLCB7XG4gICAgICAgICAgICAgICAgZGVidWdSZWZyZXNoUmVhc29uOiB7XG4gICAgICAgICAgICAgICAgICAgIF90YWc6ICdydW5EZWZlcnJlZEVmZmVjdHMnLFxuICAgICAgICAgICAgICAgICAgICBvcmlnaW5hbFJlZnJlc2hSZWFzb25zOiBBcnJheS5mcm9tKGRlYnVnUmVmcmVzaFJlYXNvbnMpLFxuICAgICAgICAgICAgICAgICAgICBtYW51YWxSZWZyZXNoUmVhc29uOiBvcHRpb25zPy5kZWJ1Z1JlZnJlc2hSZWFzb24sXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvdGVsQ29udGV4dDogb3B0aW9ucz8ub3RlbENvbnRleHQsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcnVuUmVmcmVzaENhbGxiYWNrcyA9ICgpID0+IHtcbiAgICAgICAgZm9yIChjb25zdCBjYiBvZiB0aGlzLnJlZnJlc2hDYWxsYmFja3MpIHtcbiAgICAgICAgICAgIGNiKCk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIGFkZEVkZ2Uoc3VwZXJDb21wLCBzdWJDb21wKSB7XG4gICAgICAgIHN1cGVyQ29tcC5zdWIuYWRkKHN1YkNvbXApO1xuICAgICAgICBzdWJDb21wLnN1cGVyLmFkZChzdXBlckNvbXApO1xuICAgICAgICBpZiAodGhpcy5jdXJyZW50RGVidWdSZWZyZXNoID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMucnVuUmVmcmVzaENhbGxiYWNrcygpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJlbW92ZUVkZ2Uoc3VwZXJDb21wLCBzdWJDb21wKSB7XG4gICAgICAgIHN1cGVyQ29tcC5zdWIuZGVsZXRlKHN1YkNvbXApO1xuICAgICAgICBjb25zdCBlZmZlY3RzVG9SZWZyZXNoID0gbmV3IFNldCgpO1xuICAgICAgICBtYXJrU3VwZXJDb21wRGlydHlSZWMoc3ViQ29tcCwgZWZmZWN0c1RvUmVmcmVzaCk7XG4gICAgICAgIGZvciAoY29uc3QgZWZmZWN0IG9mIGVmZmVjdHNUb1JlZnJlc2gpIHtcbiAgICAgICAgICAgIHRoaXMuZGVmZXJyZWRFZmZlY3RzLnNldChlZmZlY3QsIG5ldyBTZXQoKSk7XG4gICAgICAgIH1cbiAgICAgICAgc3ViQ29tcC5zdXBlci5kZWxldGUoc3VwZXJDb21wKTtcbiAgICAgICAgaWYgKHRoaXMuY3VycmVudERlYnVnUmVmcmVzaCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLnJ1blJlZnJlc2hDYWxsYmFja3MoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBOT1RFIFRoaXMgZnVuY3Rpb24gaXMgcGVyZm9ybWFuY2Utb3B0aW1pemVkIChpLmUuIG5vdCB1c2luZyBgQXJyYXkuZnJvbWApXG4gICAgZ2V0U25hcHNob3QgPSAob3B0cykgPT4ge1xuICAgICAgICBjb25zdCB7IGluY2x1ZGVSZXN1bHRzID0gZmFsc2UgfSA9IG9wdHMgPz8ge307XG4gICAgICAgIGNvbnN0IGF0b21zID0gW107XG4gICAgICAgIGZvciAoY29uc3QgYXRvbSBvZiB0aGlzLmF0b21zKSB7XG4gICAgICAgICAgICBhdG9tcy5wdXNoKHNlcmlhbGl6ZUF0b20oYXRvbSwgaW5jbHVkZVJlc3VsdHMpKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBlZmZlY3RzID0gW107XG4gICAgICAgIGZvciAoY29uc3QgZWZmZWN0IG9mIHRoaXMuZWZmZWN0cykge1xuICAgICAgICAgICAgZWZmZWN0cy5wdXNoKHNlcmlhbGl6ZUVmZmVjdChlZmZlY3QpKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkZWZlcnJlZEVmZmVjdHMgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBbZWZmZWN0XSBvZiB0aGlzLmRlZmVycmVkRWZmZWN0cykge1xuICAgICAgICAgICAgZGVmZXJyZWRFZmZlY3RzLnB1c2goZWZmZWN0LmlkKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBhdG9tcywgZWZmZWN0cywgZGVmZXJyZWRFZmZlY3RzIH07XG4gICAgfTtcbiAgICBzdWJzY3JpYmVUb1JlZnJlc2ggPSAoY2IpID0+IHtcbiAgICAgICAgdGhpcy5yZWZyZXNoQ2FsbGJhY2tzLmFkZChjYik7XG4gICAgICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnJlZnJlc2hDYWxsYmFja3MuZGVsZXRlKGNiKTtcbiAgICAgICAgfTtcbiAgICB9O1xufVxuY29uc3QgY29tcHV0ZSA9IChhdG9tLCBvdGVsQ29udGV4dCwgZGVidWdSZWZyZXNoUmVhc29uKSA9PiB7XG4gICAgLy8gY29uc3QgX19nZXRSZXN1bHQgPSBhdG9tLl90YWcgPT09ICd0aHVuaycgPyBhdG9tLl9fZ2V0UmVzdWx0LnRvU3RyaW5nKCkgOiAnJ1xuICAgIGlmIChhdG9tLmlzRGVzdHJveWVkKSB7XG4gICAgICAgIHNob3VsZE5ldmVySGFwcGVuKGBMaXZlU3RvcmUgRXJyb3I6IEF0dGVtcHRlZCB0byBjb21wdXRlIGRlc3Ryb3llZCAke2F0b20uX3RhZ30gKCR7YXRvbS5pZH0pOiAke2F0b20ubGFiZWwgPz8gJyd9YCk7XG4gICAgfVxuICAgIGlmIChhdG9tLmlzRGlydHkpIHtcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ2F0b20gaXMgZGlydHknLCBhdG9tLmlkLCBhdG9tLmxhYmVsID8/ICcnLCBhdG9tLl90YWcsIF9fZ2V0UmVzdWx0KVxuICAgICAgICBjb25zdCByZXN1bHQgPSBhdG9tLmNvbXB1dGVSZXN1bHQob3RlbENvbnRleHQsIGRlYnVnUmVmcmVzaFJlYXNvbik7XG4gICAgICAgIGF0b20uaXNEaXJ0eSA9IGZhbHNlO1xuICAgICAgICBhdG9tLnByZXZpb3VzUmVzdWx0ID0gcmVzdWx0O1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ2F0b20gaXMgY2xlYW4nLCBhdG9tLmlkLCBhdG9tLmxhYmVsID8/ICcnLCBhdG9tLl90YWcsIF9fZ2V0UmVzdWx0KVxuICAgICAgICByZXR1cm4gYXRvbS5wcmV2aW91c1Jlc3VsdDtcbiAgICB9XG59O1xuY29uc3QgbWFya1N1cGVyQ29tcERpcnR5UmVjID0gKGF0b20sIGVmZmVjdHNUb1JlZnJlc2gpID0+IHtcbiAgICBmb3IgKGNvbnN0IHN1cGVyQ29tcCBvZiBhdG9tLnN1cGVyKSB7XG4gICAgICAgIGlmIChzdXBlckNvbXAuX3RhZyA9PT0gJ3RodW5rJykge1xuICAgICAgICAgICAgc3VwZXJDb21wLmlzRGlydHkgPSB0cnVlO1xuICAgICAgICAgICAgbWFya1N1cGVyQ29tcERpcnR5UmVjKHN1cGVyQ29tcCwgZWZmZWN0c1RvUmVmcmVzaCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBlZmZlY3RzVG9SZWZyZXNoLmFkZChzdXBlckNvbXApO1xuICAgICAgICB9XG4gICAgfVxufTtcbmV4cG9ydCBjb25zdCB0aHJvd0NvbnRleHROb3RTZXRFcnJvciA9IChncmFwaCkgPT4ge1xuICAgIHRocm93IG5ldyBFcnJvcihgTGl2ZVN0b3JlIEVycm9yOiBcXGBjb250ZXh0XFxgIG5vdCBzZXQgb24gUmVhY3RpdmVHcmFwaCAoJHtncmFwaC5pZH0pYCk7XG59O1xuLy8gTk9URSBUaGlzIGZ1bmN0aW9uIGlzIHBlcmZvcm1hbmNlLW9wdGltaXplZCAoaS5lLiBub3QgdXNpbmcgYHBpY2tgIGFuZCBgQXJyYXkuZnJvbWApXG5jb25zdCBzZXJpYWxpemVBdG9tID0gKGF0b20sIGluY2x1ZGVSZXN1bHQpID0+IHtcbiAgICBjb25zdCBzdWIgPSBbXTtcbiAgICBmb3IgKGNvbnN0IGEgb2YgYXRvbS5zdWIpIHtcbiAgICAgICAgc3ViLnB1c2goYS5pZCk7XG4gICAgfVxuICAgIGNvbnN0IHN1cGVyXyA9IFtdO1xuICAgIGZvciAoY29uc3QgYSBvZiBhdG9tLnN1cGVyKSB7XG4gICAgICAgIHN1cGVyXy5wdXNoKGEuaWQpO1xuICAgIH1cbiAgICBjb25zdCBwcmV2aW91c1Jlc3VsdCA9IGluY2x1ZGVSZXN1bHRcbiAgICAgICAgPyBlbmNvZGVkT3B0aW9uU29tZShhdG9tLnByZXZpb3VzUmVzdWx0ID09PSBOT1RfUkVGUkVTSEVEX1lFVCA/ICdcIlNZTUJPTF9OT1RfUkVGUkVTSEVEX1lFVFwiJyA6IEpTT04uc3RyaW5naWZ5KGF0b20ucHJldmlvdXNSZXN1bHQpKVxuICAgICAgICA6IGVuY29kZWRPcHRpb25Ob25lKCk7XG4gICAgaWYgKGF0b20uX3RhZyA9PT0gJ3JlZicpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIF90YWc6IGF0b20uX3RhZyxcbiAgICAgICAgICAgIGlkOiBhdG9tLmlkLFxuICAgICAgICAgICAgbGFiZWw6IGF0b20ubGFiZWwsXG4gICAgICAgICAgICBtZXRhOiBhdG9tLm1ldGEsXG4gICAgICAgICAgICBpc0RpcnR5OiBhdG9tLmlzRGlydHksXG4gICAgICAgICAgICBzdWIsXG4gICAgICAgICAgICBzdXBlcjogc3VwZXJfLFxuICAgICAgICAgICAgaXNEZXN0cm95ZWQ6IGF0b20uaXNEZXN0cm95ZWQsXG4gICAgICAgICAgICByZWZyZXNoZXM6IGF0b20ucmVmcmVzaGVzLFxuICAgICAgICAgICAgcHJldmlvdXNSZXN1bHQsXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIF90YWc6ICd0aHVuaycsXG4gICAgICAgIGlkOiBhdG9tLmlkLFxuICAgICAgICBsYWJlbDogYXRvbS5sYWJlbCxcbiAgICAgICAgbWV0YTogYXRvbS5tZXRhLFxuICAgICAgICBpc0RpcnR5OiBhdG9tLmlzRGlydHksXG4gICAgICAgIHN1YixcbiAgICAgICAgc3VwZXI6IHN1cGVyXyxcbiAgICAgICAgaXNEZXN0cm95ZWQ6IGF0b20uaXNEZXN0cm95ZWQsXG4gICAgICAgIHJlY29tcHV0YXRpb25zOiBhdG9tLnJlY29tcHV0YXRpb25zLFxuICAgICAgICBwcmV2aW91c1Jlc3VsdCxcbiAgICB9O1xufTtcbi8vIE5PVEUgVGhpcyBmdW5jdGlvbiBpcyBwZXJmb3JtYW5jZS1vcHRpbWl6ZWQgKGkuZS4gbm90IHVzaW5nIGBwaWNrYCBhbmQgYEFycmF5LmZyb21gKVxuY29uc3Qgc2VyaWFsaXplRWZmZWN0ID0gKGVmZmVjdCkgPT4ge1xuICAgIGNvbnN0IHN1YiA9IFtdO1xuICAgIGZvciAoY29uc3QgYSBvZiBlZmZlY3Quc3ViKSB7XG4gICAgICAgIHN1Yi5wdXNoKGEuaWQpO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBfdGFnOiBlZmZlY3QuX3RhZyxcbiAgICAgICAgaWQ6IGVmZmVjdC5pZCxcbiAgICAgICAgbGFiZWw6IGVmZmVjdC5sYWJlbCxcbiAgICAgICAgc3ViLFxuICAgICAgICBpbnZvY2F0aW9uczogZWZmZWN0Lmludm9jYXRpb25zLFxuICAgICAgICBpc0Rlc3Ryb3llZDogZWZmZWN0LmlzRGVzdHJveWVkLFxuICAgIH07XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cmVhY3RpdmUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/node_modules/@livestore/livestore/dist/reactive.js\n");

/***/ }),

/***/ "(rsc)/./src/node_modules/@livestore/livestore/dist/utils/function-string.js":
/*!*****************************************************************************!*\
  !*** ./src/node_modules/@livestore/livestore/dist/utils/function-string.js ***!
  \*****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isValidFunctionString: () => (/* binding */ isValidFunctionString)\n/* harmony export */ });\n// Related https://github.com/facebook/hermes/issues/612#issuecomment-2549404649\nconst REACT_NATIVE_BAD_FUNCTION_STRING = 'function() { [bytecode] }';\nconst isValidFunctionString = (fnStr) => {\n    if (fnStr === REACT_NATIVE_BAD_FUNCTION_STRING) {\n        return { _tag: 'invalid', reason: 'react-native' };\n    }\n    return { _tag: 'valid' };\n};\n//# sourceMappingURL=function-string.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbm9kZV9tb2R1bGVzL0BsaXZlc3RvcmUvbGl2ZXN0b3JlL2Rpc3QvdXRpbHMvZnVuY3Rpb24tc3RyaW5nLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBLHVEQUF1RCxZQUFZO0FBQzVEO0FBQ1A7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxhQUFhO0FBQ2I7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2FuYWNvbmRhLWFzc2VzbWVudC0xLy4vc3JjL25vZGVfbW9kdWxlcy9AbGl2ZXN0b3JlL2xpdmVzdG9yZS9kaXN0L3V0aWxzL2Z1bmN0aW9uLXN0cmluZy5qcz9kZTY5Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIFJlbGF0ZWQgaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL2hlcm1lcy9pc3N1ZXMvNjEyI2lzc3VlY29tbWVudC0yNTQ5NDA0NjQ5XG5jb25zdCBSRUFDVF9OQVRJVkVfQkFEX0ZVTkNUSU9OX1NUUklORyA9ICdmdW5jdGlvbigpIHsgW2J5dGVjb2RlXSB9JztcbmV4cG9ydCBjb25zdCBpc1ZhbGlkRnVuY3Rpb25TdHJpbmcgPSAoZm5TdHIpID0+IHtcbiAgICBpZiAoZm5TdHIgPT09IFJFQUNUX05BVElWRV9CQURfRlVOQ1RJT05fU1RSSU5HKSB7XG4gICAgICAgIHJldHVybiB7IF90YWc6ICdpbnZhbGlkJywgcmVhc29uOiAncmVhY3QtbmF0aXZlJyB9O1xuICAgIH1cbiAgICByZXR1cm4geyBfdGFnOiAndmFsaWQnIH07XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZnVuY3Rpb24tc3RyaW5nLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/node_modules/@livestore/livestore/dist/utils/function-string.js\n");

/***/ }),

/***/ "(rsc)/./src/node_modules/@livestore/utils/dist/Deferred.js":
/*!************************************************************!*\
  !*** ./src/node_modules/@livestore/utils/dist/Deferred.js ***!
  \************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Deferred: () => (/* binding */ Deferred)\n/* harmony export */ });\nclass Deferred {\n    _promise;\n    _resolve;\n    _reject;\n    constructor() {\n        this._promise = new Promise((resolve, reject) => {\n            this._resolve = resolve;\n            this._reject = reject;\n        });\n    }\n    get promise() {\n        return this._promise;\n    }\n    resolve = (value) => {\n        this._resolve(value);\n    };\n    reject = (reason) => {\n        this._reject(reason);\n    };\n}\n//# sourceMappingURL=Deferred.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbm9kZV9tb2R1bGVzL0BsaXZlc3RvcmUvdXRpbHMvZGlzdC9EZWZlcnJlZC5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hbmFjb25kYS1hc3Nlc21lbnQtMS8uL3NyYy9ub2RlX21vZHVsZXMvQGxpdmVzdG9yZS91dGlscy9kaXN0L0RlZmVycmVkLmpzPzI2YzYiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNsYXNzIERlZmVycmVkIHtcbiAgICBfcHJvbWlzZTtcbiAgICBfcmVzb2x2ZTtcbiAgICBfcmVqZWN0O1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLl9wcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5fcmVzb2x2ZSA9IHJlc29sdmU7XG4gICAgICAgICAgICB0aGlzLl9yZWplY3QgPSByZWplY3Q7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBnZXQgcHJvbWlzZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Byb21pc2U7XG4gICAgfVxuICAgIHJlc29sdmUgPSAodmFsdWUpID0+IHtcbiAgICAgICAgdGhpcy5fcmVzb2x2ZSh2YWx1ZSk7XG4gICAgfTtcbiAgICByZWplY3QgPSAocmVhc29uKSA9PiB7XG4gICAgICAgIHRoaXMuX3JlamVjdChyZWFzb24pO1xuICAgIH07XG59XG4vLyMgc291cmNlTWFwcGluZ1VSTD1EZWZlcnJlZC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/node_modules/@livestore/utils/dist/Deferred.js\n");

/***/ }),

/***/ "(rsc)/./src/node_modules/@livestore/utils/dist/NoopTracer.js":
/*!**************************************************************!*\
  !*** ./src/node_modules/@livestore/utils/dist/NoopTracer.js ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   NoopTracer: () => (/* binding */ NoopTracer),\n/* harmony export */   makeNoopSpan: () => (/* binding */ makeNoopSpan),\n/* harmony export */   makeNoopTracer: () => (/* binding */ makeNoopTracer)\n/* harmony export */ });\nconst makeNoopSpan = () => {\n    const performanceStartTime = performance.now();\n    const span = {\n        _performanceStartTime: performanceStartTime,\n        setAttribute: () => null,\n        setAttributes: () => null,\n        addEvent: () => null,\n        setStatus: () => null,\n        updateName: () => null,\n        recordException: () => null,\n        end: () => {\n            const endTime = performance.now();\n            const duration = endTime - performanceStartTime;\n            const durationSecs = duration / 1000;\n            const durationRestNs = (duration % 1000) * 1_000_000;\n            span._duration = [durationSecs, durationRestNs];\n        },\n        spanContext: () => {\n            return { traceId: 'livestore-noop-trace-id', spanId: 'livestore-noop-span-id' };\n        },\n        _duration: [0, 0],\n    };\n    return span;\n};\nconst makeNoopTracer = () => {\n    return new NoopTracer();\n};\nclass NoopTracer {\n    startSpan = () => makeNoopSpan();\n    startActiveSpan(name, arg2, arg3, arg4) {\n        let _opts;\n        let _ctx;\n        let fn;\n        if (arguments.length < 2) {\n            return;\n        }\n        else if (arguments.length === 2) {\n            fn = arg2;\n        }\n        else if (arguments.length === 3) {\n            _opts = arg2;\n            fn = arg3;\n        }\n        else {\n            _opts = arg2;\n            _ctx = arg3;\n            fn = arg4;\n        }\n        return fn(makeNoopSpan());\n    }\n}\n//# sourceMappingURL=NoopTracer.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbm9kZV9tb2R1bGVzL0BsaXZlc3RvcmUvdXRpbHMvZGlzdC9Ob29wVHJhY2VyLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EscUJBQXFCO0FBQ3JCLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYW5hY29uZGEtYXNzZXNtZW50LTEvLi9zcmMvbm9kZV9tb2R1bGVzL0BsaXZlc3RvcmUvdXRpbHMvZGlzdC9Ob29wVHJhY2VyLmpzPzlhZDMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IG1ha2VOb29wU3BhbiA9ICgpID0+IHtcbiAgICBjb25zdCBwZXJmb3JtYW5jZVN0YXJ0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpO1xuICAgIGNvbnN0IHNwYW4gPSB7XG4gICAgICAgIF9wZXJmb3JtYW5jZVN0YXJ0VGltZTogcGVyZm9ybWFuY2VTdGFydFRpbWUsXG4gICAgICAgIHNldEF0dHJpYnV0ZTogKCkgPT4gbnVsbCxcbiAgICAgICAgc2V0QXR0cmlidXRlczogKCkgPT4gbnVsbCxcbiAgICAgICAgYWRkRXZlbnQ6ICgpID0+IG51bGwsXG4gICAgICAgIHNldFN0YXR1czogKCkgPT4gbnVsbCxcbiAgICAgICAgdXBkYXRlTmFtZTogKCkgPT4gbnVsbCxcbiAgICAgICAgcmVjb3JkRXhjZXB0aW9uOiAoKSA9PiBudWxsLFxuICAgICAgICBlbmQ6ICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGVuZFRpbWUgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgICAgICAgICAgIGNvbnN0IGR1cmF0aW9uID0gZW5kVGltZSAtIHBlcmZvcm1hbmNlU3RhcnRUaW1lO1xuICAgICAgICAgICAgY29uc3QgZHVyYXRpb25TZWNzID0gZHVyYXRpb24gLyAxMDAwO1xuICAgICAgICAgICAgY29uc3QgZHVyYXRpb25SZXN0TnMgPSAoZHVyYXRpb24gJSAxMDAwKSAqIDFfMDAwXzAwMDtcbiAgICAgICAgICAgIHNwYW4uX2R1cmF0aW9uID0gW2R1cmF0aW9uU2VjcywgZHVyYXRpb25SZXN0TnNdO1xuICAgICAgICB9LFxuICAgICAgICBzcGFuQ29udGV4dDogKCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHsgdHJhY2VJZDogJ2xpdmVzdG9yZS1ub29wLXRyYWNlLWlkJywgc3BhbklkOiAnbGl2ZXN0b3JlLW5vb3Atc3Bhbi1pZCcgfTtcbiAgICAgICAgfSxcbiAgICAgICAgX2R1cmF0aW9uOiBbMCwgMF0sXG4gICAgfTtcbiAgICByZXR1cm4gc3Bhbjtcbn07XG5leHBvcnQgY29uc3QgbWFrZU5vb3BUcmFjZXIgPSAoKSA9PiB7XG4gICAgcmV0dXJuIG5ldyBOb29wVHJhY2VyKCk7XG59O1xuZXhwb3J0IGNsYXNzIE5vb3BUcmFjZXIge1xuICAgIHN0YXJ0U3BhbiA9ICgpID0+IG1ha2VOb29wU3BhbigpO1xuICAgIHN0YXJ0QWN0aXZlU3BhbihuYW1lLCBhcmcyLCBhcmczLCBhcmc0KSB7XG4gICAgICAgIGxldCBfb3B0cztcbiAgICAgICAgbGV0IF9jdHg7XG4gICAgICAgIGxldCBmbjtcbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPCAyKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMikge1xuICAgICAgICAgICAgZm4gPSBhcmcyO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDMpIHtcbiAgICAgICAgICAgIF9vcHRzID0gYXJnMjtcbiAgICAgICAgICAgIGZuID0gYXJnMztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIF9vcHRzID0gYXJnMjtcbiAgICAgICAgICAgIF9jdHggPSBhcmczO1xuICAgICAgICAgICAgZm4gPSBhcmc0O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmbihtYWtlTm9vcFNwYW4oKSk7XG4gICAgfVxufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Tm9vcFRyYWNlci5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/node_modules/@livestore/utils/dist/NoopTracer.js\n");

/***/ }),

/***/ "(rsc)/./src/node_modules/@livestore/utils/dist/base64.js":
/*!**********************************************************!*\
  !*** ./src/node_modules/@livestore/utils/dist/base64.js ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   decode: () => (/* binding */ decode),\n/* harmony export */   decodeToString: () => (/* binding */ decodeToString),\n/* harmony export */   encode: () => (/* binding */ encode)\n/* harmony export */ });\n// Copyright 2018-2022 the Deno authors. All rights reserved. MIT license.\n// This module is browser compatible.\n// https://deno.land/std/encoding/base64.ts\nconst base64abc = [\n    'A',\n    'B',\n    'C',\n    'D',\n    'E',\n    'F',\n    'G',\n    'H',\n    'I',\n    'J',\n    'K',\n    'L',\n    'M',\n    'N',\n    'O',\n    'P',\n    'Q',\n    'R',\n    'S',\n    'T',\n    'U',\n    'V',\n    'W',\n    'X',\n    'Y',\n    'Z',\n    'a',\n    'b',\n    'c',\n    'd',\n    'e',\n    'f',\n    'g',\n    'h',\n    'i',\n    'j',\n    'k',\n    'l',\n    'm',\n    'n',\n    'o',\n    'p',\n    'q',\n    'r',\n    's',\n    't',\n    'u',\n    'v',\n    'w',\n    'x',\n    'y',\n    'z',\n    '0',\n    '1',\n    '2',\n    '3',\n    '4',\n    '5',\n    '6',\n    '7',\n    '8',\n    '9',\n    '+',\n    '/',\n];\nconst textEncoder = new TextEncoder();\n/**\n * CREDIT: https://gist.github.com/enepomnyaschih/72c423f727d395eeaa09697058238727\n * Encodes a given Uint8Array, ArrayBuffer or string into RFC4648 base64 representation\n * @param data\n */\nconst encode = (data) => {\n    const uint8 = typeof data === 'string' ? textEncoder.encode(data) : data instanceof Uint8Array ? data : new Uint8Array(data);\n    let result = '', i;\n    const l = uint8.length;\n    for (i = 2; i < l; i += 3) {\n        result += base64abc[uint8[i - 2] >> 2];\n        result += base64abc[((uint8[i - 2] & 0x03) << 4) | (uint8[i - 1] >> 4)];\n        result += base64abc[((uint8[i - 1] & 0x0f) << 2) | (uint8[i] >> 6)];\n        result += base64abc[uint8[i] & 0x3f];\n    }\n    if (i === l + 1) {\n        // 1 octet yet to write\n        result += base64abc[uint8[i - 2] >> 2];\n        result += base64abc[(uint8[i - 2] & 0x03) << 4];\n        result += '==';\n    }\n    if (i === l) {\n        // 2 octets yet to write\n        result += base64abc[uint8[i - 2] >> 2];\n        result += base64abc[((uint8[i - 2] & 0x03) << 4) | (uint8[i - 1] >> 4)];\n        result += base64abc[(uint8[i - 1] & 0x0f) << 2];\n        result += '=';\n    }\n    return result;\n};\n/**\n * Decodes a given RFC4648 base64 encoded string\n * @param b64\n */\nconst decode = (b64) => {\n    const binString = atob(b64);\n    const size = binString.length;\n    const bytes = new Uint8Array(size);\n    for (let i = 0; i < size; i++) {\n        // eslint-disable-next-line unicorn/prefer-code-point\n        bytes[i] = binString.charCodeAt(i);\n    }\n    return bytes;\n};\nconst textDecoder = new TextDecoder();\nconst decodeToString = (b64) => textDecoder.decode(decode(b64));\n//# sourceMappingURL=base64.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbm9kZV9tb2R1bGVzL0BsaXZlc3RvcmUvdXRpbHMvZGlzdC9iYXNlNjQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsT0FBTztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixVQUFVO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1AiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hbmFjb25kYS1hc3Nlc21lbnQtMS8uL3NyYy9ub2RlX21vZHVsZXMvQGxpdmVzdG9yZS91dGlscy9kaXN0L2Jhc2U2NC5qcz82NTJmIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDE4LTIwMjIgdGhlIERlbm8gYXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC4gTUlUIGxpY2Vuc2UuXG4vLyBUaGlzIG1vZHVsZSBpcyBicm93c2VyIGNvbXBhdGlibGUuXG4vLyBodHRwczovL2Rlbm8ubGFuZC9zdGQvZW5jb2RpbmcvYmFzZTY0LnRzXG5jb25zdCBiYXNlNjRhYmMgPSBbXG4gICAgJ0EnLFxuICAgICdCJyxcbiAgICAnQycsXG4gICAgJ0QnLFxuICAgICdFJyxcbiAgICAnRicsXG4gICAgJ0cnLFxuICAgICdIJyxcbiAgICAnSScsXG4gICAgJ0onLFxuICAgICdLJyxcbiAgICAnTCcsXG4gICAgJ00nLFxuICAgICdOJyxcbiAgICAnTycsXG4gICAgJ1AnLFxuICAgICdRJyxcbiAgICAnUicsXG4gICAgJ1MnLFxuICAgICdUJyxcbiAgICAnVScsXG4gICAgJ1YnLFxuICAgICdXJyxcbiAgICAnWCcsXG4gICAgJ1knLFxuICAgICdaJyxcbiAgICAnYScsXG4gICAgJ2InLFxuICAgICdjJyxcbiAgICAnZCcsXG4gICAgJ2UnLFxuICAgICdmJyxcbiAgICAnZycsXG4gICAgJ2gnLFxuICAgICdpJyxcbiAgICAnaicsXG4gICAgJ2snLFxuICAgICdsJyxcbiAgICAnbScsXG4gICAgJ24nLFxuICAgICdvJyxcbiAgICAncCcsXG4gICAgJ3EnLFxuICAgICdyJyxcbiAgICAncycsXG4gICAgJ3QnLFxuICAgICd1JyxcbiAgICAndicsXG4gICAgJ3cnLFxuICAgICd4JyxcbiAgICAneScsXG4gICAgJ3onLFxuICAgICcwJyxcbiAgICAnMScsXG4gICAgJzInLFxuICAgICczJyxcbiAgICAnNCcsXG4gICAgJzUnLFxuICAgICc2JyxcbiAgICAnNycsXG4gICAgJzgnLFxuICAgICc5JyxcbiAgICAnKycsXG4gICAgJy8nLFxuXTtcbmNvbnN0IHRleHRFbmNvZGVyID0gbmV3IFRleHRFbmNvZGVyKCk7XG4vKipcbiAqIENSRURJVDogaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vZW5lcG9tbnlhc2NoaWgvNzJjNDIzZjcyN2QzOTVlZWFhMDk2OTcwNTgyMzg3MjdcbiAqIEVuY29kZXMgYSBnaXZlbiBVaW50OEFycmF5LCBBcnJheUJ1ZmZlciBvciBzdHJpbmcgaW50byBSRkM0NjQ4IGJhc2U2NCByZXByZXNlbnRhdGlvblxuICogQHBhcmFtIGRhdGFcbiAqL1xuZXhwb3J0IGNvbnN0IGVuY29kZSA9IChkYXRhKSA9PiB7XG4gICAgY29uc3QgdWludDggPSB0eXBlb2YgZGF0YSA9PT0gJ3N0cmluZycgPyB0ZXh0RW5jb2Rlci5lbmNvZGUoZGF0YSkgOiBkYXRhIGluc3RhbmNlb2YgVWludDhBcnJheSA/IGRhdGEgOiBuZXcgVWludDhBcnJheShkYXRhKTtcbiAgICBsZXQgcmVzdWx0ID0gJycsIGk7XG4gICAgY29uc3QgbCA9IHVpbnQ4Lmxlbmd0aDtcbiAgICBmb3IgKGkgPSAyOyBpIDwgbDsgaSArPSAzKSB7XG4gICAgICAgIHJlc3VsdCArPSBiYXNlNjRhYmNbdWludDhbaSAtIDJdID4+IDJdO1xuICAgICAgICByZXN1bHQgKz0gYmFzZTY0YWJjWygodWludDhbaSAtIDJdICYgMHgwMykgPDwgNCkgfCAodWludDhbaSAtIDFdID4+IDQpXTtcbiAgICAgICAgcmVzdWx0ICs9IGJhc2U2NGFiY1soKHVpbnQ4W2kgLSAxXSAmIDB4MGYpIDw8IDIpIHwgKHVpbnQ4W2ldID4+IDYpXTtcbiAgICAgICAgcmVzdWx0ICs9IGJhc2U2NGFiY1t1aW50OFtpXSAmIDB4M2ZdO1xuICAgIH1cbiAgICBpZiAoaSA9PT0gbCArIDEpIHtcbiAgICAgICAgLy8gMSBvY3RldCB5ZXQgdG8gd3JpdGVcbiAgICAgICAgcmVzdWx0ICs9IGJhc2U2NGFiY1t1aW50OFtpIC0gMl0gPj4gMl07XG4gICAgICAgIHJlc3VsdCArPSBiYXNlNjRhYmNbKHVpbnQ4W2kgLSAyXSAmIDB4MDMpIDw8IDRdO1xuICAgICAgICByZXN1bHQgKz0gJz09JztcbiAgICB9XG4gICAgaWYgKGkgPT09IGwpIHtcbiAgICAgICAgLy8gMiBvY3RldHMgeWV0IHRvIHdyaXRlXG4gICAgICAgIHJlc3VsdCArPSBiYXNlNjRhYmNbdWludDhbaSAtIDJdID4+IDJdO1xuICAgICAgICByZXN1bHQgKz0gYmFzZTY0YWJjWygodWludDhbaSAtIDJdICYgMHgwMykgPDwgNCkgfCAodWludDhbaSAtIDFdID4+IDQpXTtcbiAgICAgICAgcmVzdWx0ICs9IGJhc2U2NGFiY1sodWludDhbaSAtIDFdICYgMHgwZikgPDwgMl07XG4gICAgICAgIHJlc3VsdCArPSAnPSc7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG59O1xuLyoqXG4gKiBEZWNvZGVzIGEgZ2l2ZW4gUkZDNDY0OCBiYXNlNjQgZW5jb2RlZCBzdHJpbmdcbiAqIEBwYXJhbSBiNjRcbiAqL1xuZXhwb3J0IGNvbnN0IGRlY29kZSA9IChiNjQpID0+IHtcbiAgICBjb25zdCBiaW5TdHJpbmcgPSBhdG9iKGI2NCk7XG4gICAgY29uc3Qgc2l6ZSA9IGJpblN0cmluZy5sZW5ndGg7XG4gICAgY29uc3QgYnl0ZXMgPSBuZXcgVWludDhBcnJheShzaXplKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNpemU7IGkrKykge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgdW5pY29ybi9wcmVmZXItY29kZS1wb2ludFxuICAgICAgICBieXRlc1tpXSA9IGJpblN0cmluZy5jaGFyQ29kZUF0KGkpO1xuICAgIH1cbiAgICByZXR1cm4gYnl0ZXM7XG59O1xuY29uc3QgdGV4dERlY29kZXIgPSBuZXcgVGV4dERlY29kZXIoKTtcbmV4cG9ydCBjb25zdCBkZWNvZGVUb1N0cmluZyA9IChiNjQpID0+IHRleHREZWNvZGVyLmRlY29kZShkZWNvZGUoYjY0KSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1iYXNlNjQuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/node_modules/@livestore/utils/dist/base64.js\n");

/***/ }),

/***/ "(rsc)/./src/node_modules/@livestore/utils/dist/browser.js":
/*!***********************************************************!*\
  !*** ./src/node_modules/@livestore/utils/dist/browser.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   detectBrowserName: () => (/* binding */ detectBrowserName)\n/* harmony export */ });\nconst detectBrowserName = () => {\n    if (!navigator.userAgent) {\n        return 'Something';\n    }\n    const isOpera = navigator.userAgent.includes('OP');\n    const isChrome = navigator.userAgent.includes('Chrome') && !isOpera;\n    const isSafari = navigator.userAgent.includes('Safari') && !isChrome;\n    const isFirefox = navigator.userAgent.includes('Firefox');\n    const isEdge = navigator.userAgent.includes('Edg') || navigator.userAgent.includes('Trident');\n    // TODO: also parse out version\n    if (isOpera) {\n        return 'Opera';\n    }\n    if (isChrome) {\n        return 'Chrome';\n    }\n    if (isSafari) {\n        return 'Safari';\n    }\n    if (isFirefox) {\n        return 'Firefox';\n    }\n    if (isEdge) {\n        return 'Edge';\n    }\n    return 'Browser';\n};\n//# sourceMappingURL=browser.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbm9kZV9tb2R1bGVzL0BsaXZlc3RvcmUvdXRpbHMvZGlzdC9icm93c2VyLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2FuYWNvbmRhLWFzc2VzbWVudC0xLy4vc3JjL25vZGVfbW9kdWxlcy9AbGl2ZXN0b3JlL3V0aWxzL2Rpc3QvYnJvd3Nlci5qcz84YjZhIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBkZXRlY3RCcm93c2VyTmFtZSA9ICgpID0+IHtcbiAgICBpZiAoIW5hdmlnYXRvci51c2VyQWdlbnQpIHtcbiAgICAgICAgcmV0dXJuICdTb21ldGhpbmcnO1xuICAgIH1cbiAgICBjb25zdCBpc09wZXJhID0gbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmNsdWRlcygnT1AnKTtcbiAgICBjb25zdCBpc0Nocm9tZSA9IG5hdmlnYXRvci51c2VyQWdlbnQuaW5jbHVkZXMoJ0Nocm9tZScpICYmICFpc09wZXJhO1xuICAgIGNvbnN0IGlzU2FmYXJpID0gbmF2aWdhdG9yLnVzZXJBZ2VudC5pbmNsdWRlcygnU2FmYXJpJykgJiYgIWlzQ2hyb21lO1xuICAgIGNvbnN0IGlzRmlyZWZveCA9IG5hdmlnYXRvci51c2VyQWdlbnQuaW5jbHVkZXMoJ0ZpcmVmb3gnKTtcbiAgICBjb25zdCBpc0VkZ2UgPSBuYXZpZ2F0b3IudXNlckFnZW50LmluY2x1ZGVzKCdFZGcnKSB8fCBuYXZpZ2F0b3IudXNlckFnZW50LmluY2x1ZGVzKCdUcmlkZW50Jyk7XG4gICAgLy8gVE9ETzogYWxzbyBwYXJzZSBvdXQgdmVyc2lvblxuICAgIGlmIChpc09wZXJhKSB7XG4gICAgICAgIHJldHVybiAnT3BlcmEnO1xuICAgIH1cbiAgICBpZiAoaXNDaHJvbWUpIHtcbiAgICAgICAgcmV0dXJuICdDaHJvbWUnO1xuICAgIH1cbiAgICBpZiAoaXNTYWZhcmkpIHtcbiAgICAgICAgcmV0dXJuICdTYWZhcmknO1xuICAgIH1cbiAgICBpZiAoaXNGaXJlZm94KSB7XG4gICAgICAgIHJldHVybiAnRmlyZWZveCc7XG4gICAgfVxuICAgIGlmIChpc0VkZ2UpIHtcbiAgICAgICAgcmV0dXJuICdFZGdlJztcbiAgICB9XG4gICAgcmV0dXJuICdCcm93c2VyJztcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1icm93c2VyLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/node_modules/@livestore/utils/dist/browser.js\n");

/***/ }),

/***/ "(rsc)/./src/node_modules/@livestore/utils/dist/effect/Schema/debug-diff.js":
/*!****************************************************************************!*\
  !*** ./src/node_modules/@livestore/utils/dist/effect/Schema/debug-diff.js ***!
  \****************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   debugDiff: () => (/* binding */ debugDiff)\n/* harmony export */ });\n/* harmony import */ var effect__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! effect */ \"(rsc)/./src/node_modules/effect/dist/esm/Schema.js\");\n/* harmony import */ var effect__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! effect */ \"(rsc)/./src/node_modules/effect/dist/esm/SchemaAST.js\");\n\n/**\n * Diffs two values for a given schema and traverses downwards and returns a list of differences.\n */\nconst debugDiff = (base) => (a, b) => {\n    const bag = [];\n    debugDiffImpl(base.ast, a, b, '', bag);\n    return bag;\n};\nconst debugDiffImpl = (ast, a, b, path, bag) => {\n    const eq = effect__WEBPACK_IMPORTED_MODULE_0__.equivalence({ ast });\n    if (eq(a, b) === false) {\n        // bag.push({ path, a, b, ast })\n        if (effect__WEBPACK_IMPORTED_MODULE_1__.isUnion(ast)) {\n            if (isTaggedUnion(ast)) {\n                bag.push({ path, a, b, ast });\n                return;\n            }\n            else {\n                for (const type of ast.types) {\n                    try {\n                        debugDiffImpl(type, a, b, path, bag);\n                        return;\n                    }\n                    catch { }\n                }\n            }\n        }\n        else if (effect__WEBPACK_IMPORTED_MODULE_1__.isTypeLiteral(ast)) {\n            const props = effect__WEBPACK_IMPORTED_MODULE_1__.getPropertySignatures(ast);\n            for (const prop of props) {\n                debugDiffImpl(prop.type, a[prop.name], b[prop.name], `${path}.${prop.name.toString()}`, bag);\n            }\n        }\n        else {\n            // debugger\n            bag.push({ path, a, b, ast });\n        }\n    }\n};\nconst isTaggedUnion = (ast) => {\n    if (effect__WEBPACK_IMPORTED_MODULE_1__.isUnion(ast)) {\n        return ast.types.every((type) => {\n            if (effect__WEBPACK_IMPORTED_MODULE_1__.isTypeLiteral(type) === false)\n                return false;\n            const props = effect__WEBPACK_IMPORTED_MODULE_1__.getPropertySignatures(type);\n            return props.some((prop) => prop.name.toString() === '_tag');\n        });\n    }\n};\n//# sourceMappingURL=debug-diff.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbm9kZV9tb2R1bGVzL0BsaXZlc3RvcmUvdXRpbHMvZGlzdC9lZmZlY3QvU2NoZW1hL2RlYnVnLWRpZmYuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQTJDO0FBQzNDO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsK0NBQWtCLEdBQUcsS0FBSztBQUN6QztBQUNBLHNCQUFzQixpQkFBaUI7QUFDdkMsWUFBWSwyQ0FBaUI7QUFDN0I7QUFDQSwyQkFBMkIsaUJBQWlCO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixpREFBdUI7QUFDeEMsMEJBQTBCLHlEQUErQjtBQUN6RDtBQUNBLHdFQUF3RSxLQUFLLEdBQUcscUJBQXFCO0FBQ3JHO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLGlCQUFpQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVEsMkNBQWlCO0FBQ3pCO0FBQ0EsZ0JBQWdCLGlEQUF1QjtBQUN2QztBQUNBLDBCQUEwQix5REFBK0I7QUFDekQ7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYW5hY29uZGEtYXNzZXNtZW50LTEvLi9zcmMvbm9kZV9tb2R1bGVzL0BsaXZlc3RvcmUvdXRpbHMvZGlzdC9lZmZlY3QvU2NoZW1hL2RlYnVnLWRpZmYuanM/MTJlZSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBTY2hlbWEsIFNjaGVtYUFTVCB9IGZyb20gJ2VmZmVjdCc7XG4vKipcbiAqIERpZmZzIHR3byB2YWx1ZXMgZm9yIGEgZ2l2ZW4gc2NoZW1hIGFuZCB0cmF2ZXJzZXMgZG93bndhcmRzIGFuZCByZXR1cm5zIGEgbGlzdCBvZiBkaWZmZXJlbmNlcy5cbiAqL1xuZXhwb3J0IGNvbnN0IGRlYnVnRGlmZiA9IChiYXNlKSA9PiAoYSwgYikgPT4ge1xuICAgIGNvbnN0IGJhZyA9IFtdO1xuICAgIGRlYnVnRGlmZkltcGwoYmFzZS5hc3QsIGEsIGIsICcnLCBiYWcpO1xuICAgIHJldHVybiBiYWc7XG59O1xuY29uc3QgZGVidWdEaWZmSW1wbCA9IChhc3QsIGEsIGIsIHBhdGgsIGJhZykgPT4ge1xuICAgIGNvbnN0IGVxID0gU2NoZW1hLmVxdWl2YWxlbmNlKHsgYXN0IH0pO1xuICAgIGlmIChlcShhLCBiKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgLy8gYmFnLnB1c2goeyBwYXRoLCBhLCBiLCBhc3QgfSlcbiAgICAgICAgaWYgKFNjaGVtYUFTVC5pc1VuaW9uKGFzdCkpIHtcbiAgICAgICAgICAgIGlmIChpc1RhZ2dlZFVuaW9uKGFzdCkpIHtcbiAgICAgICAgICAgICAgICBiYWcucHVzaCh7IHBhdGgsIGEsIGIsIGFzdCB9KTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHR5cGUgb2YgYXN0LnR5cGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkZWJ1Z0RpZmZJbXBsKHR5cGUsIGEsIGIsIHBhdGgsIGJhZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY2F0Y2ggeyB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKFNjaGVtYUFTVC5pc1R5cGVMaXRlcmFsKGFzdCkpIHtcbiAgICAgICAgICAgIGNvbnN0IHByb3BzID0gU2NoZW1hQVNULmdldFByb3BlcnR5U2lnbmF0dXJlcyhhc3QpO1xuICAgICAgICAgICAgZm9yIChjb25zdCBwcm9wIG9mIHByb3BzKSB7XG4gICAgICAgICAgICAgICAgZGVidWdEaWZmSW1wbChwcm9wLnR5cGUsIGFbcHJvcC5uYW1lXSwgYltwcm9wLm5hbWVdLCBgJHtwYXRofS4ke3Byb3AubmFtZS50b1N0cmluZygpfWAsIGJhZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBkZWJ1Z2dlclxuICAgICAgICAgICAgYmFnLnB1c2goeyBwYXRoLCBhLCBiLCBhc3QgfSk7XG4gICAgICAgIH1cbiAgICB9XG59O1xuY29uc3QgaXNUYWdnZWRVbmlvbiA9IChhc3QpID0+IHtcbiAgICBpZiAoU2NoZW1hQVNULmlzVW5pb24oYXN0KSkge1xuICAgICAgICByZXR1cm4gYXN0LnR5cGVzLmV2ZXJ5KCh0eXBlKSA9PiB7XG4gICAgICAgICAgICBpZiAoU2NoZW1hQVNULmlzVHlwZUxpdGVyYWwodHlwZSkgPT09IGZhbHNlKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIGNvbnN0IHByb3BzID0gU2NoZW1hQVNULmdldFByb3BlcnR5U2lnbmF0dXJlcyh0eXBlKTtcbiAgICAgICAgICAgIHJldHVybiBwcm9wcy5zb21lKChwcm9wKSA9PiBwcm9wLm5hbWUudG9TdHJpbmcoKSA9PT0gJ190YWcnKTtcbiAgICAgICAgfSk7XG4gICAgfVxufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRlYnVnLWRpZmYuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/node_modules/@livestore/utils/dist/effect/Schema/debug-diff.js\n");

/***/ }),

/***/ "(rsc)/./src/node_modules/@livestore/utils/dist/effect/Schema/index.js":
/*!***********************************************************************!*\
  !*** ./src/node_modules/@livestore/utils/dist/effect/Schema/index.js ***!
  \***********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Any: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Any),\n/* harmony export */   Array: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Array),\n/* harmony export */   ArrayEnsure: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.ArrayEnsure),\n/* harmony export */   ArrayFormatterIssue: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.ArrayFormatterIssue),\n/* harmony export */   Base64FromUint8Array: () => (/* binding */ Base64FromUint8Array),\n/* harmony export */   BetweenBigDecimalSchemaId: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.BetweenBigDecimalSchemaId),\n/* harmony export */   BetweenBigIntSchemaId: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.BetweenBigIntSchemaId),\n/* harmony export */   BetweenDateSchemaId: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.BetweenDateSchemaId),\n/* harmony export */   BetweenDurationSchemaId: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.BetweenDurationSchemaId),\n/* harmony export */   BetweenSchemaId: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.BetweenSchemaId),\n/* harmony export */   BigDecimal: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.BigDecimal),\n/* harmony export */   BigDecimalFromNumber: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.BigDecimalFromNumber),\n/* harmony export */   BigDecimalFromSelf: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.BigDecimalFromSelf),\n/* harmony export */   BigInt: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.BigInt),\n/* harmony export */   BigIntFromNumber: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.BigIntFromNumber),\n/* harmony export */   BigIntFromSelf: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.BigIntFromSelf),\n/* harmony export */   Boolean: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Boolean),\n/* harmony export */   BooleanFromString: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.BooleanFromString),\n/* harmony export */   BooleanFromUnknown: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.BooleanFromUnknown),\n/* harmony export */   BrandSchemaId: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.BrandSchemaId),\n/* harmony export */   Capitalize: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Capitalize),\n/* harmony export */   Capitalized: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Capitalized),\n/* harmony export */   CapitalizedSchemaId: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.CapitalizedSchemaId),\n/* harmony export */   Cause: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Cause),\n/* harmony export */   CauseFromSelf: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.CauseFromSelf),\n/* harmony export */   Char: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Char),\n/* harmony export */   Chunk: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Chunk),\n/* harmony export */   ChunkFromSelf: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.ChunkFromSelf),\n/* harmony export */   Class: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Class),\n/* harmony export */   Config: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Config),\n/* harmony export */   Data: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Data),\n/* harmony export */   DataFromSelf: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.DataFromSelf),\n/* harmony export */   Date: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Date),\n/* harmony export */   DateFromNumber: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.DateFromNumber),\n/* harmony export */   DateFromSelf: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.DateFromSelf),\n/* harmony export */   DateFromSelfSchemaId: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.DateFromSelfSchemaId),\n/* harmony export */   DateFromString: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.DateFromString),\n/* harmony export */   DateTimeUtc: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.DateTimeUtc),\n/* harmony export */   DateTimeUtcFromDate: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.DateTimeUtcFromDate),\n/* harmony export */   DateTimeUtcFromNumber: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.DateTimeUtcFromNumber),\n/* harmony export */   DateTimeUtcFromSelf: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.DateTimeUtcFromSelf),\n/* harmony export */   DateTimeZoned: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.DateTimeZoned),\n/* harmony export */   DateTimeZonedFromSelf: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.DateTimeZonedFromSelf),\n/* harmony export */   Defect: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Defect),\n/* harmony export */   Duration: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Duration),\n/* harmony export */   DurationFromMillis: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.DurationFromMillis),\n/* harmony export */   DurationFromNanos: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.DurationFromNanos),\n/* harmony export */   DurationFromSelf: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.DurationFromSelf),\n/* harmony export */   Either: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Either),\n/* harmony export */   EitherFromSelf: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.EitherFromSelf),\n/* harmony export */   EitherFromUnion: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.EitherFromUnion),\n/* harmony export */   EndsWithSchemaId: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.EndsWithSchemaId),\n/* harmony export */   Enums: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Enums),\n/* harmony export */   Exit: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Exit),\n/* harmony export */   ExitFromSelf: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.ExitFromSelf),\n/* harmony export */   FiberId: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.FiberId),\n/* harmony export */   FiberIdFromSelf: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.FiberIdFromSelf),\n/* harmony export */   Finite: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Finite),\n/* harmony export */   FiniteSchemaId: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.FiniteSchemaId),\n/* harmony export */   FromPropertySignature: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.FromPropertySignature),\n/* harmony export */   GreaterThanBigDecimalSchemaId: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.GreaterThanBigDecimalSchemaId),\n/* harmony export */   GreaterThanBigIntSchemaId: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.GreaterThanBigIntSchemaId),\n/* harmony export */   GreaterThanDateSchemaId: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.GreaterThanDateSchemaId),\n/* harmony export */   GreaterThanDurationSchemaId: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.GreaterThanDurationSchemaId),\n/* harmony export */   GreaterThanOrEqualToBigDecimalSchemaId: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.GreaterThanOrEqualToBigDecimalSchemaId),\n/* harmony export */   GreaterThanOrEqualToBigIntSchemaId: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.GreaterThanOrEqualToBigIntSchemaId),\n/* harmony export */   GreaterThanOrEqualToDateSchemaId: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.GreaterThanOrEqualToDateSchemaId),\n/* harmony export */   GreaterThanOrEqualToDurationSchemaId: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.GreaterThanOrEqualToDurationSchemaId),\n/* harmony export */   GreaterThanOrEqualToSchemaId: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.GreaterThanOrEqualToSchemaId),\n/* harmony export */   GreaterThanSchemaId: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.GreaterThanSchemaId),\n/* harmony export */   HashMap: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.HashMap),\n/* harmony export */   HashMapFromSelf: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.HashMapFromSelf),\n/* harmony export */   HashSet: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.HashSet),\n/* harmony export */   HashSetFromSelf: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.HashSetFromSelf),\n/* harmony export */   IncludesSchemaId: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.IncludesSchemaId),\n/* harmony export */   InstanceOfSchemaId: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.InstanceOfSchemaId),\n/* harmony export */   Int: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Int),\n/* harmony export */   IntSchemaId: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.IntSchemaId),\n/* harmony export */   ItemsCountSchemaId: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.ItemsCountSchemaId),\n/* harmony export */   JsonNumber: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.JsonNumber),\n/* harmony export */   JsonNumberSchemaId: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.JsonNumberSchemaId),\n/* harmony export */   JsonValue: () => (/* binding */ JsonValue),\n/* harmony export */   LengthSchemaId: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.LengthSchemaId),\n/* harmony export */   LessThanBigDecimalSchemaId: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.LessThanBigDecimalSchemaId),\n/* harmony export */   LessThanBigIntSchemaId: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.LessThanBigIntSchemaId),\n/* harmony export */   LessThanDateSchemaId: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.LessThanDateSchemaId),\n/* harmony export */   LessThanDurationSchemaId: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.LessThanDurationSchemaId),\n/* harmony export */   LessThanOrEqualToBigDecimalSchemaId: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.LessThanOrEqualToBigDecimalSchemaId),\n/* harmony export */   LessThanOrEqualToBigIntSchemaId: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.LessThanOrEqualToBigIntSchemaId),\n/* harmony export */   LessThanOrEqualToDateSchemaId: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.LessThanOrEqualToDateSchemaId),\n/* harmony export */   LessThanOrEqualToDurationSchemaId: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.LessThanOrEqualToDurationSchemaId),\n/* harmony export */   LessThanOrEqualToSchemaId: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.LessThanOrEqualToSchemaId),\n/* harmony export */   LessThanSchemaId: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.LessThanSchemaId),\n/* harmony export */   List: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.List),\n/* harmony export */   ListFromSelf: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.ListFromSelf),\n/* harmony export */   Literal: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Literal),\n/* harmony export */   Lowercase: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Lowercase),\n/* harmony export */   Lowercased: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Lowercased),\n/* harmony export */   LowercasedSchemaId: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.LowercasedSchemaId),\n/* harmony export */   Map: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Map),\n/* harmony export */   MapFromRecord: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.MapFromRecord),\n/* harmony export */   MapFromSelf: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.MapFromSelf),\n/* harmony export */   MaxItemsSchemaId: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.MaxItemsSchemaId),\n/* harmony export */   MaxLengthSchemaId: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.MaxLengthSchemaId),\n/* harmony export */   MinItemsSchemaId: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.MinItemsSchemaId),\n/* harmony export */   MinLengthSchemaId: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.MinLengthSchemaId),\n/* harmony export */   MsgPack: () => (/* reexport safe */ _msgpack_js__WEBPACK_IMPORTED_MODULE_2__.MsgPack),\n/* harmony export */   MultipleOfSchemaId: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.MultipleOfSchemaId),\n/* harmony export */   Negative: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Negative),\n/* harmony export */   NegativeBigDecimalFromSelf: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.NegativeBigDecimalFromSelf),\n/* harmony export */   NegativeBigDecimalSchemaId: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.NegativeBigDecimalSchemaId),\n/* harmony export */   NegativeBigInt: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.NegativeBigInt),\n/* harmony export */   NegativeBigIntFromSelf: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.NegativeBigIntFromSelf),\n/* harmony export */   Never: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Never),\n/* harmony export */   NonEmptyArray: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.NonEmptyArray),\n/* harmony export */   NonEmptyArrayEnsure: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.NonEmptyArrayEnsure),\n/* harmony export */   NonEmptyChunk: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.NonEmptyChunk),\n/* harmony export */   NonEmptyChunkFromSelf: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.NonEmptyChunkFromSelf),\n/* harmony export */   NonEmptyString: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.NonEmptyString),\n/* harmony export */   NonEmptyTrimmedString: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.NonEmptyTrimmedString),\n/* harmony export */   NonNaN: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.NonNaN),\n/* harmony export */   NonNaNSchemaId: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.NonNaNSchemaId),\n/* harmony export */   NonNegative: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.NonNegative),\n/* harmony export */   NonNegativeBigDecimalFromSelf: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.NonNegativeBigDecimalFromSelf),\n/* harmony export */   NonNegativeBigDecimalSchemaId: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.NonNegativeBigDecimalSchemaId),\n/* harmony export */   NonNegativeBigInt: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.NonNegativeBigInt),\n/* harmony export */   NonNegativeBigIntFromSelf: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.NonNegativeBigIntFromSelf),\n/* harmony export */   NonNegativeInt: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.NonNegativeInt),\n/* harmony export */   NonPositive: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.NonPositive),\n/* harmony export */   NonPositiveBigDecimalFromSelf: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.NonPositiveBigDecimalFromSelf),\n/* harmony export */   NonPositiveBigDecimalSchemaId: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.NonPositiveBigDecimalSchemaId),\n/* harmony export */   NonPositiveBigInt: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.NonPositiveBigInt),\n/* harmony export */   NonPositiveBigIntFromSelf: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.NonPositiveBigIntFromSelf),\n/* harmony export */   Not: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Not),\n/* harmony export */   Null: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Null),\n/* harmony export */   NullOr: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.NullOr),\n/* harmony export */   NullishOr: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.NullishOr),\n/* harmony export */   Number: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Number),\n/* harmony export */   NumberFromString: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.NumberFromString),\n/* harmony export */   Object: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Object),\n/* harmony export */   Option: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Option),\n/* harmony export */   OptionFromNonEmptyTrimmedString: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.OptionFromNonEmptyTrimmedString),\n/* harmony export */   OptionFromNullOr: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.OptionFromNullOr),\n/* harmony export */   OptionFromNullishOr: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.OptionFromNullishOr),\n/* harmony export */   OptionFromSelf: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.OptionFromSelf),\n/* harmony export */   OptionFromUndefinedOr: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.OptionFromUndefinedOr),\n/* harmony export */   PatternSchemaId: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.PatternSchemaId),\n/* harmony export */   Positive: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Positive),\n/* harmony export */   PositiveBigDecimalFromSelf: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.PositiveBigDecimalFromSelf),\n/* harmony export */   PositiveBigDecimalSchemaId: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.PositiveBigDecimalSchemaId),\n/* harmony export */   PositiveBigInt: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.PositiveBigInt),\n/* harmony export */   PositiveBigIntFromSelf: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.PositiveBigIntFromSelf),\n/* harmony export */   PropertyKey: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.PropertyKey),\n/* harmony export */   PropertySignatureDeclaration: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.PropertySignatureDeclaration),\n/* harmony export */   PropertySignatureTransformation: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.PropertySignatureTransformation),\n/* harmony export */   PropertySignatureTypeId: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.PropertySignatureTypeId),\n/* harmony export */   ReadonlyMap: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.ReadonlyMap),\n/* harmony export */   ReadonlyMapFromRecord: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.ReadonlyMapFromRecord),\n/* harmony export */   ReadonlyMapFromSelf: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.ReadonlyMapFromSelf),\n/* harmony export */   ReadonlySet: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.ReadonlySet),\n/* harmony export */   ReadonlySetFromSelf: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.ReadonlySetFromSelf),\n/* harmony export */   Record: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Record),\n/* harmony export */   Redacted: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Redacted),\n/* harmony export */   RedactedFromSelf: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.RedactedFromSelf),\n/* harmony export */   RefineSchemaId: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.RefineSchemaId),\n/* harmony export */   Set: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Set),\n/* harmony export */   SetFromSelf: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.SetFromSelf),\n/* harmony export */   SortedSet: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.SortedSet),\n/* harmony export */   SortedSetFromSelf: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.SortedSetFromSelf),\n/* harmony export */   StartsWithSchemaId: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.StartsWithSchemaId),\n/* harmony export */   String: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String),\n/* harmony export */   StringFromBase64: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.StringFromBase64),\n/* harmony export */   StringFromBase64Url: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.StringFromBase64Url),\n/* harmony export */   StringFromHex: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.StringFromHex),\n/* harmony export */   StringFromUriComponent: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.StringFromUriComponent),\n/* harmony export */   Struct: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Struct),\n/* harmony export */   Symbol: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Symbol),\n/* harmony export */   SymbolFromSelf: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.SymbolFromSelf),\n/* harmony export */   TaggedClass: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.TaggedClass),\n/* harmony export */   TaggedError: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.TaggedError),\n/* harmony export */   TaggedRequest: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.TaggedRequest),\n/* harmony export */   TaggedStruct: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.TaggedStruct),\n/* harmony export */   TemplateLiteral: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.TemplateLiteral),\n/* harmony export */   TemplateLiteralParser: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.TemplateLiteralParser),\n/* harmony export */   TimeZone: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.TimeZone),\n/* harmony export */   TimeZoneFromSelf: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.TimeZoneFromSelf),\n/* harmony export */   TimeZoneNamed: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.TimeZoneNamed),\n/* harmony export */   TimeZoneNamedFromSelf: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.TimeZoneNamedFromSelf),\n/* harmony export */   TimeZoneOffset: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.TimeZoneOffset),\n/* harmony export */   TimeZoneOffsetFromSelf: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.TimeZoneOffsetFromSelf),\n/* harmony export */   ToPropertySignature: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.ToPropertySignature),\n/* harmony export */   Trim: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Trim),\n/* harmony export */   Trimmed: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Trimmed),\n/* harmony export */   TrimmedSchemaId: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.TrimmedSchemaId),\n/* harmony export */   Tuple: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Tuple),\n/* harmony export */   TypeId: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.TypeId),\n/* harmony export */   ULID: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.ULID),\n/* harmony export */   ULIDSchemaId: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.ULIDSchemaId),\n/* harmony export */   URL: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.URL),\n/* harmony export */   URLFromSelf: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.URLFromSelf),\n/* harmony export */   UUID: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.UUID),\n/* harmony export */   UUIDSchemaId: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.UUIDSchemaId),\n/* harmony export */   Uint8: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Uint8),\n/* harmony export */   Uint8Array: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Uint8Array),\n/* harmony export */   Uint8ArrayFromBase64: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Uint8ArrayFromBase64),\n/* harmony export */   Uint8ArrayFromBase64Url: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Uint8ArrayFromBase64Url),\n/* harmony export */   Uint8ArrayFromHex: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Uint8ArrayFromHex),\n/* harmony export */   Uint8ArrayFromSelf: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Uint8ArrayFromSelf),\n/* harmony export */   Uncapitalize: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Uncapitalize),\n/* harmony export */   Uncapitalized: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Uncapitalized),\n/* harmony export */   UncapitalizedSchemaId: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.UncapitalizedSchemaId),\n/* harmony export */   Undefined: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Undefined),\n/* harmony export */   UndefinedOr: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.UndefinedOr),\n/* harmony export */   Union: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Union),\n/* harmony export */   UniqueSymbolFromSelf: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.UniqueSymbolFromSelf),\n/* harmony export */   Unknown: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Unknown),\n/* harmony export */   Uppercase: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Uppercase),\n/* harmony export */   Uppercased: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Uppercased),\n/* harmony export */   UppercasedSchemaId: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.UppercasedSchemaId),\n/* harmony export */   ValidDateFromSelf: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.ValidDateFromSelf),\n/* harmony export */   ValidDateSchemaId: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.ValidDateSchemaId),\n/* harmony export */   Void: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Void),\n/* harmony export */   annotations: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.annotations),\n/* harmony export */   asSchema: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.asSchema),\n/* harmony export */   asSerializable: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.asSerializable),\n/* harmony export */   asSerializableWithResult: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.asSerializableWithResult),\n/* harmony export */   asWithResult: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.asWithResult),\n/* harmony export */   asserts: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.asserts),\n/* harmony export */   attachPropertySignature: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.attachPropertySignature),\n/* harmony export */   between: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.between),\n/* harmony export */   betweenBigDecimal: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.betweenBigDecimal),\n/* harmony export */   betweenBigInt: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.betweenBigInt),\n/* harmony export */   betweenDate: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.betweenDate),\n/* harmony export */   betweenDuration: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.betweenDuration),\n/* harmony export */   brand: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.brand),\n/* harmony export */   capitalized: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.capitalized),\n/* harmony export */   clamp: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.clamp),\n/* harmony export */   clampBigDecimal: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.clampBigDecimal),\n/* harmony export */   clampBigInt: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.clampBigInt),\n/* harmony export */   clampDuration: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.clampDuration),\n/* harmony export */   compose: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.compose),\n/* harmony export */   debugDiff: () => (/* reexport safe */ _debug_diff_js__WEBPACK_IMPORTED_MODULE_1__.debugDiff),\n/* harmony export */   declare: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.declare),\n/* harmony export */   decode: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.decode),\n/* harmony export */   decodeEither: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.decodeEither),\n/* harmony export */   decodeOption: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.decodeOption),\n/* harmony export */   decodePromise: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.decodePromise),\n/* harmony export */   decodeSync: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.decodeSync),\n/* harmony export */   decodeSyncDebug: () => (/* binding */ decodeSyncDebug),\n/* harmony export */   decodeUnknown: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.decodeUnknown),\n/* harmony export */   decodeUnknownEither: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.decodeUnknownEither),\n/* harmony export */   decodeUnknownOption: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.decodeUnknownOption),\n/* harmony export */   decodeUnknownPromise: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.decodeUnknownPromise),\n/* harmony export */   decodeUnknownSync: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.decodeUnknownSync),\n/* harmony export */   deserialize: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.deserialize),\n/* harmony export */   deserializeExit: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.deserializeExit),\n/* harmony export */   deserializeFailure: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.deserializeFailure),\n/* harmony export */   deserializeSuccess: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.deserializeSuccess),\n/* harmony export */   element: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.element),\n/* harmony export */   encode: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.encode),\n/* harmony export */   encodeEither: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.encodeEither),\n/* harmony export */   encodeOption: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.encodeOption),\n/* harmony export */   encodePromise: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.encodePromise),\n/* harmony export */   encodeSync: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.encodeSync),\n/* harmony export */   encodeSyncDebug: () => (/* binding */ encodeSyncDebug),\n/* harmony export */   encodeUnknown: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.encodeUnknown),\n/* harmony export */   encodeUnknownEither: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.encodeUnknownEither),\n/* harmony export */   encodeUnknownOption: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.encodeUnknownOption),\n/* harmony export */   encodeUnknownPromise: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.encodeUnknownPromise),\n/* harmony export */   encodeUnknownSync: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.encodeUnknownSync),\n/* harmony export */   encodeWithTransferables: () => (/* binding */ encodeWithTransferables),\n/* harmony export */   encodedBoundSchema: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.encodedBoundSchema),\n/* harmony export */   encodedSchema: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.encodedSchema),\n/* harmony export */   endsWith: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.endsWith),\n/* harmony export */   equivalence: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.equivalence),\n/* harmony export */   exitSchema: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.exitSchema),\n/* harmony export */   extend: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.extend),\n/* harmony export */   failureSchema: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.failureSchema),\n/* harmony export */   filter: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.filter),\n/* harmony export */   filterEffect: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.filterEffect),\n/* harmony export */   finite: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.finite),\n/* harmony export */   format: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.format),\n/* harmony export */   fromBrand: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.fromBrand),\n/* harmony export */   fromKey: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.fromKey),\n/* harmony export */   getClassTag: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.getClassTag),\n/* harmony export */   getNumberIndexedAccess: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.getNumberIndexedAccess),\n/* harmony export */   greaterThan: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.greaterThan),\n/* harmony export */   greaterThanBigDecimal: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.greaterThanBigDecimal),\n/* harmony export */   greaterThanBigInt: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.greaterThanBigInt),\n/* harmony export */   greaterThanDate: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.greaterThanDate),\n/* harmony export */   greaterThanDuration: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.greaterThanDuration),\n/* harmony export */   greaterThanOrEqualTo: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.greaterThanOrEqualTo),\n/* harmony export */   greaterThanOrEqualToBigDecimal: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.greaterThanOrEqualToBigDecimal),\n/* harmony export */   greaterThanOrEqualToBigInt: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.greaterThanOrEqualToBigInt),\n/* harmony export */   greaterThanOrEqualToDate: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.greaterThanOrEqualToDate),\n/* harmony export */   greaterThanOrEqualToDuration: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.greaterThanOrEqualToDuration),\n/* harmony export */   hash: () => (/* binding */ hash),\n/* harmony export */   head: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.head),\n/* harmony export */   headNonEmpty: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.headNonEmpty),\n/* harmony export */   headOrElse: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.headOrElse),\n/* harmony export */   includes: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.includes),\n/* harmony export */   instanceOf: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.instanceOf),\n/* harmony export */   int: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.int),\n/* harmony export */   is: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.is),\n/* harmony export */   isPropertySignature: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.isPropertySignature),\n/* harmony export */   isSchema: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.isSchema),\n/* harmony export */   itemsCount: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.itemsCount),\n/* harmony export */   keyof: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.keyof),\n/* harmony export */   length: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.length),\n/* harmony export */   lessThan: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.lessThan),\n/* harmony export */   lessThanBigDecimal: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.lessThanBigDecimal),\n/* harmony export */   lessThanBigInt: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.lessThanBigInt),\n/* harmony export */   lessThanDate: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.lessThanDate),\n/* harmony export */   lessThanDuration: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.lessThanDuration),\n/* harmony export */   lessThanOrEqualTo: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.lessThanOrEqualTo),\n/* harmony export */   lessThanOrEqualToBigDecimal: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.lessThanOrEqualToBigDecimal),\n/* harmony export */   lessThanOrEqualToBigInt: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.lessThanOrEqualToBigInt),\n/* harmony export */   lessThanOrEqualToDate: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.lessThanOrEqualToDate),\n/* harmony export */   lessThanOrEqualToDuration: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.lessThanOrEqualToDuration),\n/* harmony export */   lowercased: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.lowercased),\n/* harmony export */   make: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.make),\n/* harmony export */   makePropertySignature: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.makePropertySignature),\n/* harmony export */   maxItems: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.maxItems),\n/* harmony export */   maxLength: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.maxLength),\n/* harmony export */   minItems: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.minItems),\n/* harmony export */   minLength: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.minLength),\n/* harmony export */   multipleOf: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.multipleOf),\n/* harmony export */   mutable: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.mutable),\n/* harmony export */   negative: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.negative),\n/* harmony export */   negativeBigDecimal: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.negativeBigDecimal),\n/* harmony export */   negativeBigInt: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.negativeBigInt),\n/* harmony export */   nonEmptyString: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.nonEmptyString),\n/* harmony export */   nonNaN: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.nonNaN),\n/* harmony export */   nonNegative: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.nonNegative),\n/* harmony export */   nonNegativeBigDecimal: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.nonNegativeBigDecimal),\n/* harmony export */   nonNegativeBigInt: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.nonNegativeBigInt),\n/* harmony export */   nonPositive: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.nonPositive),\n/* harmony export */   nonPositiveBigDecimal: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.nonPositiveBigDecimal),\n/* harmony export */   nonPositiveBigInt: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.nonPositiveBigInt),\n/* harmony export */   omit: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.omit),\n/* harmony export */   optional: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.optional),\n/* harmony export */   optionalElement: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.optionalElement),\n/* harmony export */   optionalToOptional: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.optionalToOptional),\n/* harmony export */   optionalToRequired: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.optionalToRequired),\n/* harmony export */   optionalWith: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.optionalWith),\n/* harmony export */   parseJson: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.parseJson),\n/* harmony export */   parseNumber: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.parseNumber),\n/* harmony export */   partial: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.partial),\n/* harmony export */   partialWith: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.partialWith),\n/* harmony export */   pattern: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.pattern),\n/* harmony export */   pick: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.pick),\n/* harmony export */   pickLiteral: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.pickLiteral),\n/* harmony export */   pluck: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.pluck),\n/* harmony export */   positive: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.positive),\n/* harmony export */   positiveBigDecimal: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.positiveBigDecimal),\n/* harmony export */   positiveBigInt: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.positiveBigInt),\n/* harmony export */   propertySignature: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.propertySignature),\n/* harmony export */   rename: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.rename),\n/* harmony export */   required: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.required),\n/* harmony export */   requiredToOptional: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.requiredToOptional),\n/* harmony export */   serializableSchema: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.serializableSchema),\n/* harmony export */   serialize: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.serialize),\n/* harmony export */   serializeExit: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.serializeExit),\n/* harmony export */   serializeFailure: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.serializeFailure),\n/* harmony export */   serializeSuccess: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.serializeSuccess),\n/* harmony export */   split: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.split),\n/* harmony export */   standardSchemaV1: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.standardSchemaV1),\n/* harmony export */   startsWith: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.startsWith),\n/* harmony export */   successSchema: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.successSchema),\n/* harmony export */   suspend: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.suspend),\n/* harmony export */   swap: () => (/* binding */ swap),\n/* harmony export */   symbolSerializable: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.symbolSerializable),\n/* harmony export */   symbolWithResult: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.symbolWithResult),\n/* harmony export */   tag: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.tag),\n/* harmony export */   transform: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.transform),\n/* harmony export */   transformLiteral: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.transformLiteral),\n/* harmony export */   transformLiterals: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.transformLiterals),\n/* harmony export */   transformOrFail: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.transformOrFail),\n/* harmony export */   trimmed: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.trimmed),\n/* harmony export */   typeSchema: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.typeSchema),\n/* harmony export */   uncapitalized: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.uncapitalized),\n/* harmony export */   uppercased: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.uppercased),\n/* harmony export */   validDate: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.validDate),\n/* harmony export */   validate: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.validate),\n/* harmony export */   validateEither: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.validateEither),\n/* harmony export */   validateOption: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.validateOption),\n/* harmony export */   validatePromise: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.validatePromise),\n/* harmony export */   validateSync: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.validateSync),\n/* harmony export */   withConstructorDefault: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.withConstructorDefault),\n/* harmony export */   withDecodingDefault: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.withDecodingDefault),\n/* harmony export */   withDefaults: () => (/* reexport safe */ effect_Schema__WEBPACK_IMPORTED_MODULE_0__.withDefaults)\n/* harmony export */ });\n/* harmony import */ var _effect_platform__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @effect/platform */ \"(rsc)/./src/node_modules/@effect/platform/dist/esm/Transferable.js\");\n/* harmony import */ var effect__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! effect */ \"(rsc)/./src/node_modules/effect/dist/esm/Hash.js\");\n/* harmony import */ var effect__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! effect */ \"(rsc)/./src/node_modules/effect/dist/esm/Effect.js\");\n/* harmony import */ var effect_Schema__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! effect/Schema */ \"(rsc)/./src/node_modules/effect/dist/esm/Schema.js\");\n/* harmony import */ var effect__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! effect */ \"(rsc)/./src/node_modules/effect/dist/esm/ParseResult.js\");\n/* harmony import */ var _index_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../index.js */ \"(rsc)/./src/node_modules/@livestore/utils/dist/misc.js\");\n/* harmony import */ var _debug_diff_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./debug-diff.js */ \"(rsc)/./src/node_modules/@livestore/utils/dist/effect/Schema/debug-diff.js\");\n/* harmony import */ var _msgpack_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./msgpack.js */ \"(rsc)/./src/node_modules/@livestore/utils/dist/effect/Schema/msgpack.js\");\n\n\n\n\n\n\n// NOTE this is a temporary workaround until Effect schema has a better way to hash schemas\n// https://github.com/Effect-TS/effect/issues/2719\n// TODO remove this once the issue is resolved\nconst hash = (schema) => {\n    try {\n        return effect__WEBPACK_IMPORTED_MODULE_3__.string(JSON.stringify(schema.ast, null, 2));\n    }\n    catch {\n        console.warn(`Schema hashing failed, falling back to hashing the shortend schema AST string. This is less reliable and may cause false positives.`);\n        return effect__WEBPACK_IMPORTED_MODULE_3__.hash(schema.ast.toString());\n    }\n};\nconst encodeWithTransferables = (schema, options) => (a, overrideOptions) => effect__WEBPACK_IMPORTED_MODULE_4__.gen(function* () {\n    const collector = yield* _effect_platform__WEBPACK_IMPORTED_MODULE_5__.makeCollector;\n    const encoded = yield* effect_Schema__WEBPACK_IMPORTED_MODULE_0__.encode(schema, options)(a, overrideOptions).pipe(effect__WEBPACK_IMPORTED_MODULE_4__.provideService(_effect_platform__WEBPACK_IMPORTED_MODULE_5__.Collector, collector));\n    return [encoded, collector.unsafeRead()];\n});\nconst decodeSyncDebug = (schema, options) => (input, overrideOptions) => {\n    const res = effect_Schema__WEBPACK_IMPORTED_MODULE_0__.decodeEither(schema, options)(input, overrideOptions);\n    if (res._tag === 'Left') {\n        return (0,_index_js__WEBPACK_IMPORTED_MODULE_6__.shouldNeverHappen)(`decodeSyncDebug failed:`, res.left);\n    }\n    else {\n        return res.right;\n    }\n};\nconst encodeSyncDebug = (schema, options) => (input, overrideOptions) => {\n    const res = effect_Schema__WEBPACK_IMPORTED_MODULE_0__.encodeEither(schema, options)(input, overrideOptions);\n    if (res._tag === 'Left') {\n        return (0,_index_js__WEBPACK_IMPORTED_MODULE_6__.shouldNeverHappen)(`encodeSyncDebug failed:`, res.left);\n    }\n    else {\n        return res.right;\n    }\n};\nconst swap = (schema) => effect_Schema__WEBPACK_IMPORTED_MODULE_0__.transformOrFail(effect_Schema__WEBPACK_IMPORTED_MODULE_0__.typeSchema(schema), effect_Schema__WEBPACK_IMPORTED_MODULE_0__.encodedSchema(schema), {\n    decode: effect__WEBPACK_IMPORTED_MODULE_7__.encode(schema),\n    encode: effect__WEBPACK_IMPORTED_MODULE_7__.decode(schema),\n});\nconst Base64FromUint8Array = swap(effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Uint8ArrayFromBase64);\nconst JsonValue = effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Union(effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String, effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Number, effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Boolean, effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Null, effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Array(effect_Schema__WEBPACK_IMPORTED_MODULE_0__.suspend(() => JsonValue)), effect_Schema__WEBPACK_IMPORTED_MODULE_0__.Record({ key: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.String, value: effect_Schema__WEBPACK_IMPORTED_MODULE_0__.suspend(() => JsonValue) })).annotations({ title: 'JsonValue' });\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbm9kZV9tb2R1bGVzL0BsaXZlc3RvcmUvdXRpbHMvZGlzdC9lZmZlY3QvU2NoZW1hL2luZGV4LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFnRDtBQUNXO0FBQ1I7QUFDckI7QUFDRTtBQUNIO0FBQzdCO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQSxlQUFlLDBDQUFXO0FBQzFCO0FBQ0E7QUFDQTtBQUNBLGVBQWUsd0NBQVM7QUFDeEI7QUFDQTtBQUNPLDZFQUE2RSx1Q0FBVTtBQUM5Riw2QkFBNkIsMkRBQTBCO0FBQ3ZELDJCQUEyQixpREFBYSwyQ0FBMkMsa0RBQXFCLENBQUMsdURBQXNCO0FBQy9IO0FBQ0EsQ0FBQztBQUNNO0FBQ1AsZ0JBQWdCLHVEQUFtQjtBQUNuQztBQUNBLGVBQWUsNERBQWlCO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQLGdCQUFnQix1REFBbUI7QUFDbkM7QUFDQSxlQUFlLDREQUFpQjtBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ08seUJBQXlCLDBEQUFzQixDQUFDLHFEQUFpQixVQUFVLHdEQUFvQjtBQUN0RyxZQUFZLDBDQUFrQjtBQUM5QixZQUFZLDBDQUFrQjtBQUM5QixDQUFDO0FBQ00sa0NBQWtDLCtEQUEyQjtBQUM3RCxrQkFBa0IsZ0RBQVksQ0FBQyxpREFBYSxFQUFFLGlEQUFhLEVBQUUsa0RBQWMsRUFBRSwrQ0FBVyxFQUFFLGdEQUFZLENBQUMsa0RBQWMsb0JBQW9CLGlEQUFhLEdBQUcsS0FBSyxpREFBYSxTQUFTLGtEQUFjLG1CQUFtQixpQkFBaUIsb0JBQW9CO0FBQ2pRIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYW5hY29uZGEtYXNzZXNtZW50LTEvLi9zcmMvbm9kZV9tb2R1bGVzL0BsaXZlc3RvcmUvdXRpbHMvZGlzdC9lZmZlY3QvU2NoZW1hL2luZGV4LmpzP2NlOWYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVHJhbnNmZXJhYmxlIH0gZnJvbSAnQGVmZmVjdC9wbGF0Zm9ybSc7XG5pbXBvcnQgeyBFZmZlY3QsIEhhc2gsIFBhcnNlUmVzdWx0LCBTY2hlbWEgfSBmcm9tICdlZmZlY3QnO1xuaW1wb3J0IHsgc2hvdWxkTmV2ZXJIYXBwZW4gfSBmcm9tICcuLi8uLi9pbmRleC5qcyc7XG5leHBvcnQgKiBmcm9tICdlZmZlY3QvU2NoZW1hJztcbmV4cG9ydCAqIGZyb20gJy4vZGVidWctZGlmZi5qcyc7XG5leHBvcnQgKiBmcm9tICcuL21zZ3BhY2suanMnO1xuLy8gTk9URSB0aGlzIGlzIGEgdGVtcG9yYXJ5IHdvcmthcm91bmQgdW50aWwgRWZmZWN0IHNjaGVtYSBoYXMgYSBiZXR0ZXIgd2F5IHRvIGhhc2ggc2NoZW1hc1xuLy8gaHR0cHM6Ly9naXRodWIuY29tL0VmZmVjdC1UUy9lZmZlY3QvaXNzdWVzLzI3MTlcbi8vIFRPRE8gcmVtb3ZlIHRoaXMgb25jZSB0aGUgaXNzdWUgaXMgcmVzb2x2ZWRcbmV4cG9ydCBjb25zdCBoYXNoID0gKHNjaGVtYSkgPT4ge1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBIYXNoLnN0cmluZyhKU09OLnN0cmluZ2lmeShzY2hlbWEuYXN0LCBudWxsLCAyKSk7XG4gICAgfVxuICAgIGNhdGNoIHtcbiAgICAgICAgY29uc29sZS53YXJuKGBTY2hlbWEgaGFzaGluZyBmYWlsZWQsIGZhbGxpbmcgYmFjayB0byBoYXNoaW5nIHRoZSBzaG9ydGVuZCBzY2hlbWEgQVNUIHN0cmluZy4gVGhpcyBpcyBsZXNzIHJlbGlhYmxlIGFuZCBtYXkgY2F1c2UgZmFsc2UgcG9zaXRpdmVzLmApO1xuICAgICAgICByZXR1cm4gSGFzaC5oYXNoKHNjaGVtYS5hc3QudG9TdHJpbmcoKSk7XG4gICAgfVxufTtcbmV4cG9ydCBjb25zdCBlbmNvZGVXaXRoVHJhbnNmZXJhYmxlcyA9IChzY2hlbWEsIG9wdGlvbnMpID0+IChhLCBvdmVycmlkZU9wdGlvbnMpID0+IEVmZmVjdC5nZW4oZnVuY3Rpb24qICgpIHtcbiAgICBjb25zdCBjb2xsZWN0b3IgPSB5aWVsZCogVHJhbnNmZXJhYmxlLm1ha2VDb2xsZWN0b3I7XG4gICAgY29uc3QgZW5jb2RlZCA9IHlpZWxkKiBTY2hlbWEuZW5jb2RlKHNjaGVtYSwgb3B0aW9ucykoYSwgb3ZlcnJpZGVPcHRpb25zKS5waXBlKEVmZmVjdC5wcm92aWRlU2VydmljZShUcmFuc2ZlcmFibGUuQ29sbGVjdG9yLCBjb2xsZWN0b3IpKTtcbiAgICByZXR1cm4gW2VuY29kZWQsIGNvbGxlY3Rvci51bnNhZmVSZWFkKCldO1xufSk7XG5leHBvcnQgY29uc3QgZGVjb2RlU3luY0RlYnVnID0gKHNjaGVtYSwgb3B0aW9ucykgPT4gKGlucHV0LCBvdmVycmlkZU9wdGlvbnMpID0+IHtcbiAgICBjb25zdCByZXMgPSBTY2hlbWEuZGVjb2RlRWl0aGVyKHNjaGVtYSwgb3B0aW9ucykoaW5wdXQsIG92ZXJyaWRlT3B0aW9ucyk7XG4gICAgaWYgKHJlcy5fdGFnID09PSAnTGVmdCcpIHtcbiAgICAgICAgcmV0dXJuIHNob3VsZE5ldmVySGFwcGVuKGBkZWNvZGVTeW5jRGVidWcgZmFpbGVkOmAsIHJlcy5sZWZ0KTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiByZXMucmlnaHQ7XG4gICAgfVxufTtcbmV4cG9ydCBjb25zdCBlbmNvZGVTeW5jRGVidWcgPSAoc2NoZW1hLCBvcHRpb25zKSA9PiAoaW5wdXQsIG92ZXJyaWRlT3B0aW9ucykgPT4ge1xuICAgIGNvbnN0IHJlcyA9IFNjaGVtYS5lbmNvZGVFaXRoZXIoc2NoZW1hLCBvcHRpb25zKShpbnB1dCwgb3ZlcnJpZGVPcHRpb25zKTtcbiAgICBpZiAocmVzLl90YWcgPT09ICdMZWZ0Jykge1xuICAgICAgICByZXR1cm4gc2hvdWxkTmV2ZXJIYXBwZW4oYGVuY29kZVN5bmNEZWJ1ZyBmYWlsZWQ6YCwgcmVzLmxlZnQpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHJlcy5yaWdodDtcbiAgICB9XG59O1xuZXhwb3J0IGNvbnN0IHN3YXAgPSAoc2NoZW1hKSA9PiBTY2hlbWEudHJhbnNmb3JtT3JGYWlsKFNjaGVtYS50eXBlU2NoZW1hKHNjaGVtYSksIFNjaGVtYS5lbmNvZGVkU2NoZW1hKHNjaGVtYSksIHtcbiAgICBkZWNvZGU6IFBhcnNlUmVzdWx0LmVuY29kZShzY2hlbWEpLFxuICAgIGVuY29kZTogUGFyc2VSZXN1bHQuZGVjb2RlKHNjaGVtYSksXG59KTtcbmV4cG9ydCBjb25zdCBCYXNlNjRGcm9tVWludDhBcnJheSA9IHN3YXAoU2NoZW1hLlVpbnQ4QXJyYXlGcm9tQmFzZTY0KTtcbmV4cG9ydCBjb25zdCBKc29uVmFsdWUgPSBTY2hlbWEuVW5pb24oU2NoZW1hLlN0cmluZywgU2NoZW1hLk51bWJlciwgU2NoZW1hLkJvb2xlYW4sIFNjaGVtYS5OdWxsLCBTY2hlbWEuQXJyYXkoU2NoZW1hLnN1c3BlbmQoKCkgPT4gSnNvblZhbHVlKSksIFNjaGVtYS5SZWNvcmQoeyBrZXk6IFNjaGVtYS5TdHJpbmcsIHZhbHVlOiBTY2hlbWEuc3VzcGVuZCgoKSA9PiBKc29uVmFsdWUpIH0pKS5hbm5vdGF0aW9ucyh7IHRpdGxlOiAnSnNvblZhbHVlJyB9KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/node_modules/@livestore/utils/dist/effect/Schema/index.js\n");

/***/ }),

/***/ "(rsc)/./src/node_modules/@livestore/utils/dist/effect/Schema/msgpack.js":
/*!*************************************************************************!*\
  !*** ./src/node_modules/@livestore/utils/dist/effect/Schema/msgpack.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MsgPack: () => (/* binding */ MsgPack)\n/* harmony export */ });\n/* harmony import */ var effect__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! effect */ \"(rsc)/./src/node_modules/effect/dist/esm/Schema.js\");\n/* harmony import */ var msgpackr__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! msgpackr */ \"(rsc)/./src/node_modules/@livestore/utils/node_modules/msgpackr/node-index.js\");\n\n\nconst MsgPack = (schema) => effect__WEBPACK_IMPORTED_MODULE_1__.transform(effect__WEBPACK_IMPORTED_MODULE_1__.Uint8ArrayFromSelf, schema, {\n    encode: (decoded) => msgpackr__WEBPACK_IMPORTED_MODULE_0__.pack(decoded),\n    decode: (encodedBytes) => msgpackr__WEBPACK_IMPORTED_MODULE_0__.unpack(encodedBytes),\n});\n//# sourceMappingURL=msgpack.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbm9kZV9tb2R1bGVzL0BsaXZlc3RvcmUvdXRpbHMvZGlzdC9lZmZlY3QvU2NoZW1hL21zZ3BhY2suanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQWdDO0FBQ0k7QUFDN0IsNEJBQTRCLDZDQUFnQixDQUFDLHNEQUF5QjtBQUM3RSx5QkFBeUIsMENBQVk7QUFDckMsOEJBQThCLDRDQUFjO0FBQzVDLENBQUM7QUFDRCIsInNvdXJjZXMiOlsid2VicGFjazovL2FuYWNvbmRhLWFzc2VzbWVudC0xLy4vc3JjL25vZGVfbW9kdWxlcy9AbGl2ZXN0b3JlL3V0aWxzL2Rpc3QvZWZmZWN0L1NjaGVtYS9tc2dwYWNrLmpzPzQ2M2QiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgU2NoZW1hIH0gZnJvbSAnZWZmZWN0JztcbmltcG9ydCAqIGFzIG1zZ3BhY2sgZnJvbSAnbXNncGFja3InO1xuZXhwb3J0IGNvbnN0IE1zZ1BhY2sgPSAoc2NoZW1hKSA9PiBTY2hlbWEudHJhbnNmb3JtKFNjaGVtYS5VaW50OEFycmF5RnJvbVNlbGYsIHNjaGVtYSwge1xuICAgIGVuY29kZTogKGRlY29kZWQpID0+IG1zZ3BhY2sucGFjayhkZWNvZGVkKSxcbiAgICBkZWNvZGU6IChlbmNvZGVkQnl0ZXMpID0+IG1zZ3BhY2sudW5wYWNrKGVuY29kZWRCeXRlcyksXG59KTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPW1zZ3BhY2suanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/node_modules/@livestore/utils/dist/effect/Schema/msgpack.js\n");

/***/ }),

/***/ "(rsc)/./src/node_modules/@livestore/utils/dist/env.js":
/*!*******************************************************!*\
  !*** ./src/node_modules/@livestore/utils/dist/env.js ***!
  \*******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   IS_BUN: () => (/* binding */ IS_BUN),\n/* harmony export */   IS_CI: () => (/* binding */ IS_CI),\n/* harmony export */   IS_REACT_NATIVE: () => (/* binding */ IS_REACT_NATIVE),\n/* harmony export */   LS_DEV: () => (/* binding */ LS_DEV),\n/* harmony export */   TRACE_VERBOSE: () => (/* binding */ TRACE_VERBOSE),\n/* harmony export */   env: () => (/* binding */ env)\n/* harmony export */ });\n/* harmony import */ var _misc_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./misc.js */ \"(rsc)/./src/node_modules/@livestore/utils/dist/misc.js\");\n\nconst env = (name) => {\n    if (typeof process !== 'undefined' && process.env !== undefined) {\n        return process.env[name];\n    }\n    // TODO re-enable the full guard code once `import.meta` is supported in Expo\n    // if (import.meta !== undefined && import.meta.env !== undefined) {\n    if (false) {}\n    return undefined;\n};\n// export const TRACE_VERBOSE = true\nconst TRACE_VERBOSE = env('LS_TRACE_VERBOSE') !== undefined || env('VITE_LS_TRACE_VERBOSE') !== undefined;\n/** Only set when developing LiveStore itself. */\nconst LS_DEV = (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.envTruish)(env('LS_DEV')) || (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.envTruish)(env('VITE_LS_DEV'));\nconst IS_CI = (0,_misc_js__WEBPACK_IMPORTED_MODULE_0__.envTruish)(env('CI'));\nconst IS_BUN = typeof Bun !== 'undefined';\nconst IS_REACT_NATIVE = typeof navigator !== 'undefined' && navigator.product === 'ReactNative';\n//# sourceMappingURL=env.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbm9kZV9tb2R1bGVzL0BsaXZlc3RvcmUvdXRpbHMvZGlzdC9lbnYuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFzQztBQUMvQjtBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRLEtBQTZCLEVBQUUsRUFFbEM7QUFDTDtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ08sZUFBZSxtREFBUyxtQkFBbUIsbURBQVM7QUFDcEQsY0FBYyxtREFBUztBQUN2QjtBQUNBO0FBQ1AiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hbmFjb25kYS1hc3Nlc21lbnQtMS8uL3NyYy9ub2RlX21vZHVsZXMvQGxpdmVzdG9yZS91dGlscy9kaXN0L2Vudi5qcz9mNGJlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGVudlRydWlzaCB9IGZyb20gJy4vbWlzYy5qcyc7XG5leHBvcnQgY29uc3QgZW52ID0gKG5hbWUpID0+IHtcbiAgICBpZiAodHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnICYmIHByb2Nlc3MuZW52ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIHByb2Nlc3MuZW52W25hbWVdO1xuICAgIH1cbiAgICAvLyBUT0RPIHJlLWVuYWJsZSB0aGUgZnVsbCBndWFyZCBjb2RlIG9uY2UgYGltcG9ydC5tZXRhYCBpcyBzdXBwb3J0ZWQgaW4gRXhwb1xuICAgIC8vIGlmIChpbXBvcnQubWV0YSAhPT0gdW5kZWZpbmVkICYmIGltcG9ydC5tZXRhLmVudiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgaWYgKGltcG9ydC5tZXRhLmVudiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBpbXBvcnQubWV0YS5lbnZbbmFtZV07XG4gICAgfVxuICAgIHJldHVybiB1bmRlZmluZWQ7XG59O1xuLy8gZXhwb3J0IGNvbnN0IFRSQUNFX1ZFUkJPU0UgPSB0cnVlXG5leHBvcnQgY29uc3QgVFJBQ0VfVkVSQk9TRSA9IGVudignTFNfVFJBQ0VfVkVSQk9TRScpICE9PSB1bmRlZmluZWQgfHwgZW52KCdWSVRFX0xTX1RSQUNFX1ZFUkJPU0UnKSAhPT0gdW5kZWZpbmVkO1xuLyoqIE9ubHkgc2V0IHdoZW4gZGV2ZWxvcGluZyBMaXZlU3RvcmUgaXRzZWxmLiAqL1xuZXhwb3J0IGNvbnN0IExTX0RFViA9IGVudlRydWlzaChlbnYoJ0xTX0RFVicpKSB8fCBlbnZUcnVpc2goZW52KCdWSVRFX0xTX0RFVicpKTtcbmV4cG9ydCBjb25zdCBJU19DSSA9IGVudlRydWlzaChlbnYoJ0NJJykpO1xuZXhwb3J0IGNvbnN0IElTX0JVTiA9IHR5cGVvZiBCdW4gIT09ICd1bmRlZmluZWQnO1xuZXhwb3J0IGNvbnN0IElTX1JFQUNUX05BVElWRSA9IHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnICYmIG5hdmlnYXRvci5wcm9kdWN0ID09PSAnUmVhY3ROYXRpdmUnO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZW52LmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/node_modules/@livestore/utils/dist/env.js\n");

/***/ }),

/***/ "(rsc)/./src/node_modules/@livestore/utils/dist/fast-deep-equal.js":
/*!*******************************************************************!*\
  !*** ./src/node_modules/@livestore/utils/dist/fast-deep-equal.js ***!
  \*******************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   deepEqual: () => (/* binding */ deepEqual)\n/* harmony export */ });\n/* eslint-disable no-var */\n// Copied from fast-deep-equal\n// MIT License\nconst deepEqual = (a, b) => {\n    if (a === b)\n        return true;\n    if (a && b && typeof a == 'object' && typeof b == 'object') {\n        if (a.constructor !== b.constructor)\n            return false;\n        var length, i, keys;\n        if (Array.isArray(a)) {\n            length = a.length;\n            // @ts-expect-error ...\n            if (length != b.length)\n                return false;\n            for (i = length; i-- !== 0;)\n                // @ts-expect-error ...\n                if (!deepEqual(a[i], b[i]))\n                    return false;\n            return true;\n        }\n        if (a instanceof Map && b instanceof Map) {\n            if (a.size !== b.size)\n                return false;\n            for (i of a.entries())\n                if (!b.has(i[0]))\n                    return false;\n            for (i of a.entries())\n                if (!deepEqual(i[1], b.get(i[0])))\n                    return false;\n            return true;\n        }\n        if (a instanceof Set && b instanceof Set) {\n            if (a.size !== b.size)\n                return false;\n            for (i of a.entries())\n                if (!b.has(i[0]))\n                    return false;\n            return true;\n        }\n        if (ArrayBuffer.isView(a) && ArrayBuffer.isView(b)) {\n            // @ts-expect-error ...\n            length = a.length;\n            // @ts-expect-error ...\n            if (length != b.length)\n                return false;\n            for (i = length; i-- !== 0;)\n                // @ts-expect-error ...\n                if (a[i] !== b[i])\n                    return false;\n            return true;\n        }\n        // @ts-expect-error ...\n        if (a.constructor === RegExp)\n            return a.source === b.source && a.flags === b.flags;\n        if (a.valueOf !== undefined && a.valueOf !== Object.prototype.valueOf)\n            return a.valueOf() === b.valueOf();\n        if (a.toString !== undefined && a.toString !== Object.prototype.toString)\n            return a.toString() === b.toString();\n        keys = Object.keys(a);\n        length = keys.length;\n        if (length !== Object.keys(b).length)\n            return false;\n        for (i = length; i-- !== 0;)\n            // @ts-expect-error ...\n            if (!Object.prototype.hasOwnProperty.call(b, keys[i]))\n                return false;\n        for (i = length; i-- !== 0;) {\n            var key = keys[i];\n            // @ts-expect-error ...\n            if (!deepEqual(a[key], b[key]))\n                return false;\n        }\n        return true;\n    }\n    // true if both NaN, false otherwise\n    return a !== a && b !== b;\n};\n//# sourceMappingURL=fast-deep-equal.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbm9kZV9tb2R1bGVzL0BsaXZlc3RvcmUvdXRpbHMvZGlzdC9mYXN0LWRlZXAtZXF1YWwuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixVQUFVO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixVQUFVO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLFVBQVU7QUFDbkM7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLFVBQVU7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2FuYWNvbmRhLWFzc2VzbWVudC0xLy4vc3JjL25vZGVfbW9kdWxlcy9AbGl2ZXN0b3JlL3V0aWxzL2Rpc3QvZmFzdC1kZWVwLWVxdWFsLmpzPzViMDEiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgbm8tdmFyICovXG4vLyBDb3BpZWQgZnJvbSBmYXN0LWRlZXAtZXF1YWxcbi8vIE1JVCBMaWNlbnNlXG5leHBvcnQgY29uc3QgZGVlcEVxdWFsID0gKGEsIGIpID0+IHtcbiAgICBpZiAoYSA9PT0gYilcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgaWYgKGEgJiYgYiAmJiB0eXBlb2YgYSA9PSAnb2JqZWN0JyAmJiB0eXBlb2YgYiA9PSAnb2JqZWN0Jykge1xuICAgICAgICBpZiAoYS5jb25zdHJ1Y3RvciAhPT0gYi5jb25zdHJ1Y3RvcilcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgdmFyIGxlbmd0aCwgaSwga2V5cztcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYSkpIHtcbiAgICAgICAgICAgIGxlbmd0aCA9IGEubGVuZ3RoO1xuICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciAuLi5cbiAgICAgICAgICAgIGlmIChsZW5ndGggIT0gYi5sZW5ndGgpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgZm9yIChpID0gbGVuZ3RoOyBpLS0gIT09IDA7KVxuICAgICAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgLi4uXG4gICAgICAgICAgICAgICAgaWYgKCFkZWVwRXF1YWwoYVtpXSwgYltpXSkpXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChhIGluc3RhbmNlb2YgTWFwICYmIGIgaW5zdGFuY2VvZiBNYXApIHtcbiAgICAgICAgICAgIGlmIChhLnNpemUgIT09IGIuc2l6ZSlcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICBmb3IgKGkgb2YgYS5lbnRyaWVzKCkpXG4gICAgICAgICAgICAgICAgaWYgKCFiLmhhcyhpWzBdKSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgZm9yIChpIG9mIGEuZW50cmllcygpKVxuICAgICAgICAgICAgICAgIGlmICghZGVlcEVxdWFsKGlbMV0sIGIuZ2V0KGlbMF0pKSlcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGEgaW5zdGFuY2VvZiBTZXQgJiYgYiBpbnN0YW5jZW9mIFNldCkge1xuICAgICAgICAgICAgaWYgKGEuc2l6ZSAhPT0gYi5zaXplKVxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIGZvciAoaSBvZiBhLmVudHJpZXMoKSlcbiAgICAgICAgICAgICAgICBpZiAoIWIuaGFzKGlbMF0pKVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoQXJyYXlCdWZmZXIuaXNWaWV3KGEpICYmIEFycmF5QnVmZmVyLmlzVmlldyhiKSkge1xuICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciAuLi5cbiAgICAgICAgICAgIGxlbmd0aCA9IGEubGVuZ3RoO1xuICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciAuLi5cbiAgICAgICAgICAgIGlmIChsZW5ndGggIT0gYi5sZW5ndGgpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgZm9yIChpID0gbGVuZ3RoOyBpLS0gIT09IDA7KVxuICAgICAgICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgLi4uXG4gICAgICAgICAgICAgICAgaWYgKGFbaV0gIT09IGJbaV0pXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgLi4uXG4gICAgICAgIGlmIChhLmNvbnN0cnVjdG9yID09PSBSZWdFeHApXG4gICAgICAgICAgICByZXR1cm4gYS5zb3VyY2UgPT09IGIuc291cmNlICYmIGEuZmxhZ3MgPT09IGIuZmxhZ3M7XG4gICAgICAgIGlmIChhLnZhbHVlT2YgIT09IHVuZGVmaW5lZCAmJiBhLnZhbHVlT2YgIT09IE9iamVjdC5wcm90b3R5cGUudmFsdWVPZilcbiAgICAgICAgICAgIHJldHVybiBhLnZhbHVlT2YoKSA9PT0gYi52YWx1ZU9mKCk7XG4gICAgICAgIGlmIChhLnRvU3RyaW5nICE9PSB1bmRlZmluZWQgJiYgYS50b1N0cmluZyAhPT0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZylcbiAgICAgICAgICAgIHJldHVybiBhLnRvU3RyaW5nKCkgPT09IGIudG9TdHJpbmcoKTtcbiAgICAgICAga2V5cyA9IE9iamVjdC5rZXlzKGEpO1xuICAgICAgICBsZW5ndGggPSBrZXlzLmxlbmd0aDtcbiAgICAgICAgaWYgKGxlbmd0aCAhPT0gT2JqZWN0LmtleXMoYikubGVuZ3RoKVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBmb3IgKGkgPSBsZW5ndGg7IGktLSAhPT0gMDspXG4gICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIC4uLlxuICAgICAgICAgICAgaWYgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwga2V5c1tpXSkpXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICBmb3IgKGkgPSBsZW5ndGg7IGktLSAhPT0gMDspIHtcbiAgICAgICAgICAgIHZhciBrZXkgPSBrZXlzW2ldO1xuICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciAuLi5cbiAgICAgICAgICAgIGlmICghZGVlcEVxdWFsKGFba2V5XSwgYltrZXldKSlcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIC8vIHRydWUgaWYgYm90aCBOYU4sIGZhbHNlIG90aGVyd2lzZVxuICAgIHJldHVybiBhICE9PSBhICYmIGIgIT09IGI7XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZmFzdC1kZWVwLWVxdWFsLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/node_modules/@livestore/utils/dist/fast-deep-equal.js\n");

/***/ }),

/***/ "(rsc)/./src/node_modules/@livestore/utils/dist/guards.js":
/*!**********************************************************!*\
  !*** ./src/node_modules/@livestore/utils/dist/guards.js ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   isNil: () => (/* binding */ isNil),\n/* harmony export */   isNotNil: () => (/* binding */ isNotNil),\n/* harmony export */   isNotNull: () => (/* binding */ isNotNull),\n/* harmony export */   isNotUndefined: () => (/* binding */ isNotUndefined),\n/* harmony export */   isUndefined: () => (/* binding */ isUndefined)\n/* harmony export */ });\nconst isNotUndefined = (_) => _ !== undefined;\nconst isNotNull = (_) => _ !== null;\nconst isUndefined = (_) => _ === undefined;\nconst isNil = (val) => val === null || val === undefined;\nconst isNotNil = (val) => val !== null && val !== undefined;\n//# sourceMappingURL=guards.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbm9kZV9tb2R1bGVzL0BsaXZlc3RvcmUvdXRpbHMvZGlzdC9ndWFyZHMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7QUFBTztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ1AiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hbmFjb25kYS1hc3Nlc21lbnQtMS8uL3NyYy9ub2RlX21vZHVsZXMvQGxpdmVzdG9yZS91dGlscy9kaXN0L2d1YXJkcy5qcz83ZjZlIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBpc05vdFVuZGVmaW5lZCA9IChfKSA9PiBfICE9PSB1bmRlZmluZWQ7XG5leHBvcnQgY29uc3QgaXNOb3ROdWxsID0gKF8pID0+IF8gIT09IG51bGw7XG5leHBvcnQgY29uc3QgaXNVbmRlZmluZWQgPSAoXykgPT4gXyA9PT0gdW5kZWZpbmVkO1xuZXhwb3J0IGNvbnN0IGlzTmlsID0gKHZhbCkgPT4gdmFsID09PSBudWxsIHx8IHZhbCA9PT0gdW5kZWZpbmVkO1xuZXhwb3J0IGNvbnN0IGlzTm90TmlsID0gKHZhbCkgPT4gdmFsICE9PSBudWxsICYmIHZhbCAhPT0gdW5kZWZpbmVkO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9Z3VhcmRzLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/node_modules/@livestore/utils/dist/guards.js\n");

/***/ }),

/***/ "(rsc)/./src/node_modules/@livestore/utils/dist/index.js":
/*!*********************************************************!*\
  !*** ./src/node_modules/@livestore/utils/dist/index.js ***!
  \*********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Deferred: () => (/* reexport safe */ _Deferred_js__WEBPACK_IMPORTED_MODULE_8__.Deferred),\n/* harmony export */   IS_BUN: () => (/* reexport safe */ _env_js__WEBPACK_IMPORTED_MODULE_10__.IS_BUN),\n/* harmony export */   IS_CI: () => (/* reexport safe */ _env_js__WEBPACK_IMPORTED_MODULE_10__.IS_CI),\n/* harmony export */   IS_REACT_NATIVE: () => (/* reexport safe */ _env_js__WEBPACK_IMPORTED_MODULE_10__.IS_REACT_NATIVE),\n/* harmony export */   LS_DEV: () => (/* reexport safe */ _env_js__WEBPACK_IMPORTED_MODULE_10__.LS_DEV),\n/* harmony export */   NoopTracer: () => (/* reexport safe */ _NoopTracer_js__WEBPACK_IMPORTED_MODULE_5__.NoopTracer),\n/* harmony export */   TRACE_VERBOSE: () => (/* reexport safe */ _env_js__WEBPACK_IMPORTED_MODULE_10__.TRACE_VERBOSE),\n/* harmony export */   assertNever: () => (/* binding */ assertNever),\n/* harmony export */   assertTag: () => (/* binding */ assertTag),\n/* harmony export */   base64: () => (/* reexport module object */ _base64_js__WEBPACK_IMPORTED_MODULE_12__),\n/* harmony export */   capitalizeFirstLetter: () => (/* binding */ capitalizeFirstLetter),\n/* harmony export */   casesHandled: () => (/* binding */ casesHandled),\n/* harmony export */   debugCatch: () => (/* binding */ debugCatch),\n/* harmony export */   debuggerPipe: () => (/* binding */ debuggerPipe),\n/* harmony export */   deepEqual: () => (/* reexport safe */ _fast_deep_equal_js__WEBPACK_IMPORTED_MODULE_11__.deepEqual),\n/* harmony export */   detectBrowserName: () => (/* reexport safe */ _browser_js__WEBPACK_IMPORTED_MODULE_7__.detectBrowserName),\n/* harmony export */   difference: () => (/* reexport safe */ _set_js__WEBPACK_IMPORTED_MODULE_6__.difference),\n/* harmony export */   env: () => (/* reexport safe */ _env_js__WEBPACK_IMPORTED_MODULE_10__.env),\n/* harmony export */   envTruish: () => (/* reexport safe */ _misc_js__WEBPACK_IMPORTED_MODULE_9__.envTruish),\n/* harmony export */   errorToString: () => (/* reexport safe */ _misc_js__WEBPACK_IMPORTED_MODULE_9__.objectToString),\n/* harmony export */   getTraceParentHeader: () => (/* binding */ getTraceParentHeader),\n/* harmony export */   indent: () => (/* reexport safe */ _string_js__WEBPACK_IMPORTED_MODULE_0__.indent),\n/* harmony export */   isDevEnv: () => (/* reexport safe */ _misc_js__WEBPACK_IMPORTED_MODULE_9__.isDevEnv),\n/* harmony export */   isIterable: () => (/* binding */ isIterable),\n/* harmony export */   isNil: () => (/* reexport safe */ _guards_js__WEBPACK_IMPORTED_MODULE_1__.isNil),\n/* harmony export */   isNonEmptyString: () => (/* binding */ isNonEmptyString),\n/* harmony export */   isNotNil: () => (/* reexport safe */ _guards_js__WEBPACK_IMPORTED_MODULE_1__.isNotNil),\n/* harmony export */   isNotNull: () => (/* reexport safe */ _guards_js__WEBPACK_IMPORTED_MODULE_1__.isNotNull),\n/* harmony export */   isNotUndefined: () => (/* reexport safe */ _guards_js__WEBPACK_IMPORTED_MODULE_1__.isNotUndefined),\n/* harmony export */   isPromise: () => (/* binding */ isPromise),\n/* harmony export */   isReadonlyArray: () => (/* binding */ isReadonlyArray),\n/* harmony export */   isUndefined: () => (/* reexport safe */ _guards_js__WEBPACK_IMPORTED_MODULE_1__.isUndefined),\n/* harmony export */   keyObjectFromObject: () => (/* reexport safe */ _object_index_js__WEBPACK_IMPORTED_MODULE_2__.keyObjectFromObject),\n/* harmony export */   lowercaseFirstChar: () => (/* reexport safe */ _string_js__WEBPACK_IMPORTED_MODULE_0__.lowercaseFirstChar),\n/* harmony export */   makeNoopSpan: () => (/* reexport safe */ _NoopTracer_js__WEBPACK_IMPORTED_MODULE_5__.makeNoopSpan),\n/* harmony export */   makeNoopTracer: () => (/* reexport safe */ _NoopTracer_js__WEBPACK_IMPORTED_MODULE_5__.makeNoopTracer),\n/* harmony export */   mapObjectValues: () => (/* reexport safe */ _object_index_js__WEBPACK_IMPORTED_MODULE_2__.mapObjectValues),\n/* harmony export */   memoizeByRef: () => (/* binding */ memoizeByRef),\n/* harmony export */   memoizeByStringifyArgs: () => (/* binding */ memoizeByStringifyArgs),\n/* harmony export */   minuteInMs: () => (/* reexport safe */ _time_js__WEBPACK_IMPORTED_MODULE_4__.minuteInMs),\n/* harmony export */   msAsTimeString: () => (/* reexport safe */ _time_js__WEBPACK_IMPORTED_MODULE_4__.msAsTimeString),\n/* harmony export */   noop: () => (/* binding */ noop),\n/* harmony export */   notYetImplemented: () => (/* binding */ notYetImplemented),\n/* harmony export */   objectEntries: () => (/* reexport safe */ _object_index_js__WEBPACK_IMPORTED_MODULE_2__.objectEntries),\n/* harmony export */   objectToString: () => (/* reexport safe */ _misc_js__WEBPACK_IMPORTED_MODULE_9__.objectToString),\n/* harmony export */   omit: () => (/* reexport safe */ _object_index_js__WEBPACK_IMPORTED_MODULE_2__.omit),\n/* harmony export */   pick: () => (/* reexport safe */ _object_index_js__WEBPACK_IMPORTED_MODULE_2__.pick),\n/* harmony export */   pickAllOrElse: () => (/* reexport safe */ _object_index_js__WEBPACK_IMPORTED_MODULE_2__.pickAllOrElse),\n/* harmony export */   prettyBytes: () => (/* reexport safe */ pretty_bytes__WEBPACK_IMPORTED_MODULE_13__[\"default\"]),\n/* harmony export */   promiseMap: () => (/* reexport safe */ _promise_js__WEBPACK_IMPORTED_MODULE_3__.promiseMap),\n/* harmony export */   promiseMapDict: () => (/* reexport safe */ _promise_js__WEBPACK_IMPORTED_MODULE_3__.promiseMapDict),\n/* harmony export */   promiseMapPool: () => (/* reexport safe */ _promise_js__WEBPACK_IMPORTED_MODULE_3__.promiseMapPool),\n/* harmony export */   promiseMapToDict: () => (/* reexport safe */ _promise_js__WEBPACK_IMPORTED_MODULE_3__.promiseMapToDict),\n/* harmony export */   prop: () => (/* binding */ prop),\n/* harmony export */   range: () => (/* binding */ range),\n/* harmony export */   recRemoveUndefinedValues: () => (/* binding */ recRemoveUndefinedValues),\n/* harmony export */   ref: () => (/* binding */ ref),\n/* harmony export */   shouldNeverHappen: () => (/* reexport safe */ _misc_js__WEBPACK_IMPORTED_MODULE_9__.shouldNeverHappen),\n/* harmony export */   sleep: () => (/* binding */ sleep),\n/* harmony export */   throttle: () => (/* binding */ throttle),\n/* harmony export */   time: () => (/* reexport safe */ _time_js__WEBPACK_IMPORTED_MODULE_4__.time),\n/* harmony export */   times: () => (/* binding */ times),\n/* harmony export */   tryAsFunctionAndNew: () => (/* reexport safe */ _misc_js__WEBPACK_IMPORTED_MODULE_9__.tryAsFunctionAndNew),\n/* harmony export */   unwrapThunk: () => (/* binding */ unwrapThunk),\n/* harmony export */   uppercaseFirstChar: () => (/* reexport safe */ _string_js__WEBPACK_IMPORTED_MODULE_0__.uppercaseFirstChar)\n/* harmony export */ });\n/* harmony import */ var _string_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./string.js */ \"(rsc)/./src/node_modules/@livestore/utils/dist/string.js\");\n/* harmony import */ var _guards_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./guards.js */ \"(rsc)/./src/node_modules/@livestore/utils/dist/guards.js\");\n/* harmony import */ var _object_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./object/index.js */ \"(rsc)/./src/node_modules/@livestore/utils/dist/object/index.js\");\n/* harmony import */ var _promise_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./promise.js */ \"(rsc)/./src/node_modules/@livestore/utils/dist/promise.js\");\n/* harmony import */ var _time_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./time.js */ \"(rsc)/./src/node_modules/@livestore/utils/dist/time.js\");\n/* harmony import */ var _NoopTracer_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./NoopTracer.js */ \"(rsc)/./src/node_modules/@livestore/utils/dist/NoopTracer.js\");\n/* harmony import */ var _set_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./set.js */ \"(rsc)/./src/node_modules/@livestore/utils/dist/set.js\");\n/* harmony import */ var _browser_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./browser.js */ \"(rsc)/./src/node_modules/@livestore/utils/dist/browser.js\");\n/* harmony import */ var _Deferred_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./Deferred.js */ \"(rsc)/./src/node_modules/@livestore/utils/dist/Deferred.js\");\n/* harmony import */ var _misc_js__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./misc.js */ \"(rsc)/./src/node_modules/@livestore/utils/dist/misc.js\");\n/* harmony import */ var _env_js__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./env.js */ \"(rsc)/./src/node_modules/@livestore/utils/dist/env.js\");\n/* harmony import */ var _fast_deep_equal_js__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./fast-deep-equal.js */ \"(rsc)/./src/node_modules/@livestore/utils/dist/fast-deep-equal.js\");\n/* harmony import */ var _base64_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./base64.js */ \"(rsc)/./src/node_modules/@livestore/utils/dist/base64.js\");\n/* harmony import */ var pretty_bytes__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! pretty-bytes */ \"(rsc)/./src/node_modules/pretty-bytes/index.js\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst sleep = (ms) => new Promise((resolve) => setTimeout(resolve, ms));\nconst ref = (val) => ({ current: val });\nconst times = (n, fn) => {\n    for (let i = 0; i < n; i++) {\n        fn(i);\n    }\n};\nconst debugCatch = (try_) => {\n    try {\n        return try_();\n    }\n    catch (e) {\n        debugger;\n        throw e;\n    }\n};\nconst recRemoveUndefinedValues = (val) => {\n    if (Array.isArray(val)) {\n        val.forEach(recRemoveUndefinedValues);\n    }\n    else if (typeof val === 'object') {\n        Object.keys(val).forEach((key) => {\n            if (val[key] === undefined) {\n                delete val[key];\n            }\n            else {\n                recRemoveUndefinedValues(val[key]);\n            }\n        });\n    }\n};\nconst prop = (key) => (obj) => obj[key];\nconst capitalizeFirstLetter = (str) => str.charAt(0).toUpperCase() + str.slice(1);\nconst isReadonlyArray = (value) => Array.isArray(value);\n/**\n * Use this to make assertion at end of if-else chain that all members of a\n * union have been accounted for.\n */\n/* eslint-disable-next-line prefer-arrow/prefer-arrow-functions */\nfunction casesHandled(unexpectedCase) {\n    debugger;\n    throw new Error(`A case was not handled for value: ${truncate((0,_misc_js__WEBPACK_IMPORTED_MODULE_9__.objectToString)(unexpectedCase), 1000)}`);\n}\nconst assertNever = (failIfFalse, msg) => {\n    if (failIfFalse === false) {\n        debugger;\n        throw new Error(`This should never happen: ${msg}`);\n    }\n};\nconst debuggerPipe = (val) => {\n    debugger;\n    return val;\n};\nconst truncate = (str, length) => {\n    if (str.length > length) {\n        return str.slice(0, length) + '...';\n    }\n    else {\n        return str;\n    }\n};\nconst notYetImplemented = (msg) => {\n    debugger;\n    throw new Error(`Not yet implemented: ${msg}`);\n};\nconst noop = () => { };\nconst unwrapThunk = (_) => {\n    if (typeof _ === 'function') {\n        return _();\n    }\n    else {\n        return _;\n    }\n};\n/** `end` is not included */\nconst range = (start, end) => {\n    const length = end - start;\n    return Array.from({ length }, (_, i) => start + i);\n};\nconst throttle = (fn, ms) => {\n    let shouldWait = false;\n    let shouldCallAgain = false;\n    const timeoutFunc = () => {\n        if (shouldCallAgain) {\n            fn();\n            shouldCallAgain = false;\n            setTimeout(timeoutFunc, ms);\n        }\n        else {\n            shouldWait = false;\n        }\n    };\n    return () => {\n        if (shouldWait) {\n            shouldCallAgain = true;\n            return;\n        }\n        fn();\n        shouldWait = true;\n        setTimeout(timeoutFunc, ms);\n    };\n};\nconst getTraceParentHeader = (parentSpan) => {\n    const spanContext = parentSpan.spanContext();\n    // Format: {version}-{trace_id}-{span_id}-{trace_flags}\n    // https://www.w3.org/TR/trace-context/#examples-of-http-traceparent-headers\n    return `00-${spanContext.traceId}-${spanContext.spanId}-01`;\n};\nconst assertTag = (obj, tag) => {\n    if (obj._tag !== tag) {\n        throw new Error(`Expected tag ${tag} but got ${obj._tag}`);\n    }\n    return obj;\n};\nconst memoizeByStringifyArgs = (fn) => {\n    const cache = new Map();\n    return ((...args) => {\n        const key = JSON.stringify(args);\n        if (cache.has(key)) {\n            return cache.get(key);\n        }\n        const result = fn(...args);\n        cache.set(key, result);\n        return result;\n    });\n};\nconst memoizeByRef = (fn) => {\n    const cache = new Map();\n    return ((arg) => {\n        if (cache.has(arg)) {\n            return cache.get(arg);\n        }\n        const result = fn(arg);\n        cache.set(arg, result);\n        return result;\n    });\n};\nconst isNonEmptyString = (str) => {\n    return typeof str === 'string' && str.length > 0;\n};\nconst isPromise = (value) => typeof value?.then === 'function';\nconst isIterable = (value) => typeof value?.[Symbol.iterator] === 'function';\n\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbm9kZV9tb2R1bGVzL0BsaXZlc3RvcmUvdXRpbHMvZGlzdC9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQTRCO0FBQ0E7QUFDTTtBQUNMO0FBQ0g7QUFDTTtBQUNQO0FBQ0k7QUFDQztBQUNKO0FBQ0Q7QUFDWTtBQUNDO0FBQ2dCO0FBQ1g7QUFDcEM7QUFDQSx3QkFBd0IsY0FBYztBQUN0QztBQUNQLG9CQUFvQixPQUFPO0FBQzNCO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ087QUFDQTtBQUNBO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQSx5REFBeUQsU0FBUyx3REFBYyx3QkFBd0I7QUFDeEc7QUFDTztBQUNQO0FBQ0E7QUFDQSxxREFBcUQsSUFBSTtBQUN6RDtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBLDRDQUE0QyxJQUFJO0FBQ2hEO0FBQ087QUFDQTtBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0Esd0JBQXdCLFFBQVE7QUFDaEM7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBLGdCQUFnQixRQUFRLEVBQUUsU0FBUyxFQUFFLFFBQVEsRUFBRTtBQUMvQztBQUNBLGlCQUFpQixvQkFBb0IsR0FBRyxtQkFBbUI7QUFDM0Q7QUFDTztBQUNQO0FBQ0Esd0NBQXdDLEtBQUssVUFBVSxTQUFTO0FBQ2hFO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ087QUFDUDtBQUNBO0FBQ087QUFDQTtBQUNxRDtBQUM1RCIsInNvdXJjZXMiOlsid2VicGFjazovL2FuYWNvbmRhLWFzc2VzbWVudC0xLy4vc3JjL25vZGVfbW9kdWxlcy9AbGl2ZXN0b3JlL3V0aWxzL2Rpc3QvaW5kZXguanM/YzYzZiJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgKiBmcm9tICcuL3N0cmluZy5qcyc7XG5leHBvcnQgKiBmcm9tICcuL2d1YXJkcy5qcyc7XG5leHBvcnQgKiBmcm9tICcuL29iamVjdC9pbmRleC5qcyc7XG5leHBvcnQgKiBmcm9tICcuL3Byb21pc2UuanMnO1xuZXhwb3J0ICogZnJvbSAnLi90aW1lLmpzJztcbmV4cG9ydCAqIGZyb20gJy4vTm9vcFRyYWNlci5qcyc7XG5leHBvcnQgKiBmcm9tICcuL3NldC5qcyc7XG5leHBvcnQgKiBmcm9tICcuL2Jyb3dzZXIuanMnO1xuZXhwb3J0ICogZnJvbSAnLi9EZWZlcnJlZC5qcyc7XG5leHBvcnQgKiBmcm9tICcuL21pc2MuanMnO1xuZXhwb3J0ICogZnJvbSAnLi9lbnYuanMnO1xuZXhwb3J0ICogZnJvbSAnLi9mYXN0LWRlZXAtZXF1YWwuanMnO1xuZXhwb3J0ICogYXMgYmFzZTY0IGZyb20gJy4vYmFzZTY0LmpzJztcbmV4cG9ydCB7IGRlZmF1bHQgYXMgcHJldHR5Qnl0ZXMgfSBmcm9tICdwcmV0dHktYnl0ZXMnO1xuaW1wb3J0IHsgb2JqZWN0VG9TdHJpbmcgfSBmcm9tICcuL21pc2MuanMnO1xuZXhwb3J0IGNvbnN0IHNsZWVwID0gKG1zKSA9PiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gc2V0VGltZW91dChyZXNvbHZlLCBtcykpO1xuZXhwb3J0IGNvbnN0IHJlZiA9ICh2YWwpID0+ICh7IGN1cnJlbnQ6IHZhbCB9KTtcbmV4cG9ydCBjb25zdCB0aW1lcyA9IChuLCBmbikgPT4ge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbjsgaSsrKSB7XG4gICAgICAgIGZuKGkpO1xuICAgIH1cbn07XG5leHBvcnQgY29uc3QgZGVidWdDYXRjaCA9ICh0cnlfKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIHRyeV8oKTtcbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgZGVidWdnZXI7XG4gICAgICAgIHRocm93IGU7XG4gICAgfVxufTtcbmV4cG9ydCBjb25zdCByZWNSZW1vdmVVbmRlZmluZWRWYWx1ZXMgPSAodmFsKSA9PiB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkodmFsKSkge1xuICAgICAgICB2YWwuZm9yRWFjaChyZWNSZW1vdmVVbmRlZmluZWRWYWx1ZXMpO1xuICAgIH1cbiAgICBlbHNlIGlmICh0eXBlb2YgdmFsID09PSAnb2JqZWN0Jykge1xuICAgICAgICBPYmplY3Qua2V5cyh2YWwpLmZvckVhY2goKGtleSkgPT4ge1xuICAgICAgICAgICAgaWYgKHZhbFtrZXldID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBkZWxldGUgdmFsW2tleV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByZWNSZW1vdmVVbmRlZmluZWRWYWx1ZXModmFsW2tleV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59O1xuZXhwb3J0IGNvbnN0IHByb3AgPSAoa2V5KSA9PiAob2JqKSA9PiBvYmpba2V5XTtcbmV4cG9ydCBjb25zdCBjYXBpdGFsaXplRmlyc3RMZXR0ZXIgPSAoc3RyKSA9PiBzdHIuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzdHIuc2xpY2UoMSk7XG5leHBvcnQgY29uc3QgaXNSZWFkb25seUFycmF5ID0gKHZhbHVlKSA9PiBBcnJheS5pc0FycmF5KHZhbHVlKTtcbi8qKlxuICogVXNlIHRoaXMgdG8gbWFrZSBhc3NlcnRpb24gYXQgZW5kIG9mIGlmLWVsc2UgY2hhaW4gdGhhdCBhbGwgbWVtYmVycyBvZiBhXG4gKiB1bmlvbiBoYXZlIGJlZW4gYWNjb3VudGVkIGZvci5cbiAqL1xuLyogZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHByZWZlci1hcnJvdy9wcmVmZXItYXJyb3ctZnVuY3Rpb25zICovXG5leHBvcnQgZnVuY3Rpb24gY2FzZXNIYW5kbGVkKHVuZXhwZWN0ZWRDYXNlKSB7XG4gICAgZGVidWdnZXI7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBBIGNhc2Ugd2FzIG5vdCBoYW5kbGVkIGZvciB2YWx1ZTogJHt0cnVuY2F0ZShvYmplY3RUb1N0cmluZyh1bmV4cGVjdGVkQ2FzZSksIDEwMDApfWApO1xufVxuZXhwb3J0IGNvbnN0IGFzc2VydE5ldmVyID0gKGZhaWxJZkZhbHNlLCBtc2cpID0+IHtcbiAgICBpZiAoZmFpbElmRmFsc2UgPT09IGZhbHNlKSB7XG4gICAgICAgIGRlYnVnZ2VyO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFRoaXMgc2hvdWxkIG5ldmVyIGhhcHBlbjogJHttc2d9YCk7XG4gICAgfVxufTtcbmV4cG9ydCBjb25zdCBkZWJ1Z2dlclBpcGUgPSAodmFsKSA9PiB7XG4gICAgZGVidWdnZXI7XG4gICAgcmV0dXJuIHZhbDtcbn07XG5jb25zdCB0cnVuY2F0ZSA9IChzdHIsIGxlbmd0aCkgPT4ge1xuICAgIGlmIChzdHIubGVuZ3RoID4gbGVuZ3RoKSB7XG4gICAgICAgIHJldHVybiBzdHIuc2xpY2UoMCwgbGVuZ3RoKSArICcuLi4nO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHN0cjtcbiAgICB9XG59O1xuZXhwb3J0IGNvbnN0IG5vdFlldEltcGxlbWVudGVkID0gKG1zZykgPT4ge1xuICAgIGRlYnVnZ2VyO1xuICAgIHRocm93IG5ldyBFcnJvcihgTm90IHlldCBpbXBsZW1lbnRlZDogJHttc2d9YCk7XG59O1xuZXhwb3J0IGNvbnN0IG5vb3AgPSAoKSA9PiB7IH07XG5leHBvcnQgY29uc3QgdW53cmFwVGh1bmsgPSAoXykgPT4ge1xuICAgIGlmICh0eXBlb2YgXyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICByZXR1cm4gXygpO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIF87XG4gICAgfVxufTtcbi8qKiBgZW5kYCBpcyBub3QgaW5jbHVkZWQgKi9cbmV4cG9ydCBjb25zdCByYW5nZSA9IChzdGFydCwgZW5kKSA9PiB7XG4gICAgY29uc3QgbGVuZ3RoID0gZW5kIC0gc3RhcnQ7XG4gICAgcmV0dXJuIEFycmF5LmZyb20oeyBsZW5ndGggfSwgKF8sIGkpID0+IHN0YXJ0ICsgaSk7XG59O1xuZXhwb3J0IGNvbnN0IHRocm90dGxlID0gKGZuLCBtcykgPT4ge1xuICAgIGxldCBzaG91bGRXYWl0ID0gZmFsc2U7XG4gICAgbGV0IHNob3VsZENhbGxBZ2FpbiA9IGZhbHNlO1xuICAgIGNvbnN0IHRpbWVvdXRGdW5jID0gKCkgPT4ge1xuICAgICAgICBpZiAoc2hvdWxkQ2FsbEFnYWluKSB7XG4gICAgICAgICAgICBmbigpO1xuICAgICAgICAgICAgc2hvdWxkQ2FsbEFnYWluID0gZmFsc2U7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KHRpbWVvdXRGdW5jLCBtcyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBzaG91bGRXYWl0ID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICAgIGlmIChzaG91bGRXYWl0KSB7XG4gICAgICAgICAgICBzaG91bGRDYWxsQWdhaW4gPSB0cnVlO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGZuKCk7XG4gICAgICAgIHNob3VsZFdhaXQgPSB0cnVlO1xuICAgICAgICBzZXRUaW1lb3V0KHRpbWVvdXRGdW5jLCBtcyk7XG4gICAgfTtcbn07XG5leHBvcnQgY29uc3QgZ2V0VHJhY2VQYXJlbnRIZWFkZXIgPSAocGFyZW50U3BhbikgPT4ge1xuICAgIGNvbnN0IHNwYW5Db250ZXh0ID0gcGFyZW50U3Bhbi5zcGFuQ29udGV4dCgpO1xuICAgIC8vIEZvcm1hdDoge3ZlcnNpb259LXt0cmFjZV9pZH0te3NwYW5faWR9LXt0cmFjZV9mbGFnc31cbiAgICAvLyBodHRwczovL3d3dy53My5vcmcvVFIvdHJhY2UtY29udGV4dC8jZXhhbXBsZXMtb2YtaHR0cC10cmFjZXBhcmVudC1oZWFkZXJzXG4gICAgcmV0dXJuIGAwMC0ke3NwYW5Db250ZXh0LnRyYWNlSWR9LSR7c3BhbkNvbnRleHQuc3BhbklkfS0wMWA7XG59O1xuZXhwb3J0IGNvbnN0IGFzc2VydFRhZyA9IChvYmosIHRhZykgPT4ge1xuICAgIGlmIChvYmouX3RhZyAhPT0gdGFnKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgRXhwZWN0ZWQgdGFnICR7dGFnfSBidXQgZ290ICR7b2JqLl90YWd9YCk7XG4gICAgfVxuICAgIHJldHVybiBvYmo7XG59O1xuZXhwb3J0IGNvbnN0IG1lbW9pemVCeVN0cmluZ2lmeUFyZ3MgPSAoZm4pID0+IHtcbiAgICBjb25zdCBjYWNoZSA9IG5ldyBNYXAoKTtcbiAgICByZXR1cm4gKCguLi5hcmdzKSA9PiB7XG4gICAgICAgIGNvbnN0IGtleSA9IEpTT04uc3RyaW5naWZ5KGFyZ3MpO1xuICAgICAgICBpZiAoY2FjaGUuaGFzKGtleSkpIHtcbiAgICAgICAgICAgIHJldHVybiBjYWNoZS5nZXQoa2V5KTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCByZXN1bHQgPSBmbiguLi5hcmdzKTtcbiAgICAgICAgY2FjaGUuc2V0KGtleSwgcmVzdWx0KTtcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9KTtcbn07XG5leHBvcnQgY29uc3QgbWVtb2l6ZUJ5UmVmID0gKGZuKSA9PiB7XG4gICAgY29uc3QgY2FjaGUgPSBuZXcgTWFwKCk7XG4gICAgcmV0dXJuICgoYXJnKSA9PiB7XG4gICAgICAgIGlmIChjYWNoZS5oYXMoYXJnKSkge1xuICAgICAgICAgICAgcmV0dXJuIGNhY2hlLmdldChhcmcpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGZuKGFyZyk7XG4gICAgICAgIGNhY2hlLnNldChhcmcsIHJlc3VsdCk7XG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSk7XG59O1xuZXhwb3J0IGNvbnN0IGlzTm9uRW1wdHlTdHJpbmcgPSAoc3RyKSA9PiB7XG4gICAgcmV0dXJuIHR5cGVvZiBzdHIgPT09ICdzdHJpbmcnICYmIHN0ci5sZW5ndGggPiAwO1xufTtcbmV4cG9ydCBjb25zdCBpc1Byb21pc2UgPSAodmFsdWUpID0+IHR5cGVvZiB2YWx1ZT8udGhlbiA9PT0gJ2Z1bmN0aW9uJztcbmV4cG9ydCBjb25zdCBpc0l0ZXJhYmxlID0gKHZhbHVlKSA9PiB0eXBlb2YgdmFsdWU/LltTeW1ib2wuaXRlcmF0b3JdID09PSAnZnVuY3Rpb24nO1xuZXhwb3J0IHsgb2JqZWN0VG9TdHJpbmcgYXMgZXJyb3JUb1N0cmluZyB9IGZyb20gJy4vbWlzYy5qcyc7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/node_modules/@livestore/utils/dist/index.js\n");

/***/ }),

/***/ "(rsc)/./src/node_modules/@livestore/utils/dist/misc.js":
/*!********************************************************!*\
  !*** ./src/node_modules/@livestore/utils/dist/misc.js ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   envTruish: () => (/* binding */ envTruish),\n/* harmony export */   isDevEnv: () => (/* binding */ isDevEnv),\n/* harmony export */   objectToString: () => (/* binding */ objectToString),\n/* harmony export */   shouldNeverHappen: () => (/* binding */ shouldNeverHappen),\n/* harmony export */   tryAsFunctionAndNew: () => (/* binding */ tryAsFunctionAndNew)\n/* harmony export */ });\nconst isDevEnv = () => {\n    if (typeof process !== 'undefined' && process.env !== undefined) {\n        return \"development\" !== 'production';\n    }\n    // TODO re-enable the full guard code once `import.meta` is supported in Expo\n    // if (import.meta !== undefined && import.meta.env !== undefined) {\n    if (false) {}\n    // @ts-expect-error Only exists in Expo / RN\n    if (typeof globalThis !== 'undefined' && globalThis.__DEV__) {\n        return true;\n    }\n    return false;\n};\nconst objectToString = (error) => {\n    const str = error?.toString();\n    if (str !== '[object Object]')\n        return str;\n    try {\n        return JSON.stringify(error, null, 2);\n    }\n    catch (e) {\n        console.log(error);\n        return 'Error while printing error: ' + e;\n    }\n};\nconst tryAsFunctionAndNew = (fnOrConstructor, arg) => {\n    try {\n        // @ts-expect-error try out as constructor\n        return new fnOrConstructor(arg);\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    }\n    catch (e) {\n        // @ts-expect-error try out as function\n        return fnOrConstructor(arg);\n    }\n};\nconst envTruish = (env) => env !== undefined && env.toLowerCase() !== 'false' && env.toLowerCase() !== '0';\nconst shouldNeverHappen = (msg, ...args) => {\n    console.error(msg, ...args);\n    if (isDevEnv()) {\n        debugger;\n    }\n    throw new Error(`This should never happen: ${msg}`);\n};\n//# sourceMappingURL=misc.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbm9kZV9tb2R1bGVzL0BsaXZlc3RvcmUvdXRpbHMvZGlzdC9taXNjLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQU87QUFDUDtBQUNBLGVBQWUsYUFBb0I7QUFDbkM7QUFDQTtBQUNBO0FBQ0EsUUFBUSxLQUE2QixFQUFFLEVBRWxDO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ0E7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlEQUFpRCxJQUFJO0FBQ3JEO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hbmFjb25kYS1hc3Nlc21lbnQtMS8uL3NyYy9ub2RlX21vZHVsZXMvQGxpdmVzdG9yZS91dGlscy9kaXN0L21pc2MuanM/MGYyNSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgaXNEZXZFbnYgPSAoKSA9PiB7XG4gICAgaWYgKHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJyAmJiBwcm9jZXNzLmVudiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nO1xuICAgIH1cbiAgICAvLyBUT0RPIHJlLWVuYWJsZSB0aGUgZnVsbCBndWFyZCBjb2RlIG9uY2UgYGltcG9ydC5tZXRhYCBpcyBzdXBwb3J0ZWQgaW4gRXhwb1xuICAgIC8vIGlmIChpbXBvcnQubWV0YSAhPT0gdW5kZWZpbmVkICYmIGltcG9ydC5tZXRhLmVudiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgaWYgKGltcG9ydC5tZXRhLmVudiAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBpbXBvcnQubWV0YS5lbnYuREVWO1xuICAgIH1cbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yIE9ubHkgZXhpc3RzIGluIEV4cG8gLyBSTlxuICAgIGlmICh0eXBlb2YgZ2xvYmFsVGhpcyAhPT0gJ3VuZGVmaW5lZCcgJiYgZ2xvYmFsVGhpcy5fX0RFVl9fKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59O1xuZXhwb3J0IGNvbnN0IG9iamVjdFRvU3RyaW5nID0gKGVycm9yKSA9PiB7XG4gICAgY29uc3Qgc3RyID0gZXJyb3I/LnRvU3RyaW5nKCk7XG4gICAgaWYgKHN0ciAhPT0gJ1tvYmplY3QgT2JqZWN0XScpXG4gICAgICAgIHJldHVybiBzdHI7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGVycm9yLCBudWxsLCAyKTtcbiAgICB9XG4gICAgY2F0Y2ggKGUpIHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xuICAgICAgICByZXR1cm4gJ0Vycm9yIHdoaWxlIHByaW50aW5nIGVycm9yOiAnICsgZTtcbiAgICB9XG59O1xuZXhwb3J0IGNvbnN0IHRyeUFzRnVuY3Rpb25BbmROZXcgPSAoZm5PckNvbnN0cnVjdG9yLCBhcmcpID0+IHtcbiAgICB0cnkge1xuICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIHRyeSBvdXQgYXMgY29uc3RydWN0b3JcbiAgICAgICAgcmV0dXJuIG5ldyBmbk9yQ29uc3RydWN0b3IoYXJnKTtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11bnVzZWQtdmFyc1xuICAgIH1cbiAgICBjYXRjaCAoZSkge1xuICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIHRyeSBvdXQgYXMgZnVuY3Rpb25cbiAgICAgICAgcmV0dXJuIGZuT3JDb25zdHJ1Y3RvcihhcmcpO1xuICAgIH1cbn07XG5leHBvcnQgY29uc3QgZW52VHJ1aXNoID0gKGVudikgPT4gZW52ICE9PSB1bmRlZmluZWQgJiYgZW52LnRvTG93ZXJDYXNlKCkgIT09ICdmYWxzZScgJiYgZW52LnRvTG93ZXJDYXNlKCkgIT09ICcwJztcbmV4cG9ydCBjb25zdCBzaG91bGROZXZlckhhcHBlbiA9IChtc2csIC4uLmFyZ3MpID0+IHtcbiAgICBjb25zb2xlLmVycm9yKG1zZywgLi4uYXJncyk7XG4gICAgaWYgKGlzRGV2RW52KCkpIHtcbiAgICAgICAgZGVidWdnZXI7XG4gICAgfVxuICAgIHRocm93IG5ldyBFcnJvcihgVGhpcyBzaG91bGQgbmV2ZXIgaGFwcGVuOiAke21zZ31gKTtcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1taXNjLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/node_modules/@livestore/utils/dist/misc.js\n");

/***/ }),

/***/ "(rsc)/./src/node_modules/@livestore/utils/dist/object/index.js":
/*!****************************************************************!*\
  !*** ./src/node_modules/@livestore/utils/dist/object/index.js ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   keyObjectFromObject: () => (/* binding */ keyObjectFromObject),\n/* harmony export */   mapObjectValues: () => (/* binding */ mapObjectValues),\n/* harmony export */   objectEntries: () => (/* binding */ objectEntries),\n/* harmony export */   omit: () => (/* reexport safe */ _omit_js__WEBPACK_IMPORTED_MODULE_1__.omit),\n/* harmony export */   pick: () => (/* reexport safe */ _pick_js__WEBPACK_IMPORTED_MODULE_0__.pick),\n/* harmony export */   pickAllOrElse: () => (/* reexport safe */ _pick_js__WEBPACK_IMPORTED_MODULE_0__.pickAllOrElse)\n/* harmony export */ });\n/* harmony import */ var effect__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! effect */ \"(rsc)/./src/node_modules/effect/dist/esm/Function.js\");\n/* harmony import */ var _pick_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./pick.js */ \"(rsc)/./src/node_modules/@livestore/utils/dist/object/pick.js\");\n/* harmony import */ var _omit_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./omit.js */ \"(rsc)/./src/node_modules/@livestore/utils/dist/object/omit.js\");\n\n\n\nconst mapObjectValues = (obj, mapValue) => {\n    const mappedEntries = Object.entries(obj).map(([key, val]) => [key, mapValue(key, val)]);\n    return Object.fromEntries(mappedEntries);\n};\nconst objectEntries = (obj) => Object.entries(obj);\nconst keyObjectFromObject = (obj) => (0,effect__WEBPACK_IMPORTED_MODULE_2__.pipe)(objectEntries(obj).map(([k]) => [k, k]), Object.fromEntries);\n//# sourceMappingURL=index.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbm9kZV9tb2R1bGVzL0BsaXZlc3RvcmUvdXRpbHMvZGlzdC9vYmplY3QvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQThCO0FBQ0o7QUFDQTtBQUNuQjtBQUNQO0FBQ0E7QUFDQTtBQUNPO0FBQ0EscUNBQXFDLDRDQUFJO0FBQ2hEIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYW5hY29uZGEtYXNzZXNtZW50LTEvLi9zcmMvbm9kZV9tb2R1bGVzL0BsaXZlc3RvcmUvdXRpbHMvZGlzdC9vYmplY3QvaW5kZXguanM/YTVjMiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBwaXBlIH0gZnJvbSAnZWZmZWN0JztcbmV4cG9ydCAqIGZyb20gJy4vcGljay5qcyc7XG5leHBvcnQgKiBmcm9tICcuL29taXQuanMnO1xuZXhwb3J0IGNvbnN0IG1hcE9iamVjdFZhbHVlcyA9IChvYmosIG1hcFZhbHVlKSA9PiB7XG4gICAgY29uc3QgbWFwcGVkRW50cmllcyA9IE9iamVjdC5lbnRyaWVzKG9iaikubWFwKChba2V5LCB2YWxdKSA9PiBba2V5LCBtYXBWYWx1ZShrZXksIHZhbCldKTtcbiAgICByZXR1cm4gT2JqZWN0LmZyb21FbnRyaWVzKG1hcHBlZEVudHJpZXMpO1xufTtcbmV4cG9ydCBjb25zdCBvYmplY3RFbnRyaWVzID0gKG9iaikgPT4gT2JqZWN0LmVudHJpZXMob2JqKTtcbmV4cG9ydCBjb25zdCBrZXlPYmplY3RGcm9tT2JqZWN0ID0gKG9iaikgPT4gcGlwZShvYmplY3RFbnRyaWVzKG9iaikubWFwKChba10pID0+IFtrLCBrXSksIE9iamVjdC5mcm9tRW50cmllcyk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/node_modules/@livestore/utils/dist/object/index.js\n");

/***/ }),

/***/ "(rsc)/./src/node_modules/@livestore/utils/dist/object/omit.js":
/*!***************************************************************!*\
  !*** ./src/node_modules/@livestore/utils/dist/object/omit.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   omit: () => (/* binding */ omit)\n/* harmony export */ });\n// type ConvertUndefined<T> = OrUndefined<{ [K in keyof T as undefined extends T[K] ? K : never]-?: T[K] }>\n// type OrUndefined<T> = { [K in keyof T]: T[K] | undefined }\n// type PickRequired<T> = { [K in keyof T as undefined extends T[K] ? never : K]: T[K] }\n// type ConvertPick<T> = ConvertUndefined<T> & PickRequired<T>\n/** Returns a shallowly cloned object with the provided keys omitted */\nconst omit = (obj, keys) => {\n    return Object.keys(obj).reduce((acc, key) => {\n        if (!keys.includes(key)) {\n            acc[key] = obj[key];\n        }\n        return acc;\n    }, {});\n};\n//# sourceMappingURL=omit.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbm9kZV9tb2R1bGVzL0BsaXZlc3RvcmUvdXRpbHMvZGlzdC9vYmplY3Qvb21pdC5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUEsNENBQTRDLDhEQUE4RDtBQUMxRywyQkFBMkI7QUFDM0IsNEJBQTRCO0FBQzVCO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLLElBQUk7QUFDVDtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYW5hY29uZGEtYXNzZXNtZW50LTEvLi9zcmMvbm9kZV9tb2R1bGVzL0BsaXZlc3RvcmUvdXRpbHMvZGlzdC9vYmplY3Qvb21pdC5qcz81NzdkIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIHR5cGUgQ29udmVydFVuZGVmaW5lZDxUPiA9IE9yVW5kZWZpbmVkPHsgW0sgaW4ga2V5b2YgVCBhcyB1bmRlZmluZWQgZXh0ZW5kcyBUW0tdID8gSyA6IG5ldmVyXS0/OiBUW0tdIH0+XG4vLyB0eXBlIE9yVW5kZWZpbmVkPFQ+ID0geyBbSyBpbiBrZXlvZiBUXTogVFtLXSB8IHVuZGVmaW5lZCB9XG4vLyB0eXBlIFBpY2tSZXF1aXJlZDxUPiA9IHsgW0sgaW4ga2V5b2YgVCBhcyB1bmRlZmluZWQgZXh0ZW5kcyBUW0tdID8gbmV2ZXIgOiBLXTogVFtLXSB9XG4vLyB0eXBlIENvbnZlcnRQaWNrPFQ+ID0gQ29udmVydFVuZGVmaW5lZDxUPiAmIFBpY2tSZXF1aXJlZDxUPlxuLyoqIFJldHVybnMgYSBzaGFsbG93bHkgY2xvbmVkIG9iamVjdCB3aXRoIHRoZSBwcm92aWRlZCBrZXlzIG9taXR0ZWQgKi9cbmV4cG9ydCBjb25zdCBvbWl0ID0gKG9iaiwga2V5cykgPT4ge1xuICAgIHJldHVybiBPYmplY3Qua2V5cyhvYmopLnJlZHVjZSgoYWNjLCBrZXkpID0+IHtcbiAgICAgICAgaWYgKCFrZXlzLmluY2x1ZGVzKGtleSkpIHtcbiAgICAgICAgICAgIGFjY1trZXldID0gb2JqW2tleV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFjYztcbiAgICB9LCB7fSk7XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9b21pdC5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/node_modules/@livestore/utils/dist/object/omit.js\n");

/***/ }),

/***/ "(rsc)/./src/node_modules/@livestore/utils/dist/object/pick.js":
/*!***************************************************************!*\
  !*** ./src/node_modules/@livestore/utils/dist/object/pick.js ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   pick: () => (/* binding */ pick),\n/* harmony export */   pickAllOrElse: () => (/* binding */ pickAllOrElse)\n/* harmony export */ });\nconst pick = (obj, keys) => {\n    return keys.reduce((acc, key) => {\n        acc[key] = obj[key];\n        return acc;\n    }, {});\n};\nconst pickAllOrElse = (obj, keys, elseValue) => {\n    const ret = {};\n    for (const key of keys) {\n        if (obj[key] === undefined) {\n            return elseValue;\n        }\n        ret[key] = obj[key];\n    }\n    return ret;\n};\n//# sourceMappingURL=pick.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbm9kZV9tb2R1bGVzL0BsaXZlc3RvcmUvdXRpbHMvZGlzdC9vYmplY3QvcGljay5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsS0FBSyxJQUFJO0FBQ1Q7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYW5hY29uZGEtYXNzZXNtZW50LTEvLi9zcmMvbm9kZV9tb2R1bGVzL0BsaXZlc3RvcmUvdXRpbHMvZGlzdC9vYmplY3QvcGljay5qcz83ZmU5Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBwaWNrID0gKG9iaiwga2V5cykgPT4ge1xuICAgIHJldHVybiBrZXlzLnJlZHVjZSgoYWNjLCBrZXkpID0+IHtcbiAgICAgICAgYWNjW2tleV0gPSBvYmpba2V5XTtcbiAgICAgICAgcmV0dXJuIGFjYztcbiAgICB9LCB7fSk7XG59O1xuZXhwb3J0IGNvbnN0IHBpY2tBbGxPckVsc2UgPSAob2JqLCBrZXlzLCBlbHNlVmFsdWUpID0+IHtcbiAgICBjb25zdCByZXQgPSB7fTtcbiAgICBmb3IgKGNvbnN0IGtleSBvZiBrZXlzKSB7XG4gICAgICAgIGlmIChvYmpba2V5XSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gZWxzZVZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIHJldFtrZXldID0gb2JqW2tleV07XG4gICAgfVxuICAgIHJldHVybiByZXQ7XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGljay5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/node_modules/@livestore/utils/dist/object/pick.js\n");

/***/ }),

/***/ "(rsc)/./src/node_modules/@livestore/utils/dist/promise.js":
/*!***********************************************************!*\
  !*** ./src/node_modules/@livestore/utils/dist/promise.js ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   promiseMap: () => (/* binding */ promiseMap),\n/* harmony export */   promiseMapDict: () => (/* binding */ promiseMapDict),\n/* harmony export */   promiseMapPool: () => (/* binding */ promiseMapPool),\n/* harmony export */   promiseMapToDict: () => (/* binding */ promiseMapToDict)\n/* harmony export */ });\n/** Promise.all + Array.map */\nconst promiseMap = (arr, map) => Promise.all(arr.map(map));\nconst promiseMapDict = async (dict, map) => {\n    const mappedEntries = await Promise.all(Object.entries(dict).map(async ([key, val]) => [key, await map(val)]));\n    return Object.fromEntries(mappedEntries);\n};\nconst promiseMapToDict = async (arr, mapValue, mapKey) => {\n    const mappedEntries = await Promise.all(arr.map(async (el, index) => [mapKey(el, index), await mapValue(el, index)]));\n    return Object.fromEntries(mappedEntries);\n};\nconst promiseMapPool = async (arr, map, poolLimit) => {\n    const ret = [];\n    const executing = [];\n    for (const [index, item] of arr.entries()) {\n        const p = Promise.resolve().then(() => map(item, index));\n        ret.push(p);\n        if (poolLimit <= arr.length) {\n            const e = p.then(() => executing.splice(executing.indexOf(e), 1));\n            executing.push(e);\n            if (executing.length >= poolLimit) {\n                await Promise.race(executing);\n            }\n        }\n    }\n    return Promise.all(ret);\n};\n//# sourceMappingURL=promise.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbm9kZV9tb2R1bGVzL0BsaXZlc3RvcmUvdXRpbHMvZGlzdC9wcm9taXNlLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTtBQUNPO0FBQ0E7QUFDUDtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hbmFjb25kYS1hc3Nlc21lbnQtMS8uL3NyYy9ub2RlX21vZHVsZXMvQGxpdmVzdG9yZS91dGlscy9kaXN0L3Byb21pc2UuanM/ODMwNiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiogUHJvbWlzZS5hbGwgKyBBcnJheS5tYXAgKi9cbmV4cG9ydCBjb25zdCBwcm9taXNlTWFwID0gKGFyciwgbWFwKSA9PiBQcm9taXNlLmFsbChhcnIubWFwKG1hcCkpO1xuZXhwb3J0IGNvbnN0IHByb21pc2VNYXBEaWN0ID0gYXN5bmMgKGRpY3QsIG1hcCkgPT4ge1xuICAgIGNvbnN0IG1hcHBlZEVudHJpZXMgPSBhd2FpdCBQcm9taXNlLmFsbChPYmplY3QuZW50cmllcyhkaWN0KS5tYXAoYXN5bmMgKFtrZXksIHZhbF0pID0+IFtrZXksIGF3YWl0IG1hcCh2YWwpXSkpO1xuICAgIHJldHVybiBPYmplY3QuZnJvbUVudHJpZXMobWFwcGVkRW50cmllcyk7XG59O1xuZXhwb3J0IGNvbnN0IHByb21pc2VNYXBUb0RpY3QgPSBhc3luYyAoYXJyLCBtYXBWYWx1ZSwgbWFwS2V5KSA9PiB7XG4gICAgY29uc3QgbWFwcGVkRW50cmllcyA9IGF3YWl0IFByb21pc2UuYWxsKGFyci5tYXAoYXN5bmMgKGVsLCBpbmRleCkgPT4gW21hcEtleShlbCwgaW5kZXgpLCBhd2FpdCBtYXBWYWx1ZShlbCwgaW5kZXgpXSkpO1xuICAgIHJldHVybiBPYmplY3QuZnJvbUVudHJpZXMobWFwcGVkRW50cmllcyk7XG59O1xuZXhwb3J0IGNvbnN0IHByb21pc2VNYXBQb29sID0gYXN5bmMgKGFyciwgbWFwLCBwb29sTGltaXQpID0+IHtcbiAgICBjb25zdCByZXQgPSBbXTtcbiAgICBjb25zdCBleGVjdXRpbmcgPSBbXTtcbiAgICBmb3IgKGNvbnN0IFtpbmRleCwgaXRlbV0gb2YgYXJyLmVudHJpZXMoKSkge1xuICAgICAgICBjb25zdCBwID0gUHJvbWlzZS5yZXNvbHZlKCkudGhlbigoKSA9PiBtYXAoaXRlbSwgaW5kZXgpKTtcbiAgICAgICAgcmV0LnB1c2gocCk7XG4gICAgICAgIGlmIChwb29sTGltaXQgPD0gYXJyLmxlbmd0aCkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHAudGhlbigoKSA9PiBleGVjdXRpbmcuc3BsaWNlKGV4ZWN1dGluZy5pbmRleE9mKGUpLCAxKSk7XG4gICAgICAgICAgICBleGVjdXRpbmcucHVzaChlKTtcbiAgICAgICAgICAgIGlmIChleGVjdXRpbmcubGVuZ3RoID49IHBvb2xMaW1pdCkge1xuICAgICAgICAgICAgICAgIGF3YWl0IFByb21pc2UucmFjZShleGVjdXRpbmcpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBQcm9taXNlLmFsbChyZXQpO1xufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXByb21pc2UuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/node_modules/@livestore/utils/dist/promise.js\n");

/***/ }),

/***/ "(rsc)/./src/node_modules/@livestore/utils/dist/set.js":
/*!*******************************************************!*\
  !*** ./src/node_modules/@livestore/utils/dist/set.js ***!
  \*******************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   difference: () => (/* binding */ difference)\n/* harmony export */ });\nconst difference = (a, b) => {\n    const diff = new Set();\n    for (const item of a) {\n        if (!b.has(item)) {\n            diff.add(item);\n        }\n    }\n    return diff;\n};\n//# sourceMappingURL=set.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbm9kZV9tb2R1bGVzL0BsaXZlc3RvcmUvdXRpbHMvZGlzdC9zZXQuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYW5hY29uZGEtYXNzZXNtZW50LTEvLi9zcmMvbm9kZV9tb2R1bGVzL0BsaXZlc3RvcmUvdXRpbHMvZGlzdC9zZXQuanM/MGY4MyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgZGlmZmVyZW5jZSA9IChhLCBiKSA9PiB7XG4gICAgY29uc3QgZGlmZiA9IG5ldyBTZXQoKTtcbiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgYSkge1xuICAgICAgICBpZiAoIWIuaGFzKGl0ZW0pKSB7XG4gICAgICAgICAgICBkaWZmLmFkZChpdGVtKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZGlmZjtcbn07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zZXQuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/node_modules/@livestore/utils/dist/set.js\n");

/***/ }),

/***/ "(rsc)/./src/node_modules/@livestore/utils/dist/string.js":
/*!**********************************************************!*\
  !*** ./src/node_modules/@livestore/utils/dist/string.js ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   indent: () => (/* binding */ indent),\n/* harmony export */   lowercaseFirstChar: () => (/* binding */ lowercaseFirstChar),\n/* harmony export */   uppercaseFirstChar: () => (/* binding */ uppercaseFirstChar)\n/* harmony export */ });\nconst lowercaseFirstChar = (str) => str.charAt(0).toLowerCase() + str.slice(1);\nconst uppercaseFirstChar = (str) => str.charAt(0).toUpperCase() + str.slice(1);\n/** Indents a string each line by `n` characters (default: spaces) */\nconst indent = (str, n, char = ' ') => str\n    .split('\\n')\n    .map((line) => char.repeat(n) + line)\n    .join('\\n');\n//# sourceMappingURL=string.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbm9kZV9tb2R1bGVzL0BsaXZlc3RvcmUvdXRpbHMvZGlzdC9zdHJpbmcuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQU87QUFDQTtBQUNQO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2FuYWNvbmRhLWFzc2VzbWVudC0xLy4vc3JjL25vZGVfbW9kdWxlcy9AbGl2ZXN0b3JlL3V0aWxzL2Rpc3Qvc3RyaW5nLmpzPzkwMDMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IGxvd2VyY2FzZUZpcnN0Q2hhciA9IChzdHIpID0+IHN0ci5jaGFyQXQoMCkudG9Mb3dlckNhc2UoKSArIHN0ci5zbGljZSgxKTtcbmV4cG9ydCBjb25zdCB1cHBlcmNhc2VGaXJzdENoYXIgPSAoc3RyKSA9PiBzdHIuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzdHIuc2xpY2UoMSk7XG4vKiogSW5kZW50cyBhIHN0cmluZyBlYWNoIGxpbmUgYnkgYG5gIGNoYXJhY3RlcnMgKGRlZmF1bHQ6IHNwYWNlcykgKi9cbmV4cG9ydCBjb25zdCBpbmRlbnQgPSAoc3RyLCBuLCBjaGFyID0gJyAnKSA9PiBzdHJcbiAgICAuc3BsaXQoJ1xcbicpXG4gICAgLm1hcCgobGluZSkgPT4gY2hhci5yZXBlYXQobikgKyBsaW5lKVxuICAgIC5qb2luKCdcXG4nKTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXN0cmluZy5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/node_modules/@livestore/utils/dist/string.js\n");

/***/ }),

/***/ "(rsc)/./src/node_modules/@livestore/utils/dist/time.js":
/*!********************************************************!*\
  !*** ./src/node_modules/@livestore/utils/dist/time.js ***!
  \********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   minuteInMs: () => (/* binding */ minuteInMs),\n/* harmony export */   msAsTimeString: () => (/* binding */ msAsTimeString),\n/* harmony export */   time: () => (/* binding */ time)\n/* harmony export */ });\nconst minuteInMs = 1000 * 60;\nconst time = {\n    ms: 1,\n    sec: 1000,\n    min: 60 * 1000,\n    hour: 60 * 60 * 1000,\n    day: 24 * 60 * 60 * 1000,\n    week: 7 * 24 * 60 * 60 * 1000,\n};\n/** Returns a string of format `m:ss` / `mm:ss` / `h:mm:ss` / ... */\nconst msAsTimeString = (ms) => {\n    const seconds = Math.floor(ms / 1000);\n    const minutes = Math.floor(seconds / 60);\n    const hours = Math.floor(minutes / 60);\n    const remainingSeconds = (seconds % 60).toString().padStart(2, '0');\n    const remainingMinutes = hours > 0 ? (minutes % 60).toString().padStart(2, '0') : minutes % 60;\n    const timeString = [hours > 0 ? `${hours}:` : '', `${remainingMinutes}:`, `${remainingSeconds}`]\n        .filter((val) => val !== '')\n        .join('');\n    return timeString;\n};\n//# sourceMappingURL=time.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbm9kZV9tb2R1bGVzL0BsaXZlc3RvcmUvdXRpbHMvZGlzdC90aW1lLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFPO0FBQ0E7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLE1BQU0sWUFBWSxpQkFBaUIsT0FBTyxpQkFBaUI7QUFDbEc7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2FuYWNvbmRhLWFzc2VzbWVudC0xLy4vc3JjL25vZGVfbW9kdWxlcy9AbGl2ZXN0b3JlL3V0aWxzL2Rpc3QvdGltZS5qcz85ODhjIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBtaW51dGVJbk1zID0gMTAwMCAqIDYwO1xuZXhwb3J0IGNvbnN0IHRpbWUgPSB7XG4gICAgbXM6IDEsXG4gICAgc2VjOiAxMDAwLFxuICAgIG1pbjogNjAgKiAxMDAwLFxuICAgIGhvdXI6IDYwICogNjAgKiAxMDAwLFxuICAgIGRheTogMjQgKiA2MCAqIDYwICogMTAwMCxcbiAgICB3ZWVrOiA3ICogMjQgKiA2MCAqIDYwICogMTAwMCxcbn07XG4vKiogUmV0dXJucyBhIHN0cmluZyBvZiBmb3JtYXQgYG06c3NgIC8gYG1tOnNzYCAvIGBoOm1tOnNzYCAvIC4uLiAqL1xuZXhwb3J0IGNvbnN0IG1zQXNUaW1lU3RyaW5nID0gKG1zKSA9PiB7XG4gICAgY29uc3Qgc2Vjb25kcyA9IE1hdGguZmxvb3IobXMgLyAxMDAwKTtcbiAgICBjb25zdCBtaW51dGVzID0gTWF0aC5mbG9vcihzZWNvbmRzIC8gNjApO1xuICAgIGNvbnN0IGhvdXJzID0gTWF0aC5mbG9vcihtaW51dGVzIC8gNjApO1xuICAgIGNvbnN0IHJlbWFpbmluZ1NlY29uZHMgPSAoc2Vjb25kcyAlIDYwKS50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyk7XG4gICAgY29uc3QgcmVtYWluaW5nTWludXRlcyA9IGhvdXJzID4gMCA/IChtaW51dGVzICUgNjApLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKSA6IG1pbnV0ZXMgJSA2MDtcbiAgICBjb25zdCB0aW1lU3RyaW5nID0gW2hvdXJzID4gMCA/IGAke2hvdXJzfTpgIDogJycsIGAke3JlbWFpbmluZ01pbnV0ZXN9OmAsIGAke3JlbWFpbmluZ1NlY29uZHN9YF1cbiAgICAgICAgLmZpbHRlcigodmFsKSA9PiB2YWwgIT09ICcnKVxuICAgICAgICAuam9pbignJyk7XG4gICAgcmV0dXJuIHRpbWVTdHJpbmc7XG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9dGltZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/node_modules/@livestore/utils/dist/time.js\n");

/***/ }),

/***/ "(rsc)/./src/node_modules/@livestore/utils/node_modules/msgpackr/iterators.js":
/*!******************************************************************************!*\
  !*** ./src/node_modules/@livestore/utils/node_modules/msgpackr/iterators.js ***!
  \******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   decodeIter: () => (/* binding */ decodeIter),\n/* harmony export */   encodeIter: () => (/* binding */ encodeIter),\n/* harmony export */   packIter: () => (/* binding */ packIter),\n/* harmony export */   unpackIter: () => (/* binding */ unpackIter)\n/* harmony export */ });\n/* harmony import */ var _pack_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./pack.js */ \"(rsc)/./src/node_modules/@livestore/utils/node_modules/msgpackr/pack.js\");\n/* harmony import */ var _unpack_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./unpack.js */ \"(rsc)/./src/node_modules/@livestore/utils/node_modules/msgpackr/unpack.js\");\n\n\n\n/**\n * Given an Iterable first argument, returns an Iterable where each value is packed as a Buffer\n * If the argument is only Async Iterable, the return value will be an Async Iterable.\n * @param {Iterable|Iterator|AsyncIterable|AsyncIterator} objectIterator - iterable source, like a Readable object stream, an array, Set, or custom object\n * @param {options} [options] - msgpackr pack options\n * @returns {IterableIterator|Promise.<AsyncIterableIterator>}\n */\nfunction packIter (objectIterator, options = {}) {\n  if (!objectIterator || typeof objectIterator !== 'object') {\n    throw new Error('first argument must be an Iterable, Async Iterable, or a Promise for an Async Iterable')\n  } else if (typeof objectIterator[Symbol.iterator] === 'function') {\n    return packIterSync(objectIterator, options)\n  } else if (typeof objectIterator.then === 'function' || typeof objectIterator[Symbol.asyncIterator] === 'function') {\n    return packIterAsync(objectIterator, options)\n  } else {\n    throw new Error('first argument must be an Iterable, Async Iterable, Iterator, Async Iterator, or a Promise')\n  }\n}\n\nfunction * packIterSync (objectIterator, options) {\n  const packr = new _pack_js__WEBPACK_IMPORTED_MODULE_0__.Packr(options)\n  for (const value of objectIterator) {\n    yield packr.pack(value)\n  }\n}\n\nasync function * packIterAsync (objectIterator, options) {\n  const packr = new _pack_js__WEBPACK_IMPORTED_MODULE_0__.Packr(options)\n  for await (const value of objectIterator) {\n    yield packr.pack(value)\n  }\n}\n\n/**\n * Given an Iterable/Iterator input which yields buffers, returns an IterableIterator which yields sync decoded objects\n * Or, given an Async Iterable/Iterator which yields promises resolving in buffers, returns an AsyncIterableIterator.\n * @param {Iterable|Iterator|AsyncIterable|AsyncIterableIterator} bufferIterator\n * @param {object} [options] - unpackr options\n * @returns {IterableIterator|Promise.<AsyncIterableIterator}\n */\nfunction unpackIter (bufferIterator, options = {}) {\n  if (!bufferIterator || typeof bufferIterator !== 'object') {\n    throw new Error('first argument must be an Iterable, Async Iterable, Iterator, Async Iterator, or a promise')\n  }\n\n  const unpackr = new _unpack_js__WEBPACK_IMPORTED_MODULE_1__.Unpackr(options)\n  let incomplete\n  const parser = (chunk) => {\n    let yields\n    // if there's incomplete data from previous chunk, concatinate and try again\n    if (incomplete) {\n      chunk = Buffer.concat([incomplete, chunk])\n      incomplete = undefined\n    }\n\n    try {\n      yields = unpackr.unpackMultiple(chunk)\n    } catch (err) {\n      if (err.incomplete) {\n        incomplete = chunk.slice(err.lastPosition)\n        yields = err.values\n      } else {\n        throw err\n      }\n    }\n    return yields\n  }\n\n  if (typeof bufferIterator[Symbol.iterator] === 'function') {\n    return (function * iter () {\n      for (const value of bufferIterator) {\n        yield * parser(value)\n      }\n    })()\n  } else if (typeof bufferIterator[Symbol.asyncIterator] === 'function') {\n    return (async function * iter () {\n      for await (const value of bufferIterator) {\n        yield * parser(value)\n      }\n    })()\n  }\n}\nconst decodeIter = unpackIter\nconst encodeIter = packIter//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbm9kZV9tb2R1bGVzL0BsaXZlc3RvcmUvdXRpbHMvbm9kZV9tb2R1bGVzL21zZ3BhY2tyL2l0ZXJhdG9ycy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBaUM7QUFDSTs7QUFFckM7QUFDQTtBQUNBO0FBQ0EsV0FBVywrQ0FBK0M7QUFDMUQsV0FBVyxTQUFTO0FBQ3BCLGFBQWE7QUFDYjtBQUNPLCtDQUErQztBQUN0RDtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLG9CQUFvQiwyQ0FBSztBQUN6QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLG9CQUFvQiwyQ0FBSztBQUN6QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLHVEQUF1RDtBQUNsRSxXQUFXLFFBQVE7QUFDbkIsYUFBYTtBQUNiO0FBQ08saURBQWlEO0FBQ3hEO0FBQ0E7QUFDQTs7QUFFQSxzQkFBc0IsK0NBQU87QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDTztBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYW5hY29uZGEtYXNzZXNtZW50LTEvLi9zcmMvbm9kZV9tb2R1bGVzL0BsaXZlc3RvcmUvdXRpbHMvbm9kZV9tb2R1bGVzL21zZ3BhY2tyL2l0ZXJhdG9ycy5qcz8xZmMxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhY2tyIH0gZnJvbSAnLi9wYWNrLmpzJ1xuaW1wb3J0IHsgVW5wYWNrciB9IGZyb20gJy4vdW5wYWNrLmpzJ1xuXG4vKipcbiAqIEdpdmVuIGFuIEl0ZXJhYmxlIGZpcnN0IGFyZ3VtZW50LCByZXR1cm5zIGFuIEl0ZXJhYmxlIHdoZXJlIGVhY2ggdmFsdWUgaXMgcGFja2VkIGFzIGEgQnVmZmVyXG4gKiBJZiB0aGUgYXJndW1lbnQgaXMgb25seSBBc3luYyBJdGVyYWJsZSwgdGhlIHJldHVybiB2YWx1ZSB3aWxsIGJlIGFuIEFzeW5jIEl0ZXJhYmxlLlxuICogQHBhcmFtIHtJdGVyYWJsZXxJdGVyYXRvcnxBc3luY0l0ZXJhYmxlfEFzeW5jSXRlcmF0b3J9IG9iamVjdEl0ZXJhdG9yIC0gaXRlcmFibGUgc291cmNlLCBsaWtlIGEgUmVhZGFibGUgb2JqZWN0IHN0cmVhbSwgYW4gYXJyYXksIFNldCwgb3IgY3VzdG9tIG9iamVjdFxuICogQHBhcmFtIHtvcHRpb25zfSBbb3B0aW9uc10gLSBtc2dwYWNrciBwYWNrIG9wdGlvbnNcbiAqIEByZXR1cm5zIHtJdGVyYWJsZUl0ZXJhdG9yfFByb21pc2UuPEFzeW5jSXRlcmFibGVJdGVyYXRvcj59XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYWNrSXRlciAob2JqZWN0SXRlcmF0b3IsIG9wdGlvbnMgPSB7fSkge1xuICBpZiAoIW9iamVjdEl0ZXJhdG9yIHx8IHR5cGVvZiBvYmplY3RJdGVyYXRvciAhPT0gJ29iamVjdCcpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2ZpcnN0IGFyZ3VtZW50IG11c3QgYmUgYW4gSXRlcmFibGUsIEFzeW5jIEl0ZXJhYmxlLCBvciBhIFByb21pc2UgZm9yIGFuIEFzeW5jIEl0ZXJhYmxlJylcbiAgfSBlbHNlIGlmICh0eXBlb2Ygb2JqZWN0SXRlcmF0b3JbU3ltYm9sLml0ZXJhdG9yXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybiBwYWNrSXRlclN5bmMob2JqZWN0SXRlcmF0b3IsIG9wdGlvbnMpXG4gIH0gZWxzZSBpZiAodHlwZW9mIG9iamVjdEl0ZXJhdG9yLnRoZW4gPT09ICdmdW5jdGlvbicgfHwgdHlwZW9mIG9iamVjdEl0ZXJhdG9yW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybiBwYWNrSXRlckFzeW5jKG9iamVjdEl0ZXJhdG9yLCBvcHRpb25zKVxuICB9IGVsc2Uge1xuICAgIHRocm93IG5ldyBFcnJvcignZmlyc3QgYXJndW1lbnQgbXVzdCBiZSBhbiBJdGVyYWJsZSwgQXN5bmMgSXRlcmFibGUsIEl0ZXJhdG9yLCBBc3luYyBJdGVyYXRvciwgb3IgYSBQcm9taXNlJylcbiAgfVxufVxuXG5mdW5jdGlvbiAqIHBhY2tJdGVyU3luYyAob2JqZWN0SXRlcmF0b3IsIG9wdGlvbnMpIHtcbiAgY29uc3QgcGFja3IgPSBuZXcgUGFja3Iob3B0aW9ucylcbiAgZm9yIChjb25zdCB2YWx1ZSBvZiBvYmplY3RJdGVyYXRvcikge1xuICAgIHlpZWxkIHBhY2tyLnBhY2sodmFsdWUpXG4gIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gKiBwYWNrSXRlckFzeW5jIChvYmplY3RJdGVyYXRvciwgb3B0aW9ucykge1xuICBjb25zdCBwYWNrciA9IG5ldyBQYWNrcihvcHRpb25zKVxuICBmb3IgYXdhaXQgKGNvbnN0IHZhbHVlIG9mIG9iamVjdEl0ZXJhdG9yKSB7XG4gICAgeWllbGQgcGFja3IucGFjayh2YWx1ZSlcbiAgfVxufVxuXG4vKipcbiAqIEdpdmVuIGFuIEl0ZXJhYmxlL0l0ZXJhdG9yIGlucHV0IHdoaWNoIHlpZWxkcyBidWZmZXJzLCByZXR1cm5zIGFuIEl0ZXJhYmxlSXRlcmF0b3Igd2hpY2ggeWllbGRzIHN5bmMgZGVjb2RlZCBvYmplY3RzXG4gKiBPciwgZ2l2ZW4gYW4gQXN5bmMgSXRlcmFibGUvSXRlcmF0b3Igd2hpY2ggeWllbGRzIHByb21pc2VzIHJlc29sdmluZyBpbiBidWZmZXJzLCByZXR1cm5zIGFuIEFzeW5jSXRlcmFibGVJdGVyYXRvci5cbiAqIEBwYXJhbSB7SXRlcmFibGV8SXRlcmF0b3J8QXN5bmNJdGVyYWJsZXxBc3luY0l0ZXJhYmxlSXRlcmF0b3J9IGJ1ZmZlckl0ZXJhdG9yXG4gKiBAcGFyYW0ge29iamVjdH0gW29wdGlvbnNdIC0gdW5wYWNrciBvcHRpb25zXG4gKiBAcmV0dXJucyB7SXRlcmFibGVJdGVyYXRvcnxQcm9taXNlLjxBc3luY0l0ZXJhYmxlSXRlcmF0b3J9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB1bnBhY2tJdGVyIChidWZmZXJJdGVyYXRvciwgb3B0aW9ucyA9IHt9KSB7XG4gIGlmICghYnVmZmVySXRlcmF0b3IgfHwgdHlwZW9mIGJ1ZmZlckl0ZXJhdG9yICE9PSAnb2JqZWN0Jykge1xuICAgIHRocm93IG5ldyBFcnJvcignZmlyc3QgYXJndW1lbnQgbXVzdCBiZSBhbiBJdGVyYWJsZSwgQXN5bmMgSXRlcmFibGUsIEl0ZXJhdG9yLCBBc3luYyBJdGVyYXRvciwgb3IgYSBwcm9taXNlJylcbiAgfVxuXG4gIGNvbnN0IHVucGFja3IgPSBuZXcgVW5wYWNrcihvcHRpb25zKVxuICBsZXQgaW5jb21wbGV0ZVxuICBjb25zdCBwYXJzZXIgPSAoY2h1bmspID0+IHtcbiAgICBsZXQgeWllbGRzXG4gICAgLy8gaWYgdGhlcmUncyBpbmNvbXBsZXRlIGRhdGEgZnJvbSBwcmV2aW91cyBjaHVuaywgY29uY2F0aW5hdGUgYW5kIHRyeSBhZ2FpblxuICAgIGlmIChpbmNvbXBsZXRlKSB7XG4gICAgICBjaHVuayA9IEJ1ZmZlci5jb25jYXQoW2luY29tcGxldGUsIGNodW5rXSlcbiAgICAgIGluY29tcGxldGUgPSB1bmRlZmluZWRcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgeWllbGRzID0gdW5wYWNrci51bnBhY2tNdWx0aXBsZShjaHVuaylcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGlmIChlcnIuaW5jb21wbGV0ZSkge1xuICAgICAgICBpbmNvbXBsZXRlID0gY2h1bmsuc2xpY2UoZXJyLmxhc3RQb3NpdGlvbilcbiAgICAgICAgeWllbGRzID0gZXJyLnZhbHVlc1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgZXJyXG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB5aWVsZHNcbiAgfVxuXG4gIGlmICh0eXBlb2YgYnVmZmVySXRlcmF0b3JbU3ltYm9sLml0ZXJhdG9yXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybiAoZnVuY3Rpb24gKiBpdGVyICgpIHtcbiAgICAgIGZvciAoY29uc3QgdmFsdWUgb2YgYnVmZmVySXRlcmF0b3IpIHtcbiAgICAgICAgeWllbGQgKiBwYXJzZXIodmFsdWUpXG4gICAgICB9XG4gICAgfSkoKVxuICB9IGVsc2UgaWYgKHR5cGVvZiBidWZmZXJJdGVyYXRvcltTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPT09ICdmdW5jdGlvbicpIHtcbiAgICByZXR1cm4gKGFzeW5jIGZ1bmN0aW9uICogaXRlciAoKSB7XG4gICAgICBmb3IgYXdhaXQgKGNvbnN0IHZhbHVlIG9mIGJ1ZmZlckl0ZXJhdG9yKSB7XG4gICAgICAgIHlpZWxkICogcGFyc2VyKHZhbHVlKVxuICAgICAgfVxuICAgIH0pKClcbiAgfVxufVxuZXhwb3J0IGNvbnN0IGRlY29kZUl0ZXIgPSB1bnBhY2tJdGVyXG5leHBvcnQgY29uc3QgZW5jb2RlSXRlciA9IHBhY2tJdGVyIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/node_modules/@livestore/utils/node_modules/msgpackr/iterators.js\n");

/***/ }),

/***/ "(rsc)/./src/node_modules/@livestore/utils/node_modules/msgpackr/node-index.js":
/*!*******************************************************************************!*\
  !*** ./src/node_modules/@livestore/utils/node_modules/msgpackr/node-index.js ***!
  \*******************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ALWAYS: () => (/* reexport safe */ _pack_js__WEBPACK_IMPORTED_MODULE_0__.ALWAYS),\n/* harmony export */   C1: () => (/* reexport safe */ _unpack_js__WEBPACK_IMPORTED_MODULE_1__.C1),\n/* harmony export */   DECIMAL_FIT: () => (/* reexport safe */ _pack_js__WEBPACK_IMPORTED_MODULE_0__.DECIMAL_FIT),\n/* harmony export */   DECIMAL_ROUND: () => (/* reexport safe */ _pack_js__WEBPACK_IMPORTED_MODULE_0__.DECIMAL_ROUND),\n/* harmony export */   Decoder: () => (/* reexport safe */ _unpack_js__WEBPACK_IMPORTED_MODULE_1__.Decoder),\n/* harmony export */   DecoderStream: () => (/* reexport safe */ _stream_js__WEBPACK_IMPORTED_MODULE_3__.UnpackrStream),\n/* harmony export */   Encoder: () => (/* reexport safe */ _pack_js__WEBPACK_IMPORTED_MODULE_0__.Encoder),\n/* harmony export */   EncoderStream: () => (/* reexport safe */ _stream_js__WEBPACK_IMPORTED_MODULE_3__.PackrStream),\n/* harmony export */   FLOAT32_OPTIONS: () => (/* reexport safe */ _unpack_js__WEBPACK_IMPORTED_MODULE_1__.FLOAT32_OPTIONS),\n/* harmony export */   NEVER: () => (/* reexport safe */ _pack_js__WEBPACK_IMPORTED_MODULE_0__.NEVER),\n/* harmony export */   Packr: () => (/* reexport safe */ _pack_js__WEBPACK_IMPORTED_MODULE_0__.Packr),\n/* harmony export */   PackrStream: () => (/* reexport safe */ _stream_js__WEBPACK_IMPORTED_MODULE_3__.PackrStream),\n/* harmony export */   Unpackr: () => (/* reexport safe */ _unpack_js__WEBPACK_IMPORTED_MODULE_1__.Unpackr),\n/* harmony export */   UnpackrStream: () => (/* reexport safe */ _stream_js__WEBPACK_IMPORTED_MODULE_3__.UnpackrStream),\n/* harmony export */   addExtension: () => (/* reexport safe */ _pack_js__WEBPACK_IMPORTED_MODULE_0__.addExtension),\n/* harmony export */   clearSource: () => (/* reexport safe */ _unpack_js__WEBPACK_IMPORTED_MODULE_1__.clearSource),\n/* harmony export */   decode: () => (/* reexport safe */ _unpack_js__WEBPACK_IMPORTED_MODULE_1__.decode),\n/* harmony export */   decodeIter: () => (/* reexport safe */ _iterators_js__WEBPACK_IMPORTED_MODULE_4__.decodeIter),\n/* harmony export */   encode: () => (/* reexport safe */ _pack_js__WEBPACK_IMPORTED_MODULE_0__.encode),\n/* harmony export */   encodeIter: () => (/* reexport safe */ _iterators_js__WEBPACK_IMPORTED_MODULE_4__.encodeIter),\n/* harmony export */   isNativeAccelerationEnabled: () => (/* reexport safe */ _unpack_js__WEBPACK_IMPORTED_MODULE_1__.isNativeAccelerationEnabled),\n/* harmony export */   mapsAsObjects: () => (/* binding */ mapsAsObjects),\n/* harmony export */   pack: () => (/* reexport safe */ _pack_js__WEBPACK_IMPORTED_MODULE_0__.pack),\n/* harmony export */   roundFloat32: () => (/* reexport safe */ _unpack_js__WEBPACK_IMPORTED_MODULE_1__.roundFloat32),\n/* harmony export */   unpack: () => (/* reexport safe */ _unpack_js__WEBPACK_IMPORTED_MODULE_1__.unpack),\n/* harmony export */   unpackMultiple: () => (/* reexport safe */ _unpack_js__WEBPACK_IMPORTED_MODULE_1__.unpackMultiple),\n/* harmony export */   useRecords: () => (/* binding */ useRecords)\n/* harmony export */ });\n/* harmony import */ var _pack_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./pack.js */ \"(rsc)/./src/node_modules/@livestore/utils/node_modules/msgpackr/pack.js\");\n/* harmony import */ var _unpack_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./unpack.js */ \"(rsc)/./src/node_modules/@livestore/utils/node_modules/msgpackr/unpack.js\");\n/* harmony import */ var _struct_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./struct.js */ \"(rsc)/./src/node_modules/@livestore/utils/node_modules/msgpackr/struct.js\");\n/* harmony import */ var _stream_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./stream.js */ \"(rsc)/./src/node_modules/@livestore/utils/node_modules/msgpackr/stream.js\");\n/* harmony import */ var _iterators_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./iterators.js */ \"(rsc)/./src/node_modules/@livestore/utils/node_modules/msgpackr/iterators.js\");\n/* harmony import */ var module__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! module */ \"module\");\n\n\n;\n\n\nconst useRecords = false\nconst mapsAsObjects = true\n;\n\n\nconst nativeAccelerationDisabled = process.env.MSGPACKR_NATIVE_ACCELERATION_DISABLED !== undefined && process.env.MSGPACKR_NATIVE_ACCELERATION_DISABLED.toLowerCase() === 'true';\n\nif (!nativeAccelerationDisabled) {\n\tlet extractor\n\ttry {\n\t\tif (typeof require == 'function')\n\t\t\textractor = require('msgpackr-extract')\n\t\telse\n\t\t\textractor = (0,module__WEBPACK_IMPORTED_MODULE_5__.createRequire)(\"file:///Users/symbosrisai/Documents/anaconda-assesment-1/src/node_modules/@livestore/utils/node_modules/msgpackr/node-index.js\")('msgpackr-extract')\n\t\tif (extractor)\n\t\t\t(0,_unpack_js__WEBPACK_IMPORTED_MODULE_1__.setExtractor)(extractor.extractStrings)\n\t} catch (error) {\n\t\t// native module is optional\n\t}\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbm9kZV9tb2R1bGVzL0BsaXZlc3RvcmUvdXRpbHMvbm9kZV9tb2R1bGVzL21zZ3BhY2tyL25vZGUtaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQWlIO0FBQzBDO0FBQzNKLENBQW9CO0FBQ2tHO0FBQy9EO0FBQ2hEO0FBQ0E7QUFDUCxDQUEwQztBQUNKOztBQUV0Qzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLHFEQUFhLENBQUMsZ0lBQWU7QUFDNUM7QUFDQSxHQUFHLHdEQUFZO0FBQ2YsR0FBRztBQUNIO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2FuYWNvbmRhLWFzc2VzbWVudC0xLy4vc3JjL25vZGVfbW9kdWxlcy9AbGl2ZXN0b3JlL3V0aWxzL25vZGVfbW9kdWxlcy9tc2dwYWNrci9ub2RlLWluZGV4LmpzPzU5Y2IiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IHsgUGFja3IsIEVuY29kZXIsIGFkZEV4dGVuc2lvbiwgcGFjaywgZW5jb2RlLCBORVZFUiwgQUxXQVlTLCBERUNJTUFMX1JPVU5ELCBERUNJTUFMX0ZJVCB9IGZyb20gJy4vcGFjay5qcydcbmV4cG9ydCB7IFVucGFja3IsIERlY29kZXIsIEMxLCB1bnBhY2ssIHVucGFja011bHRpcGxlLCBkZWNvZGUsIEZMT0FUMzJfT1BUSU9OUywgY2xlYXJTb3VyY2UsIHJvdW5kRmxvYXQzMiwgaXNOYXRpdmVBY2NlbGVyYXRpb25FbmFibGVkIH0gZnJvbSAnLi91bnBhY2suanMnXG5pbXBvcnQgJy4vc3RydWN0LmpzJ1xuZXhwb3J0IHsgUGFja3JTdHJlYW0sIFVucGFja3JTdHJlYW0sIFBhY2tyU3RyZWFtIGFzIEVuY29kZXJTdHJlYW0sIFVucGFja3JTdHJlYW0gYXMgRGVjb2RlclN0cmVhbSB9IGZyb20gJy4vc3RyZWFtLmpzJ1xuZXhwb3J0IHsgZGVjb2RlSXRlciwgZW5jb2RlSXRlciB9IGZyb20gJy4vaXRlcmF0b3JzLmpzJ1xuZXhwb3J0IGNvbnN0IHVzZVJlY29yZHMgPSBmYWxzZVxuZXhwb3J0IGNvbnN0IG1hcHNBc09iamVjdHMgPSB0cnVlXG5pbXBvcnQgeyBzZXRFeHRyYWN0b3IgfSBmcm9tICcuL3VucGFjay5qcydcbmltcG9ydCB7IGNyZWF0ZVJlcXVpcmUgfSBmcm9tICdtb2R1bGUnXG5cbmNvbnN0IG5hdGl2ZUFjY2VsZXJhdGlvbkRpc2FibGVkID0gcHJvY2Vzcy5lbnYuTVNHUEFDS1JfTkFUSVZFX0FDQ0VMRVJBVElPTl9ESVNBQkxFRCAhPT0gdW5kZWZpbmVkICYmIHByb2Nlc3MuZW52Lk1TR1BBQ0tSX05BVElWRV9BQ0NFTEVSQVRJT05fRElTQUJMRUQudG9Mb3dlckNhc2UoKSA9PT0gJ3RydWUnO1xuXG5pZiAoIW5hdGl2ZUFjY2VsZXJhdGlvbkRpc2FibGVkKSB7XG5cdGxldCBleHRyYWN0b3Jcblx0dHJ5IHtcblx0XHRpZiAodHlwZW9mIHJlcXVpcmUgPT0gJ2Z1bmN0aW9uJylcblx0XHRcdGV4dHJhY3RvciA9IHJlcXVpcmUoJ21zZ3BhY2tyLWV4dHJhY3QnKVxuXHRcdGVsc2Vcblx0XHRcdGV4dHJhY3RvciA9IGNyZWF0ZVJlcXVpcmUoaW1wb3J0Lm1ldGEudXJsKSgnbXNncGFja3ItZXh0cmFjdCcpXG5cdFx0aWYgKGV4dHJhY3Rvcilcblx0XHRcdHNldEV4dHJhY3RvcihleHRyYWN0b3IuZXh0cmFjdFN0cmluZ3MpXG5cdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0Ly8gbmF0aXZlIG1vZHVsZSBpcyBvcHRpb25hbFxuXHR9XG59Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/node_modules/@livestore/utils/node_modules/msgpackr/node-index.js\n");

/***/ }),

/***/ "(rsc)/./src/node_modules/@livestore/utils/node_modules/msgpackr/pack.js":
/*!*************************************************************************!*\
  !*** ./src/node_modules/@livestore/utils/node_modules/msgpackr/pack.js ***!
  \*************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ALWAYS: () => (/* binding */ ALWAYS),\n/* harmony export */   DECIMAL_FIT: () => (/* binding */ DECIMAL_FIT),\n/* harmony export */   DECIMAL_ROUND: () => (/* binding */ DECIMAL_ROUND),\n/* harmony export */   Encoder: () => (/* binding */ Encoder),\n/* harmony export */   FLOAT32_OPTIONS: () => (/* reexport safe */ _unpack_js__WEBPACK_IMPORTED_MODULE_0__.FLOAT32_OPTIONS),\n/* harmony export */   NEVER: () => (/* binding */ NEVER),\n/* harmony export */   Packr: () => (/* binding */ Packr),\n/* harmony export */   RECORD_SYMBOL: () => (/* binding */ RECORD_SYMBOL),\n/* harmony export */   RESERVE_START_SPACE: () => (/* binding */ RESERVE_START_SPACE),\n/* harmony export */   RESET_BUFFER_MODE: () => (/* binding */ RESET_BUFFER_MODE),\n/* harmony export */   REUSE_BUFFER_MODE: () => (/* binding */ REUSE_BUFFER_MODE),\n/* harmony export */   addExtension: () => (/* binding */ addExtension),\n/* harmony export */   encode: () => (/* binding */ encode),\n/* harmony export */   pack: () => (/* binding */ pack),\n/* harmony export */   setWriteStructSlots: () => (/* binding */ setWriteStructSlots)\n/* harmony export */ });\n/* harmony import */ var _unpack_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./unpack.js */ \"(rsc)/./src/node_modules/@livestore/utils/node_modules/msgpackr/unpack.js\");\n\nlet textEncoder\ntry {\n\ttextEncoder = new TextEncoder()\n} catch (error) {}\nlet extensions, extensionClasses\nconst hasNodeBuffer = typeof Buffer !== 'undefined'\nconst ByteArrayAllocate = hasNodeBuffer ?\n\tfunction(length) { return Buffer.allocUnsafeSlow(length) } : Uint8Array\nconst ByteArray = hasNodeBuffer ? Buffer : Uint8Array\nconst MAX_BUFFER_SIZE = hasNodeBuffer ? 0x100000000 : 0x7fd00000\nlet target, keysTarget\nlet targetView\nlet position = 0\nlet safeEnd\nlet bundledStrings = null\nlet writeStructSlots\nconst MAX_BUNDLE_SIZE = 0x5500 // maximum characters such that the encoded bytes fits in 16 bits.\nconst hasNonLatin = /[\\u0080-\\uFFFF]/\nconst RECORD_SYMBOL = Symbol('record-id')\nclass Packr extends _unpack_js__WEBPACK_IMPORTED_MODULE_0__.Unpackr {\n\tconstructor(options) {\n\t\tsuper(options)\n\t\tthis.offset = 0\n\t\tlet typeBuffer\n\t\tlet start\n\t\tlet hasSharedUpdate\n\t\tlet structures\n\t\tlet referenceMap\n\t\tlet encodeUtf8 = ByteArray.prototype.utf8Write ? function(string, position) {\n\t\t\treturn target.utf8Write(string, position, target.byteLength - position)\n\t\t} : (textEncoder && textEncoder.encodeInto) ?\n\t\t\tfunction(string, position) {\n\t\t\t\treturn textEncoder.encodeInto(string, target.subarray(position)).written\n\t\t\t} : false\n\n\t\tlet packr = this\n\t\tif (!options)\n\t\t\toptions = {}\n\t\tlet isSequential = options && options.sequential\n\t\tlet hasSharedStructures = options.structures || options.saveStructures\n\t\tlet maxSharedStructures = options.maxSharedStructures\n\t\tif (maxSharedStructures == null)\n\t\t\tmaxSharedStructures = hasSharedStructures ? 32 : 0\n\t\tif (maxSharedStructures > 8160)\n\t\t\tthrow new Error('Maximum maxSharedStructure is 8160')\n\t\tif (options.structuredClone && options.moreTypes == undefined) {\n\t\t\tthis.moreTypes = true\n\t\t}\n\t\tlet maxOwnStructures = options.maxOwnStructures\n\t\tif (maxOwnStructures == null)\n\t\t\tmaxOwnStructures = hasSharedStructures ? 32 : 64\n\t\tif (!this.structures && options.useRecords != false)\n\t\t\tthis.structures = []\n\t\t// two byte record ids for shared structures\n\t\tlet useTwoByteRecords = maxSharedStructures > 32 || (maxOwnStructures + maxSharedStructures > 64)\n\t\tlet sharedLimitId = maxSharedStructures + 0x40\n\t\tlet maxStructureId = maxSharedStructures + maxOwnStructures + 0x40\n\t\tif (maxStructureId > 8256) {\n\t\t\tthrow new Error('Maximum maxSharedStructure + maxOwnStructure is 8192')\n\t\t}\n\t\tlet recordIdsToRemove = []\n\t\tlet transitionsCount = 0\n\t\tlet serializationsSinceTransitionRebuild = 0\n\n\t\tthis.pack = this.encode = function(value, encodeOptions) {\n\t\t\tif (!target) {\n\t\t\t\ttarget = new ByteArrayAllocate(8192)\n\t\t\t\ttargetView = target.dataView || (target.dataView = new DataView(target.buffer, 0, 8192))\n\t\t\t\tposition = 0\n\t\t\t}\n\t\t\tsafeEnd = target.length - 10\n\t\t\tif (safeEnd - position < 0x800) {\n\t\t\t\t// don't start too close to the end,\n\t\t\t\ttarget = new ByteArrayAllocate(target.length)\n\t\t\t\ttargetView = target.dataView || (target.dataView = new DataView(target.buffer, 0, target.length))\n\t\t\t\tsafeEnd = target.length - 10\n\t\t\t\tposition = 0\n\t\t\t} else\n\t\t\t\tposition = (position + 7) & 0x7ffffff8 // Word align to make any future copying of this buffer faster\n\t\t\tstart = position\n\t\t\tif (encodeOptions & RESERVE_START_SPACE) position += (encodeOptions & 0xff)\n\t\t\treferenceMap = packr.structuredClone ? new Map() : null\n\t\t\tif (packr.bundleStrings && typeof value !== 'string') {\n\t\t\t\tbundledStrings = []\n\t\t\t\tbundledStrings.size = Infinity // force a new bundle start on first string\n\t\t\t} else\n\t\t\t\tbundledStrings = null\n\t\t\tstructures = packr.structures\n\t\t\tif (structures) {\n\t\t\t\tif (structures.uninitialized)\n\t\t\t\t\tstructures = packr._mergeStructures(packr.getStructures())\n\t\t\t\tlet sharedLength = structures.sharedLength || 0\n\t\t\t\tif (sharedLength > maxSharedStructures) {\n\t\t\t\t\t//if (maxSharedStructures <= 32 && structures.sharedLength > 32) // TODO: could support this, but would need to update the limit ids\n\t\t\t\t\tthrow new Error('Shared structures is larger than maximum shared structures, try increasing maxSharedStructures to ' + structures.sharedLength)\n\t\t\t\t}\n\t\t\t\tif (!structures.transitions) {\n\t\t\t\t\t// rebuild our structure transitions\n\t\t\t\t\tstructures.transitions = Object.create(null)\n\t\t\t\t\tfor (let i = 0; i < sharedLength; i++) {\n\t\t\t\t\t\tlet keys = structures[i]\n\t\t\t\t\t\tif (!keys)\n\t\t\t\t\t\t\tcontinue\n\t\t\t\t\t\tlet nextTransition, transition = structures.transitions\n\t\t\t\t\t\tfor (let j = 0, l = keys.length; j < l; j++) {\n\t\t\t\t\t\t\tlet key = keys[j]\n\t\t\t\t\t\t\tnextTransition = transition[key]\n\t\t\t\t\t\t\tif (!nextTransition) {\n\t\t\t\t\t\t\t\tnextTransition = transition[key] = Object.create(null)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ttransition = nextTransition\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttransition[RECORD_SYMBOL] = i + 0x40\n\t\t\t\t\t}\n\t\t\t\t\tthis.lastNamedStructuresLength = sharedLength\n\t\t\t\t}\n\t\t\t\tif (!isSequential) {\n\t\t\t\t\tstructures.nextId = sharedLength + 0x40\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (hasSharedUpdate)\n\t\t\t\thasSharedUpdate = false\n\t\t\tlet encodingError;\n\t\t\ttry {\n\t\t\t\tif (packr.randomAccessStructure && value && value.constructor && value.constructor === Object)\n\t\t\t\t\twriteStruct(value);\n\t\t\t\telse\n\t\t\t\t\tpack(value)\n\t\t\t\tlet lastBundle = bundledStrings;\n\t\t\t\tif (bundledStrings)\n\t\t\t\t\twriteBundles(start, pack, 0)\n\t\t\t\tif (referenceMap && referenceMap.idsToInsert) {\n\t\t\t\t\tlet idsToInsert = referenceMap.idsToInsert.sort((a, b) => a.offset > b.offset ? 1 : -1);\n\t\t\t\t\tlet i = idsToInsert.length;\n\t\t\t\t\tlet incrementPosition = -1;\n\t\t\t\t\twhile (lastBundle && i > 0) {\n\t\t\t\t\t\tlet insertionPoint = idsToInsert[--i].offset + start;\n\t\t\t\t\t\tif (insertionPoint < (lastBundle.stringsPosition + start) && incrementPosition === -1)\n\t\t\t\t\t\t\tincrementPosition = 0;\n\t\t\t\t\t\tif (insertionPoint > (lastBundle.position + start)) {\n\t\t\t\t\t\t\tif (incrementPosition >= 0)\n\t\t\t\t\t\t\t\tincrementPosition += 6;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (incrementPosition >= 0) {\n\t\t\t\t\t\t\t\t// update the bundle reference now\n\t\t\t\t\t\t\t\ttargetView.setUint32(lastBundle.position + start,\n\t\t\t\t\t\t\t\t\ttargetView.getUint32(lastBundle.position + start) + incrementPosition)\n\t\t\t\t\t\t\t\tincrementPosition = -1; // reset\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tlastBundle = lastBundle.previous;\n\t\t\t\t\t\t\ti++;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (incrementPosition >= 0 && lastBundle) {\n\t\t\t\t\t\t// update the bundle reference now\n\t\t\t\t\t\ttargetView.setUint32(lastBundle.position + start,\n\t\t\t\t\t\t\ttargetView.getUint32(lastBundle.position + start) + incrementPosition)\n\t\t\t\t\t}\n\t\t\t\t\tposition += idsToInsert.length * 6;\n\t\t\t\t\tif (position > safeEnd)\n\t\t\t\t\t\tmakeRoom(position)\n\t\t\t\t\tpackr.offset = position\n\t\t\t\t\tlet serialized = insertIds(target.subarray(start, position), idsToInsert)\n\t\t\t\t\treferenceMap = null\n\t\t\t\t\treturn serialized\n\t\t\t\t}\n\t\t\t\tpackr.offset = position // update the offset so next serialization doesn't write over our buffer, but can continue writing to same buffer sequentially\n\t\t\t\tif (encodeOptions & REUSE_BUFFER_MODE) {\n\t\t\t\t\ttarget.start = start\n\t\t\t\t\ttarget.end = position\n\t\t\t\t\treturn target\n\t\t\t\t}\n\t\t\t\treturn target.subarray(start, position) // position can change if we call pack again in saveStructures, so we get the buffer now\n\t\t\t} catch(error) {\n\t\t\t\tencodingError = error;\n\t\t\t\tthrow error;\n\t\t\t} finally {\n\t\t\t\tif (structures) {\n\t\t\t\t\tresetStructures();\n\t\t\t\t\tif (hasSharedUpdate && packr.saveStructures) {\n\t\t\t\t\t\tlet sharedLength = structures.sharedLength || 0\n\t\t\t\t\t\t// we can't rely on start/end with REUSE_BUFFER_MODE since they will (probably) change when we save\n\t\t\t\t\t\tlet returnBuffer = target.subarray(start, position)\n\t\t\t\t\t\tlet newSharedData = prepareStructures(structures, packr);\n\t\t\t\t\t\tif (!encodingError) { // TODO: If there is an encoding error, should make the structures as uninitialized so they get rebuilt next time\n\t\t\t\t\t\t\tif (packr.saveStructures(newSharedData, newSharedData.isCompatible) === false) {\n\t\t\t\t\t\t\t\t// get updated structures and try again if the update failed\n\t\t\t\t\t\t\t\treturn packr.pack(value, encodeOptions)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tpackr.lastNamedStructuresLength = sharedLength\n\t\t\t\t\t\t\t// don't keep large buffers around\n\t\t\t\t\t\t\tif (target.length > 0x40000000) target = null\n\t\t\t\t\t\t\treturn returnBuffer\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// don't keep large buffers around, they take too much memory and cause problems (limit at 1GB)\n\t\t\t\tif (target.length > 0x40000000) target = null\n\t\t\t\tif (encodeOptions & RESET_BUFFER_MODE)\n\t\t\t\t\tposition = start\n\t\t\t}\n\t\t}\n\t\tconst resetStructures = () => {\n\t\t\tif (serializationsSinceTransitionRebuild < 10)\n\t\t\t\tserializationsSinceTransitionRebuild++\n\t\t\tlet sharedLength = structures.sharedLength || 0\n\t\t\tif (structures.length > sharedLength && !isSequential)\n\t\t\t\tstructures.length = sharedLength\n\t\t\tif (transitionsCount > 10000) {\n\t\t\t\t// force a rebuild occasionally after a lot of transitions so it can get cleaned up\n\t\t\t\tstructures.transitions = null\n\t\t\t\tserializationsSinceTransitionRebuild = 0\n\t\t\t\ttransitionsCount = 0\n\t\t\t\tif (recordIdsToRemove.length > 0)\n\t\t\t\t\trecordIdsToRemove = []\n\t\t\t} else if (recordIdsToRemove.length > 0 && !isSequential) {\n\t\t\t\tfor (let i = 0, l = recordIdsToRemove.length; i < l; i++) {\n\t\t\t\t\trecordIdsToRemove[i][RECORD_SYMBOL] = 0\n\t\t\t\t}\n\t\t\t\trecordIdsToRemove = []\n\t\t\t}\n\t\t}\n\t\tconst packArray = (value) => {\n\t\t\tvar length = value.length\n\t\t\tif (length < 0x10) {\n\t\t\t\ttarget[position++] = 0x90 | length\n\t\t\t} else if (length < 0x10000) {\n\t\t\t\ttarget[position++] = 0xdc\n\t\t\t\ttarget[position++] = length >> 8\n\t\t\t\ttarget[position++] = length & 0xff\n\t\t\t} else {\n\t\t\t\ttarget[position++] = 0xdd\n\t\t\t\ttargetView.setUint32(position, length)\n\t\t\t\tposition += 4\n\t\t\t}\n\t\t\tfor (let i = 0; i < length; i++) {\n\t\t\t\tpack(value[i])\n\t\t\t}\n\t\t}\n\t\tconst pack = (value) => {\n\t\t\tif (position > safeEnd)\n\t\t\t\ttarget = makeRoom(position)\n\n\t\t\tvar type = typeof value\n\t\t\tvar length\n\t\t\tif (type === 'string') {\n\t\t\t\tlet strLength = value.length\n\t\t\t\tif (bundledStrings && strLength >= 4 && strLength < 0x1000) {\n\t\t\t\t\tif ((bundledStrings.size += strLength) > MAX_BUNDLE_SIZE) {\n\t\t\t\t\t\tlet extStart\n\t\t\t\t\t\tlet maxBytes = (bundledStrings[0] ? bundledStrings[0].length * 3 + bundledStrings[1].length : 0) + 10\n\t\t\t\t\t\tif (position + maxBytes > safeEnd)\n\t\t\t\t\t\t\ttarget = makeRoom(position + maxBytes)\n\t\t\t\t\t\tlet lastBundle\n\t\t\t\t\t\tif (bundledStrings.position) { // here we use the 0x62 extension to write the last bundle and reserve space for the reference pointer to the next/current bundle\n\t\t\t\t\t\t\tlastBundle = bundledStrings\n\t\t\t\t\t\t\ttarget[position] = 0xc8 // ext 16\n\t\t\t\t\t\t\tposition += 3 // reserve for the writing bundle size\n\t\t\t\t\t\t\ttarget[position++] = 0x62 // 'b'\n\t\t\t\t\t\t\textStart = position - start\n\t\t\t\t\t\t\tposition += 4 // reserve for writing bundle reference\n\t\t\t\t\t\t\twriteBundles(start, pack, 0) // write the last bundles\n\t\t\t\t\t\t\ttargetView.setUint16(extStart + start - 3, position - start - extStart)\n\t\t\t\t\t\t} else { // here we use the 0x62 extension just to reserve the space for the reference pointer to the bundle (will be updated once the bundle is written)\n\t\t\t\t\t\t\ttarget[position++] = 0xd6 // fixext 4\n\t\t\t\t\t\t\ttarget[position++] = 0x62 // 'b'\n\t\t\t\t\t\t\textStart = position - start\n\t\t\t\t\t\t\tposition += 4 // reserve for writing bundle reference\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbundledStrings = ['', ''] // create new ones\n\t\t\t\t\t\tbundledStrings.previous = lastBundle;\n\t\t\t\t\t\tbundledStrings.size = 0\n\t\t\t\t\t\tbundledStrings.position = extStart\n\t\t\t\t\t}\n\t\t\t\t\tlet twoByte = hasNonLatin.test(value)\n\t\t\t\t\tbundledStrings[twoByte ? 0 : 1] += value\n\t\t\t\t\ttarget[position++] = 0xc1\n\t\t\t\t\tpack(twoByte ? -strLength : strLength);\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tlet headerSize\n\t\t\t\t// first we estimate the header size, so we can write to the correct location\n\t\t\t\tif (strLength < 0x20) {\n\t\t\t\t\theaderSize = 1\n\t\t\t\t} else if (strLength < 0x100) {\n\t\t\t\t\theaderSize = 2\n\t\t\t\t} else if (strLength < 0x10000) {\n\t\t\t\t\theaderSize = 3\n\t\t\t\t} else {\n\t\t\t\t\theaderSize = 5\n\t\t\t\t}\n\t\t\t\tlet maxBytes = strLength * 3\n\t\t\t\tif (position + maxBytes > safeEnd)\n\t\t\t\t\ttarget = makeRoom(position + maxBytes)\n\n\t\t\t\tif (strLength < 0x40 || !encodeUtf8) {\n\t\t\t\t\tlet i, c1, c2, strPosition = position + headerSize\n\t\t\t\t\tfor (i = 0; i < strLength; i++) {\n\t\t\t\t\t\tc1 = value.charCodeAt(i)\n\t\t\t\t\t\tif (c1 < 0x80) {\n\t\t\t\t\t\t\ttarget[strPosition++] = c1\n\t\t\t\t\t\t} else if (c1 < 0x800) {\n\t\t\t\t\t\t\ttarget[strPosition++] = c1 >> 6 | 0xc0\n\t\t\t\t\t\t\ttarget[strPosition++] = c1 & 0x3f | 0x80\n\t\t\t\t\t\t} else if (\n\t\t\t\t\t\t\t(c1 & 0xfc00) === 0xd800 &&\n\t\t\t\t\t\t\t((c2 = value.charCodeAt(i + 1)) & 0xfc00) === 0xdc00\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tc1 = 0x10000 + ((c1 & 0x03ff) << 10) + (c2 & 0x03ff)\n\t\t\t\t\t\t\ti++\n\t\t\t\t\t\t\ttarget[strPosition++] = c1 >> 18 | 0xf0\n\t\t\t\t\t\t\ttarget[strPosition++] = c1 >> 12 & 0x3f | 0x80\n\t\t\t\t\t\t\ttarget[strPosition++] = c1 >> 6 & 0x3f | 0x80\n\t\t\t\t\t\t\ttarget[strPosition++] = c1 & 0x3f | 0x80\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ttarget[strPosition++] = c1 >> 12 | 0xe0\n\t\t\t\t\t\t\ttarget[strPosition++] = c1 >> 6 & 0x3f | 0x80\n\t\t\t\t\t\t\ttarget[strPosition++] = c1 & 0x3f | 0x80\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tlength = strPosition - position - headerSize\n\t\t\t\t} else {\n\t\t\t\t\tlength = encodeUtf8(value, position + headerSize)\n\t\t\t\t}\n\n\t\t\t\tif (length < 0x20) {\n\t\t\t\t\ttarget[position++] = 0xa0 | length\n\t\t\t\t} else if (length < 0x100) {\n\t\t\t\t\tif (headerSize < 2) {\n\t\t\t\t\t\ttarget.copyWithin(position + 2, position + 1, position + 1 + length)\n\t\t\t\t\t}\n\t\t\t\t\ttarget[position++] = 0xd9\n\t\t\t\t\ttarget[position++] = length\n\t\t\t\t} else if (length < 0x10000) {\n\t\t\t\t\tif (headerSize < 3) {\n\t\t\t\t\t\ttarget.copyWithin(position + 3, position + 2, position + 2 + length)\n\t\t\t\t\t}\n\t\t\t\t\ttarget[position++] = 0xda\n\t\t\t\t\ttarget[position++] = length >> 8\n\t\t\t\t\ttarget[position++] = length & 0xff\n\t\t\t\t} else {\n\t\t\t\t\tif (headerSize < 5) {\n\t\t\t\t\t\ttarget.copyWithin(position + 5, position + 3, position + 3 + length)\n\t\t\t\t\t}\n\t\t\t\t\ttarget[position++] = 0xdb\n\t\t\t\t\ttargetView.setUint32(position, length)\n\t\t\t\t\tposition += 4\n\t\t\t\t}\n\t\t\t\tposition += length\n\t\t\t} else if (type === 'number') {\n\t\t\t\tif (value >>> 0 === value) {// positive integer, 32-bit or less\n\t\t\t\t\t// positive uint\n\t\t\t\t\tif (value < 0x20 || (value < 0x80 && this.useRecords === false) || (value < 0x40 && !this.randomAccessStructure)) {\n\t\t\t\t\t\ttarget[position++] = value\n\t\t\t\t\t} else if (value < 0x100) {\n\t\t\t\t\t\ttarget[position++] = 0xcc\n\t\t\t\t\t\ttarget[position++] = value\n\t\t\t\t\t} else if (value < 0x10000) {\n\t\t\t\t\t\ttarget[position++] = 0xcd\n\t\t\t\t\t\ttarget[position++] = value >> 8\n\t\t\t\t\t\ttarget[position++] = value & 0xff\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttarget[position++] = 0xce\n\t\t\t\t\t\ttargetView.setUint32(position, value)\n\t\t\t\t\t\tposition += 4\n\t\t\t\t\t}\n\t\t\t\t} else if (value >> 0 === value) { // negative integer\n\t\t\t\t\tif (value >= -0x20) {\n\t\t\t\t\t\ttarget[position++] = 0x100 + value\n\t\t\t\t\t} else if (value >= -0x80) {\n\t\t\t\t\t\ttarget[position++] = 0xd0\n\t\t\t\t\t\ttarget[position++] = value + 0x100\n\t\t\t\t\t} else if (value >= -0x8000) {\n\t\t\t\t\t\ttarget[position++] = 0xd1\n\t\t\t\t\t\ttargetView.setInt16(position, value)\n\t\t\t\t\t\tposition += 2\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttarget[position++] = 0xd2\n\t\t\t\t\t\ttargetView.setInt32(position, value)\n\t\t\t\t\t\tposition += 4\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tlet useFloat32\n\t\t\t\t\tif ((useFloat32 = this.useFloat32) > 0 && value < 0x100000000 && value >= -0x80000000) {\n\t\t\t\t\t\ttarget[position++] = 0xca\n\t\t\t\t\t\ttargetView.setFloat32(position, value)\n\t\t\t\t\t\tlet xShifted\n\t\t\t\t\t\tif (useFloat32 < 4 ||\n\t\t\t\t\t\t\t\t// this checks for rounding of numbers that were encoded in 32-bit float to nearest significant decimal digit that could be preserved\n\t\t\t\t\t\t\t\t((xShifted = value * _unpack_js__WEBPACK_IMPORTED_MODULE_0__.mult10[((target[position] & 0x7f) << 1) | (target[position + 1] >> 7)]) >> 0) === xShifted) {\n\t\t\t\t\t\t\tposition += 4\n\t\t\t\t\t\t\treturn\n\t\t\t\t\t\t} else\n\t\t\t\t\t\t\tposition-- // move back into position for writing a double\n\t\t\t\t\t}\n\t\t\t\t\ttarget[position++] = 0xcb\n\t\t\t\t\ttargetView.setFloat64(position, value)\n\t\t\t\t\tposition += 8\n\t\t\t\t}\n\t\t\t} else if (type === 'object' || type === 'function') {\n\t\t\t\tif (!value)\n\t\t\t\t\ttarget[position++] = 0xc0\n\t\t\t\telse {\n\t\t\t\t\tif (referenceMap) {\n\t\t\t\t\t\tlet referee = referenceMap.get(value)\n\t\t\t\t\t\tif (referee) {\n\t\t\t\t\t\t\tif (!referee.id) {\n\t\t\t\t\t\t\t\tlet idsToInsert = referenceMap.idsToInsert || (referenceMap.idsToInsert = [])\n\t\t\t\t\t\t\t\treferee.id = idsToInsert.push(referee)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ttarget[position++] = 0xd6 // fixext 4\n\t\t\t\t\t\t\ttarget[position++] = 0x70 // \"p\" for pointer\n\t\t\t\t\t\t\ttargetView.setUint32(position, referee.id)\n\t\t\t\t\t\t\tposition += 4\n\t\t\t\t\t\t\treturn\n\t\t\t\t\t\t} else\n\t\t\t\t\t\t\treferenceMap.set(value, { offset: position - start })\n\t\t\t\t\t}\n\t\t\t\t\tlet constructor = value.constructor\n\t\t\t\t\tif (constructor === Object) {\n\t\t\t\t\t\twriteObject(value)\n\t\t\t\t\t} else if (constructor === Array) {\n\t\t\t\t\t\tpackArray(value)\n\t\t\t\t\t} else if (constructor === Map) {\n\t\t\t\t\t\tif (this.mapAsEmptyObject) target[position++] = 0x80\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\tlength = value.size\n\t\t\t\t\t\t\tif (length < 0x10) {\n\t\t\t\t\t\t\t\ttarget[position++] = 0x80 | length\n\t\t\t\t\t\t\t} else if (length < 0x10000) {\n\t\t\t\t\t\t\t\ttarget[position++] = 0xde\n\t\t\t\t\t\t\t\ttarget[position++] = length >> 8\n\t\t\t\t\t\t\t\ttarget[position++] = length & 0xff\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\ttarget[position++] = 0xdf\n\t\t\t\t\t\t\t\ttargetView.setUint32(position, length)\n\t\t\t\t\t\t\t\tposition += 4\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tfor (let [key, entryValue] of value) {\n\t\t\t\t\t\t\t\tpack(key)\n\t\t\t\t\t\t\t\tpack(entryValue)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfor (let i = 0, l = extensions.length; i < l; i++) {\n\t\t\t\t\t\t\tlet extensionClass = extensionClasses[i]\n\t\t\t\t\t\t\tif (value instanceof extensionClass) {\n\t\t\t\t\t\t\t\tlet extension = extensions[i]\n\t\t\t\t\t\t\t\tif (extension.write) {\n\t\t\t\t\t\t\t\t\tif (extension.type) {\n\t\t\t\t\t\t\t\t\t\ttarget[position++] = 0xd4 // one byte \"tag\" extension\n\t\t\t\t\t\t\t\t\t\ttarget[position++] = extension.type\n\t\t\t\t\t\t\t\t\t\ttarget[position++] = 0\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tlet writeResult = extension.write.call(this, value)\n\t\t\t\t\t\t\t\t\tif (writeResult === value) { // avoid infinite recursion\n\t\t\t\t\t\t\t\t\t\tif (Array.isArray(value)) {\n\t\t\t\t\t\t\t\t\t\t\tpackArray(value)\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\twriteObject(value)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tpack(writeResult)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\treturn\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tlet currentTarget = target\n\t\t\t\t\t\t\t\tlet currentTargetView = targetView\n\t\t\t\t\t\t\t\tlet currentPosition = position\n\t\t\t\t\t\t\t\ttarget = null\n\t\t\t\t\t\t\t\tlet result\n\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\tresult = extension.pack.call(this, value, (size) => {\n\t\t\t\t\t\t\t\t\t\t// restore target and use it\n\t\t\t\t\t\t\t\t\t\ttarget = currentTarget\n\t\t\t\t\t\t\t\t\t\tcurrentTarget = null\n\t\t\t\t\t\t\t\t\t\tposition += size\n\t\t\t\t\t\t\t\t\t\tif (position > safeEnd)\n\t\t\t\t\t\t\t\t\t\t\tmakeRoom(position)\n\t\t\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\t\t\ttarget, targetView, position: position - size\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}, pack)\n\t\t\t\t\t\t\t\t} finally {\n\t\t\t\t\t\t\t\t\t// restore current target information (unless already restored)\n\t\t\t\t\t\t\t\t\tif (currentTarget) {\n\t\t\t\t\t\t\t\t\t\ttarget = currentTarget\n\t\t\t\t\t\t\t\t\t\ttargetView = currentTargetView\n\t\t\t\t\t\t\t\t\t\tposition = currentPosition\n\t\t\t\t\t\t\t\t\t\tsafeEnd = target.length - 10\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (result) {\n\t\t\t\t\t\t\t\t\tif (result.length + position > safeEnd)\n\t\t\t\t\t\t\t\t\t\tmakeRoom(result.length + position)\n\t\t\t\t\t\t\t\t\tposition = writeExtensionData(result, target, position, extension.type)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// check isArray after extensions, because extensions can extend Array\n\t\t\t\t\t\tif (Array.isArray(value)) {\n\t\t\t\t\t\t\tpackArray(value)\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// use this as an alternate mechanism for expressing how to serialize\n\t\t\t\t\t\t\tif (value.toJSON) {\n\t\t\t\t\t\t\t\tconst json = value.toJSON()\n\t\t\t\t\t\t\t\t// if for some reason value.toJSON returns itself it'll loop forever\n\t\t\t\t\t\t\t\tif (json !== value)\n\t\t\t\t\t\t\t\t\treturn pack(json)\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// if there is a writeFunction, use it, otherwise just encode as undefined\n\t\t\t\t\t\t\tif (type === 'function')\n\t\t\t\t\t\t\t\treturn pack(this.writeFunction && this.writeFunction(value));\n\n\t\t\t\t\t\t\t// no extension found, write as plain object\n\t\t\t\t\t\t\twriteObject(value)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (type === 'boolean') {\n\t\t\t\ttarget[position++] = value ? 0xc3 : 0xc2\n\t\t\t} else if (type === 'bigint') {\n\t\t\t\tif (value < (BigInt(1)<<BigInt(63)) && value >= -(BigInt(1)<<BigInt(63))) {\n\t\t\t\t\t// use a signed int as long as it fits\n\t\t\t\t\ttarget[position++] = 0xd3\n\t\t\t\t\ttargetView.setBigInt64(position, value)\n\t\t\t\t} else if (value < (BigInt(1)<<BigInt(64)) && value > 0) {\n\t\t\t\t\t// if we can fit an unsigned int, use that\n\t\t\t\t\ttarget[position++] = 0xcf\n\t\t\t\t\ttargetView.setBigUint64(position, value)\n\t\t\t\t} else {\n\t\t\t\t\t// overflow\n\t\t\t\t\tif (this.largeBigIntToFloat) {\n\t\t\t\t\t\ttarget[position++] = 0xcb\n\t\t\t\t\t\ttargetView.setFloat64(position, Number(value))\n\t\t\t\t\t} else if (this.largeBigIntToString) {\n\t\t\t\t\t\treturn pack(value.toString());\n\t\t\t\t\t} else if (this.useBigIntExtension && value < BigInt(2)**BigInt(1023) && value > -(BigInt(2)**BigInt(1023))) {\n\t\t\t\t\t\ttarget[position++] = 0xc7\n\t\t\t\t\t\tposition++;\n\t\t\t\t\t\ttarget[position++] = 0x42 // \"B\" for BigInt\n\t\t\t\t\t\tlet bytes = [];\n\t\t\t\t\t\tlet alignedSign;\n\t\t\t\t\t\tdo {\n\t\t\t\t\t\t\tlet byte = value & BigInt(0xff);\n\t\t\t\t\t\t\talignedSign = (byte & BigInt(0x80)) === (value < BigInt(0) ? BigInt(0x80) : BigInt(0));\n\t\t\t\t\t\t\tbytes.push(byte);\n\t\t\t\t\t\t\tvalue >>= BigInt(8);\n\t\t\t\t\t\t} while (!((value === BigInt(0) || value === BigInt(-1)) && alignedSign));\n\t\t\t\t\t\ttarget[position-2] = bytes.length;\n\t\t\t\t\t\tfor (let i = bytes.length; i > 0;) {\n\t\t\t\t\t\t\ttarget[position++] = Number(bytes[--i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthrow new RangeError(value + ' was too large to fit in MessagePack 64-bit integer format, use' +\n\t\t\t\t\t\t\t' useBigIntExtension, or set largeBigIntToFloat to convert to float-64, or set' +\n\t\t\t\t\t\t\t' largeBigIntToString to convert to string')\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tposition += 8\n\t\t\t} else if (type === 'undefined') {\n\t\t\t\tif (this.encodeUndefinedAsNil)\n\t\t\t\t\ttarget[position++] = 0xc0\n\t\t\t\telse {\n\t\t\t\t\ttarget[position++] = 0xd4 // a number of implementations use fixext1 with type 0, data 0 to denote undefined, so we follow suite\n\t\t\t\t\ttarget[position++] = 0\n\t\t\t\t\ttarget[position++] = 0\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthrow new Error('Unknown type: ' + type)\n\t\t\t}\n\t\t}\n\n\t\tconst writePlainObject = (this.variableMapSize || this.coercibleKeyAsNumber || this.skipValues) ? (object) => {\n\t\t\t// this method is slightly slower, but generates \"preferred serialization\" (optimally small for smaller objects)\n\t\t\tlet keys;\n\t\t\tif (this.skipValues) {\n\t\t\t\tkeys = [];\n\t\t\t\tfor (let key in object) {\n\t\t\t\t\tif ((typeof object.hasOwnProperty !== 'function' || object.hasOwnProperty(key)) &&\n\t\t\t\t\t\t!this.skipValues.includes(object[key]))\n\t\t\t\t\t\tkeys.push(key);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tkeys = Object.keys(object)\n\t\t\t}\n\t\t\tlet length = keys.length\n\t\t\tif (length < 0x10) {\n\t\t\t\ttarget[position++] = 0x80 | length\n\t\t\t} else if (length < 0x10000) {\n\t\t\t\ttarget[position++] = 0xde\n\t\t\t\ttarget[position++] = length >> 8\n\t\t\t\ttarget[position++] = length & 0xff\n\t\t\t} else {\n\t\t\t\ttarget[position++] = 0xdf\n\t\t\t\ttargetView.setUint32(position, length)\n\t\t\t\tposition += 4\n\t\t\t}\n\t\t\tlet key\n\t\t\tif (this.coercibleKeyAsNumber) {\n\t\t\t\tfor (let i = 0; i < length; i++) {\n\t\t\t\t\tkey = keys[i]\n\t\t\t\t\tlet num = Number(key)\n\t\t\t\t\tpack(isNaN(num) ? key : num)\n\t\t\t\t\tpack(object[key])\n\t\t\t\t}\n\n\t\t\t} else {\n\t\t\t\tfor (let i = 0; i < length; i++) {\n\t\t\t\t\tpack(key = keys[i])\n\t\t\t\t\tpack(object[key])\n\t\t\t\t}\n\t\t\t}\n\t\t} :\n\t\t(object) => {\n\t\t\ttarget[position++] = 0xde // always using map 16, so we can preallocate and set the length afterwards\n\t\t\tlet objectOffset = position - start\n\t\t\tposition += 2\n\t\t\tlet size = 0\n\t\t\tfor (let key in object) {\n\t\t\t\tif (typeof object.hasOwnProperty !== 'function' || object.hasOwnProperty(key)) {\n\t\t\t\t\tpack(key)\n\t\t\t\t\tpack(object[key])\n\t\t\t\t\tsize++\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (size > 0xffff) {\n\t\t\t\tthrow new Error('Object is too large to serialize with fast 16-bit map size,' +\n\t\t\t\t' use the \"variableMapSize\" option to serialize this object');\n\t\t\t}\n\t\t\ttarget[objectOffset++ + start] = size >> 8\n\t\t\ttarget[objectOffset + start] = size & 0xff\n\t\t}\n\n\t\tconst writeRecord = this.useRecords === false ? writePlainObject :\n\t\t(options.progressiveRecords && !useTwoByteRecords) ?  // this is about 2% faster for highly stable structures, since it only requires one for-in loop (but much more expensive when new structure needs to be written)\n\t\t(object) => {\n\t\t\tlet nextTransition, transition = structures.transitions || (structures.transitions = Object.create(null))\n\t\t\tlet objectOffset = position++ - start\n\t\t\tlet wroteKeys\n\t\t\tfor (let key in object) {\n\t\t\t\tif (typeof object.hasOwnProperty !== 'function' || object.hasOwnProperty(key)) {\n\t\t\t\t\tnextTransition = transition[key]\n\t\t\t\t\tif (nextTransition)\n\t\t\t\t\t\ttransition = nextTransition\n\t\t\t\t\telse {\n\t\t\t\t\t\t// record doesn't exist, create full new record and insert it\n\t\t\t\t\t\tlet keys = Object.keys(object)\n\t\t\t\t\t\tlet lastTransition = transition\n\t\t\t\t\t\ttransition = structures.transitions\n\t\t\t\t\t\tlet newTransitions = 0\n\t\t\t\t\t\tfor (let i = 0, l = keys.length; i < l; i++) {\n\t\t\t\t\t\t\tlet key = keys[i]\n\t\t\t\t\t\t\tnextTransition = transition[key]\n\t\t\t\t\t\t\tif (!nextTransition) {\n\t\t\t\t\t\t\t\tnextTransition = transition[key] = Object.create(null)\n\t\t\t\t\t\t\t\tnewTransitions++\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ttransition = nextTransition\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (objectOffset + start + 1 == position) {\n\t\t\t\t\t\t\t// first key, so we don't need to insert, we can just write record directly\n\t\t\t\t\t\t\tposition--\n\t\t\t\t\t\t\tnewRecord(transition, keys, newTransitions)\n\t\t\t\t\t\t} else // otherwise we need to insert the record, moving existing data after the record\n\t\t\t\t\t\t\tinsertNewRecord(transition, keys, objectOffset, newTransitions)\n\t\t\t\t\t\twroteKeys = true\n\t\t\t\t\t\ttransition = lastTransition[key]\n\t\t\t\t\t}\n\t\t\t\t\tpack(object[key])\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!wroteKeys) {\n\t\t\t\tlet recordId = transition[RECORD_SYMBOL]\n\t\t\t\tif (recordId)\n\t\t\t\t\ttarget[objectOffset + start] = recordId\n\t\t\t\telse\n\t\t\t\t\tinsertNewRecord(transition, Object.keys(object), objectOffset, 0)\n\t\t\t}\n\t\t} :\n\t\t(object) => {\n\t\t\tlet nextTransition, transition = structures.transitions || (structures.transitions = Object.create(null))\n\t\t\tlet newTransitions = 0\n\t\t\tfor (let key in object) if (typeof object.hasOwnProperty !== 'function' || object.hasOwnProperty(key)) {\n\t\t\t\tnextTransition = transition[key]\n\t\t\t\tif (!nextTransition) {\n\t\t\t\t\tnextTransition = transition[key] = Object.create(null)\n\t\t\t\t\tnewTransitions++\n\t\t\t\t}\n\t\t\t\ttransition = nextTransition\n\t\t\t}\n\t\t\tlet recordId = transition[RECORD_SYMBOL]\n\t\t\tif (recordId) {\n\t\t\t\tif (recordId >= 0x60 && useTwoByteRecords) {\n\t\t\t\t\ttarget[position++] = ((recordId -= 0x60) & 0x1f) + 0x60\n\t\t\t\t\ttarget[position++] = recordId >> 5\n\t\t\t\t} else\n\t\t\t\t\ttarget[position++] = recordId\n\t\t\t} else {\n\t\t\t\tnewRecord(transition, transition.__keys__ || Object.keys(object), newTransitions)\n\t\t\t}\n\t\t\t// now write the values\n\t\t\tfor (let key in object)\n\t\t\t\tif (typeof object.hasOwnProperty !== 'function' || object.hasOwnProperty(key)) {\n\t\t\t\t\tpack(object[key])\n\t\t\t\t}\n\t\t}\n\n\t\t// create reference to useRecords if useRecords is a function\n\t\tconst checkUseRecords = typeof this.useRecords == 'function' && this.useRecords;\n\n\t\tconst writeObject = checkUseRecords ? (object) => {\n\t\t\tcheckUseRecords(object) ? writeRecord(object) : writePlainObject(object)\n\t\t} : writeRecord\n\n\t\tconst makeRoom = (end) => {\n\t\t\tlet newSize\n\t\t\tif (end > 0x1000000) {\n\t\t\t\t// special handling for really large buffers\n\t\t\t\tif ((end - start) > MAX_BUFFER_SIZE)\n\t\t\t\t\tthrow new Error('Packed buffer would be larger than maximum buffer size')\n\t\t\t\tnewSize = Math.min(MAX_BUFFER_SIZE,\n\t\t\t\t\tMath.round(Math.max((end - start) * (end > 0x4000000 ? 1.25 : 2), 0x400000) / 0x1000) * 0x1000)\n\t\t\t} else // faster handling for smaller buffers\n\t\t\t\tnewSize = ((Math.max((end - start) << 2, target.length - 1) >> 12) + 1) << 12\n\t\t\tlet newBuffer = new ByteArrayAllocate(newSize)\n\t\t\ttargetView = newBuffer.dataView || (newBuffer.dataView = new DataView(newBuffer.buffer, 0, newSize))\n\t\t\tend = Math.min(end, target.length)\n\t\t\tif (target.copy)\n\t\t\t\ttarget.copy(newBuffer, 0, start, end)\n\t\t\telse\n\t\t\t\tnewBuffer.set(target.slice(start, end))\n\t\t\tposition -= start\n\t\t\tstart = 0\n\t\t\tsafeEnd = newBuffer.length - 10\n\t\t\treturn target = newBuffer\n\t\t}\n\t\tconst newRecord = (transition, keys, newTransitions) => {\n\t\t\tlet recordId = structures.nextId\n\t\t\tif (!recordId)\n\t\t\t\trecordId = 0x40\n\t\t\tif (recordId < sharedLimitId && this.shouldShareStructure && !this.shouldShareStructure(keys)) {\n\t\t\t\trecordId = structures.nextOwnId\n\t\t\t\tif (!(recordId < maxStructureId))\n\t\t\t\t\trecordId = sharedLimitId\n\t\t\t\tstructures.nextOwnId = recordId + 1\n\t\t\t} else {\n\t\t\t\tif (recordId >= maxStructureId)// cycle back around\n\t\t\t\t\trecordId = sharedLimitId\n\t\t\t\tstructures.nextId = recordId + 1\n\t\t\t}\n\t\t\tlet highByte = keys.highByte = recordId >= 0x60 && useTwoByteRecords ? (recordId - 0x60) >> 5 : -1\n\t\t\ttransition[RECORD_SYMBOL] = recordId\n\t\t\ttransition.__keys__ = keys\n\t\t\tstructures[recordId - 0x40] = keys\n\n\t\t\tif (recordId < sharedLimitId) {\n\t\t\t\tkeys.isShared = true\n\t\t\t\tstructures.sharedLength = recordId - 0x3f\n\t\t\t\thasSharedUpdate = true\n\t\t\t\tif (highByte >= 0) {\n\t\t\t\t\ttarget[position++] = (recordId & 0x1f) + 0x60\n\t\t\t\t\ttarget[position++] = highByte\n\t\t\t\t} else {\n\t\t\t\t\ttarget[position++] = recordId\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (highByte >= 0) {\n\t\t\t\t\ttarget[position++] = 0xd5 // fixext 2\n\t\t\t\t\ttarget[position++] = 0x72 // \"r\" record defintion extension type\n\t\t\t\t\ttarget[position++] = (recordId & 0x1f) + 0x60\n\t\t\t\t\ttarget[position++] = highByte\n\t\t\t\t} else {\n\t\t\t\t\ttarget[position++] = 0xd4 // fixext 1\n\t\t\t\t\ttarget[position++] = 0x72 // \"r\" record defintion extension type\n\t\t\t\t\ttarget[position++] = recordId\n\t\t\t\t}\n\n\t\t\t\tif (newTransitions)\n\t\t\t\t\ttransitionsCount += serializationsSinceTransitionRebuild * newTransitions\n\t\t\t\t// record the removal of the id, we can maintain our shared structure\n\t\t\t\tif (recordIdsToRemove.length >= maxOwnStructures)\n\t\t\t\t\trecordIdsToRemove.shift()[RECORD_SYMBOL] = 0 // we are cycling back through, and have to remove old ones\n\t\t\t\trecordIdsToRemove.push(transition)\n\t\t\t\tpack(keys)\n\t\t\t}\n\t\t}\n\t\tconst insertNewRecord = (transition, keys, insertionOffset, newTransitions) => {\n\t\t\tlet mainTarget = target\n\t\t\tlet mainPosition = position\n\t\t\tlet mainSafeEnd = safeEnd\n\t\t\tlet mainStart = start\n\t\t\ttarget = keysTarget\n\t\t\tposition = 0\n\t\t\tstart = 0\n\t\t\tif (!target)\n\t\t\t\tkeysTarget = target = new ByteArrayAllocate(8192)\n\t\t\tsafeEnd = target.length - 10\n\t\t\tnewRecord(transition, keys, newTransitions)\n\t\t\tkeysTarget = target\n\t\t\tlet keysPosition = position\n\t\t\ttarget = mainTarget\n\t\t\tposition = mainPosition\n\t\t\tsafeEnd = mainSafeEnd\n\t\t\tstart = mainStart\n\t\t\tif (keysPosition > 1) {\n\t\t\t\tlet newEnd = position + keysPosition - 1\n\t\t\t\tif (newEnd > safeEnd)\n\t\t\t\t\tmakeRoom(newEnd)\n\t\t\t\tlet insertionPosition = insertionOffset + start\n\t\t\t\ttarget.copyWithin(insertionPosition + keysPosition, insertionPosition + 1, position)\n\t\t\t\ttarget.set(keysTarget.slice(0, keysPosition), insertionPosition)\n\t\t\t\tposition = newEnd\n\t\t\t} else {\n\t\t\t\ttarget[insertionOffset + start] = keysTarget[0]\n\t\t\t}\n\t\t}\n\t\tconst writeStruct = (object) => {\n\t\t\tlet newPosition = writeStructSlots(object, target, start, position, structures, makeRoom, (value, newPosition, notifySharedUpdate) => {\n\t\t\t\tif (notifySharedUpdate)\n\t\t\t\t\treturn hasSharedUpdate = true;\n\t\t\t\tposition = newPosition;\n\t\t\t\tlet startTarget = target;\n\t\t\t\tpack(value);\n\t\t\t\tresetStructures();\n\t\t\t\tif (startTarget !== target) {\n\t\t\t\t\treturn { position, targetView, target }; // indicate the buffer was re-allocated\n\t\t\t\t}\n\t\t\t\treturn position;\n\t\t\t}, this);\n\t\t\tif (newPosition === 0) // bail and go to a msgpack object\n\t\t\t\treturn writeObject(object);\n\t\t\tposition = newPosition;\n\t\t}\n\t}\n\tuseBuffer(buffer) {\n\t\t// this means we are finished using our own buffer and we can write over it safely\n\t\ttarget = buffer\n\t\ttarget.dataView || (target.dataView = new DataView(target.buffer, target.byteOffset, target.byteLength))\n\t\tposition = 0\n\t}\n\tset position (value) {\n\t\tposition = value;\n\t}\n\tget position() {\n\t\treturn position;\n\t}\n\tclearSharedData() {\n\t\tif (this.structures)\n\t\t\tthis.structures = []\n\t\tif (this.typedStructs)\n\t\t\tthis.typedStructs = []\n\t}\n}\n\nextensionClasses = [ Date, Set, Error, RegExp, ArrayBuffer, Object.getPrototypeOf(Uint8Array.prototype).constructor /*TypedArray*/, _unpack_js__WEBPACK_IMPORTED_MODULE_0__.C1Type ]\nextensions = [{\n\tpack(date, allocateForWrite, pack) {\n\t\tlet seconds = date.getTime() / 1000\n\t\tif ((this.useTimestamp32 || date.getMilliseconds() === 0) && seconds >= 0 && seconds < 0x100000000) {\n\t\t\t// Timestamp 32\n\t\t\tlet { target, targetView, position} = allocateForWrite(6)\n\t\t\ttarget[position++] = 0xd6\n\t\t\ttarget[position++] = 0xff\n\t\t\ttargetView.setUint32(position, seconds)\n\t\t} else if (seconds > 0 && seconds < 0x100000000) {\n\t\t\t// Timestamp 64\n\t\t\tlet { target, targetView, position} = allocateForWrite(10)\n\t\t\ttarget[position++] = 0xd7\n\t\t\ttarget[position++] = 0xff\n\t\t\ttargetView.setUint32(position, date.getMilliseconds() * 4000000 + ((seconds / 1000 / 0x100000000) >> 0))\n\t\t\ttargetView.setUint32(position + 4, seconds)\n\t\t} else if (isNaN(seconds)) {\n\t\t\tif (this.onInvalidDate) {\n\t\t\t\tallocateForWrite(0)\n\t\t\t\treturn pack(this.onInvalidDate())\n\t\t\t}\n\t\t\t// Intentionally invalid timestamp\n\t\t\tlet { target, targetView, position} = allocateForWrite(3)\n\t\t\ttarget[position++] = 0xd4\n\t\t\ttarget[position++] = 0xff\n\t\t\ttarget[position++] = 0xff\n\t\t} else {\n\t\t\t// Timestamp 96\n\t\t\tlet { target, targetView, position} = allocateForWrite(15)\n\t\t\ttarget[position++] = 0xc7\n\t\t\ttarget[position++] = 12\n\t\t\ttarget[position++] = 0xff\n\t\t\ttargetView.setUint32(position, date.getMilliseconds() * 1000000)\n\t\t\ttargetView.setBigInt64(position + 4, BigInt(Math.floor(seconds)))\n\t\t}\n\t}\n}, {\n\tpack(set, allocateForWrite, pack) {\n\t\tif (this.setAsEmptyObject) {\n\t\t\tallocateForWrite(0);\n\t\t\treturn pack({})\n\t\t}\n\t\tlet array = Array.from(set)\n\t\tlet { target, position} = allocateForWrite(this.moreTypes ? 3 : 0)\n\t\tif (this.moreTypes) {\n\t\t\ttarget[position++] = 0xd4\n\t\t\ttarget[position++] = 0x73 // 's' for Set\n\t\t\ttarget[position++] = 0\n\t\t}\n\t\tpack(array)\n\t}\n}, {\n\tpack(error, allocateForWrite, pack) {\n\t\tlet { target, position} = allocateForWrite(this.moreTypes ? 3 : 0)\n\t\tif (this.moreTypes) {\n\t\t\ttarget[position++] = 0xd4\n\t\t\ttarget[position++] = 0x65 // 'e' for error\n\t\t\ttarget[position++] = 0\n\t\t}\n\t\tpack([ error.name, error.message, error.cause ])\n\t}\n}, {\n\tpack(regex, allocateForWrite, pack) {\n\t\tlet { target, position} = allocateForWrite(this.moreTypes ? 3 : 0)\n\t\tif (this.moreTypes) {\n\t\t\ttarget[position++] = 0xd4\n\t\t\ttarget[position++] = 0x78 // 'x' for regeXp\n\t\t\ttarget[position++] = 0\n\t\t}\n\t\tpack([ regex.source, regex.flags ])\n\t}\n}, {\n\tpack(arrayBuffer, allocateForWrite) {\n\t\tif (this.moreTypes)\n\t\t\twriteExtBuffer(arrayBuffer, 0x10, allocateForWrite)\n\t\telse\n\t\t\twriteBuffer(hasNodeBuffer ? Buffer.from(arrayBuffer) : new Uint8Array(arrayBuffer), allocateForWrite)\n\t}\n}, {\n\tpack(typedArray, allocateForWrite) {\n\t\tlet constructor = typedArray.constructor\n\t\tif (constructor !== ByteArray && this.moreTypes)\n\t\t\twriteExtBuffer(typedArray, _unpack_js__WEBPACK_IMPORTED_MODULE_0__.typedArrays.indexOf(constructor.name), allocateForWrite)\n\t\telse\n\t\t\twriteBuffer(typedArray, allocateForWrite)\n\t}\n}, {\n\tpack(c1, allocateForWrite) { // specific 0xC1 object\n\t\tlet { target, position} = allocateForWrite(1)\n\t\ttarget[position] = 0xc1\n\t}\n}]\n\nfunction writeExtBuffer(typedArray, type, allocateForWrite, encode) {\n\tlet length = typedArray.byteLength\n\tif (length + 1 < 0x100) {\n\t\tvar { target, position } = allocateForWrite(4 + length)\n\t\ttarget[position++] = 0xc7\n\t\ttarget[position++] = length + 1\n\t} else if (length + 1 < 0x10000) {\n\t\tvar { target, position } = allocateForWrite(5 + length)\n\t\ttarget[position++] = 0xc8\n\t\ttarget[position++] = (length + 1) >> 8\n\t\ttarget[position++] = (length + 1) & 0xff\n\t} else {\n\t\tvar { target, position, targetView } = allocateForWrite(7 + length)\n\t\ttarget[position++] = 0xc9\n\t\ttargetView.setUint32(position, length + 1) // plus one for the type byte\n\t\tposition += 4\n\t}\n\ttarget[position++] = 0x74 // \"t\" for typed array\n\ttarget[position++] = type\n\tif (!typedArray.buffer) typedArray = new Uint8Array(typedArray)\n\ttarget.set(new Uint8Array(typedArray.buffer, typedArray.byteOffset, typedArray.byteLength), position)\n}\nfunction writeBuffer(buffer, allocateForWrite) {\n\tlet length = buffer.byteLength\n\tvar target, position\n\tif (length < 0x100) {\n\t\tvar { target, position } = allocateForWrite(length + 2)\n\t\ttarget[position++] = 0xc4\n\t\ttarget[position++] = length\n\t} else if (length < 0x10000) {\n\t\tvar { target, position } = allocateForWrite(length + 3)\n\t\ttarget[position++] = 0xc5\n\t\ttarget[position++] = length >> 8\n\t\ttarget[position++] = length & 0xff\n\t} else {\n\t\tvar { target, position, targetView } = allocateForWrite(length + 5)\n\t\ttarget[position++] = 0xc6\n\t\ttargetView.setUint32(position, length)\n\t\tposition += 4\n\t}\n\ttarget.set(buffer, position)\n}\n\nfunction writeExtensionData(result, target, position, type) {\n\tlet length = result.length\n\tswitch (length) {\n\t\tcase 1:\n\t\t\ttarget[position++] = 0xd4\n\t\t\tbreak\n\t\tcase 2:\n\t\t\ttarget[position++] = 0xd5\n\t\t\tbreak\n\t\tcase 4:\n\t\t\ttarget[position++] = 0xd6\n\t\t\tbreak\n\t\tcase 8:\n\t\t\ttarget[position++] = 0xd7\n\t\t\tbreak\n\t\tcase 16:\n\t\t\ttarget[position++] = 0xd8\n\t\t\tbreak\n\t\tdefault:\n\t\t\tif (length < 0x100) {\n\t\t\t\ttarget[position++] = 0xc7\n\t\t\t\ttarget[position++] = length\n\t\t\t} else if (length < 0x10000) {\n\t\t\t\ttarget[position++] = 0xc8\n\t\t\t\ttarget[position++] = length >> 8\n\t\t\t\ttarget[position++] = length & 0xff\n\t\t\t} else {\n\t\t\t\ttarget[position++] = 0xc9\n\t\t\t\ttarget[position++] = length >> 24\n\t\t\t\ttarget[position++] = (length >> 16) & 0xff\n\t\t\t\ttarget[position++] = (length >> 8) & 0xff\n\t\t\t\ttarget[position++] = length & 0xff\n\t\t\t}\n\t}\n\ttarget[position++] = type\n\ttarget.set(result, position)\n\tposition += length\n\treturn position\n}\n\nfunction insertIds(serialized, idsToInsert) {\n\t// insert the ids that need to be referenced for structured clones\n\tlet nextId\n\tlet distanceToMove = idsToInsert.length * 6\n\tlet lastEnd = serialized.length - distanceToMove\n\twhile (nextId = idsToInsert.pop()) {\n\t\tlet offset = nextId.offset\n\t\tlet id = nextId.id\n\t\tserialized.copyWithin(offset + distanceToMove, offset, lastEnd)\n\t\tdistanceToMove -= 6\n\t\tlet position = offset + distanceToMove\n\t\tserialized[position++] = 0xd6\n\t\tserialized[position++] = 0x69 // 'i'\n\t\tserialized[position++] = id >> 24\n\t\tserialized[position++] = (id >> 16) & 0xff\n\t\tserialized[position++] = (id >> 8) & 0xff\n\t\tserialized[position++] = id & 0xff\n\t\tlastEnd = offset\n\t}\n\treturn serialized\n}\n\nfunction writeBundles(start, pack, incrementPosition) {\n\tif (bundledStrings.length > 0) {\n\t\ttargetView.setUint32(bundledStrings.position + start, position + incrementPosition - bundledStrings.position - start)\n\t\tbundledStrings.stringsPosition = position - start;\n\t\tlet writeStrings = bundledStrings\n\t\tbundledStrings = null\n\t\tpack(writeStrings[0])\n\t\tpack(writeStrings[1])\n\t}\n}\n\nfunction addExtension(extension) {\n\tif (extension.Class) {\n\t\tif (!extension.pack && !extension.write)\n\t\t\tthrow new Error('Extension has no pack or write function')\n\t\tif (extension.pack && !extension.type)\n\t\t\tthrow new Error('Extension has no type (numeric code to identify the extension)')\n\t\textensionClasses.unshift(extension.Class)\n\t\textensions.unshift(extension)\n\t}\n\t(0,_unpack_js__WEBPACK_IMPORTED_MODULE_0__.addExtension)(extension)\n}\nfunction prepareStructures(structures, packr) {\n\tstructures.isCompatible = (existingStructures) => {\n\t\tlet compatible = !existingStructures || ((packr.lastNamedStructuresLength || 0) === existingStructures.length)\n\t\tif (!compatible) // we want to merge these existing structures immediately since we already have it and we are in the right transaction\n\t\t\tpackr._mergeStructures(existingStructures);\n\t\treturn compatible;\n\t}\n\treturn structures\n}\nfunction setWriteStructSlots(writeSlots, makeStructures) {\n\twriteStructSlots = writeSlots;\n\tprepareStructures = makeStructures;\n}\n\nlet defaultPackr = new Packr({ useRecords: false })\nconst pack = defaultPackr.pack\nconst encode = defaultPackr.pack\nconst Encoder = Packr\n\n;\nconst { NEVER, ALWAYS, DECIMAL_ROUND, DECIMAL_FIT } = _unpack_js__WEBPACK_IMPORTED_MODULE_0__.FLOAT32_OPTIONS\nconst REUSE_BUFFER_MODE = 512\nconst RESET_BUFFER_MODE = 1024\nconst RESERVE_START_SPACE = 2048//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbm9kZV9tb2R1bGVzL0BsaXZlc3RvcmUvdXRpbHMvbm9kZV9tb2R1bGVzL21zZ3BhY2tyL3BhY2suanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN0RztBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLHdDQUF3QztBQUM1RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ0Esb0JBQW9CLCtDQUFPO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLGtCQUFrQjtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QyxPQUFPO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEI7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLGtEQUFrRCxPQUFPO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsWUFBWTtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxPQUFPO0FBQ2Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLE1BQU07QUFDTjtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUIsZUFBZTtBQUNoQztBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLGdDQUFnQztBQUNoQztBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNLGlDQUFpQztBQUN2QztBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLDhDQUFNO0FBQ25DO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUixpQ0FBaUMsMEJBQTBCO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCw2Q0FBNkMsT0FBTztBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQztBQUN0QztBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVixVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0EsaUNBQWlDLE1BQU07QUFDdkM7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLFlBQVk7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0wsb0JBQW9CLFlBQVk7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QyxPQUFPO0FBQzlDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYyxnQ0FBZ0M7QUFDOUM7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsb0lBQW9JLDhDQUFNO0FBQzFJO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTLDhCQUE4QjtBQUN2QztBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSxTQUFTLDhCQUE4QjtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyw4QkFBOEI7QUFDdkM7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0EsU0FBUyw4QkFBOEI7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxRQUFRLGtCQUFrQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBLFFBQVEsa0JBQWtCO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0EsUUFBUSxrQkFBa0I7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixtREFBVztBQUN6QztBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsOEJBQThCO0FBQzlCLFFBQVEsa0JBQWtCO0FBQzFCO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsbUJBQW1CO0FBQzNCO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsUUFBUSxtQkFBbUI7QUFDM0I7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILFFBQVEsK0JBQStCO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxtQkFBbUI7QUFDM0I7QUFDQTtBQUNBLEdBQUc7QUFDSCxRQUFRLG1CQUFtQjtBQUMzQjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsUUFBUSwrQkFBK0I7QUFDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUMsd0RBQWtCO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7O0FBRUEsK0JBQStCLG1CQUFtQjtBQUMzQztBQUNBO0FBQ0E7QUFDc0M7QUFDN0MsQ0FBNkM7QUFDdEMsUUFBUSw0Q0FBNEMsRUFBRSx1REFBZTtBQUNyRTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9hbmFjb25kYS1hc3Nlc21lbnQtMS8uL3NyYy9ub2RlX21vZHVsZXMvQGxpdmVzdG9yZS91dGlscy9ub2RlX21vZHVsZXMvbXNncGFja3IvcGFjay5qcz8yYjMyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFVucGFja3IsIG11bHQxMCwgQzFUeXBlLCB0eXBlZEFycmF5cywgYWRkRXh0ZW5zaW9uIGFzIHVucGFja0FkZEV4dGVuc2lvbiB9IGZyb20gJy4vdW5wYWNrLmpzJ1xubGV0IHRleHRFbmNvZGVyXG50cnkge1xuXHR0ZXh0RW5jb2RlciA9IG5ldyBUZXh0RW5jb2RlcigpXG59IGNhdGNoIChlcnJvcikge31cbmxldCBleHRlbnNpb25zLCBleHRlbnNpb25DbGFzc2VzXG5jb25zdCBoYXNOb2RlQnVmZmVyID0gdHlwZW9mIEJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCdcbmNvbnN0IEJ5dGVBcnJheUFsbG9jYXRlID0gaGFzTm9kZUJ1ZmZlciA/XG5cdGZ1bmN0aW9uKGxlbmd0aCkgeyByZXR1cm4gQnVmZmVyLmFsbG9jVW5zYWZlU2xvdyhsZW5ndGgpIH0gOiBVaW50OEFycmF5XG5jb25zdCBCeXRlQXJyYXkgPSBoYXNOb2RlQnVmZmVyID8gQnVmZmVyIDogVWludDhBcnJheVxuY29uc3QgTUFYX0JVRkZFUl9TSVpFID0gaGFzTm9kZUJ1ZmZlciA/IDB4MTAwMDAwMDAwIDogMHg3ZmQwMDAwMFxubGV0IHRhcmdldCwga2V5c1RhcmdldFxubGV0IHRhcmdldFZpZXdcbmxldCBwb3NpdGlvbiA9IDBcbmxldCBzYWZlRW5kXG5sZXQgYnVuZGxlZFN0cmluZ3MgPSBudWxsXG5sZXQgd3JpdGVTdHJ1Y3RTbG90c1xuY29uc3QgTUFYX0JVTkRMRV9TSVpFID0gMHg1NTAwIC8vIG1heGltdW0gY2hhcmFjdGVycyBzdWNoIHRoYXQgdGhlIGVuY29kZWQgYnl0ZXMgZml0cyBpbiAxNiBiaXRzLlxuY29uc3QgaGFzTm9uTGF0aW4gPSAvW1xcdTAwODAtXFx1RkZGRl0vXG5leHBvcnQgY29uc3QgUkVDT1JEX1NZTUJPTCA9IFN5bWJvbCgncmVjb3JkLWlkJylcbmV4cG9ydCBjbGFzcyBQYWNrciBleHRlbmRzIFVucGFja3Ige1xuXHRjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG5cdFx0c3VwZXIob3B0aW9ucylcblx0XHR0aGlzLm9mZnNldCA9IDBcblx0XHRsZXQgdHlwZUJ1ZmZlclxuXHRcdGxldCBzdGFydFxuXHRcdGxldCBoYXNTaGFyZWRVcGRhdGVcblx0XHRsZXQgc3RydWN0dXJlc1xuXHRcdGxldCByZWZlcmVuY2VNYXBcblx0XHRsZXQgZW5jb2RlVXRmOCA9IEJ5dGVBcnJheS5wcm90b3R5cGUudXRmOFdyaXRlID8gZnVuY3Rpb24oc3RyaW5nLCBwb3NpdGlvbikge1xuXHRcdFx0cmV0dXJuIHRhcmdldC51dGY4V3JpdGUoc3RyaW5nLCBwb3NpdGlvbiwgdGFyZ2V0LmJ5dGVMZW5ndGggLSBwb3NpdGlvbilcblx0XHR9IDogKHRleHRFbmNvZGVyICYmIHRleHRFbmNvZGVyLmVuY29kZUludG8pID9cblx0XHRcdGZ1bmN0aW9uKHN0cmluZywgcG9zaXRpb24pIHtcblx0XHRcdFx0cmV0dXJuIHRleHRFbmNvZGVyLmVuY29kZUludG8oc3RyaW5nLCB0YXJnZXQuc3ViYXJyYXkocG9zaXRpb24pKS53cml0dGVuXG5cdFx0XHR9IDogZmFsc2VcblxuXHRcdGxldCBwYWNrciA9IHRoaXNcblx0XHRpZiAoIW9wdGlvbnMpXG5cdFx0XHRvcHRpb25zID0ge31cblx0XHRsZXQgaXNTZXF1ZW50aWFsID0gb3B0aW9ucyAmJiBvcHRpb25zLnNlcXVlbnRpYWxcblx0XHRsZXQgaGFzU2hhcmVkU3RydWN0dXJlcyA9IG9wdGlvbnMuc3RydWN0dXJlcyB8fCBvcHRpb25zLnNhdmVTdHJ1Y3R1cmVzXG5cdFx0bGV0IG1heFNoYXJlZFN0cnVjdHVyZXMgPSBvcHRpb25zLm1heFNoYXJlZFN0cnVjdHVyZXNcblx0XHRpZiAobWF4U2hhcmVkU3RydWN0dXJlcyA9PSBudWxsKVxuXHRcdFx0bWF4U2hhcmVkU3RydWN0dXJlcyA9IGhhc1NoYXJlZFN0cnVjdHVyZXMgPyAzMiA6IDBcblx0XHRpZiAobWF4U2hhcmVkU3RydWN0dXJlcyA+IDgxNjApXG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ01heGltdW0gbWF4U2hhcmVkU3RydWN0dXJlIGlzIDgxNjAnKVxuXHRcdGlmIChvcHRpb25zLnN0cnVjdHVyZWRDbG9uZSAmJiBvcHRpb25zLm1vcmVUeXBlcyA9PSB1bmRlZmluZWQpIHtcblx0XHRcdHRoaXMubW9yZVR5cGVzID0gdHJ1ZVxuXHRcdH1cblx0XHRsZXQgbWF4T3duU3RydWN0dXJlcyA9IG9wdGlvbnMubWF4T3duU3RydWN0dXJlc1xuXHRcdGlmIChtYXhPd25TdHJ1Y3R1cmVzID09IG51bGwpXG5cdFx0XHRtYXhPd25TdHJ1Y3R1cmVzID0gaGFzU2hhcmVkU3RydWN0dXJlcyA/IDMyIDogNjRcblx0XHRpZiAoIXRoaXMuc3RydWN0dXJlcyAmJiBvcHRpb25zLnVzZVJlY29yZHMgIT0gZmFsc2UpXG5cdFx0XHR0aGlzLnN0cnVjdHVyZXMgPSBbXVxuXHRcdC8vIHR3byBieXRlIHJlY29yZCBpZHMgZm9yIHNoYXJlZCBzdHJ1Y3R1cmVzXG5cdFx0bGV0IHVzZVR3b0J5dGVSZWNvcmRzID0gbWF4U2hhcmVkU3RydWN0dXJlcyA+IDMyIHx8IChtYXhPd25TdHJ1Y3R1cmVzICsgbWF4U2hhcmVkU3RydWN0dXJlcyA+IDY0KVxuXHRcdGxldCBzaGFyZWRMaW1pdElkID0gbWF4U2hhcmVkU3RydWN0dXJlcyArIDB4NDBcblx0XHRsZXQgbWF4U3RydWN0dXJlSWQgPSBtYXhTaGFyZWRTdHJ1Y3R1cmVzICsgbWF4T3duU3RydWN0dXJlcyArIDB4NDBcblx0XHRpZiAobWF4U3RydWN0dXJlSWQgPiA4MjU2KSB7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ01heGltdW0gbWF4U2hhcmVkU3RydWN0dXJlICsgbWF4T3duU3RydWN0dXJlIGlzIDgxOTInKVxuXHRcdH1cblx0XHRsZXQgcmVjb3JkSWRzVG9SZW1vdmUgPSBbXVxuXHRcdGxldCB0cmFuc2l0aW9uc0NvdW50ID0gMFxuXHRcdGxldCBzZXJpYWxpemF0aW9uc1NpbmNlVHJhbnNpdGlvblJlYnVpbGQgPSAwXG5cblx0XHR0aGlzLnBhY2sgPSB0aGlzLmVuY29kZSA9IGZ1bmN0aW9uKHZhbHVlLCBlbmNvZGVPcHRpb25zKSB7XG5cdFx0XHRpZiAoIXRhcmdldCkge1xuXHRcdFx0XHR0YXJnZXQgPSBuZXcgQnl0ZUFycmF5QWxsb2NhdGUoODE5Milcblx0XHRcdFx0dGFyZ2V0VmlldyA9IHRhcmdldC5kYXRhVmlldyB8fCAodGFyZ2V0LmRhdGFWaWV3ID0gbmV3IERhdGFWaWV3KHRhcmdldC5idWZmZXIsIDAsIDgxOTIpKVxuXHRcdFx0XHRwb3NpdGlvbiA9IDBcblx0XHRcdH1cblx0XHRcdHNhZmVFbmQgPSB0YXJnZXQubGVuZ3RoIC0gMTBcblx0XHRcdGlmIChzYWZlRW5kIC0gcG9zaXRpb24gPCAweDgwMCkge1xuXHRcdFx0XHQvLyBkb24ndCBzdGFydCB0b28gY2xvc2UgdG8gdGhlIGVuZCxcblx0XHRcdFx0dGFyZ2V0ID0gbmV3IEJ5dGVBcnJheUFsbG9jYXRlKHRhcmdldC5sZW5ndGgpXG5cdFx0XHRcdHRhcmdldFZpZXcgPSB0YXJnZXQuZGF0YVZpZXcgfHwgKHRhcmdldC5kYXRhVmlldyA9IG5ldyBEYXRhVmlldyh0YXJnZXQuYnVmZmVyLCAwLCB0YXJnZXQubGVuZ3RoKSlcblx0XHRcdFx0c2FmZUVuZCA9IHRhcmdldC5sZW5ndGggLSAxMFxuXHRcdFx0XHRwb3NpdGlvbiA9IDBcblx0XHRcdH0gZWxzZVxuXHRcdFx0XHRwb3NpdGlvbiA9IChwb3NpdGlvbiArIDcpICYgMHg3ZmZmZmZmOCAvLyBXb3JkIGFsaWduIHRvIG1ha2UgYW55IGZ1dHVyZSBjb3B5aW5nIG9mIHRoaXMgYnVmZmVyIGZhc3RlclxuXHRcdFx0c3RhcnQgPSBwb3NpdGlvblxuXHRcdFx0aWYgKGVuY29kZU9wdGlvbnMgJiBSRVNFUlZFX1NUQVJUX1NQQUNFKSBwb3NpdGlvbiArPSAoZW5jb2RlT3B0aW9ucyAmIDB4ZmYpXG5cdFx0XHRyZWZlcmVuY2VNYXAgPSBwYWNrci5zdHJ1Y3R1cmVkQ2xvbmUgPyBuZXcgTWFwKCkgOiBudWxsXG5cdFx0XHRpZiAocGFja3IuYnVuZGxlU3RyaW5ncyAmJiB0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnKSB7XG5cdFx0XHRcdGJ1bmRsZWRTdHJpbmdzID0gW11cblx0XHRcdFx0YnVuZGxlZFN0cmluZ3Muc2l6ZSA9IEluZmluaXR5IC8vIGZvcmNlIGEgbmV3IGJ1bmRsZSBzdGFydCBvbiBmaXJzdCBzdHJpbmdcblx0XHRcdH0gZWxzZVxuXHRcdFx0XHRidW5kbGVkU3RyaW5ncyA9IG51bGxcblx0XHRcdHN0cnVjdHVyZXMgPSBwYWNrci5zdHJ1Y3R1cmVzXG5cdFx0XHRpZiAoc3RydWN0dXJlcykge1xuXHRcdFx0XHRpZiAoc3RydWN0dXJlcy51bmluaXRpYWxpemVkKVxuXHRcdFx0XHRcdHN0cnVjdHVyZXMgPSBwYWNrci5fbWVyZ2VTdHJ1Y3R1cmVzKHBhY2tyLmdldFN0cnVjdHVyZXMoKSlcblx0XHRcdFx0bGV0IHNoYXJlZExlbmd0aCA9IHN0cnVjdHVyZXMuc2hhcmVkTGVuZ3RoIHx8IDBcblx0XHRcdFx0aWYgKHNoYXJlZExlbmd0aCA+IG1heFNoYXJlZFN0cnVjdHVyZXMpIHtcblx0XHRcdFx0XHQvL2lmIChtYXhTaGFyZWRTdHJ1Y3R1cmVzIDw9IDMyICYmIHN0cnVjdHVyZXMuc2hhcmVkTGVuZ3RoID4gMzIpIC8vIFRPRE86IGNvdWxkIHN1cHBvcnQgdGhpcywgYnV0IHdvdWxkIG5lZWQgdG8gdXBkYXRlIHRoZSBsaW1pdCBpZHNcblx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ1NoYXJlZCBzdHJ1Y3R1cmVzIGlzIGxhcmdlciB0aGFuIG1heGltdW0gc2hhcmVkIHN0cnVjdHVyZXMsIHRyeSBpbmNyZWFzaW5nIG1heFNoYXJlZFN0cnVjdHVyZXMgdG8gJyArIHN0cnVjdHVyZXMuc2hhcmVkTGVuZ3RoKVxuXHRcdFx0XHR9XG5cdFx0XHRcdGlmICghc3RydWN0dXJlcy50cmFuc2l0aW9ucykge1xuXHRcdFx0XHRcdC8vIHJlYnVpbGQgb3VyIHN0cnVjdHVyZSB0cmFuc2l0aW9uc1xuXHRcdFx0XHRcdHN0cnVjdHVyZXMudHJhbnNpdGlvbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpXG5cdFx0XHRcdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBzaGFyZWRMZW5ndGg7IGkrKykge1xuXHRcdFx0XHRcdFx0bGV0IGtleXMgPSBzdHJ1Y3R1cmVzW2ldXG5cdFx0XHRcdFx0XHRpZiAoIWtleXMpXG5cdFx0XHRcdFx0XHRcdGNvbnRpbnVlXG5cdFx0XHRcdFx0XHRsZXQgbmV4dFRyYW5zaXRpb24sIHRyYW5zaXRpb24gPSBzdHJ1Y3R1cmVzLnRyYW5zaXRpb25zXG5cdFx0XHRcdFx0XHRmb3IgKGxldCBqID0gMCwgbCA9IGtleXMubGVuZ3RoOyBqIDwgbDsgaisrKSB7XG5cdFx0XHRcdFx0XHRcdGxldCBrZXkgPSBrZXlzW2pdXG5cdFx0XHRcdFx0XHRcdG5leHRUcmFuc2l0aW9uID0gdHJhbnNpdGlvbltrZXldXG5cdFx0XHRcdFx0XHRcdGlmICghbmV4dFRyYW5zaXRpb24pIHtcblx0XHRcdFx0XHRcdFx0XHRuZXh0VHJhbnNpdGlvbiA9IHRyYW5zaXRpb25ba2V5XSA9IE9iamVjdC5jcmVhdGUobnVsbClcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR0cmFuc2l0aW9uID0gbmV4dFRyYW5zaXRpb25cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdHRyYW5zaXRpb25bUkVDT1JEX1NZTUJPTF0gPSBpICsgMHg0MFxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHR0aGlzLmxhc3ROYW1lZFN0cnVjdHVyZXNMZW5ndGggPSBzaGFyZWRMZW5ndGhcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoIWlzU2VxdWVudGlhbCkge1xuXHRcdFx0XHRcdHN0cnVjdHVyZXMubmV4dElkID0gc2hhcmVkTGVuZ3RoICsgMHg0MFxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRpZiAoaGFzU2hhcmVkVXBkYXRlKVxuXHRcdFx0XHRoYXNTaGFyZWRVcGRhdGUgPSBmYWxzZVxuXHRcdFx0bGV0IGVuY29kaW5nRXJyb3I7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRpZiAocGFja3IucmFuZG9tQWNjZXNzU3RydWN0dXJlICYmIHZhbHVlICYmIHZhbHVlLmNvbnN0cnVjdG9yICYmIHZhbHVlLmNvbnN0cnVjdG9yID09PSBPYmplY3QpXG5cdFx0XHRcdFx0d3JpdGVTdHJ1Y3QodmFsdWUpO1xuXHRcdFx0XHRlbHNlXG5cdFx0XHRcdFx0cGFjayh2YWx1ZSlcblx0XHRcdFx0bGV0IGxhc3RCdW5kbGUgPSBidW5kbGVkU3RyaW5ncztcblx0XHRcdFx0aWYgKGJ1bmRsZWRTdHJpbmdzKVxuXHRcdFx0XHRcdHdyaXRlQnVuZGxlcyhzdGFydCwgcGFjaywgMClcblx0XHRcdFx0aWYgKHJlZmVyZW5jZU1hcCAmJiByZWZlcmVuY2VNYXAuaWRzVG9JbnNlcnQpIHtcblx0XHRcdFx0XHRsZXQgaWRzVG9JbnNlcnQgPSByZWZlcmVuY2VNYXAuaWRzVG9JbnNlcnQuc29ydCgoYSwgYikgPT4gYS5vZmZzZXQgPiBiLm9mZnNldCA/IDEgOiAtMSk7XG5cdFx0XHRcdFx0bGV0IGkgPSBpZHNUb0luc2VydC5sZW5ndGg7XG5cdFx0XHRcdFx0bGV0IGluY3JlbWVudFBvc2l0aW9uID0gLTE7XG5cdFx0XHRcdFx0d2hpbGUgKGxhc3RCdW5kbGUgJiYgaSA+IDApIHtcblx0XHRcdFx0XHRcdGxldCBpbnNlcnRpb25Qb2ludCA9IGlkc1RvSW5zZXJ0Wy0taV0ub2Zmc2V0ICsgc3RhcnQ7XG5cdFx0XHRcdFx0XHRpZiAoaW5zZXJ0aW9uUG9pbnQgPCAobGFzdEJ1bmRsZS5zdHJpbmdzUG9zaXRpb24gKyBzdGFydCkgJiYgaW5jcmVtZW50UG9zaXRpb24gPT09IC0xKVxuXHRcdFx0XHRcdFx0XHRpbmNyZW1lbnRQb3NpdGlvbiA9IDA7XG5cdFx0XHRcdFx0XHRpZiAoaW5zZXJ0aW9uUG9pbnQgPiAobGFzdEJ1bmRsZS5wb3NpdGlvbiArIHN0YXJ0KSkge1xuXHRcdFx0XHRcdFx0XHRpZiAoaW5jcmVtZW50UG9zaXRpb24gPj0gMClcblx0XHRcdFx0XHRcdFx0XHRpbmNyZW1lbnRQb3NpdGlvbiArPSA2O1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0aWYgKGluY3JlbWVudFBvc2l0aW9uID49IDApIHtcblx0XHRcdFx0XHRcdFx0XHQvLyB1cGRhdGUgdGhlIGJ1bmRsZSByZWZlcmVuY2Ugbm93XG5cdFx0XHRcdFx0XHRcdFx0dGFyZ2V0Vmlldy5zZXRVaW50MzIobGFzdEJ1bmRsZS5wb3NpdGlvbiArIHN0YXJ0LFxuXHRcdFx0XHRcdFx0XHRcdFx0dGFyZ2V0Vmlldy5nZXRVaW50MzIobGFzdEJ1bmRsZS5wb3NpdGlvbiArIHN0YXJ0KSArIGluY3JlbWVudFBvc2l0aW9uKVxuXHRcdFx0XHRcdFx0XHRcdGluY3JlbWVudFBvc2l0aW9uID0gLTE7IC8vIHJlc2V0XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0bGFzdEJ1bmRsZSA9IGxhc3RCdW5kbGUucHJldmlvdXM7XG5cdFx0XHRcdFx0XHRcdGkrKztcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYgKGluY3JlbWVudFBvc2l0aW9uID49IDAgJiYgbGFzdEJ1bmRsZSkge1xuXHRcdFx0XHRcdFx0Ly8gdXBkYXRlIHRoZSBidW5kbGUgcmVmZXJlbmNlIG5vd1xuXHRcdFx0XHRcdFx0dGFyZ2V0Vmlldy5zZXRVaW50MzIobGFzdEJ1bmRsZS5wb3NpdGlvbiArIHN0YXJ0LFxuXHRcdFx0XHRcdFx0XHR0YXJnZXRWaWV3LmdldFVpbnQzMihsYXN0QnVuZGxlLnBvc2l0aW9uICsgc3RhcnQpICsgaW5jcmVtZW50UG9zaXRpb24pXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHBvc2l0aW9uICs9IGlkc1RvSW5zZXJ0Lmxlbmd0aCAqIDY7XG5cdFx0XHRcdFx0aWYgKHBvc2l0aW9uID4gc2FmZUVuZClcblx0XHRcdFx0XHRcdG1ha2VSb29tKHBvc2l0aW9uKVxuXHRcdFx0XHRcdHBhY2tyLm9mZnNldCA9IHBvc2l0aW9uXG5cdFx0XHRcdFx0bGV0IHNlcmlhbGl6ZWQgPSBpbnNlcnRJZHModGFyZ2V0LnN1YmFycmF5KHN0YXJ0LCBwb3NpdGlvbiksIGlkc1RvSW5zZXJ0KVxuXHRcdFx0XHRcdHJlZmVyZW5jZU1hcCA9IG51bGxcblx0XHRcdFx0XHRyZXR1cm4gc2VyaWFsaXplZFxuXHRcdFx0XHR9XG5cdFx0XHRcdHBhY2tyLm9mZnNldCA9IHBvc2l0aW9uIC8vIHVwZGF0ZSB0aGUgb2Zmc2V0IHNvIG5leHQgc2VyaWFsaXphdGlvbiBkb2Vzbid0IHdyaXRlIG92ZXIgb3VyIGJ1ZmZlciwgYnV0IGNhbiBjb250aW51ZSB3cml0aW5nIHRvIHNhbWUgYnVmZmVyIHNlcXVlbnRpYWxseVxuXHRcdFx0XHRpZiAoZW5jb2RlT3B0aW9ucyAmIFJFVVNFX0JVRkZFUl9NT0RFKSB7XG5cdFx0XHRcdFx0dGFyZ2V0LnN0YXJ0ID0gc3RhcnRcblx0XHRcdFx0XHR0YXJnZXQuZW5kID0gcG9zaXRpb25cblx0XHRcdFx0XHRyZXR1cm4gdGFyZ2V0XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHRhcmdldC5zdWJhcnJheShzdGFydCwgcG9zaXRpb24pIC8vIHBvc2l0aW9uIGNhbiBjaGFuZ2UgaWYgd2UgY2FsbCBwYWNrIGFnYWluIGluIHNhdmVTdHJ1Y3R1cmVzLCBzbyB3ZSBnZXQgdGhlIGJ1ZmZlciBub3dcblx0XHRcdH0gY2F0Y2goZXJyb3IpIHtcblx0XHRcdFx0ZW5jb2RpbmdFcnJvciA9IGVycm9yO1xuXHRcdFx0XHR0aHJvdyBlcnJvcjtcblx0XHRcdH0gZmluYWxseSB7XG5cdFx0XHRcdGlmIChzdHJ1Y3R1cmVzKSB7XG5cdFx0XHRcdFx0cmVzZXRTdHJ1Y3R1cmVzKCk7XG5cdFx0XHRcdFx0aWYgKGhhc1NoYXJlZFVwZGF0ZSAmJiBwYWNrci5zYXZlU3RydWN0dXJlcykge1xuXHRcdFx0XHRcdFx0bGV0IHNoYXJlZExlbmd0aCA9IHN0cnVjdHVyZXMuc2hhcmVkTGVuZ3RoIHx8IDBcblx0XHRcdFx0XHRcdC8vIHdlIGNhbid0IHJlbHkgb24gc3RhcnQvZW5kIHdpdGggUkVVU0VfQlVGRkVSX01PREUgc2luY2UgdGhleSB3aWxsIChwcm9iYWJseSkgY2hhbmdlIHdoZW4gd2Ugc2F2ZVxuXHRcdFx0XHRcdFx0bGV0IHJldHVybkJ1ZmZlciA9IHRhcmdldC5zdWJhcnJheShzdGFydCwgcG9zaXRpb24pXG5cdFx0XHRcdFx0XHRsZXQgbmV3U2hhcmVkRGF0YSA9IHByZXBhcmVTdHJ1Y3R1cmVzKHN0cnVjdHVyZXMsIHBhY2tyKTtcblx0XHRcdFx0XHRcdGlmICghZW5jb2RpbmdFcnJvcikgeyAvLyBUT0RPOiBJZiB0aGVyZSBpcyBhbiBlbmNvZGluZyBlcnJvciwgc2hvdWxkIG1ha2UgdGhlIHN0cnVjdHVyZXMgYXMgdW5pbml0aWFsaXplZCBzbyB0aGV5IGdldCByZWJ1aWx0IG5leHQgdGltZVxuXHRcdFx0XHRcdFx0XHRpZiAocGFja3Iuc2F2ZVN0cnVjdHVyZXMobmV3U2hhcmVkRGF0YSwgbmV3U2hhcmVkRGF0YS5pc0NvbXBhdGlibGUpID09PSBmYWxzZSkge1xuXHRcdFx0XHRcdFx0XHRcdC8vIGdldCB1cGRhdGVkIHN0cnVjdHVyZXMgYW5kIHRyeSBhZ2FpbiBpZiB0aGUgdXBkYXRlIGZhaWxlZFxuXHRcdFx0XHRcdFx0XHRcdHJldHVybiBwYWNrci5wYWNrKHZhbHVlLCBlbmNvZGVPcHRpb25zKVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdHBhY2tyLmxhc3ROYW1lZFN0cnVjdHVyZXNMZW5ndGggPSBzaGFyZWRMZW5ndGhcblx0XHRcdFx0XHRcdFx0Ly8gZG9uJ3Qga2VlcCBsYXJnZSBidWZmZXJzIGFyb3VuZFxuXHRcdFx0XHRcdFx0XHRpZiAodGFyZ2V0Lmxlbmd0aCA+IDB4NDAwMDAwMDApIHRhcmdldCA9IG51bGxcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHJldHVybkJ1ZmZlclxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHQvLyBkb24ndCBrZWVwIGxhcmdlIGJ1ZmZlcnMgYXJvdW5kLCB0aGV5IHRha2UgdG9vIG11Y2ggbWVtb3J5IGFuZCBjYXVzZSBwcm9ibGVtcyAobGltaXQgYXQgMUdCKVxuXHRcdFx0XHRpZiAodGFyZ2V0Lmxlbmd0aCA+IDB4NDAwMDAwMDApIHRhcmdldCA9IG51bGxcblx0XHRcdFx0aWYgKGVuY29kZU9wdGlvbnMgJiBSRVNFVF9CVUZGRVJfTU9ERSlcblx0XHRcdFx0XHRwb3NpdGlvbiA9IHN0YXJ0XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGNvbnN0IHJlc2V0U3RydWN0dXJlcyA9ICgpID0+IHtcblx0XHRcdGlmIChzZXJpYWxpemF0aW9uc1NpbmNlVHJhbnNpdGlvblJlYnVpbGQgPCAxMClcblx0XHRcdFx0c2VyaWFsaXphdGlvbnNTaW5jZVRyYW5zaXRpb25SZWJ1aWxkKytcblx0XHRcdGxldCBzaGFyZWRMZW5ndGggPSBzdHJ1Y3R1cmVzLnNoYXJlZExlbmd0aCB8fCAwXG5cdFx0XHRpZiAoc3RydWN0dXJlcy5sZW5ndGggPiBzaGFyZWRMZW5ndGggJiYgIWlzU2VxdWVudGlhbClcblx0XHRcdFx0c3RydWN0dXJlcy5sZW5ndGggPSBzaGFyZWRMZW5ndGhcblx0XHRcdGlmICh0cmFuc2l0aW9uc0NvdW50ID4gMTAwMDApIHtcblx0XHRcdFx0Ly8gZm9yY2UgYSByZWJ1aWxkIG9jY2FzaW9uYWxseSBhZnRlciBhIGxvdCBvZiB0cmFuc2l0aW9ucyBzbyBpdCBjYW4gZ2V0IGNsZWFuZWQgdXBcblx0XHRcdFx0c3RydWN0dXJlcy50cmFuc2l0aW9ucyA9IG51bGxcblx0XHRcdFx0c2VyaWFsaXphdGlvbnNTaW5jZVRyYW5zaXRpb25SZWJ1aWxkID0gMFxuXHRcdFx0XHR0cmFuc2l0aW9uc0NvdW50ID0gMFxuXHRcdFx0XHRpZiAocmVjb3JkSWRzVG9SZW1vdmUubGVuZ3RoID4gMClcblx0XHRcdFx0XHRyZWNvcmRJZHNUb1JlbW92ZSA9IFtdXG5cdFx0XHR9IGVsc2UgaWYgKHJlY29yZElkc1RvUmVtb3ZlLmxlbmd0aCA+IDAgJiYgIWlzU2VxdWVudGlhbCkge1xuXHRcdFx0XHRmb3IgKGxldCBpID0gMCwgbCA9IHJlY29yZElkc1RvUmVtb3ZlLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHRcdFx0XHRcdHJlY29yZElkc1RvUmVtb3ZlW2ldW1JFQ09SRF9TWU1CT0xdID0gMFxuXHRcdFx0XHR9XG5cdFx0XHRcdHJlY29yZElkc1RvUmVtb3ZlID0gW11cblx0XHRcdH1cblx0XHR9XG5cdFx0Y29uc3QgcGFja0FycmF5ID0gKHZhbHVlKSA9PiB7XG5cdFx0XHR2YXIgbGVuZ3RoID0gdmFsdWUubGVuZ3RoXG5cdFx0XHRpZiAobGVuZ3RoIDwgMHgxMCkge1xuXHRcdFx0XHR0YXJnZXRbcG9zaXRpb24rK10gPSAweDkwIHwgbGVuZ3RoXG5cdFx0XHR9IGVsc2UgaWYgKGxlbmd0aCA8IDB4MTAwMDApIHtcblx0XHRcdFx0dGFyZ2V0W3Bvc2l0aW9uKytdID0gMHhkY1xuXHRcdFx0XHR0YXJnZXRbcG9zaXRpb24rK10gPSBsZW5ndGggPj4gOFxuXHRcdFx0XHR0YXJnZXRbcG9zaXRpb24rK10gPSBsZW5ndGggJiAweGZmXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0YXJnZXRbcG9zaXRpb24rK10gPSAweGRkXG5cdFx0XHRcdHRhcmdldFZpZXcuc2V0VWludDMyKHBvc2l0aW9uLCBsZW5ndGgpXG5cdFx0XHRcdHBvc2l0aW9uICs9IDRcblx0XHRcdH1cblx0XHRcdGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0cGFjayh2YWx1ZVtpXSlcblx0XHRcdH1cblx0XHR9XG5cdFx0Y29uc3QgcGFjayA9ICh2YWx1ZSkgPT4ge1xuXHRcdFx0aWYgKHBvc2l0aW9uID4gc2FmZUVuZClcblx0XHRcdFx0dGFyZ2V0ID0gbWFrZVJvb20ocG9zaXRpb24pXG5cblx0XHRcdHZhciB0eXBlID0gdHlwZW9mIHZhbHVlXG5cdFx0XHR2YXIgbGVuZ3RoXG5cdFx0XHRpZiAodHlwZSA9PT0gJ3N0cmluZycpIHtcblx0XHRcdFx0bGV0IHN0ckxlbmd0aCA9IHZhbHVlLmxlbmd0aFxuXHRcdFx0XHRpZiAoYnVuZGxlZFN0cmluZ3MgJiYgc3RyTGVuZ3RoID49IDQgJiYgc3RyTGVuZ3RoIDwgMHgxMDAwKSB7XG5cdFx0XHRcdFx0aWYgKChidW5kbGVkU3RyaW5ncy5zaXplICs9IHN0ckxlbmd0aCkgPiBNQVhfQlVORExFX1NJWkUpIHtcblx0XHRcdFx0XHRcdGxldCBleHRTdGFydFxuXHRcdFx0XHRcdFx0bGV0IG1heEJ5dGVzID0gKGJ1bmRsZWRTdHJpbmdzWzBdID8gYnVuZGxlZFN0cmluZ3NbMF0ubGVuZ3RoICogMyArIGJ1bmRsZWRTdHJpbmdzWzFdLmxlbmd0aCA6IDApICsgMTBcblx0XHRcdFx0XHRcdGlmIChwb3NpdGlvbiArIG1heEJ5dGVzID4gc2FmZUVuZClcblx0XHRcdFx0XHRcdFx0dGFyZ2V0ID0gbWFrZVJvb20ocG9zaXRpb24gKyBtYXhCeXRlcylcblx0XHRcdFx0XHRcdGxldCBsYXN0QnVuZGxlXG5cdFx0XHRcdFx0XHRpZiAoYnVuZGxlZFN0cmluZ3MucG9zaXRpb24pIHsgLy8gaGVyZSB3ZSB1c2UgdGhlIDB4NjIgZXh0ZW5zaW9uIHRvIHdyaXRlIHRoZSBsYXN0IGJ1bmRsZSBhbmQgcmVzZXJ2ZSBzcGFjZSBmb3IgdGhlIHJlZmVyZW5jZSBwb2ludGVyIHRvIHRoZSBuZXh0L2N1cnJlbnQgYnVuZGxlXG5cdFx0XHRcdFx0XHRcdGxhc3RCdW5kbGUgPSBidW5kbGVkU3RyaW5nc1xuXHRcdFx0XHRcdFx0XHR0YXJnZXRbcG9zaXRpb25dID0gMHhjOCAvLyBleHQgMTZcblx0XHRcdFx0XHRcdFx0cG9zaXRpb24gKz0gMyAvLyByZXNlcnZlIGZvciB0aGUgd3JpdGluZyBidW5kbGUgc2l6ZVxuXHRcdFx0XHRcdFx0XHR0YXJnZXRbcG9zaXRpb24rK10gPSAweDYyIC8vICdiJ1xuXHRcdFx0XHRcdFx0XHRleHRTdGFydCA9IHBvc2l0aW9uIC0gc3RhcnRcblx0XHRcdFx0XHRcdFx0cG9zaXRpb24gKz0gNCAvLyByZXNlcnZlIGZvciB3cml0aW5nIGJ1bmRsZSByZWZlcmVuY2Vcblx0XHRcdFx0XHRcdFx0d3JpdGVCdW5kbGVzKHN0YXJ0LCBwYWNrLCAwKSAvLyB3cml0ZSB0aGUgbGFzdCBidW5kbGVzXG5cdFx0XHRcdFx0XHRcdHRhcmdldFZpZXcuc2V0VWludDE2KGV4dFN0YXJ0ICsgc3RhcnQgLSAzLCBwb3NpdGlvbiAtIHN0YXJ0IC0gZXh0U3RhcnQpXG5cdFx0XHRcdFx0XHR9IGVsc2UgeyAvLyBoZXJlIHdlIHVzZSB0aGUgMHg2MiBleHRlbnNpb24ganVzdCB0byByZXNlcnZlIHRoZSBzcGFjZSBmb3IgdGhlIHJlZmVyZW5jZSBwb2ludGVyIHRvIHRoZSBidW5kbGUgKHdpbGwgYmUgdXBkYXRlZCBvbmNlIHRoZSBidW5kbGUgaXMgd3JpdHRlbilcblx0XHRcdFx0XHRcdFx0dGFyZ2V0W3Bvc2l0aW9uKytdID0gMHhkNiAvLyBmaXhleHQgNFxuXHRcdFx0XHRcdFx0XHR0YXJnZXRbcG9zaXRpb24rK10gPSAweDYyIC8vICdiJ1xuXHRcdFx0XHRcdFx0XHRleHRTdGFydCA9IHBvc2l0aW9uIC0gc3RhcnRcblx0XHRcdFx0XHRcdFx0cG9zaXRpb24gKz0gNCAvLyByZXNlcnZlIGZvciB3cml0aW5nIGJ1bmRsZSByZWZlcmVuY2Vcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGJ1bmRsZWRTdHJpbmdzID0gWycnLCAnJ10gLy8gY3JlYXRlIG5ldyBvbmVzXG5cdFx0XHRcdFx0XHRidW5kbGVkU3RyaW5ncy5wcmV2aW91cyA9IGxhc3RCdW5kbGU7XG5cdFx0XHRcdFx0XHRidW5kbGVkU3RyaW5ncy5zaXplID0gMFxuXHRcdFx0XHRcdFx0YnVuZGxlZFN0cmluZ3MucG9zaXRpb24gPSBleHRTdGFydFxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRsZXQgdHdvQnl0ZSA9IGhhc05vbkxhdGluLnRlc3QodmFsdWUpXG5cdFx0XHRcdFx0YnVuZGxlZFN0cmluZ3NbdHdvQnl0ZSA/IDAgOiAxXSArPSB2YWx1ZVxuXHRcdFx0XHRcdHRhcmdldFtwb3NpdGlvbisrXSA9IDB4YzFcblx0XHRcdFx0XHRwYWNrKHR3b0J5dGUgPyAtc3RyTGVuZ3RoIDogc3RyTGVuZ3RoKTtcblx0XHRcdFx0XHRyZXR1cm5cblx0XHRcdFx0fVxuXHRcdFx0XHRsZXQgaGVhZGVyU2l6ZVxuXHRcdFx0XHQvLyBmaXJzdCB3ZSBlc3RpbWF0ZSB0aGUgaGVhZGVyIHNpemUsIHNvIHdlIGNhbiB3cml0ZSB0byB0aGUgY29ycmVjdCBsb2NhdGlvblxuXHRcdFx0XHRpZiAoc3RyTGVuZ3RoIDwgMHgyMCkge1xuXHRcdFx0XHRcdGhlYWRlclNpemUgPSAxXG5cdFx0XHRcdH0gZWxzZSBpZiAoc3RyTGVuZ3RoIDwgMHgxMDApIHtcblx0XHRcdFx0XHRoZWFkZXJTaXplID0gMlxuXHRcdFx0XHR9IGVsc2UgaWYgKHN0ckxlbmd0aCA8IDB4MTAwMDApIHtcblx0XHRcdFx0XHRoZWFkZXJTaXplID0gM1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGhlYWRlclNpemUgPSA1XG5cdFx0XHRcdH1cblx0XHRcdFx0bGV0IG1heEJ5dGVzID0gc3RyTGVuZ3RoICogM1xuXHRcdFx0XHRpZiAocG9zaXRpb24gKyBtYXhCeXRlcyA+IHNhZmVFbmQpXG5cdFx0XHRcdFx0dGFyZ2V0ID0gbWFrZVJvb20ocG9zaXRpb24gKyBtYXhCeXRlcylcblxuXHRcdFx0XHRpZiAoc3RyTGVuZ3RoIDwgMHg0MCB8fCAhZW5jb2RlVXRmOCkge1xuXHRcdFx0XHRcdGxldCBpLCBjMSwgYzIsIHN0clBvc2l0aW9uID0gcG9zaXRpb24gKyBoZWFkZXJTaXplXG5cdFx0XHRcdFx0Zm9yIChpID0gMDsgaSA8IHN0ckxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdFx0XHRjMSA9IHZhbHVlLmNoYXJDb2RlQXQoaSlcblx0XHRcdFx0XHRcdGlmIChjMSA8IDB4ODApIHtcblx0XHRcdFx0XHRcdFx0dGFyZ2V0W3N0clBvc2l0aW9uKytdID0gYzFcblx0XHRcdFx0XHRcdH0gZWxzZSBpZiAoYzEgPCAweDgwMCkge1xuXHRcdFx0XHRcdFx0XHR0YXJnZXRbc3RyUG9zaXRpb24rK10gPSBjMSA+PiA2IHwgMHhjMFxuXHRcdFx0XHRcdFx0XHR0YXJnZXRbc3RyUG9zaXRpb24rK10gPSBjMSAmIDB4M2YgfCAweDgwXG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKFxuXHRcdFx0XHRcdFx0XHQoYzEgJiAweGZjMDApID09PSAweGQ4MDAgJiZcblx0XHRcdFx0XHRcdFx0KChjMiA9IHZhbHVlLmNoYXJDb2RlQXQoaSArIDEpKSAmIDB4ZmMwMCkgPT09IDB4ZGMwMFxuXHRcdFx0XHRcdFx0KSB7XG5cdFx0XHRcdFx0XHRcdGMxID0gMHgxMDAwMCArICgoYzEgJiAweDAzZmYpIDw8IDEwKSArIChjMiAmIDB4MDNmZilcblx0XHRcdFx0XHRcdFx0aSsrXG5cdFx0XHRcdFx0XHRcdHRhcmdldFtzdHJQb3NpdGlvbisrXSA9IGMxID4+IDE4IHwgMHhmMFxuXHRcdFx0XHRcdFx0XHR0YXJnZXRbc3RyUG9zaXRpb24rK10gPSBjMSA+PiAxMiAmIDB4M2YgfCAweDgwXG5cdFx0XHRcdFx0XHRcdHRhcmdldFtzdHJQb3NpdGlvbisrXSA9IGMxID4+IDYgJiAweDNmIHwgMHg4MFxuXHRcdFx0XHRcdFx0XHR0YXJnZXRbc3RyUG9zaXRpb24rK10gPSBjMSAmIDB4M2YgfCAweDgwXG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHR0YXJnZXRbc3RyUG9zaXRpb24rK10gPSBjMSA+PiAxMiB8IDB4ZTBcblx0XHRcdFx0XHRcdFx0dGFyZ2V0W3N0clBvc2l0aW9uKytdID0gYzEgPj4gNiAmIDB4M2YgfCAweDgwXG5cdFx0XHRcdFx0XHRcdHRhcmdldFtzdHJQb3NpdGlvbisrXSA9IGMxICYgMHgzZiB8IDB4ODBcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0bGVuZ3RoID0gc3RyUG9zaXRpb24gLSBwb3NpdGlvbiAtIGhlYWRlclNpemVcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRsZW5ndGggPSBlbmNvZGVVdGY4KHZhbHVlLCBwb3NpdGlvbiArIGhlYWRlclNpemUpXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAobGVuZ3RoIDwgMHgyMCkge1xuXHRcdFx0XHRcdHRhcmdldFtwb3NpdGlvbisrXSA9IDB4YTAgfCBsZW5ndGhcblx0XHRcdFx0fSBlbHNlIGlmIChsZW5ndGggPCAweDEwMCkge1xuXHRcdFx0XHRcdGlmIChoZWFkZXJTaXplIDwgMikge1xuXHRcdFx0XHRcdFx0dGFyZ2V0LmNvcHlXaXRoaW4ocG9zaXRpb24gKyAyLCBwb3NpdGlvbiArIDEsIHBvc2l0aW9uICsgMSArIGxlbmd0aClcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0dGFyZ2V0W3Bvc2l0aW9uKytdID0gMHhkOVxuXHRcdFx0XHRcdHRhcmdldFtwb3NpdGlvbisrXSA9IGxlbmd0aFxuXHRcdFx0XHR9IGVsc2UgaWYgKGxlbmd0aCA8IDB4MTAwMDApIHtcblx0XHRcdFx0XHRpZiAoaGVhZGVyU2l6ZSA8IDMpIHtcblx0XHRcdFx0XHRcdHRhcmdldC5jb3B5V2l0aGluKHBvc2l0aW9uICsgMywgcG9zaXRpb24gKyAyLCBwb3NpdGlvbiArIDIgKyBsZW5ndGgpXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHRhcmdldFtwb3NpdGlvbisrXSA9IDB4ZGFcblx0XHRcdFx0XHR0YXJnZXRbcG9zaXRpb24rK10gPSBsZW5ndGggPj4gOFxuXHRcdFx0XHRcdHRhcmdldFtwb3NpdGlvbisrXSA9IGxlbmd0aCAmIDB4ZmZcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRpZiAoaGVhZGVyU2l6ZSA8IDUpIHtcblx0XHRcdFx0XHRcdHRhcmdldC5jb3B5V2l0aGluKHBvc2l0aW9uICsgNSwgcG9zaXRpb24gKyAzLCBwb3NpdGlvbiArIDMgKyBsZW5ndGgpXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHRhcmdldFtwb3NpdGlvbisrXSA9IDB4ZGJcblx0XHRcdFx0XHR0YXJnZXRWaWV3LnNldFVpbnQzMihwb3NpdGlvbiwgbGVuZ3RoKVxuXHRcdFx0XHRcdHBvc2l0aW9uICs9IDRcblx0XHRcdFx0fVxuXHRcdFx0XHRwb3NpdGlvbiArPSBsZW5ndGhcblx0XHRcdH0gZWxzZSBpZiAodHlwZSA9PT0gJ251bWJlcicpIHtcblx0XHRcdFx0aWYgKHZhbHVlID4+PiAwID09PSB2YWx1ZSkgey8vIHBvc2l0aXZlIGludGVnZXIsIDMyLWJpdCBvciBsZXNzXG5cdFx0XHRcdFx0Ly8gcG9zaXRpdmUgdWludFxuXHRcdFx0XHRcdGlmICh2YWx1ZSA8IDB4MjAgfHwgKHZhbHVlIDwgMHg4MCAmJiB0aGlzLnVzZVJlY29yZHMgPT09IGZhbHNlKSB8fCAodmFsdWUgPCAweDQwICYmICF0aGlzLnJhbmRvbUFjY2Vzc1N0cnVjdHVyZSkpIHtcblx0XHRcdFx0XHRcdHRhcmdldFtwb3NpdGlvbisrXSA9IHZhbHVlXG5cdFx0XHRcdFx0fSBlbHNlIGlmICh2YWx1ZSA8IDB4MTAwKSB7XG5cdFx0XHRcdFx0XHR0YXJnZXRbcG9zaXRpb24rK10gPSAweGNjXG5cdFx0XHRcdFx0XHR0YXJnZXRbcG9zaXRpb24rK10gPSB2YWx1ZVxuXHRcdFx0XHRcdH0gZWxzZSBpZiAodmFsdWUgPCAweDEwMDAwKSB7XG5cdFx0XHRcdFx0XHR0YXJnZXRbcG9zaXRpb24rK10gPSAweGNkXG5cdFx0XHRcdFx0XHR0YXJnZXRbcG9zaXRpb24rK10gPSB2YWx1ZSA+PiA4XG5cdFx0XHRcdFx0XHR0YXJnZXRbcG9zaXRpb24rK10gPSB2YWx1ZSAmIDB4ZmZcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0dGFyZ2V0W3Bvc2l0aW9uKytdID0gMHhjZVxuXHRcdFx0XHRcdFx0dGFyZ2V0Vmlldy5zZXRVaW50MzIocG9zaXRpb24sIHZhbHVlKVxuXHRcdFx0XHRcdFx0cG9zaXRpb24gKz0gNFxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIGlmICh2YWx1ZSA+PiAwID09PSB2YWx1ZSkgeyAvLyBuZWdhdGl2ZSBpbnRlZ2VyXG5cdFx0XHRcdFx0aWYgKHZhbHVlID49IC0weDIwKSB7XG5cdFx0XHRcdFx0XHR0YXJnZXRbcG9zaXRpb24rK10gPSAweDEwMCArIHZhbHVlXG5cdFx0XHRcdFx0fSBlbHNlIGlmICh2YWx1ZSA+PSAtMHg4MCkge1xuXHRcdFx0XHRcdFx0dGFyZ2V0W3Bvc2l0aW9uKytdID0gMHhkMFxuXHRcdFx0XHRcdFx0dGFyZ2V0W3Bvc2l0aW9uKytdID0gdmFsdWUgKyAweDEwMFxuXHRcdFx0XHRcdH0gZWxzZSBpZiAodmFsdWUgPj0gLTB4ODAwMCkge1xuXHRcdFx0XHRcdFx0dGFyZ2V0W3Bvc2l0aW9uKytdID0gMHhkMVxuXHRcdFx0XHRcdFx0dGFyZ2V0Vmlldy5zZXRJbnQxNihwb3NpdGlvbiwgdmFsdWUpXG5cdFx0XHRcdFx0XHRwb3NpdGlvbiArPSAyXG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHRhcmdldFtwb3NpdGlvbisrXSA9IDB4ZDJcblx0XHRcdFx0XHRcdHRhcmdldFZpZXcuc2V0SW50MzIocG9zaXRpb24sIHZhbHVlKVxuXHRcdFx0XHRcdFx0cG9zaXRpb24gKz0gNFxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRsZXQgdXNlRmxvYXQzMlxuXHRcdFx0XHRcdGlmICgodXNlRmxvYXQzMiA9IHRoaXMudXNlRmxvYXQzMikgPiAwICYmIHZhbHVlIDwgMHgxMDAwMDAwMDAgJiYgdmFsdWUgPj0gLTB4ODAwMDAwMDApIHtcblx0XHRcdFx0XHRcdHRhcmdldFtwb3NpdGlvbisrXSA9IDB4Y2Fcblx0XHRcdFx0XHRcdHRhcmdldFZpZXcuc2V0RmxvYXQzMihwb3NpdGlvbiwgdmFsdWUpXG5cdFx0XHRcdFx0XHRsZXQgeFNoaWZ0ZWRcblx0XHRcdFx0XHRcdGlmICh1c2VGbG9hdDMyIDwgNCB8fFxuXHRcdFx0XHRcdFx0XHRcdC8vIHRoaXMgY2hlY2tzIGZvciByb3VuZGluZyBvZiBudW1iZXJzIHRoYXQgd2VyZSBlbmNvZGVkIGluIDMyLWJpdCBmbG9hdCB0byBuZWFyZXN0IHNpZ25pZmljYW50IGRlY2ltYWwgZGlnaXQgdGhhdCBjb3VsZCBiZSBwcmVzZXJ2ZWRcblx0XHRcdFx0XHRcdFx0XHQoKHhTaGlmdGVkID0gdmFsdWUgKiBtdWx0MTBbKCh0YXJnZXRbcG9zaXRpb25dICYgMHg3ZikgPDwgMSkgfCAodGFyZ2V0W3Bvc2l0aW9uICsgMV0gPj4gNyldKSA+PiAwKSA9PT0geFNoaWZ0ZWQpIHtcblx0XHRcdFx0XHRcdFx0cG9zaXRpb24gKz0gNFxuXHRcdFx0XHRcdFx0XHRyZXR1cm5cblx0XHRcdFx0XHRcdH0gZWxzZVxuXHRcdFx0XHRcdFx0XHRwb3NpdGlvbi0tIC8vIG1vdmUgYmFjayBpbnRvIHBvc2l0aW9uIGZvciB3cml0aW5nIGEgZG91YmxlXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHRhcmdldFtwb3NpdGlvbisrXSA9IDB4Y2Jcblx0XHRcdFx0XHR0YXJnZXRWaWV3LnNldEZsb2F0NjQocG9zaXRpb24sIHZhbHVlKVxuXHRcdFx0XHRcdHBvc2l0aW9uICs9IDhcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIGlmICh0eXBlID09PSAnb2JqZWN0JyB8fCB0eXBlID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRcdGlmICghdmFsdWUpXG5cdFx0XHRcdFx0dGFyZ2V0W3Bvc2l0aW9uKytdID0gMHhjMFxuXHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHRpZiAocmVmZXJlbmNlTWFwKSB7XG5cdFx0XHRcdFx0XHRsZXQgcmVmZXJlZSA9IHJlZmVyZW5jZU1hcC5nZXQodmFsdWUpXG5cdFx0XHRcdFx0XHRpZiAocmVmZXJlZSkge1xuXHRcdFx0XHRcdFx0XHRpZiAoIXJlZmVyZWUuaWQpIHtcblx0XHRcdFx0XHRcdFx0XHRsZXQgaWRzVG9JbnNlcnQgPSByZWZlcmVuY2VNYXAuaWRzVG9JbnNlcnQgfHwgKHJlZmVyZW5jZU1hcC5pZHNUb0luc2VydCA9IFtdKVxuXHRcdFx0XHRcdFx0XHRcdHJlZmVyZWUuaWQgPSBpZHNUb0luc2VydC5wdXNoKHJlZmVyZWUpXG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0dGFyZ2V0W3Bvc2l0aW9uKytdID0gMHhkNiAvLyBmaXhleHQgNFxuXHRcdFx0XHRcdFx0XHR0YXJnZXRbcG9zaXRpb24rK10gPSAweDcwIC8vIFwicFwiIGZvciBwb2ludGVyXG5cdFx0XHRcdFx0XHRcdHRhcmdldFZpZXcuc2V0VWludDMyKHBvc2l0aW9uLCByZWZlcmVlLmlkKVxuXHRcdFx0XHRcdFx0XHRwb3NpdGlvbiArPSA0XG5cdFx0XHRcdFx0XHRcdHJldHVyblxuXHRcdFx0XHRcdFx0fSBlbHNlXG5cdFx0XHRcdFx0XHRcdHJlZmVyZW5jZU1hcC5zZXQodmFsdWUsIHsgb2Zmc2V0OiBwb3NpdGlvbiAtIHN0YXJ0IH0pXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGxldCBjb25zdHJ1Y3RvciA9IHZhbHVlLmNvbnN0cnVjdG9yXG5cdFx0XHRcdFx0aWYgKGNvbnN0cnVjdG9yID09PSBPYmplY3QpIHtcblx0XHRcdFx0XHRcdHdyaXRlT2JqZWN0KHZhbHVlKVxuXHRcdFx0XHRcdH0gZWxzZSBpZiAoY29uc3RydWN0b3IgPT09IEFycmF5KSB7XG5cdFx0XHRcdFx0XHRwYWNrQXJyYXkodmFsdWUpXG5cdFx0XHRcdFx0fSBlbHNlIGlmIChjb25zdHJ1Y3RvciA9PT0gTWFwKSB7XG5cdFx0XHRcdFx0XHRpZiAodGhpcy5tYXBBc0VtcHR5T2JqZWN0KSB0YXJnZXRbcG9zaXRpb24rK10gPSAweDgwXG5cdFx0XHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHRcdFx0bGVuZ3RoID0gdmFsdWUuc2l6ZVxuXHRcdFx0XHRcdFx0XHRpZiAobGVuZ3RoIDwgMHgxMCkge1xuXHRcdFx0XHRcdFx0XHRcdHRhcmdldFtwb3NpdGlvbisrXSA9IDB4ODAgfCBsZW5ndGhcblx0XHRcdFx0XHRcdFx0fSBlbHNlIGlmIChsZW5ndGggPCAweDEwMDAwKSB7XG5cdFx0XHRcdFx0XHRcdFx0dGFyZ2V0W3Bvc2l0aW9uKytdID0gMHhkZVxuXHRcdFx0XHRcdFx0XHRcdHRhcmdldFtwb3NpdGlvbisrXSA9IGxlbmd0aCA+PiA4XG5cdFx0XHRcdFx0XHRcdFx0dGFyZ2V0W3Bvc2l0aW9uKytdID0gbGVuZ3RoICYgMHhmZlxuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdHRhcmdldFtwb3NpdGlvbisrXSA9IDB4ZGZcblx0XHRcdFx0XHRcdFx0XHR0YXJnZXRWaWV3LnNldFVpbnQzMihwb3NpdGlvbiwgbGVuZ3RoKVxuXHRcdFx0XHRcdFx0XHRcdHBvc2l0aW9uICs9IDRcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRmb3IgKGxldCBba2V5LCBlbnRyeVZhbHVlXSBvZiB2YWx1ZSkge1xuXHRcdFx0XHRcdFx0XHRcdHBhY2soa2V5KVxuXHRcdFx0XHRcdFx0XHRcdHBhY2soZW50cnlWYWx1ZSlcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRmb3IgKGxldCBpID0gMCwgbCA9IGV4dGVuc2lvbnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdFx0XHRcdFx0XHRcdGxldCBleHRlbnNpb25DbGFzcyA9IGV4dGVuc2lvbkNsYXNzZXNbaV1cblx0XHRcdFx0XHRcdFx0aWYgKHZhbHVlIGluc3RhbmNlb2YgZXh0ZW5zaW9uQ2xhc3MpIHtcblx0XHRcdFx0XHRcdFx0XHRsZXQgZXh0ZW5zaW9uID0gZXh0ZW5zaW9uc1tpXVxuXHRcdFx0XHRcdFx0XHRcdGlmIChleHRlbnNpb24ud3JpdGUpIHtcblx0XHRcdFx0XHRcdFx0XHRcdGlmIChleHRlbnNpb24udHlwZSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR0YXJnZXRbcG9zaXRpb24rK10gPSAweGQ0IC8vIG9uZSBieXRlIFwidGFnXCIgZXh0ZW5zaW9uXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRhcmdldFtwb3NpdGlvbisrXSA9IGV4dGVuc2lvbi50eXBlXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRhcmdldFtwb3NpdGlvbisrXSA9IDBcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdGxldCB3cml0ZVJlc3VsdCA9IGV4dGVuc2lvbi53cml0ZS5jYWxsKHRoaXMsIHZhbHVlKVxuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKHdyaXRlUmVzdWx0ID09PSB2YWx1ZSkgeyAvLyBhdm9pZCBpbmZpbml0ZSByZWN1cnNpb25cblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0cGFja0FycmF5KHZhbHVlKVxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHdyaXRlT2JqZWN0KHZhbHVlKVxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRwYWNrKHdyaXRlUmVzdWx0KVxuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuXG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdGxldCBjdXJyZW50VGFyZ2V0ID0gdGFyZ2V0XG5cdFx0XHRcdFx0XHRcdFx0bGV0IGN1cnJlbnRUYXJnZXRWaWV3ID0gdGFyZ2V0Vmlld1xuXHRcdFx0XHRcdFx0XHRcdGxldCBjdXJyZW50UG9zaXRpb24gPSBwb3NpdGlvblxuXHRcdFx0XHRcdFx0XHRcdHRhcmdldCA9IG51bGxcblx0XHRcdFx0XHRcdFx0XHRsZXQgcmVzdWx0XG5cdFx0XHRcdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdFx0XHRcdHJlc3VsdCA9IGV4dGVuc2lvbi5wYWNrLmNhbGwodGhpcywgdmFsdWUsIChzaXplKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdC8vIHJlc3RvcmUgdGFyZ2V0IGFuZCB1c2UgaXRcblx0XHRcdFx0XHRcdFx0XHRcdFx0dGFyZ2V0ID0gY3VycmVudFRhcmdldFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRjdXJyZW50VGFyZ2V0ID0gbnVsbFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRwb3NpdGlvbiArPSBzaXplXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChwb3NpdGlvbiA+IHNhZmVFbmQpXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0bWFrZVJvb20ocG9zaXRpb24pXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dGFyZ2V0LCB0YXJnZXRWaWV3LCBwb3NpdGlvbjogcG9zaXRpb24gLSBzaXplXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdH0sIHBhY2spXG5cdFx0XHRcdFx0XHRcdFx0fSBmaW5hbGx5IHtcblx0XHRcdFx0XHRcdFx0XHRcdC8vIHJlc3RvcmUgY3VycmVudCB0YXJnZXQgaW5mb3JtYXRpb24gKHVubGVzcyBhbHJlYWR5IHJlc3RvcmVkKVxuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKGN1cnJlbnRUYXJnZXQpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0dGFyZ2V0ID0gY3VycmVudFRhcmdldFxuXHRcdFx0XHRcdFx0XHRcdFx0XHR0YXJnZXRWaWV3ID0gY3VycmVudFRhcmdldFZpZXdcblx0XHRcdFx0XHRcdFx0XHRcdFx0cG9zaXRpb24gPSBjdXJyZW50UG9zaXRpb25cblx0XHRcdFx0XHRcdFx0XHRcdFx0c2FmZUVuZCA9IHRhcmdldC5sZW5ndGggLSAxMFxuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRpZiAocmVzdWx0KSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAocmVzdWx0Lmxlbmd0aCArIHBvc2l0aW9uID4gc2FmZUVuZClcblx0XHRcdFx0XHRcdFx0XHRcdFx0bWFrZVJvb20ocmVzdWx0Lmxlbmd0aCArIHBvc2l0aW9uKVxuXHRcdFx0XHRcdFx0XHRcdFx0cG9zaXRpb24gPSB3cml0ZUV4dGVuc2lvbkRhdGEocmVzdWx0LCB0YXJnZXQsIHBvc2l0aW9uLCBleHRlbnNpb24udHlwZSlcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0cmV0dXJuXG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdC8vIGNoZWNrIGlzQXJyYXkgYWZ0ZXIgZXh0ZW5zaW9ucywgYmVjYXVzZSBleHRlbnNpb25zIGNhbiBleHRlbmQgQXJyYXlcblx0XHRcdFx0XHRcdGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuXHRcdFx0XHRcdFx0XHRwYWNrQXJyYXkodmFsdWUpXG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHQvLyB1c2UgdGhpcyBhcyBhbiBhbHRlcm5hdGUgbWVjaGFuaXNtIGZvciBleHByZXNzaW5nIGhvdyB0byBzZXJpYWxpemVcblx0XHRcdFx0XHRcdFx0aWYgKHZhbHVlLnRvSlNPTikge1xuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IGpzb24gPSB2YWx1ZS50b0pTT04oKVxuXHRcdFx0XHRcdFx0XHRcdC8vIGlmIGZvciBzb21lIHJlYXNvbiB2YWx1ZS50b0pTT04gcmV0dXJucyBpdHNlbGYgaXQnbGwgbG9vcCBmb3JldmVyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKGpzb24gIT09IHZhbHVlKVxuXHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuIHBhY2soanNvbilcblx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdC8vIGlmIHRoZXJlIGlzIGEgd3JpdGVGdW5jdGlvbiwgdXNlIGl0LCBvdGhlcndpc2UganVzdCBlbmNvZGUgYXMgdW5kZWZpbmVkXG5cdFx0XHRcdFx0XHRcdGlmICh0eXBlID09PSAnZnVuY3Rpb24nKVxuXHRcdFx0XHRcdFx0XHRcdHJldHVybiBwYWNrKHRoaXMud3JpdGVGdW5jdGlvbiAmJiB0aGlzLndyaXRlRnVuY3Rpb24odmFsdWUpKTtcblxuXHRcdFx0XHRcdFx0XHQvLyBubyBleHRlbnNpb24gZm91bmQsIHdyaXRlIGFzIHBsYWluIG9iamVjdFxuXHRcdFx0XHRcdFx0XHR3cml0ZU9iamVjdCh2YWx1ZSlcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZiAodHlwZSA9PT0gJ2Jvb2xlYW4nKSB7XG5cdFx0XHRcdHRhcmdldFtwb3NpdGlvbisrXSA9IHZhbHVlID8gMHhjMyA6IDB4YzJcblx0XHRcdH0gZWxzZSBpZiAodHlwZSA9PT0gJ2JpZ2ludCcpIHtcblx0XHRcdFx0aWYgKHZhbHVlIDwgKEJpZ0ludCgxKTw8QmlnSW50KDYzKSkgJiYgdmFsdWUgPj0gLShCaWdJbnQoMSk8PEJpZ0ludCg2MykpKSB7XG5cdFx0XHRcdFx0Ly8gdXNlIGEgc2lnbmVkIGludCBhcyBsb25nIGFzIGl0IGZpdHNcblx0XHRcdFx0XHR0YXJnZXRbcG9zaXRpb24rK10gPSAweGQzXG5cdFx0XHRcdFx0dGFyZ2V0Vmlldy5zZXRCaWdJbnQ2NChwb3NpdGlvbiwgdmFsdWUpXG5cdFx0XHRcdH0gZWxzZSBpZiAodmFsdWUgPCAoQmlnSW50KDEpPDxCaWdJbnQoNjQpKSAmJiB2YWx1ZSA+IDApIHtcblx0XHRcdFx0XHQvLyBpZiB3ZSBjYW4gZml0IGFuIHVuc2lnbmVkIGludCwgdXNlIHRoYXRcblx0XHRcdFx0XHR0YXJnZXRbcG9zaXRpb24rK10gPSAweGNmXG5cdFx0XHRcdFx0dGFyZ2V0Vmlldy5zZXRCaWdVaW50NjQocG9zaXRpb24sIHZhbHVlKVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdC8vIG92ZXJmbG93XG5cdFx0XHRcdFx0aWYgKHRoaXMubGFyZ2VCaWdJbnRUb0Zsb2F0KSB7XG5cdFx0XHRcdFx0XHR0YXJnZXRbcG9zaXRpb24rK10gPSAweGNiXG5cdFx0XHRcdFx0XHR0YXJnZXRWaWV3LnNldEZsb2F0NjQocG9zaXRpb24sIE51bWJlcih2YWx1ZSkpXG5cdFx0XHRcdFx0fSBlbHNlIGlmICh0aGlzLmxhcmdlQmlnSW50VG9TdHJpbmcpIHtcblx0XHRcdFx0XHRcdHJldHVybiBwYWNrKHZhbHVlLnRvU3RyaW5nKCkpO1xuXHRcdFx0XHRcdH0gZWxzZSBpZiAodGhpcy51c2VCaWdJbnRFeHRlbnNpb24gJiYgdmFsdWUgPCBCaWdJbnQoMikqKkJpZ0ludCgxMDIzKSAmJiB2YWx1ZSA+IC0oQmlnSW50KDIpKipCaWdJbnQoMTAyMykpKSB7XG5cdFx0XHRcdFx0XHR0YXJnZXRbcG9zaXRpb24rK10gPSAweGM3XG5cdFx0XHRcdFx0XHRwb3NpdGlvbisrO1xuXHRcdFx0XHRcdFx0dGFyZ2V0W3Bvc2l0aW9uKytdID0gMHg0MiAvLyBcIkJcIiBmb3IgQmlnSW50XG5cdFx0XHRcdFx0XHRsZXQgYnl0ZXMgPSBbXTtcblx0XHRcdFx0XHRcdGxldCBhbGlnbmVkU2lnbjtcblx0XHRcdFx0XHRcdGRvIHtcblx0XHRcdFx0XHRcdFx0bGV0IGJ5dGUgPSB2YWx1ZSAmIEJpZ0ludCgweGZmKTtcblx0XHRcdFx0XHRcdFx0YWxpZ25lZFNpZ24gPSAoYnl0ZSAmIEJpZ0ludCgweDgwKSkgPT09ICh2YWx1ZSA8IEJpZ0ludCgwKSA/IEJpZ0ludCgweDgwKSA6IEJpZ0ludCgwKSk7XG5cdFx0XHRcdFx0XHRcdGJ5dGVzLnB1c2goYnl0ZSk7XG5cdFx0XHRcdFx0XHRcdHZhbHVlID4+PSBCaWdJbnQoOCk7XG5cdFx0XHRcdFx0XHR9IHdoaWxlICghKCh2YWx1ZSA9PT0gQmlnSW50KDApIHx8IHZhbHVlID09PSBCaWdJbnQoLTEpKSAmJiBhbGlnbmVkU2lnbikpO1xuXHRcdFx0XHRcdFx0dGFyZ2V0W3Bvc2l0aW9uLTJdID0gYnl0ZXMubGVuZ3RoO1xuXHRcdFx0XHRcdFx0Zm9yIChsZXQgaSA9IGJ5dGVzLmxlbmd0aDsgaSA+IDA7KSB7XG5cdFx0XHRcdFx0XHRcdHRhcmdldFtwb3NpdGlvbisrXSA9IE51bWJlcihieXRlc1stLWldKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdHJldHVyblxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHR0aHJvdyBuZXcgUmFuZ2VFcnJvcih2YWx1ZSArICcgd2FzIHRvbyBsYXJnZSB0byBmaXQgaW4gTWVzc2FnZVBhY2sgNjQtYml0IGludGVnZXIgZm9ybWF0LCB1c2UnICtcblx0XHRcdFx0XHRcdFx0JyB1c2VCaWdJbnRFeHRlbnNpb24sIG9yIHNldCBsYXJnZUJpZ0ludFRvRmxvYXQgdG8gY29udmVydCB0byBmbG9hdC02NCwgb3Igc2V0JyArXG5cdFx0XHRcdFx0XHRcdCcgbGFyZ2VCaWdJbnRUb1N0cmluZyB0byBjb252ZXJ0IHRvIHN0cmluZycpXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdHBvc2l0aW9uICs9IDhcblx0XHRcdH0gZWxzZSBpZiAodHlwZSA9PT0gJ3VuZGVmaW5lZCcpIHtcblx0XHRcdFx0aWYgKHRoaXMuZW5jb2RlVW5kZWZpbmVkQXNOaWwpXG5cdFx0XHRcdFx0dGFyZ2V0W3Bvc2l0aW9uKytdID0gMHhjMFxuXHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHR0YXJnZXRbcG9zaXRpb24rK10gPSAweGQ0IC8vIGEgbnVtYmVyIG9mIGltcGxlbWVudGF0aW9ucyB1c2UgZml4ZXh0MSB3aXRoIHR5cGUgMCwgZGF0YSAwIHRvIGRlbm90ZSB1bmRlZmluZWQsIHNvIHdlIGZvbGxvdyBzdWl0ZVxuXHRcdFx0XHRcdHRhcmdldFtwb3NpdGlvbisrXSA9IDBcblx0XHRcdFx0XHR0YXJnZXRbcG9zaXRpb24rK10gPSAwXG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRocm93IG5ldyBFcnJvcignVW5rbm93biB0eXBlOiAnICsgdHlwZSlcblx0XHRcdH1cblx0XHR9XG5cblx0XHRjb25zdCB3cml0ZVBsYWluT2JqZWN0ID0gKHRoaXMudmFyaWFibGVNYXBTaXplIHx8IHRoaXMuY29lcmNpYmxlS2V5QXNOdW1iZXIgfHwgdGhpcy5za2lwVmFsdWVzKSA/IChvYmplY3QpID0+IHtcblx0XHRcdC8vIHRoaXMgbWV0aG9kIGlzIHNsaWdodGx5IHNsb3dlciwgYnV0IGdlbmVyYXRlcyBcInByZWZlcnJlZCBzZXJpYWxpemF0aW9uXCIgKG9wdGltYWxseSBzbWFsbCBmb3Igc21hbGxlciBvYmplY3RzKVxuXHRcdFx0bGV0IGtleXM7XG5cdFx0XHRpZiAodGhpcy5za2lwVmFsdWVzKSB7XG5cdFx0XHRcdGtleXMgPSBbXTtcblx0XHRcdFx0Zm9yIChsZXQga2V5IGluIG9iamVjdCkge1xuXHRcdFx0XHRcdGlmICgodHlwZW9mIG9iamVjdC5oYXNPd25Qcm9wZXJ0eSAhPT0gJ2Z1bmN0aW9uJyB8fCBvYmplY3QuaGFzT3duUHJvcGVydHkoa2V5KSkgJiZcblx0XHRcdFx0XHRcdCF0aGlzLnNraXBWYWx1ZXMuaW5jbHVkZXMob2JqZWN0W2tleV0pKVxuXHRcdFx0XHRcdFx0a2V5cy5wdXNoKGtleSk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGtleXMgPSBPYmplY3Qua2V5cyhvYmplY3QpXG5cdFx0XHR9XG5cdFx0XHRsZXQgbGVuZ3RoID0ga2V5cy5sZW5ndGhcblx0XHRcdGlmIChsZW5ndGggPCAweDEwKSB7XG5cdFx0XHRcdHRhcmdldFtwb3NpdGlvbisrXSA9IDB4ODAgfCBsZW5ndGhcblx0XHRcdH0gZWxzZSBpZiAobGVuZ3RoIDwgMHgxMDAwMCkge1xuXHRcdFx0XHR0YXJnZXRbcG9zaXRpb24rK10gPSAweGRlXG5cdFx0XHRcdHRhcmdldFtwb3NpdGlvbisrXSA9IGxlbmd0aCA+PiA4XG5cdFx0XHRcdHRhcmdldFtwb3NpdGlvbisrXSA9IGxlbmd0aCAmIDB4ZmZcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRhcmdldFtwb3NpdGlvbisrXSA9IDB4ZGZcblx0XHRcdFx0dGFyZ2V0Vmlldy5zZXRVaW50MzIocG9zaXRpb24sIGxlbmd0aClcblx0XHRcdFx0cG9zaXRpb24gKz0gNFxuXHRcdFx0fVxuXHRcdFx0bGV0IGtleVxuXHRcdFx0aWYgKHRoaXMuY29lcmNpYmxlS2V5QXNOdW1iZXIpIHtcblx0XHRcdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuXHRcdFx0XHRcdGtleSA9IGtleXNbaV1cblx0XHRcdFx0XHRsZXQgbnVtID0gTnVtYmVyKGtleSlcblx0XHRcdFx0XHRwYWNrKGlzTmFOKG51bSkgPyBrZXkgOiBudW0pXG5cdFx0XHRcdFx0cGFjayhvYmplY3Rba2V5XSlcblx0XHRcdFx0fVxuXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdFx0cGFjayhrZXkgPSBrZXlzW2ldKVxuXHRcdFx0XHRcdHBhY2sob2JqZWN0W2tleV0pXG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9IDpcblx0XHQob2JqZWN0KSA9PiB7XG5cdFx0XHR0YXJnZXRbcG9zaXRpb24rK10gPSAweGRlIC8vIGFsd2F5cyB1c2luZyBtYXAgMTYsIHNvIHdlIGNhbiBwcmVhbGxvY2F0ZSBhbmQgc2V0IHRoZSBsZW5ndGggYWZ0ZXJ3YXJkc1xuXHRcdFx0bGV0IG9iamVjdE9mZnNldCA9IHBvc2l0aW9uIC0gc3RhcnRcblx0XHRcdHBvc2l0aW9uICs9IDJcblx0XHRcdGxldCBzaXplID0gMFxuXHRcdFx0Zm9yIChsZXQga2V5IGluIG9iamVjdCkge1xuXHRcdFx0XHRpZiAodHlwZW9mIG9iamVjdC5oYXNPd25Qcm9wZXJ0eSAhPT0gJ2Z1bmN0aW9uJyB8fCBvYmplY3QuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuXHRcdFx0XHRcdHBhY2soa2V5KVxuXHRcdFx0XHRcdHBhY2sob2JqZWN0W2tleV0pXG5cdFx0XHRcdFx0c2l6ZSsrXG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGlmIChzaXplID4gMHhmZmZmKSB7XG5cdFx0XHRcdHRocm93IG5ldyBFcnJvcignT2JqZWN0IGlzIHRvbyBsYXJnZSB0byBzZXJpYWxpemUgd2l0aCBmYXN0IDE2LWJpdCBtYXAgc2l6ZSwnICtcblx0XHRcdFx0JyB1c2UgdGhlIFwidmFyaWFibGVNYXBTaXplXCIgb3B0aW9uIHRvIHNlcmlhbGl6ZSB0aGlzIG9iamVjdCcpO1xuXHRcdFx0fVxuXHRcdFx0dGFyZ2V0W29iamVjdE9mZnNldCsrICsgc3RhcnRdID0gc2l6ZSA+PiA4XG5cdFx0XHR0YXJnZXRbb2JqZWN0T2Zmc2V0ICsgc3RhcnRdID0gc2l6ZSAmIDB4ZmZcblx0XHR9XG5cblx0XHRjb25zdCB3cml0ZVJlY29yZCA9IHRoaXMudXNlUmVjb3JkcyA9PT0gZmFsc2UgPyB3cml0ZVBsYWluT2JqZWN0IDpcblx0XHQob3B0aW9ucy5wcm9ncmVzc2l2ZVJlY29yZHMgJiYgIXVzZVR3b0J5dGVSZWNvcmRzKSA/ICAvLyB0aGlzIGlzIGFib3V0IDIlIGZhc3RlciBmb3IgaGlnaGx5IHN0YWJsZSBzdHJ1Y3R1cmVzLCBzaW5jZSBpdCBvbmx5IHJlcXVpcmVzIG9uZSBmb3ItaW4gbG9vcCAoYnV0IG11Y2ggbW9yZSBleHBlbnNpdmUgd2hlbiBuZXcgc3RydWN0dXJlIG5lZWRzIHRvIGJlIHdyaXR0ZW4pXG5cdFx0KG9iamVjdCkgPT4ge1xuXHRcdFx0bGV0IG5leHRUcmFuc2l0aW9uLCB0cmFuc2l0aW9uID0gc3RydWN0dXJlcy50cmFuc2l0aW9ucyB8fCAoc3RydWN0dXJlcy50cmFuc2l0aW9ucyA9IE9iamVjdC5jcmVhdGUobnVsbCkpXG5cdFx0XHRsZXQgb2JqZWN0T2Zmc2V0ID0gcG9zaXRpb24rKyAtIHN0YXJ0XG5cdFx0XHRsZXQgd3JvdGVLZXlzXG5cdFx0XHRmb3IgKGxldCBrZXkgaW4gb2JqZWN0KSB7XG5cdFx0XHRcdGlmICh0eXBlb2Ygb2JqZWN0Lmhhc093blByb3BlcnR5ICE9PSAnZnVuY3Rpb24nIHx8IG9iamVjdC5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XG5cdFx0XHRcdFx0bmV4dFRyYW5zaXRpb24gPSB0cmFuc2l0aW9uW2tleV1cblx0XHRcdFx0XHRpZiAobmV4dFRyYW5zaXRpb24pXG5cdFx0XHRcdFx0XHR0cmFuc2l0aW9uID0gbmV4dFRyYW5zaXRpb25cblx0XHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHRcdC8vIHJlY29yZCBkb2Vzbid0IGV4aXN0LCBjcmVhdGUgZnVsbCBuZXcgcmVjb3JkIGFuZCBpbnNlcnQgaXRcblx0XHRcdFx0XHRcdGxldCBrZXlzID0gT2JqZWN0LmtleXMob2JqZWN0KVxuXHRcdFx0XHRcdFx0bGV0IGxhc3RUcmFuc2l0aW9uID0gdHJhbnNpdGlvblxuXHRcdFx0XHRcdFx0dHJhbnNpdGlvbiA9IHN0cnVjdHVyZXMudHJhbnNpdGlvbnNcblx0XHRcdFx0XHRcdGxldCBuZXdUcmFuc2l0aW9ucyA9IDBcblx0XHRcdFx0XHRcdGZvciAobGV0IGkgPSAwLCBsID0ga2V5cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0XHRcdFx0XHRcdFx0bGV0IGtleSA9IGtleXNbaV1cblx0XHRcdFx0XHRcdFx0bmV4dFRyYW5zaXRpb24gPSB0cmFuc2l0aW9uW2tleV1cblx0XHRcdFx0XHRcdFx0aWYgKCFuZXh0VHJhbnNpdGlvbikge1xuXHRcdFx0XHRcdFx0XHRcdG5leHRUcmFuc2l0aW9uID0gdHJhbnNpdGlvbltrZXldID0gT2JqZWN0LmNyZWF0ZShudWxsKVxuXHRcdFx0XHRcdFx0XHRcdG5ld1RyYW5zaXRpb25zKytcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR0cmFuc2l0aW9uID0gbmV4dFRyYW5zaXRpb25cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGlmIChvYmplY3RPZmZzZXQgKyBzdGFydCArIDEgPT0gcG9zaXRpb24pIHtcblx0XHRcdFx0XHRcdFx0Ly8gZmlyc3Qga2V5LCBzbyB3ZSBkb24ndCBuZWVkIHRvIGluc2VydCwgd2UgY2FuIGp1c3Qgd3JpdGUgcmVjb3JkIGRpcmVjdGx5XG5cdFx0XHRcdFx0XHRcdHBvc2l0aW9uLS1cblx0XHRcdFx0XHRcdFx0bmV3UmVjb3JkKHRyYW5zaXRpb24sIGtleXMsIG5ld1RyYW5zaXRpb25zKVxuXHRcdFx0XHRcdFx0fSBlbHNlIC8vIG90aGVyd2lzZSB3ZSBuZWVkIHRvIGluc2VydCB0aGUgcmVjb3JkLCBtb3ZpbmcgZXhpc3RpbmcgZGF0YSBhZnRlciB0aGUgcmVjb3JkXG5cdFx0XHRcdFx0XHRcdGluc2VydE5ld1JlY29yZCh0cmFuc2l0aW9uLCBrZXlzLCBvYmplY3RPZmZzZXQsIG5ld1RyYW5zaXRpb25zKVxuXHRcdFx0XHRcdFx0d3JvdGVLZXlzID0gdHJ1ZVxuXHRcdFx0XHRcdFx0dHJhbnNpdGlvbiA9IGxhc3RUcmFuc2l0aW9uW2tleV1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cGFjayhvYmplY3Rba2V5XSlcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0aWYgKCF3cm90ZUtleXMpIHtcblx0XHRcdFx0bGV0IHJlY29yZElkID0gdHJhbnNpdGlvbltSRUNPUkRfU1lNQk9MXVxuXHRcdFx0XHRpZiAocmVjb3JkSWQpXG5cdFx0XHRcdFx0dGFyZ2V0W29iamVjdE9mZnNldCArIHN0YXJ0XSA9IHJlY29yZElkXG5cdFx0XHRcdGVsc2Vcblx0XHRcdFx0XHRpbnNlcnROZXdSZWNvcmQodHJhbnNpdGlvbiwgT2JqZWN0LmtleXMob2JqZWN0KSwgb2JqZWN0T2Zmc2V0LCAwKVxuXHRcdFx0fVxuXHRcdH0gOlxuXHRcdChvYmplY3QpID0+IHtcblx0XHRcdGxldCBuZXh0VHJhbnNpdGlvbiwgdHJhbnNpdGlvbiA9IHN0cnVjdHVyZXMudHJhbnNpdGlvbnMgfHwgKHN0cnVjdHVyZXMudHJhbnNpdGlvbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpKVxuXHRcdFx0bGV0IG5ld1RyYW5zaXRpb25zID0gMFxuXHRcdFx0Zm9yIChsZXQga2V5IGluIG9iamVjdCkgaWYgKHR5cGVvZiBvYmplY3QuaGFzT3duUHJvcGVydHkgIT09ICdmdW5jdGlvbicgfHwgb2JqZWN0Lmhhc093blByb3BlcnR5KGtleSkpIHtcblx0XHRcdFx0bmV4dFRyYW5zaXRpb24gPSB0cmFuc2l0aW9uW2tleV1cblx0XHRcdFx0aWYgKCFuZXh0VHJhbnNpdGlvbikge1xuXHRcdFx0XHRcdG5leHRUcmFuc2l0aW9uID0gdHJhbnNpdGlvbltrZXldID0gT2JqZWN0LmNyZWF0ZShudWxsKVxuXHRcdFx0XHRcdG5ld1RyYW5zaXRpb25zKytcblx0XHRcdFx0fVxuXHRcdFx0XHR0cmFuc2l0aW9uID0gbmV4dFRyYW5zaXRpb25cblx0XHRcdH1cblx0XHRcdGxldCByZWNvcmRJZCA9IHRyYW5zaXRpb25bUkVDT1JEX1NZTUJPTF1cblx0XHRcdGlmIChyZWNvcmRJZCkge1xuXHRcdFx0XHRpZiAocmVjb3JkSWQgPj0gMHg2MCAmJiB1c2VUd29CeXRlUmVjb3Jkcykge1xuXHRcdFx0XHRcdHRhcmdldFtwb3NpdGlvbisrXSA9ICgocmVjb3JkSWQgLT0gMHg2MCkgJiAweDFmKSArIDB4NjBcblx0XHRcdFx0XHR0YXJnZXRbcG9zaXRpb24rK10gPSByZWNvcmRJZCA+PiA1XG5cdFx0XHRcdH0gZWxzZVxuXHRcdFx0XHRcdHRhcmdldFtwb3NpdGlvbisrXSA9IHJlY29yZElkXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRuZXdSZWNvcmQodHJhbnNpdGlvbiwgdHJhbnNpdGlvbi5fX2tleXNfXyB8fCBPYmplY3Qua2V5cyhvYmplY3QpLCBuZXdUcmFuc2l0aW9ucylcblx0XHRcdH1cblx0XHRcdC8vIG5vdyB3cml0ZSB0aGUgdmFsdWVzXG5cdFx0XHRmb3IgKGxldCBrZXkgaW4gb2JqZWN0KVxuXHRcdFx0XHRpZiAodHlwZW9mIG9iamVjdC5oYXNPd25Qcm9wZXJ0eSAhPT0gJ2Z1bmN0aW9uJyB8fCBvYmplY3QuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuXHRcdFx0XHRcdHBhY2sob2JqZWN0W2tleV0pXG5cdFx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBjcmVhdGUgcmVmZXJlbmNlIHRvIHVzZVJlY29yZHMgaWYgdXNlUmVjb3JkcyBpcyBhIGZ1bmN0aW9uXG5cdFx0Y29uc3QgY2hlY2tVc2VSZWNvcmRzID0gdHlwZW9mIHRoaXMudXNlUmVjb3JkcyA9PSAnZnVuY3Rpb24nICYmIHRoaXMudXNlUmVjb3JkcztcblxuXHRcdGNvbnN0IHdyaXRlT2JqZWN0ID0gY2hlY2tVc2VSZWNvcmRzID8gKG9iamVjdCkgPT4ge1xuXHRcdFx0Y2hlY2tVc2VSZWNvcmRzKG9iamVjdCkgPyB3cml0ZVJlY29yZChvYmplY3QpIDogd3JpdGVQbGFpbk9iamVjdChvYmplY3QpXG5cdFx0fSA6IHdyaXRlUmVjb3JkXG5cblx0XHRjb25zdCBtYWtlUm9vbSA9IChlbmQpID0+IHtcblx0XHRcdGxldCBuZXdTaXplXG5cdFx0XHRpZiAoZW5kID4gMHgxMDAwMDAwKSB7XG5cdFx0XHRcdC8vIHNwZWNpYWwgaGFuZGxpbmcgZm9yIHJlYWxseSBsYXJnZSBidWZmZXJzXG5cdFx0XHRcdGlmICgoZW5kIC0gc3RhcnQpID4gTUFYX0JVRkZFUl9TSVpFKVxuXHRcdFx0XHRcdHRocm93IG5ldyBFcnJvcignUGFja2VkIGJ1ZmZlciB3b3VsZCBiZSBsYXJnZXIgdGhhbiBtYXhpbXVtIGJ1ZmZlciBzaXplJylcblx0XHRcdFx0bmV3U2l6ZSA9IE1hdGgubWluKE1BWF9CVUZGRVJfU0laRSxcblx0XHRcdFx0XHRNYXRoLnJvdW5kKE1hdGgubWF4KChlbmQgLSBzdGFydCkgKiAoZW5kID4gMHg0MDAwMDAwID8gMS4yNSA6IDIpLCAweDQwMDAwMCkgLyAweDEwMDApICogMHgxMDAwKVxuXHRcdFx0fSBlbHNlIC8vIGZhc3RlciBoYW5kbGluZyBmb3Igc21hbGxlciBidWZmZXJzXG5cdFx0XHRcdG5ld1NpemUgPSAoKE1hdGgubWF4KChlbmQgLSBzdGFydCkgPDwgMiwgdGFyZ2V0Lmxlbmd0aCAtIDEpID4+IDEyKSArIDEpIDw8IDEyXG5cdFx0XHRsZXQgbmV3QnVmZmVyID0gbmV3IEJ5dGVBcnJheUFsbG9jYXRlKG5ld1NpemUpXG5cdFx0XHR0YXJnZXRWaWV3ID0gbmV3QnVmZmVyLmRhdGFWaWV3IHx8IChuZXdCdWZmZXIuZGF0YVZpZXcgPSBuZXcgRGF0YVZpZXcobmV3QnVmZmVyLmJ1ZmZlciwgMCwgbmV3U2l6ZSkpXG5cdFx0XHRlbmQgPSBNYXRoLm1pbihlbmQsIHRhcmdldC5sZW5ndGgpXG5cdFx0XHRpZiAodGFyZ2V0LmNvcHkpXG5cdFx0XHRcdHRhcmdldC5jb3B5KG5ld0J1ZmZlciwgMCwgc3RhcnQsIGVuZClcblx0XHRcdGVsc2Vcblx0XHRcdFx0bmV3QnVmZmVyLnNldCh0YXJnZXQuc2xpY2Uoc3RhcnQsIGVuZCkpXG5cdFx0XHRwb3NpdGlvbiAtPSBzdGFydFxuXHRcdFx0c3RhcnQgPSAwXG5cdFx0XHRzYWZlRW5kID0gbmV3QnVmZmVyLmxlbmd0aCAtIDEwXG5cdFx0XHRyZXR1cm4gdGFyZ2V0ID0gbmV3QnVmZmVyXG5cdFx0fVxuXHRcdGNvbnN0IG5ld1JlY29yZCA9ICh0cmFuc2l0aW9uLCBrZXlzLCBuZXdUcmFuc2l0aW9ucykgPT4ge1xuXHRcdFx0bGV0IHJlY29yZElkID0gc3RydWN0dXJlcy5uZXh0SWRcblx0XHRcdGlmICghcmVjb3JkSWQpXG5cdFx0XHRcdHJlY29yZElkID0gMHg0MFxuXHRcdFx0aWYgKHJlY29yZElkIDwgc2hhcmVkTGltaXRJZCAmJiB0aGlzLnNob3VsZFNoYXJlU3RydWN0dXJlICYmICF0aGlzLnNob3VsZFNoYXJlU3RydWN0dXJlKGtleXMpKSB7XG5cdFx0XHRcdHJlY29yZElkID0gc3RydWN0dXJlcy5uZXh0T3duSWRcblx0XHRcdFx0aWYgKCEocmVjb3JkSWQgPCBtYXhTdHJ1Y3R1cmVJZCkpXG5cdFx0XHRcdFx0cmVjb3JkSWQgPSBzaGFyZWRMaW1pdElkXG5cdFx0XHRcdHN0cnVjdHVyZXMubmV4dE93bklkID0gcmVjb3JkSWQgKyAxXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRpZiAocmVjb3JkSWQgPj0gbWF4U3RydWN0dXJlSWQpLy8gY3ljbGUgYmFjayBhcm91bmRcblx0XHRcdFx0XHRyZWNvcmRJZCA9IHNoYXJlZExpbWl0SWRcblx0XHRcdFx0c3RydWN0dXJlcy5uZXh0SWQgPSByZWNvcmRJZCArIDFcblx0XHRcdH1cblx0XHRcdGxldCBoaWdoQnl0ZSA9IGtleXMuaGlnaEJ5dGUgPSByZWNvcmRJZCA+PSAweDYwICYmIHVzZVR3b0J5dGVSZWNvcmRzID8gKHJlY29yZElkIC0gMHg2MCkgPj4gNSA6IC0xXG5cdFx0XHR0cmFuc2l0aW9uW1JFQ09SRF9TWU1CT0xdID0gcmVjb3JkSWRcblx0XHRcdHRyYW5zaXRpb24uX19rZXlzX18gPSBrZXlzXG5cdFx0XHRzdHJ1Y3R1cmVzW3JlY29yZElkIC0gMHg0MF0gPSBrZXlzXG5cblx0XHRcdGlmIChyZWNvcmRJZCA8IHNoYXJlZExpbWl0SWQpIHtcblx0XHRcdFx0a2V5cy5pc1NoYXJlZCA9IHRydWVcblx0XHRcdFx0c3RydWN0dXJlcy5zaGFyZWRMZW5ndGggPSByZWNvcmRJZCAtIDB4M2Zcblx0XHRcdFx0aGFzU2hhcmVkVXBkYXRlID0gdHJ1ZVxuXHRcdFx0XHRpZiAoaGlnaEJ5dGUgPj0gMCkge1xuXHRcdFx0XHRcdHRhcmdldFtwb3NpdGlvbisrXSA9IChyZWNvcmRJZCAmIDB4MWYpICsgMHg2MFxuXHRcdFx0XHRcdHRhcmdldFtwb3NpdGlvbisrXSA9IGhpZ2hCeXRlXG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0dGFyZ2V0W3Bvc2l0aW9uKytdID0gcmVjb3JkSWRcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0aWYgKGhpZ2hCeXRlID49IDApIHtcblx0XHRcdFx0XHR0YXJnZXRbcG9zaXRpb24rK10gPSAweGQ1IC8vIGZpeGV4dCAyXG5cdFx0XHRcdFx0dGFyZ2V0W3Bvc2l0aW9uKytdID0gMHg3MiAvLyBcInJcIiByZWNvcmQgZGVmaW50aW9uIGV4dGVuc2lvbiB0eXBlXG5cdFx0XHRcdFx0dGFyZ2V0W3Bvc2l0aW9uKytdID0gKHJlY29yZElkICYgMHgxZikgKyAweDYwXG5cdFx0XHRcdFx0dGFyZ2V0W3Bvc2l0aW9uKytdID0gaGlnaEJ5dGVcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHR0YXJnZXRbcG9zaXRpb24rK10gPSAweGQ0IC8vIGZpeGV4dCAxXG5cdFx0XHRcdFx0dGFyZ2V0W3Bvc2l0aW9uKytdID0gMHg3MiAvLyBcInJcIiByZWNvcmQgZGVmaW50aW9uIGV4dGVuc2lvbiB0eXBlXG5cdFx0XHRcdFx0dGFyZ2V0W3Bvc2l0aW9uKytdID0gcmVjb3JkSWRcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmIChuZXdUcmFuc2l0aW9ucylcblx0XHRcdFx0XHR0cmFuc2l0aW9uc0NvdW50ICs9IHNlcmlhbGl6YXRpb25zU2luY2VUcmFuc2l0aW9uUmVidWlsZCAqIG5ld1RyYW5zaXRpb25zXG5cdFx0XHRcdC8vIHJlY29yZCB0aGUgcmVtb3ZhbCBvZiB0aGUgaWQsIHdlIGNhbiBtYWludGFpbiBvdXIgc2hhcmVkIHN0cnVjdHVyZVxuXHRcdFx0XHRpZiAocmVjb3JkSWRzVG9SZW1vdmUubGVuZ3RoID49IG1heE93blN0cnVjdHVyZXMpXG5cdFx0XHRcdFx0cmVjb3JkSWRzVG9SZW1vdmUuc2hpZnQoKVtSRUNPUkRfU1lNQk9MXSA9IDAgLy8gd2UgYXJlIGN5Y2xpbmcgYmFjayB0aHJvdWdoLCBhbmQgaGF2ZSB0byByZW1vdmUgb2xkIG9uZXNcblx0XHRcdFx0cmVjb3JkSWRzVG9SZW1vdmUucHVzaCh0cmFuc2l0aW9uKVxuXHRcdFx0XHRwYWNrKGtleXMpXG5cdFx0XHR9XG5cdFx0fVxuXHRcdGNvbnN0IGluc2VydE5ld1JlY29yZCA9ICh0cmFuc2l0aW9uLCBrZXlzLCBpbnNlcnRpb25PZmZzZXQsIG5ld1RyYW5zaXRpb25zKSA9PiB7XG5cdFx0XHRsZXQgbWFpblRhcmdldCA9IHRhcmdldFxuXHRcdFx0bGV0IG1haW5Qb3NpdGlvbiA9IHBvc2l0aW9uXG5cdFx0XHRsZXQgbWFpblNhZmVFbmQgPSBzYWZlRW5kXG5cdFx0XHRsZXQgbWFpblN0YXJ0ID0gc3RhcnRcblx0XHRcdHRhcmdldCA9IGtleXNUYXJnZXRcblx0XHRcdHBvc2l0aW9uID0gMFxuXHRcdFx0c3RhcnQgPSAwXG5cdFx0XHRpZiAoIXRhcmdldClcblx0XHRcdFx0a2V5c1RhcmdldCA9IHRhcmdldCA9IG5ldyBCeXRlQXJyYXlBbGxvY2F0ZSg4MTkyKVxuXHRcdFx0c2FmZUVuZCA9IHRhcmdldC5sZW5ndGggLSAxMFxuXHRcdFx0bmV3UmVjb3JkKHRyYW5zaXRpb24sIGtleXMsIG5ld1RyYW5zaXRpb25zKVxuXHRcdFx0a2V5c1RhcmdldCA9IHRhcmdldFxuXHRcdFx0bGV0IGtleXNQb3NpdGlvbiA9IHBvc2l0aW9uXG5cdFx0XHR0YXJnZXQgPSBtYWluVGFyZ2V0XG5cdFx0XHRwb3NpdGlvbiA9IG1haW5Qb3NpdGlvblxuXHRcdFx0c2FmZUVuZCA9IG1haW5TYWZlRW5kXG5cdFx0XHRzdGFydCA9IG1haW5TdGFydFxuXHRcdFx0aWYgKGtleXNQb3NpdGlvbiA+IDEpIHtcblx0XHRcdFx0bGV0IG5ld0VuZCA9IHBvc2l0aW9uICsga2V5c1Bvc2l0aW9uIC0gMVxuXHRcdFx0XHRpZiAobmV3RW5kID4gc2FmZUVuZClcblx0XHRcdFx0XHRtYWtlUm9vbShuZXdFbmQpXG5cdFx0XHRcdGxldCBpbnNlcnRpb25Qb3NpdGlvbiA9IGluc2VydGlvbk9mZnNldCArIHN0YXJ0XG5cdFx0XHRcdHRhcmdldC5jb3B5V2l0aGluKGluc2VydGlvblBvc2l0aW9uICsga2V5c1Bvc2l0aW9uLCBpbnNlcnRpb25Qb3NpdGlvbiArIDEsIHBvc2l0aW9uKVxuXHRcdFx0XHR0YXJnZXQuc2V0KGtleXNUYXJnZXQuc2xpY2UoMCwga2V5c1Bvc2l0aW9uKSwgaW5zZXJ0aW9uUG9zaXRpb24pXG5cdFx0XHRcdHBvc2l0aW9uID0gbmV3RW5kXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0YXJnZXRbaW5zZXJ0aW9uT2Zmc2V0ICsgc3RhcnRdID0ga2V5c1RhcmdldFswXVxuXHRcdFx0fVxuXHRcdH1cblx0XHRjb25zdCB3cml0ZVN0cnVjdCA9IChvYmplY3QpID0+IHtcblx0XHRcdGxldCBuZXdQb3NpdGlvbiA9IHdyaXRlU3RydWN0U2xvdHMob2JqZWN0LCB0YXJnZXQsIHN0YXJ0LCBwb3NpdGlvbiwgc3RydWN0dXJlcywgbWFrZVJvb20sICh2YWx1ZSwgbmV3UG9zaXRpb24sIG5vdGlmeVNoYXJlZFVwZGF0ZSkgPT4ge1xuXHRcdFx0XHRpZiAobm90aWZ5U2hhcmVkVXBkYXRlKVxuXHRcdFx0XHRcdHJldHVybiBoYXNTaGFyZWRVcGRhdGUgPSB0cnVlO1xuXHRcdFx0XHRwb3NpdGlvbiA9IG5ld1Bvc2l0aW9uO1xuXHRcdFx0XHRsZXQgc3RhcnRUYXJnZXQgPSB0YXJnZXQ7XG5cdFx0XHRcdHBhY2sodmFsdWUpO1xuXHRcdFx0XHRyZXNldFN0cnVjdHVyZXMoKTtcblx0XHRcdFx0aWYgKHN0YXJ0VGFyZ2V0ICE9PSB0YXJnZXQpIHtcblx0XHRcdFx0XHRyZXR1cm4geyBwb3NpdGlvbiwgdGFyZ2V0VmlldywgdGFyZ2V0IH07IC8vIGluZGljYXRlIHRoZSBidWZmZXIgd2FzIHJlLWFsbG9jYXRlZFxuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiBwb3NpdGlvbjtcblx0XHRcdH0sIHRoaXMpO1xuXHRcdFx0aWYgKG5ld1Bvc2l0aW9uID09PSAwKSAvLyBiYWlsIGFuZCBnbyB0byBhIG1zZ3BhY2sgb2JqZWN0XG5cdFx0XHRcdHJldHVybiB3cml0ZU9iamVjdChvYmplY3QpO1xuXHRcdFx0cG9zaXRpb24gPSBuZXdQb3NpdGlvbjtcblx0XHR9XG5cdH1cblx0dXNlQnVmZmVyKGJ1ZmZlcikge1xuXHRcdC8vIHRoaXMgbWVhbnMgd2UgYXJlIGZpbmlzaGVkIHVzaW5nIG91ciBvd24gYnVmZmVyIGFuZCB3ZSBjYW4gd3JpdGUgb3ZlciBpdCBzYWZlbHlcblx0XHR0YXJnZXQgPSBidWZmZXJcblx0XHR0YXJnZXQuZGF0YVZpZXcgfHwgKHRhcmdldC5kYXRhVmlldyA9IG5ldyBEYXRhVmlldyh0YXJnZXQuYnVmZmVyLCB0YXJnZXQuYnl0ZU9mZnNldCwgdGFyZ2V0LmJ5dGVMZW5ndGgpKVxuXHRcdHBvc2l0aW9uID0gMFxuXHR9XG5cdHNldCBwb3NpdGlvbiAodmFsdWUpIHtcblx0XHRwb3NpdGlvbiA9IHZhbHVlO1xuXHR9XG5cdGdldCBwb3NpdGlvbigpIHtcblx0XHRyZXR1cm4gcG9zaXRpb247XG5cdH1cblx0Y2xlYXJTaGFyZWREYXRhKCkge1xuXHRcdGlmICh0aGlzLnN0cnVjdHVyZXMpXG5cdFx0XHR0aGlzLnN0cnVjdHVyZXMgPSBbXVxuXHRcdGlmICh0aGlzLnR5cGVkU3RydWN0cylcblx0XHRcdHRoaXMudHlwZWRTdHJ1Y3RzID0gW11cblx0fVxufVxuXG5leHRlbnNpb25DbGFzc2VzID0gWyBEYXRlLCBTZXQsIEVycm9yLCBSZWdFeHAsIEFycmF5QnVmZmVyLCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoVWludDhBcnJheS5wcm90b3R5cGUpLmNvbnN0cnVjdG9yIC8qVHlwZWRBcnJheSovLCBDMVR5cGUgXVxuZXh0ZW5zaW9ucyA9IFt7XG5cdHBhY2soZGF0ZSwgYWxsb2NhdGVGb3JXcml0ZSwgcGFjaykge1xuXHRcdGxldCBzZWNvbmRzID0gZGF0ZS5nZXRUaW1lKCkgLyAxMDAwXG5cdFx0aWYgKCh0aGlzLnVzZVRpbWVzdGFtcDMyIHx8IGRhdGUuZ2V0TWlsbGlzZWNvbmRzKCkgPT09IDApICYmIHNlY29uZHMgPj0gMCAmJiBzZWNvbmRzIDwgMHgxMDAwMDAwMDApIHtcblx0XHRcdC8vIFRpbWVzdGFtcCAzMlxuXHRcdFx0bGV0IHsgdGFyZ2V0LCB0YXJnZXRWaWV3LCBwb3NpdGlvbn0gPSBhbGxvY2F0ZUZvcldyaXRlKDYpXG5cdFx0XHR0YXJnZXRbcG9zaXRpb24rK10gPSAweGQ2XG5cdFx0XHR0YXJnZXRbcG9zaXRpb24rK10gPSAweGZmXG5cdFx0XHR0YXJnZXRWaWV3LnNldFVpbnQzMihwb3NpdGlvbiwgc2Vjb25kcylcblx0XHR9IGVsc2UgaWYgKHNlY29uZHMgPiAwICYmIHNlY29uZHMgPCAweDEwMDAwMDAwMCkge1xuXHRcdFx0Ly8gVGltZXN0YW1wIDY0XG5cdFx0XHRsZXQgeyB0YXJnZXQsIHRhcmdldFZpZXcsIHBvc2l0aW9ufSA9IGFsbG9jYXRlRm9yV3JpdGUoMTApXG5cdFx0XHR0YXJnZXRbcG9zaXRpb24rK10gPSAweGQ3XG5cdFx0XHR0YXJnZXRbcG9zaXRpb24rK10gPSAweGZmXG5cdFx0XHR0YXJnZXRWaWV3LnNldFVpbnQzMihwb3NpdGlvbiwgZGF0ZS5nZXRNaWxsaXNlY29uZHMoKSAqIDQwMDAwMDAgKyAoKHNlY29uZHMgLyAxMDAwIC8gMHgxMDAwMDAwMDApID4+IDApKVxuXHRcdFx0dGFyZ2V0Vmlldy5zZXRVaW50MzIocG9zaXRpb24gKyA0LCBzZWNvbmRzKVxuXHRcdH0gZWxzZSBpZiAoaXNOYU4oc2Vjb25kcykpIHtcblx0XHRcdGlmICh0aGlzLm9uSW52YWxpZERhdGUpIHtcblx0XHRcdFx0YWxsb2NhdGVGb3JXcml0ZSgwKVxuXHRcdFx0XHRyZXR1cm4gcGFjayh0aGlzLm9uSW52YWxpZERhdGUoKSlcblx0XHRcdH1cblx0XHRcdC8vIEludGVudGlvbmFsbHkgaW52YWxpZCB0aW1lc3RhbXBcblx0XHRcdGxldCB7IHRhcmdldCwgdGFyZ2V0VmlldywgcG9zaXRpb259ID0gYWxsb2NhdGVGb3JXcml0ZSgzKVxuXHRcdFx0dGFyZ2V0W3Bvc2l0aW9uKytdID0gMHhkNFxuXHRcdFx0dGFyZ2V0W3Bvc2l0aW9uKytdID0gMHhmZlxuXHRcdFx0dGFyZ2V0W3Bvc2l0aW9uKytdID0gMHhmZlxuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBUaW1lc3RhbXAgOTZcblx0XHRcdGxldCB7IHRhcmdldCwgdGFyZ2V0VmlldywgcG9zaXRpb259ID0gYWxsb2NhdGVGb3JXcml0ZSgxNSlcblx0XHRcdHRhcmdldFtwb3NpdGlvbisrXSA9IDB4Yzdcblx0XHRcdHRhcmdldFtwb3NpdGlvbisrXSA9IDEyXG5cdFx0XHR0YXJnZXRbcG9zaXRpb24rK10gPSAweGZmXG5cdFx0XHR0YXJnZXRWaWV3LnNldFVpbnQzMihwb3NpdGlvbiwgZGF0ZS5nZXRNaWxsaXNlY29uZHMoKSAqIDEwMDAwMDApXG5cdFx0XHR0YXJnZXRWaWV3LnNldEJpZ0ludDY0KHBvc2l0aW9uICsgNCwgQmlnSW50KE1hdGguZmxvb3Ioc2Vjb25kcykpKVxuXHRcdH1cblx0fVxufSwge1xuXHRwYWNrKHNldCwgYWxsb2NhdGVGb3JXcml0ZSwgcGFjaykge1xuXHRcdGlmICh0aGlzLnNldEFzRW1wdHlPYmplY3QpIHtcblx0XHRcdGFsbG9jYXRlRm9yV3JpdGUoMCk7XG5cdFx0XHRyZXR1cm4gcGFjayh7fSlcblx0XHR9XG5cdFx0bGV0IGFycmF5ID0gQXJyYXkuZnJvbShzZXQpXG5cdFx0bGV0IHsgdGFyZ2V0LCBwb3NpdGlvbn0gPSBhbGxvY2F0ZUZvcldyaXRlKHRoaXMubW9yZVR5cGVzID8gMyA6IDApXG5cdFx0aWYgKHRoaXMubW9yZVR5cGVzKSB7XG5cdFx0XHR0YXJnZXRbcG9zaXRpb24rK10gPSAweGQ0XG5cdFx0XHR0YXJnZXRbcG9zaXRpb24rK10gPSAweDczIC8vICdzJyBmb3IgU2V0XG5cdFx0XHR0YXJnZXRbcG9zaXRpb24rK10gPSAwXG5cdFx0fVxuXHRcdHBhY2soYXJyYXkpXG5cdH1cbn0sIHtcblx0cGFjayhlcnJvciwgYWxsb2NhdGVGb3JXcml0ZSwgcGFjaykge1xuXHRcdGxldCB7IHRhcmdldCwgcG9zaXRpb259ID0gYWxsb2NhdGVGb3JXcml0ZSh0aGlzLm1vcmVUeXBlcyA/IDMgOiAwKVxuXHRcdGlmICh0aGlzLm1vcmVUeXBlcykge1xuXHRcdFx0dGFyZ2V0W3Bvc2l0aW9uKytdID0gMHhkNFxuXHRcdFx0dGFyZ2V0W3Bvc2l0aW9uKytdID0gMHg2NSAvLyAnZScgZm9yIGVycm9yXG5cdFx0XHR0YXJnZXRbcG9zaXRpb24rK10gPSAwXG5cdFx0fVxuXHRcdHBhY2soWyBlcnJvci5uYW1lLCBlcnJvci5tZXNzYWdlLCBlcnJvci5jYXVzZSBdKVxuXHR9XG59LCB7XG5cdHBhY2socmVnZXgsIGFsbG9jYXRlRm9yV3JpdGUsIHBhY2spIHtcblx0XHRsZXQgeyB0YXJnZXQsIHBvc2l0aW9ufSA9IGFsbG9jYXRlRm9yV3JpdGUodGhpcy5tb3JlVHlwZXMgPyAzIDogMClcblx0XHRpZiAodGhpcy5tb3JlVHlwZXMpIHtcblx0XHRcdHRhcmdldFtwb3NpdGlvbisrXSA9IDB4ZDRcblx0XHRcdHRhcmdldFtwb3NpdGlvbisrXSA9IDB4NzggLy8gJ3gnIGZvciByZWdlWHBcblx0XHRcdHRhcmdldFtwb3NpdGlvbisrXSA9IDBcblx0XHR9XG5cdFx0cGFjayhbIHJlZ2V4LnNvdXJjZSwgcmVnZXguZmxhZ3MgXSlcblx0fVxufSwge1xuXHRwYWNrKGFycmF5QnVmZmVyLCBhbGxvY2F0ZUZvcldyaXRlKSB7XG5cdFx0aWYgKHRoaXMubW9yZVR5cGVzKVxuXHRcdFx0d3JpdGVFeHRCdWZmZXIoYXJyYXlCdWZmZXIsIDB4MTAsIGFsbG9jYXRlRm9yV3JpdGUpXG5cdFx0ZWxzZVxuXHRcdFx0d3JpdGVCdWZmZXIoaGFzTm9kZUJ1ZmZlciA/IEJ1ZmZlci5mcm9tKGFycmF5QnVmZmVyKSA6IG5ldyBVaW50OEFycmF5KGFycmF5QnVmZmVyKSwgYWxsb2NhdGVGb3JXcml0ZSlcblx0fVxufSwge1xuXHRwYWNrKHR5cGVkQXJyYXksIGFsbG9jYXRlRm9yV3JpdGUpIHtcblx0XHRsZXQgY29uc3RydWN0b3IgPSB0eXBlZEFycmF5LmNvbnN0cnVjdG9yXG5cdFx0aWYgKGNvbnN0cnVjdG9yICE9PSBCeXRlQXJyYXkgJiYgdGhpcy5tb3JlVHlwZXMpXG5cdFx0XHR3cml0ZUV4dEJ1ZmZlcih0eXBlZEFycmF5LCB0eXBlZEFycmF5cy5pbmRleE9mKGNvbnN0cnVjdG9yLm5hbWUpLCBhbGxvY2F0ZUZvcldyaXRlKVxuXHRcdGVsc2Vcblx0XHRcdHdyaXRlQnVmZmVyKHR5cGVkQXJyYXksIGFsbG9jYXRlRm9yV3JpdGUpXG5cdH1cbn0sIHtcblx0cGFjayhjMSwgYWxsb2NhdGVGb3JXcml0ZSkgeyAvLyBzcGVjaWZpYyAweEMxIG9iamVjdFxuXHRcdGxldCB7IHRhcmdldCwgcG9zaXRpb259ID0gYWxsb2NhdGVGb3JXcml0ZSgxKVxuXHRcdHRhcmdldFtwb3NpdGlvbl0gPSAweGMxXG5cdH1cbn1dXG5cbmZ1bmN0aW9uIHdyaXRlRXh0QnVmZmVyKHR5cGVkQXJyYXksIHR5cGUsIGFsbG9jYXRlRm9yV3JpdGUsIGVuY29kZSkge1xuXHRsZXQgbGVuZ3RoID0gdHlwZWRBcnJheS5ieXRlTGVuZ3RoXG5cdGlmIChsZW5ndGggKyAxIDwgMHgxMDApIHtcblx0XHR2YXIgeyB0YXJnZXQsIHBvc2l0aW9uIH0gPSBhbGxvY2F0ZUZvcldyaXRlKDQgKyBsZW5ndGgpXG5cdFx0dGFyZ2V0W3Bvc2l0aW9uKytdID0gMHhjN1xuXHRcdHRhcmdldFtwb3NpdGlvbisrXSA9IGxlbmd0aCArIDFcblx0fSBlbHNlIGlmIChsZW5ndGggKyAxIDwgMHgxMDAwMCkge1xuXHRcdHZhciB7IHRhcmdldCwgcG9zaXRpb24gfSA9IGFsbG9jYXRlRm9yV3JpdGUoNSArIGxlbmd0aClcblx0XHR0YXJnZXRbcG9zaXRpb24rK10gPSAweGM4XG5cdFx0dGFyZ2V0W3Bvc2l0aW9uKytdID0gKGxlbmd0aCArIDEpID4+IDhcblx0XHR0YXJnZXRbcG9zaXRpb24rK10gPSAobGVuZ3RoICsgMSkgJiAweGZmXG5cdH0gZWxzZSB7XG5cdFx0dmFyIHsgdGFyZ2V0LCBwb3NpdGlvbiwgdGFyZ2V0VmlldyB9ID0gYWxsb2NhdGVGb3JXcml0ZSg3ICsgbGVuZ3RoKVxuXHRcdHRhcmdldFtwb3NpdGlvbisrXSA9IDB4Yzlcblx0XHR0YXJnZXRWaWV3LnNldFVpbnQzMihwb3NpdGlvbiwgbGVuZ3RoICsgMSkgLy8gcGx1cyBvbmUgZm9yIHRoZSB0eXBlIGJ5dGVcblx0XHRwb3NpdGlvbiArPSA0XG5cdH1cblx0dGFyZ2V0W3Bvc2l0aW9uKytdID0gMHg3NCAvLyBcInRcIiBmb3IgdHlwZWQgYXJyYXlcblx0dGFyZ2V0W3Bvc2l0aW9uKytdID0gdHlwZVxuXHRpZiAoIXR5cGVkQXJyYXkuYnVmZmVyKSB0eXBlZEFycmF5ID0gbmV3IFVpbnQ4QXJyYXkodHlwZWRBcnJheSlcblx0dGFyZ2V0LnNldChuZXcgVWludDhBcnJheSh0eXBlZEFycmF5LmJ1ZmZlciwgdHlwZWRBcnJheS5ieXRlT2Zmc2V0LCB0eXBlZEFycmF5LmJ5dGVMZW5ndGgpLCBwb3NpdGlvbilcbn1cbmZ1bmN0aW9uIHdyaXRlQnVmZmVyKGJ1ZmZlciwgYWxsb2NhdGVGb3JXcml0ZSkge1xuXHRsZXQgbGVuZ3RoID0gYnVmZmVyLmJ5dGVMZW5ndGhcblx0dmFyIHRhcmdldCwgcG9zaXRpb25cblx0aWYgKGxlbmd0aCA8IDB4MTAwKSB7XG5cdFx0dmFyIHsgdGFyZ2V0LCBwb3NpdGlvbiB9ID0gYWxsb2NhdGVGb3JXcml0ZShsZW5ndGggKyAyKVxuXHRcdHRhcmdldFtwb3NpdGlvbisrXSA9IDB4YzRcblx0XHR0YXJnZXRbcG9zaXRpb24rK10gPSBsZW5ndGhcblx0fSBlbHNlIGlmIChsZW5ndGggPCAweDEwMDAwKSB7XG5cdFx0dmFyIHsgdGFyZ2V0LCBwb3NpdGlvbiB9ID0gYWxsb2NhdGVGb3JXcml0ZShsZW5ndGggKyAzKVxuXHRcdHRhcmdldFtwb3NpdGlvbisrXSA9IDB4YzVcblx0XHR0YXJnZXRbcG9zaXRpb24rK10gPSBsZW5ndGggPj4gOFxuXHRcdHRhcmdldFtwb3NpdGlvbisrXSA9IGxlbmd0aCAmIDB4ZmZcblx0fSBlbHNlIHtcblx0XHR2YXIgeyB0YXJnZXQsIHBvc2l0aW9uLCB0YXJnZXRWaWV3IH0gPSBhbGxvY2F0ZUZvcldyaXRlKGxlbmd0aCArIDUpXG5cdFx0dGFyZ2V0W3Bvc2l0aW9uKytdID0gMHhjNlxuXHRcdHRhcmdldFZpZXcuc2V0VWludDMyKHBvc2l0aW9uLCBsZW5ndGgpXG5cdFx0cG9zaXRpb24gKz0gNFxuXHR9XG5cdHRhcmdldC5zZXQoYnVmZmVyLCBwb3NpdGlvbilcbn1cblxuZnVuY3Rpb24gd3JpdGVFeHRlbnNpb25EYXRhKHJlc3VsdCwgdGFyZ2V0LCBwb3NpdGlvbiwgdHlwZSkge1xuXHRsZXQgbGVuZ3RoID0gcmVzdWx0Lmxlbmd0aFxuXHRzd2l0Y2ggKGxlbmd0aCkge1xuXHRcdGNhc2UgMTpcblx0XHRcdHRhcmdldFtwb3NpdGlvbisrXSA9IDB4ZDRcblx0XHRcdGJyZWFrXG5cdFx0Y2FzZSAyOlxuXHRcdFx0dGFyZ2V0W3Bvc2l0aW9uKytdID0gMHhkNVxuXHRcdFx0YnJlYWtcblx0XHRjYXNlIDQ6XG5cdFx0XHR0YXJnZXRbcG9zaXRpb24rK10gPSAweGQ2XG5cdFx0XHRicmVha1xuXHRcdGNhc2UgODpcblx0XHRcdHRhcmdldFtwb3NpdGlvbisrXSA9IDB4ZDdcblx0XHRcdGJyZWFrXG5cdFx0Y2FzZSAxNjpcblx0XHRcdHRhcmdldFtwb3NpdGlvbisrXSA9IDB4ZDhcblx0XHRcdGJyZWFrXG5cdFx0ZGVmYXVsdDpcblx0XHRcdGlmIChsZW5ndGggPCAweDEwMCkge1xuXHRcdFx0XHR0YXJnZXRbcG9zaXRpb24rK10gPSAweGM3XG5cdFx0XHRcdHRhcmdldFtwb3NpdGlvbisrXSA9IGxlbmd0aFxuXHRcdFx0fSBlbHNlIGlmIChsZW5ndGggPCAweDEwMDAwKSB7XG5cdFx0XHRcdHRhcmdldFtwb3NpdGlvbisrXSA9IDB4Yzhcblx0XHRcdFx0dGFyZ2V0W3Bvc2l0aW9uKytdID0gbGVuZ3RoID4+IDhcblx0XHRcdFx0dGFyZ2V0W3Bvc2l0aW9uKytdID0gbGVuZ3RoICYgMHhmZlxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGFyZ2V0W3Bvc2l0aW9uKytdID0gMHhjOVxuXHRcdFx0XHR0YXJnZXRbcG9zaXRpb24rK10gPSBsZW5ndGggPj4gMjRcblx0XHRcdFx0dGFyZ2V0W3Bvc2l0aW9uKytdID0gKGxlbmd0aCA+PiAxNikgJiAweGZmXG5cdFx0XHRcdHRhcmdldFtwb3NpdGlvbisrXSA9IChsZW5ndGggPj4gOCkgJiAweGZmXG5cdFx0XHRcdHRhcmdldFtwb3NpdGlvbisrXSA9IGxlbmd0aCAmIDB4ZmZcblx0XHRcdH1cblx0fVxuXHR0YXJnZXRbcG9zaXRpb24rK10gPSB0eXBlXG5cdHRhcmdldC5zZXQocmVzdWx0LCBwb3NpdGlvbilcblx0cG9zaXRpb24gKz0gbGVuZ3RoXG5cdHJldHVybiBwb3NpdGlvblxufVxuXG5mdW5jdGlvbiBpbnNlcnRJZHMoc2VyaWFsaXplZCwgaWRzVG9JbnNlcnQpIHtcblx0Ly8gaW5zZXJ0IHRoZSBpZHMgdGhhdCBuZWVkIHRvIGJlIHJlZmVyZW5jZWQgZm9yIHN0cnVjdHVyZWQgY2xvbmVzXG5cdGxldCBuZXh0SWRcblx0bGV0IGRpc3RhbmNlVG9Nb3ZlID0gaWRzVG9JbnNlcnQubGVuZ3RoICogNlxuXHRsZXQgbGFzdEVuZCA9IHNlcmlhbGl6ZWQubGVuZ3RoIC0gZGlzdGFuY2VUb01vdmVcblx0d2hpbGUgKG5leHRJZCA9IGlkc1RvSW5zZXJ0LnBvcCgpKSB7XG5cdFx0bGV0IG9mZnNldCA9IG5leHRJZC5vZmZzZXRcblx0XHRsZXQgaWQgPSBuZXh0SWQuaWRcblx0XHRzZXJpYWxpemVkLmNvcHlXaXRoaW4ob2Zmc2V0ICsgZGlzdGFuY2VUb01vdmUsIG9mZnNldCwgbGFzdEVuZClcblx0XHRkaXN0YW5jZVRvTW92ZSAtPSA2XG5cdFx0bGV0IHBvc2l0aW9uID0gb2Zmc2V0ICsgZGlzdGFuY2VUb01vdmVcblx0XHRzZXJpYWxpemVkW3Bvc2l0aW9uKytdID0gMHhkNlxuXHRcdHNlcmlhbGl6ZWRbcG9zaXRpb24rK10gPSAweDY5IC8vICdpJ1xuXHRcdHNlcmlhbGl6ZWRbcG9zaXRpb24rK10gPSBpZCA+PiAyNFxuXHRcdHNlcmlhbGl6ZWRbcG9zaXRpb24rK10gPSAoaWQgPj4gMTYpICYgMHhmZlxuXHRcdHNlcmlhbGl6ZWRbcG9zaXRpb24rK10gPSAoaWQgPj4gOCkgJiAweGZmXG5cdFx0c2VyaWFsaXplZFtwb3NpdGlvbisrXSA9IGlkICYgMHhmZlxuXHRcdGxhc3RFbmQgPSBvZmZzZXRcblx0fVxuXHRyZXR1cm4gc2VyaWFsaXplZFxufVxuXG5mdW5jdGlvbiB3cml0ZUJ1bmRsZXMoc3RhcnQsIHBhY2ssIGluY3JlbWVudFBvc2l0aW9uKSB7XG5cdGlmIChidW5kbGVkU3RyaW5ncy5sZW5ndGggPiAwKSB7XG5cdFx0dGFyZ2V0Vmlldy5zZXRVaW50MzIoYnVuZGxlZFN0cmluZ3MucG9zaXRpb24gKyBzdGFydCwgcG9zaXRpb24gKyBpbmNyZW1lbnRQb3NpdGlvbiAtIGJ1bmRsZWRTdHJpbmdzLnBvc2l0aW9uIC0gc3RhcnQpXG5cdFx0YnVuZGxlZFN0cmluZ3Muc3RyaW5nc1Bvc2l0aW9uID0gcG9zaXRpb24gLSBzdGFydDtcblx0XHRsZXQgd3JpdGVTdHJpbmdzID0gYnVuZGxlZFN0cmluZ3Ncblx0XHRidW5kbGVkU3RyaW5ncyA9IG51bGxcblx0XHRwYWNrKHdyaXRlU3RyaW5nc1swXSlcblx0XHRwYWNrKHdyaXRlU3RyaW5nc1sxXSlcblx0fVxufVxuXG5leHBvcnQgZnVuY3Rpb24gYWRkRXh0ZW5zaW9uKGV4dGVuc2lvbikge1xuXHRpZiAoZXh0ZW5zaW9uLkNsYXNzKSB7XG5cdFx0aWYgKCFleHRlbnNpb24ucGFjayAmJiAhZXh0ZW5zaW9uLndyaXRlKVxuXHRcdFx0dGhyb3cgbmV3IEVycm9yKCdFeHRlbnNpb24gaGFzIG5vIHBhY2sgb3Igd3JpdGUgZnVuY3Rpb24nKVxuXHRcdGlmIChleHRlbnNpb24ucGFjayAmJiAhZXh0ZW5zaW9uLnR5cGUpXG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ0V4dGVuc2lvbiBoYXMgbm8gdHlwZSAobnVtZXJpYyBjb2RlIHRvIGlkZW50aWZ5IHRoZSBleHRlbnNpb24pJylcblx0XHRleHRlbnNpb25DbGFzc2VzLnVuc2hpZnQoZXh0ZW5zaW9uLkNsYXNzKVxuXHRcdGV4dGVuc2lvbnMudW5zaGlmdChleHRlbnNpb24pXG5cdH1cblx0dW5wYWNrQWRkRXh0ZW5zaW9uKGV4dGVuc2lvbilcbn1cbmZ1bmN0aW9uIHByZXBhcmVTdHJ1Y3R1cmVzKHN0cnVjdHVyZXMsIHBhY2tyKSB7XG5cdHN0cnVjdHVyZXMuaXNDb21wYXRpYmxlID0gKGV4aXN0aW5nU3RydWN0dXJlcykgPT4ge1xuXHRcdGxldCBjb21wYXRpYmxlID0gIWV4aXN0aW5nU3RydWN0dXJlcyB8fCAoKHBhY2tyLmxhc3ROYW1lZFN0cnVjdHVyZXNMZW5ndGggfHwgMCkgPT09IGV4aXN0aW5nU3RydWN0dXJlcy5sZW5ndGgpXG5cdFx0aWYgKCFjb21wYXRpYmxlKSAvLyB3ZSB3YW50IHRvIG1lcmdlIHRoZXNlIGV4aXN0aW5nIHN0cnVjdHVyZXMgaW1tZWRpYXRlbHkgc2luY2Ugd2UgYWxyZWFkeSBoYXZlIGl0IGFuZCB3ZSBhcmUgaW4gdGhlIHJpZ2h0IHRyYW5zYWN0aW9uXG5cdFx0XHRwYWNrci5fbWVyZ2VTdHJ1Y3R1cmVzKGV4aXN0aW5nU3RydWN0dXJlcyk7XG5cdFx0cmV0dXJuIGNvbXBhdGlibGU7XG5cdH1cblx0cmV0dXJuIHN0cnVjdHVyZXNcbn1cbmV4cG9ydCBmdW5jdGlvbiBzZXRXcml0ZVN0cnVjdFNsb3RzKHdyaXRlU2xvdHMsIG1ha2VTdHJ1Y3R1cmVzKSB7XG5cdHdyaXRlU3RydWN0U2xvdHMgPSB3cml0ZVNsb3RzO1xuXHRwcmVwYXJlU3RydWN0dXJlcyA9IG1ha2VTdHJ1Y3R1cmVzO1xufVxuXG5sZXQgZGVmYXVsdFBhY2tyID0gbmV3IFBhY2tyKHsgdXNlUmVjb3JkczogZmFsc2UgfSlcbmV4cG9ydCBjb25zdCBwYWNrID0gZGVmYXVsdFBhY2tyLnBhY2tcbmV4cG9ydCBjb25zdCBlbmNvZGUgPSBkZWZhdWx0UGFja3IucGFja1xuZXhwb3J0IGNvbnN0IEVuY29kZXIgPSBQYWNrclxuZXhwb3J0IHsgRkxPQVQzMl9PUFRJT05TIH0gZnJvbSAnLi91bnBhY2suanMnXG5pbXBvcnQgeyBGTE9BVDMyX09QVElPTlMgfSBmcm9tICcuL3VucGFjay5qcydcbmV4cG9ydCBjb25zdCB7IE5FVkVSLCBBTFdBWVMsIERFQ0lNQUxfUk9VTkQsIERFQ0lNQUxfRklUIH0gPSBGTE9BVDMyX09QVElPTlNcbmV4cG9ydCBjb25zdCBSRVVTRV9CVUZGRVJfTU9ERSA9IDUxMlxuZXhwb3J0IGNvbnN0IFJFU0VUX0JVRkZFUl9NT0RFID0gMTAyNFxuZXhwb3J0IGNvbnN0IFJFU0VSVkVfU1RBUlRfU1BBQ0UgPSAyMDQ4Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/node_modules/@livestore/utils/node_modules/msgpackr/pack.js\n");

/***/ }),

/***/ "(rsc)/./src/node_modules/@livestore/utils/node_modules/msgpackr/stream.js":
/*!***************************************************************************!*\
  !*** ./src/node_modules/@livestore/utils/node_modules/msgpackr/stream.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PackrStream: () => (/* binding */ PackrStream),\n/* harmony export */   UnpackrStream: () => (/* binding */ UnpackrStream)\n/* harmony export */ });\n/* harmony import */ var stream__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! stream */ \"stream\");\n/* harmony import */ var _pack_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./pack.js */ \"(rsc)/./src/node_modules/@livestore/utils/node_modules/msgpackr/pack.js\");\n/* harmony import */ var _unpack_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./unpack.js */ \"(rsc)/./src/node_modules/@livestore/utils/node_modules/msgpackr/unpack.js\");\n\n\n\nvar DEFAULT_OPTIONS = {objectMode: true}\n\nclass PackrStream extends stream__WEBPACK_IMPORTED_MODULE_0__.Transform {\n\tconstructor(options) {\n\t\tif (!options)\n\t\t\toptions = {}\n\t\toptions.writableObjectMode = true\n\t\tsuper(options)\n\t\toptions.sequential = true\n\t\tthis.packr = options.packr || new _pack_js__WEBPACK_IMPORTED_MODULE_1__.Packr(options)\n\t}\n\t_transform(value, encoding, callback) {\n\t\tthis.push(this.packr.pack(value))\n\t\tcallback()\n\t}\n}\n\nclass UnpackrStream extends stream__WEBPACK_IMPORTED_MODULE_0__.Transform {\n\tconstructor(options) {\n\t\tif (!options)\n\t\t\toptions = {}\n\t\toptions.objectMode = true\n\t\tsuper(options)\n\t\toptions.structures = []\n\t\tthis.unpackr = options.unpackr || new _unpack_js__WEBPACK_IMPORTED_MODULE_2__.Unpackr(options)\n\t}\n\t_transform(chunk, encoding, callback) {\n\t\tif (this.incompleteBuffer) {\n\t\t\tchunk = Buffer.concat([this.incompleteBuffer, chunk])\n\t\t\tthis.incompleteBuffer = null\n\t\t}\n\t\tlet values\n\t\ttry {\n\t\t\tvalues = this.unpackr.unpackMultiple(chunk)\n\t\t} catch(error) {\n\t\t\tif (error.incomplete) {\n\t\t\t\tthis.incompleteBuffer = chunk.slice(error.lastPosition)\n\t\t\t\tvalues = error.values\n\t\t\t}\n\t\t\telse\n\t\t\t\tthrow error\n\t\t} finally {\n\t\t\tfor (let value of values || []) {\n\t\t\t\tif (value === null)\n\t\t\t\t\tvalue = this.getNullValue()\n\t\t\t\tthis.push(value)\n\t\t\t}\n\t\t}\n\t\tif (callback) callback()\n\t}\n\tgetNullValue() {\n\t\treturn Symbol.for(null)\n\t}\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbm9kZV9tb2R1bGVzL0BsaXZlc3RvcmUvdXRpbHMvbm9kZV9tb2R1bGVzL21zZ3BhY2tyL3N0cmVhbS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFrQztBQUNEO0FBQ0k7QUFDckMsdUJBQXVCOztBQUVoQiwwQkFBMEIsNkNBQVM7QUFDMUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLDJDQUFLO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFTyw0QkFBNEIsNkNBQVM7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDLCtDQUFPO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYW5hY29uZGEtYXNzZXNtZW50LTEvLi9zcmMvbm9kZV9tb2R1bGVzL0BsaXZlc3RvcmUvdXRpbHMvbm9kZV9tb2R1bGVzL21zZ3BhY2tyL3N0cmVhbS5qcz9lODQ0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFRyYW5zZm9ybSB9IGZyb20gJ3N0cmVhbSdcbmltcG9ydCB7IFBhY2tyIH0gZnJvbSAnLi9wYWNrLmpzJ1xuaW1wb3J0IHsgVW5wYWNrciB9IGZyb20gJy4vdW5wYWNrLmpzJ1xudmFyIERFRkFVTFRfT1BUSU9OUyA9IHtvYmplY3RNb2RlOiB0cnVlfVxuXG5leHBvcnQgY2xhc3MgUGFja3JTdHJlYW0gZXh0ZW5kcyBUcmFuc2Zvcm0ge1xuXHRjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG5cdFx0aWYgKCFvcHRpb25zKVxuXHRcdFx0b3B0aW9ucyA9IHt9XG5cdFx0b3B0aW9ucy53cml0YWJsZU9iamVjdE1vZGUgPSB0cnVlXG5cdFx0c3VwZXIob3B0aW9ucylcblx0XHRvcHRpb25zLnNlcXVlbnRpYWwgPSB0cnVlXG5cdFx0dGhpcy5wYWNrciA9IG9wdGlvbnMucGFja3IgfHwgbmV3IFBhY2tyKG9wdGlvbnMpXG5cdH1cblx0X3RyYW5zZm9ybSh2YWx1ZSwgZW5jb2RpbmcsIGNhbGxiYWNrKSB7XG5cdFx0dGhpcy5wdXNoKHRoaXMucGFja3IucGFjayh2YWx1ZSkpXG5cdFx0Y2FsbGJhY2soKVxuXHR9XG59XG5cbmV4cG9ydCBjbGFzcyBVbnBhY2tyU3RyZWFtIGV4dGVuZHMgVHJhbnNmb3JtIHtcblx0Y29uc3RydWN0b3Iob3B0aW9ucykge1xuXHRcdGlmICghb3B0aW9ucylcblx0XHRcdG9wdGlvbnMgPSB7fVxuXHRcdG9wdGlvbnMub2JqZWN0TW9kZSA9IHRydWVcblx0XHRzdXBlcihvcHRpb25zKVxuXHRcdG9wdGlvbnMuc3RydWN0dXJlcyA9IFtdXG5cdFx0dGhpcy51bnBhY2tyID0gb3B0aW9ucy51bnBhY2tyIHx8IG5ldyBVbnBhY2tyKG9wdGlvbnMpXG5cdH1cblx0X3RyYW5zZm9ybShjaHVuaywgZW5jb2RpbmcsIGNhbGxiYWNrKSB7XG5cdFx0aWYgKHRoaXMuaW5jb21wbGV0ZUJ1ZmZlcikge1xuXHRcdFx0Y2h1bmsgPSBCdWZmZXIuY29uY2F0KFt0aGlzLmluY29tcGxldGVCdWZmZXIsIGNodW5rXSlcblx0XHRcdHRoaXMuaW5jb21wbGV0ZUJ1ZmZlciA9IG51bGxcblx0XHR9XG5cdFx0bGV0IHZhbHVlc1xuXHRcdHRyeSB7XG5cdFx0XHR2YWx1ZXMgPSB0aGlzLnVucGFja3IudW5wYWNrTXVsdGlwbGUoY2h1bmspXG5cdFx0fSBjYXRjaChlcnJvcikge1xuXHRcdFx0aWYgKGVycm9yLmluY29tcGxldGUpIHtcblx0XHRcdFx0dGhpcy5pbmNvbXBsZXRlQnVmZmVyID0gY2h1bmsuc2xpY2UoZXJyb3IubGFzdFBvc2l0aW9uKVxuXHRcdFx0XHR2YWx1ZXMgPSBlcnJvci52YWx1ZXNcblx0XHRcdH1cblx0XHRcdGVsc2Vcblx0XHRcdFx0dGhyb3cgZXJyb3Jcblx0XHR9IGZpbmFsbHkge1xuXHRcdFx0Zm9yIChsZXQgdmFsdWUgb2YgdmFsdWVzIHx8IFtdKSB7XG5cdFx0XHRcdGlmICh2YWx1ZSA9PT0gbnVsbClcblx0XHRcdFx0XHR2YWx1ZSA9IHRoaXMuZ2V0TnVsbFZhbHVlKClcblx0XHRcdFx0dGhpcy5wdXNoKHZhbHVlKVxuXHRcdFx0fVxuXHRcdH1cblx0XHRpZiAoY2FsbGJhY2spIGNhbGxiYWNrKClcblx0fVxuXHRnZXROdWxsVmFsdWUoKSB7XG5cdFx0cmV0dXJuIFN5bWJvbC5mb3IobnVsbClcblx0fVxufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/node_modules/@livestore/utils/node_modules/msgpackr/stream.js\n");

/***/ }),

/***/ "(rsc)/./src/node_modules/@livestore/utils/node_modules/msgpackr/struct.js":
/*!***************************************************************************!*\
  !*** ./src/node_modules/@livestore/utils/node_modules/msgpackr/struct.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _pack_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./pack.js */ \"(rsc)/./src/node_modules/@livestore/utils/node_modules/msgpackr/pack.js\");\n/* harmony import */ var _unpack_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./unpack.js */ \"(rsc)/./src/node_modules/@livestore/utils/node_modules/msgpackr/unpack.js\");\n\n/*\n\nFor \"any-data\":\n32-55 - record with record ids (-32)\n56 - 8-bit record ids\n57 - 16-bit record ids\n58 - 24-bit record ids\n59 - 32-bit record ids\n250-255 - followed by typed fixed width values\n64-250 msgpackr/cbor/paired data\narrays and strings within arrays are handled by paired encoding\n\nStructure encoding:\n(type - string (using paired encoding))+\n\nType encoding\nencoding byte - fixed width byte - next reference+\n\nEncoding byte:\nfirst bit:\n\t0 - inline\n\t1 - reference\nsecond bit:\n\t0 - data or number\n\t1 - string\n\nremaining bits:\n\tcharacter encoding - ISO-8859-x\n\n\nnull (0xff)+ 0xf6\nnull (0xff)+ 0xf7\n\n*/\n\n\n\n\nconst ASCII = 3; // the MIBenum from https://www.iana.org/assignments/character-sets/character-sets.xhtml (and other character encodings could be referenced by MIBenum)\nconst NUMBER = 0;\nconst UTF8 = 2;\nconst OBJECT_DATA = 1;\nconst DATE = 16;\nconst TYPE_NAMES = ['num', 'object', 'string', 'ascii'];\nTYPE_NAMES[DATE] = 'date';\nconst float32Headers = [false, true, true, false, false, true, true, false];\nlet evalSupported;\ntry {\n\tnew Function('');\n\tevalSupported = true;\n} catch(error) {\n\t// if eval variants are not supported, do not create inline object readers ever\n}\n\nlet updatedPosition;\nconst hasNodeBuffer = typeof Buffer !== 'undefined'\nlet textEncoder, currentSource;\ntry {\n\ttextEncoder = new TextEncoder()\n} catch (error) {}\nconst encodeUtf8 = hasNodeBuffer ? function(target, string, position) {\n\treturn target.utf8Write(string, position, target.byteLength - position)\n} : (textEncoder && textEncoder.encodeInto) ?\n\tfunction(target, string, position) {\n\t\treturn textEncoder.encodeInto(string, target.subarray(position)).written\n\t} : false\n\nconst TYPE = Symbol('type');\nconst PARENT = Symbol('parent');\n(0,_pack_js__WEBPACK_IMPORTED_MODULE_0__.setWriteStructSlots)(writeStruct, prepareStructures);\nfunction writeStruct(object, target, encodingStart, position, structures, makeRoom, pack, packr) {\n\tlet typedStructs = packr.typedStructs || (packr.typedStructs = []);\n\t// note that we rely on pack.js to load stored structures before we get to this point\n\tlet targetView = target.dataView;\n\tlet refsStartPosition = (typedStructs.lastStringStart || 100) + position;\n\tlet safeEnd = target.length - 10;\n\tlet start = position;\n\tif (position > safeEnd) {\n\t\ttarget = makeRoom(position);\n\t\ttargetView = target.dataView;\n\t\tposition -= encodingStart;\n\t\tstart -= encodingStart;\n\t\trefsStartPosition -= encodingStart;\n\t\tencodingStart = 0;\n\t\tsafeEnd = target.length - 10;\n\t}\n\n\tlet refOffset, refPosition = refsStartPosition;\n\n\tlet transition = typedStructs.transitions || (typedStructs.transitions = Object.create(null));\n\tlet nextId = typedStructs.nextId || typedStructs.length;\n\tlet headerSize =\n\t\tnextId < 0xf ? 1 :\n\t\t\tnextId < 0xf0 ? 2 :\n\t\t\t\tnextId < 0xf000 ? 3 :\n\t\t\t\t\tnextId < 0xf00000 ? 4 : 0;\n\tif (headerSize === 0)\n\t\treturn 0;\n\tposition += headerSize;\n\tlet queuedReferences = [];\n\tlet usedAscii0;\n\tlet keyIndex = 0;\n\tfor (let key in object) {\n\t\tlet value = object[key];\n\t\tlet nextTransition = transition[key];\n\t\tif (!nextTransition) {\n\t\t\ttransition[key] = nextTransition = {\n\t\t\t\tkey,\n\t\t\t\tparent: transition,\n\t\t\t\tenumerationOffset: 0,\n\t\t\t\tascii0: null,\n\t\t\t\tascii8: null,\n\t\t\t\tnum8: null,\n\t\t\t\tstring16: null,\n\t\t\t\tobject16: null,\n\t\t\t\tnum32: null,\n\t\t\t\tfloat64: null,\n\t\t\t\tdate64: null\n\t\t\t};\n\t\t}\n\t\tif (position > safeEnd) {\n\t\t\ttarget = makeRoom(position);\n\t\t\ttargetView = target.dataView;\n\t\t\tposition -= encodingStart;\n\t\t\tstart -= encodingStart;\n\t\t\trefsStartPosition -= encodingStart;\n\t\t\trefPosition -= encodingStart;\n\t\t\tencodingStart = 0;\n\t\t\tsafeEnd = target.length - 10\n\t\t}\n\t\tswitch (typeof value) {\n\t\t\tcase 'number':\n\t\t\t\tlet number = value;\n\t\t\t\t// first check to see if we are using a lot of ids and should default to wide/common format\n\t\t\t\tif (nextId < 200 || !nextTransition.num64) {\n\t\t\t\t\tif (number >> 0 === number && number < 0x20000000 && number > -0x1f000000) {\n\t\t\t\t\t\tif (number < 0xf6 && number >= 0 && (nextTransition.num8 && !(nextId > 200 && nextTransition.num32) || number < 0x20 && !nextTransition.num32)) {\n\t\t\t\t\t\t\ttransition = nextTransition.num8 || createTypeTransition(nextTransition, NUMBER, 1);\n\t\t\t\t\t\t\ttarget[position++] = number;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ttransition = nextTransition.num32 || createTypeTransition(nextTransition, NUMBER, 4);\n\t\t\t\t\t\t\ttargetView.setUint32(position, number, true);\n\t\t\t\t\t\t\tposition += 4;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t} else if (number < 0x100000000 && number >= -0x80000000) {\n\t\t\t\t\t\ttargetView.setFloat32(position, number, true);\n\t\t\t\t\t\tif (float32Headers[target[position + 3] >>> 5]) {\n\t\t\t\t\t\t\tlet xShifted\n\t\t\t\t\t\t\t// this checks for rounding of numbers that were encoded in 32-bit float to nearest significant decimal digit that could be preserved\n\t\t\t\t\t\t\tif (((xShifted = number * _unpack_js__WEBPACK_IMPORTED_MODULE_1__.mult10[((target[position + 3] & 0x7f) << 1) | (target[position + 2] >> 7)]) >> 0) === xShifted) {\n\t\t\t\t\t\t\t\ttransition = nextTransition.num32 || createTypeTransition(nextTransition, NUMBER, 4);\n\t\t\t\t\t\t\t\tposition += 4;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\ttransition = nextTransition.num64 || createTypeTransition(nextTransition, NUMBER, 8);\n\t\t\t\ttargetView.setFloat64(position, number, true);\n\t\t\t\tposition += 8;\n\t\t\t\tbreak;\n\t\t\tcase 'string':\n\t\t\t\tlet strLength = value.length;\n\t\t\t\trefOffset = refPosition - refsStartPosition;\n\t\t\t\tif ((strLength << 2) + refPosition > safeEnd) {\n\t\t\t\t\ttarget = makeRoom((strLength << 2) + refPosition);\n\t\t\t\t\ttargetView = target.dataView;\n\t\t\t\t\tposition -= encodingStart;\n\t\t\t\t\tstart -= encodingStart;\n\t\t\t\t\trefsStartPosition -= encodingStart;\n\t\t\t\t\trefPosition -= encodingStart;\n\t\t\t\t\tencodingStart = 0;\n\t\t\t\t\tsafeEnd = target.length - 10\n\t\t\t\t}\n\t\t\t\tif (strLength > ((0xff00 + refOffset) >> 2)) {\n\t\t\t\t\tqueuedReferences.push(key, value, position - start);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tlet isNotAscii\n\t\t\t\tlet strStart = refPosition;\n\t\t\t\tif (strLength < 0x40) {\n\t\t\t\t\tlet i, c1, c2;\n\t\t\t\t\tfor (i = 0; i < strLength; i++) {\n\t\t\t\t\t\tc1 = value.charCodeAt(i)\n\t\t\t\t\t\tif (c1 < 0x80) {\n\t\t\t\t\t\t\ttarget[refPosition++] = c1\n\t\t\t\t\t\t} else if (c1 < 0x800) {\n\t\t\t\t\t\t\tisNotAscii = true;\n\t\t\t\t\t\t\ttarget[refPosition++] = c1 >> 6 | 0xc0\n\t\t\t\t\t\t\ttarget[refPosition++] = c1 & 0x3f | 0x80\n\t\t\t\t\t\t} else if (\n\t\t\t\t\t\t\t(c1 & 0xfc00) === 0xd800 &&\n\t\t\t\t\t\t\t((c2 = value.charCodeAt(i + 1)) & 0xfc00) === 0xdc00\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tisNotAscii = true;\n\t\t\t\t\t\t\tc1 = 0x10000 + ((c1 & 0x03ff) << 10) + (c2 & 0x03ff)\n\t\t\t\t\t\t\ti++\n\t\t\t\t\t\t\ttarget[refPosition++] = c1 >> 18 | 0xf0\n\t\t\t\t\t\t\ttarget[refPosition++] = c1 >> 12 & 0x3f | 0x80\n\t\t\t\t\t\t\ttarget[refPosition++] = c1 >> 6 & 0x3f | 0x80\n\t\t\t\t\t\t\ttarget[refPosition++] = c1 & 0x3f | 0x80\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tisNotAscii = true;\n\t\t\t\t\t\t\ttarget[refPosition++] = c1 >> 12 | 0xe0\n\t\t\t\t\t\t\ttarget[refPosition++] = c1 >> 6 & 0x3f | 0x80\n\t\t\t\t\t\t\ttarget[refPosition++] = c1 & 0x3f | 0x80\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\trefPosition += encodeUtf8(target, value, refPosition);\n\t\t\t\t\tisNotAscii = refPosition - strStart > strLength;\n\t\t\t\t}\n\t\t\t\tif (refOffset < 0xa0 || (refOffset < 0xf6 && (nextTransition.ascii8 || nextTransition.string8))) {\n\t\t\t\t\t// short strings\n\t\t\t\t\tif (isNotAscii) {\n\t\t\t\t\t\tif (!(transition = nextTransition.string8)) {\n\t\t\t\t\t\t\tif (typedStructs.length > 10 && (transition = nextTransition.ascii8)) {\n\t\t\t\t\t\t\t\t// we can safely change ascii to utf8 in place since they are compatible\n\t\t\t\t\t\t\t\ttransition.__type = UTF8;\n\t\t\t\t\t\t\t\tnextTransition.ascii8 = null;\n\t\t\t\t\t\t\t\tnextTransition.string8 = transition;\n\t\t\t\t\t\t\t\tpack(null, 0, true); // special call to notify that structures have been updated\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\ttransition = createTypeTransition(nextTransition, UTF8, 1);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (refOffset === 0 && !usedAscii0) {\n\t\t\t\t\t\tusedAscii0 = true;\n\t\t\t\t\t\ttransition = nextTransition.ascii0 || createTypeTransition(nextTransition, ASCII, 0);\n\t\t\t\t\t\tbreak; // don't increment position\n\t\t\t\t\t}// else ascii:\n\t\t\t\t\telse if (!(transition = nextTransition.ascii8) && !(typedStructs.length > 10 && (transition = nextTransition.string8)))\n\t\t\t\t\t\ttransition = createTypeTransition(nextTransition, ASCII, 1);\n\t\t\t\t\ttarget[position++] = refOffset;\n\t\t\t\t} else {\n\t\t\t\t\t// TODO: Enable ascii16 at some point, but get the logic right\n\t\t\t\t\t//if (isNotAscii)\n\t\t\t\t\t\ttransition = nextTransition.string16 || createTypeTransition(nextTransition, UTF8, 2);\n\t\t\t\t\t//else\n\t\t\t\t\t\t//transition = nextTransition.ascii16 || createTypeTransition(nextTransition, ASCII, 2);\n\t\t\t\t\ttargetView.setUint16(position, refOffset, true);\n\t\t\t\t\tposition += 2;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'object':\n\t\t\t\tif (value) {\n\t\t\t\t\tif (value.constructor === Date) {\n\t\t\t\t\t\ttransition = nextTransition.date64 || createTypeTransition(nextTransition, DATE, 8);\n\t\t\t\t\t\ttargetView.setFloat64(position, value.getTime(), true);\n\t\t\t\t\t\tposition += 8;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tqueuedReferences.push(key, value, keyIndex);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t} else { // null\n\t\t\t\t\tnextTransition = anyType(nextTransition, position, targetView, -10); // match CBOR with this\n\t\t\t\t\tif (nextTransition) {\n\t\t\t\t\t\ttransition = nextTransition;\n\t\t\t\t\t\tposition = updatedPosition;\n\t\t\t\t\t} else queuedReferences.push(key, value, keyIndex);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'boolean':\n\t\t\t\ttransition = nextTransition.num8 || nextTransition.ascii8 || createTypeTransition(nextTransition, NUMBER, 1);\n\t\t\t\ttarget[position++] = value ? 0xf9 : 0xf8; // match CBOR with these\n\t\t\t\tbreak;\n\t\t\tcase 'undefined':\n\t\t\t\tnextTransition = anyType(nextTransition, position, targetView, -9); // match CBOR with this\n\t\t\t\tif (nextTransition) {\n\t\t\t\t\ttransition = nextTransition;\n\t\t\t\t\tposition = updatedPosition;\n\t\t\t\t} else queuedReferences.push(key, value, keyIndex);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tqueuedReferences.push(key, value, keyIndex);\n\t\t}\n\t\tkeyIndex++;\n\t}\n\n\tfor (let i = 0, l = queuedReferences.length; i < l;) {\n\t\tlet key = queuedReferences[i++];\n\t\tlet value = queuedReferences[i++];\n\t\tlet propertyIndex = queuedReferences[i++];\n\t\tlet nextTransition = transition[key];\n\t\tif (!nextTransition) {\n\t\t\ttransition[key] = nextTransition = {\n\t\t\t\tkey,\n\t\t\t\tparent: transition,\n\t\t\t\tenumerationOffset: propertyIndex - keyIndex,\n\t\t\t\tascii0: null,\n\t\t\t\tascii8: null,\n\t\t\t\tnum8: null,\n\t\t\t\tstring16: null,\n\t\t\t\tobject16: null,\n\t\t\t\tnum32: null,\n\t\t\t\tfloat64: null\n\t\t\t};\n\t\t}\n\t\tlet newPosition;\n\t\tif (value) {\n\t\t\t/*if (typeof value === 'string') { // TODO: we could re-enable long strings\n\t\t\t\tif (position + value.length * 3 > safeEnd) {\n\t\t\t\t\ttarget = makeRoom(position + value.length * 3);\n\t\t\t\t\tposition -= start;\n\t\t\t\t\ttargetView = target.dataView;\n\t\t\t\t\tstart = 0;\n\t\t\t\t}\n\t\t\t\tnewPosition = position + target.utf8Write(value, position, 0xffffffff);\n\t\t\t} else { */\n\t\t\tlet size;\n\t\t\trefOffset = refPosition - refsStartPosition;\n\t\t\tif (refOffset < 0xff00) {\n\t\t\t\ttransition = nextTransition.object16;\n\t\t\t\tif (transition)\n\t\t\t\t\tsize = 2;\n\t\t\t\telse if ((transition = nextTransition.object32))\n\t\t\t\t\tsize = 4;\n\t\t\t\telse {\n\t\t\t\t\ttransition = createTypeTransition(nextTransition, OBJECT_DATA, 2);\n\t\t\t\t\tsize = 2;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\ttransition = nextTransition.object32 || createTypeTransition(nextTransition, OBJECT_DATA, 4);\n\t\t\t\tsize = 4;\n\t\t\t}\n\t\t\tnewPosition = pack(value, refPosition);\n\t\t\t//}\n\t\t\tif (typeof newPosition === 'object') {\n\t\t\t\t// re-allocated\n\t\t\t\trefPosition = newPosition.position;\n\t\t\t\ttargetView = newPosition.targetView;\n\t\t\t\ttarget = newPosition.target;\n\t\t\t\trefsStartPosition -= encodingStart;\n\t\t\t\tposition -= encodingStart;\n\t\t\t\tstart -= encodingStart;\n\t\t\t\tencodingStart = 0;\n\t\t\t} else\n\t\t\t\trefPosition = newPosition;\n\t\t\tif (size === 2) {\n\t\t\t\ttargetView.setUint16(position, refOffset, true);\n\t\t\t\tposition += 2;\n\t\t\t} else {\n\t\t\t\ttargetView.setUint32(position, refOffset, true);\n\t\t\t\tposition += 4;\n\t\t\t}\n\t\t} else { // null or undefined\n\t\t\ttransition = nextTransition.object16 || createTypeTransition(nextTransition, OBJECT_DATA, 2);\n\t\t\ttargetView.setInt16(position, value === null ? -10 : -9, true);\n\t\t\tposition += 2;\n\t\t}\n\t\tkeyIndex++;\n\t}\n\n\n\tlet recordId = transition[_pack_js__WEBPACK_IMPORTED_MODULE_0__.RECORD_SYMBOL];\n\tif (recordId == null) {\n\t\trecordId = packr.typedStructs.length;\n\t\tlet structure = [];\n\t\tlet nextTransition = transition;\n\t\tlet key, type;\n\t\twhile ((type = nextTransition.__type) !== undefined) {\n\t\t\tlet size = nextTransition.__size;\n\t\t\tnextTransition = nextTransition.__parent;\n\t\t\tkey = nextTransition.key;\n\t\t\tlet property = [type, size, key];\n\t\t\tif (nextTransition.enumerationOffset)\n\t\t\t\tproperty.push(nextTransition.enumerationOffset);\n\t\t\tstructure.push(property);\n\t\t\tnextTransition = nextTransition.parent;\n\t\t}\n\t\tstructure.reverse();\n\t\ttransition[_pack_js__WEBPACK_IMPORTED_MODULE_0__.RECORD_SYMBOL] = recordId;\n\t\tpackr.typedStructs[recordId] = structure;\n\t\tpack(null, 0, true); // special call to notify that structures have been updated\n\t}\n\n\n\tswitch (headerSize) {\n\t\tcase 1:\n\t\t\tif (recordId >= 0x10) return 0;\n\t\t\ttarget[start] = recordId + 0x20;\n\t\t\tbreak;\n\t\tcase 2:\n\t\t\tif (recordId >= 0x100) return 0;\n\t\t\ttarget[start] = 0x38;\n\t\t\ttarget[start + 1] = recordId;\n\t\t\tbreak;\n\t\tcase 3:\n\t\t\tif (recordId >= 0x10000) return 0;\n\t\t\ttarget[start] = 0x39;\n\t\t\ttargetView.setUint16(start + 1, recordId, true);\n\t\t\tbreak;\n\t\tcase 4:\n\t\t\tif (recordId >= 0x1000000) return 0;\n\t\t\ttargetView.setUint32(start, (recordId << 8) + 0x3a, true);\n\t\t\tbreak;\n\t}\n\n\tif (position < refsStartPosition) {\n\t\tif (refsStartPosition === refPosition)\n\t\t\treturn position; // no refs\n\t\t// adjust positioning\n\t\ttarget.copyWithin(position, refsStartPosition, refPosition);\n\t\trefPosition += position - refsStartPosition;\n\t\ttypedStructs.lastStringStart = position - start;\n\t} else if (position > refsStartPosition) {\n\t\tif (refsStartPosition === refPosition)\n\t\t\treturn position; // no refs\n\t\ttypedStructs.lastStringStart = position - start;\n\t\treturn writeStruct(object, target, encodingStart, start, structures, makeRoom, pack, packr);\n\t}\n\treturn refPosition;\n}\nfunction anyType(transition, position, targetView, value) {\n\tlet nextTransition;\n\tif ((nextTransition = transition.ascii8 || transition.num8)) {\n\t\ttargetView.setInt8(position, value, true);\n\t\tupdatedPosition = position + 1;\n\t\treturn nextTransition;\n\t}\n\tif ((nextTransition = transition.string16 || transition.object16)) {\n\t\ttargetView.setInt16(position, value, true);\n\t\tupdatedPosition = position + 2;\n\t\treturn nextTransition;\n\t}\n\tif (nextTransition = transition.num32) {\n\t\ttargetView.setUint32(position, 0xe0000100 + value, true);\n\t\tupdatedPosition = position + 4;\n\t\treturn nextTransition;\n\t}\n\t// transition.float64\n\tif (nextTransition = transition.num64) {\n\t\ttargetView.setFloat64(position, NaN, true);\n\t\ttargetView.setInt8(position, value);\n\t\tupdatedPosition = position + 8;\n\t\treturn nextTransition;\n\t}\n\tupdatedPosition = position;\n\t// TODO: can we do an \"any\" type where we defer the decision?\n\treturn;\n}\nfunction createTypeTransition(transition, type, size) {\n\tlet typeName = TYPE_NAMES[type] + (size << 3);\n\tlet newTransition = transition[typeName] || (transition[typeName] = Object.create(null));\n\tnewTransition.__type = type;\n\tnewTransition.__size = size;\n\tnewTransition.__parent = transition;\n\treturn newTransition;\n}\nfunction onLoadedStructures(sharedData) {\n\tif (!(sharedData instanceof Map))\n\t\treturn sharedData;\n\tlet typed = sharedData.get('typed') || [];\n\tif (Object.isFrozen(typed))\n\t\ttyped = typed.map(structure => structure.slice(0));\n\tlet named = sharedData.get('named');\n\tlet transitions = Object.create(null);\n\tfor (let i = 0, l = typed.length; i < l; i++) {\n\t\tlet structure = typed[i];\n\t\tlet transition = transitions;\n\t\tfor (let [type, size, key] of structure) {\n\t\t\tlet nextTransition = transition[key];\n\t\t\tif (!nextTransition) {\n\t\t\t\ttransition[key] = nextTransition = {\n\t\t\t\t\tkey,\n\t\t\t\t\tparent: transition,\n\t\t\t\t\tenumerationOffset: 0,\n\t\t\t\t\tascii0: null,\n\t\t\t\t\tascii8: null,\n\t\t\t\t\tnum8: null,\n\t\t\t\t\tstring16: null,\n\t\t\t\t\tobject16: null,\n\t\t\t\t\tnum32: null,\n\t\t\t\t\tfloat64: null,\n\t\t\t\t\tdate64: null,\n\t\t\t\t};\n\t\t\t}\n\t\t\ttransition = createTypeTransition(nextTransition, type, size);\n\t\t}\n\t\ttransition[_pack_js__WEBPACK_IMPORTED_MODULE_0__.RECORD_SYMBOL] = i;\n\t}\n\ttyped.transitions = transitions;\n\tthis.typedStructs = typed;\n\tthis.lastTypedStructuresLength = typed.length;\n\treturn named;\n}\nvar sourceSymbol = Symbol.for('source')\nfunction readStruct(src, position, srcEnd, unpackr) {\n\tlet recordId = src[position++] - 0x20;\n\tif (recordId >= 24) {\n\t\tswitch(recordId) {\n\t\t\tcase 24: recordId = src[position++]; break;\n\t\t\t// little endian:\n\t\t\tcase 25: recordId = src[position++] + (src[position++] << 8); break;\n\t\t\tcase 26: recordId = src[position++] + (src[position++] << 8) + (src[position++] << 16); break;\n\t\t\tcase 27: recordId = src[position++] + (src[position++] << 8) + (src[position++] << 16) + (src[position++] << 24); break;\n\t\t}\n\t}\n\tlet structure = unpackr.typedStructs && unpackr.typedStructs[recordId];\n\tif (!structure) {\n\t\t// copy src buffer because getStructures will override it\n\t\tsrc = Uint8Array.prototype.slice.call(src, position, srcEnd);\n\t\tsrcEnd -= position;\n\t\tposition = 0;\n\t\tif (!unpackr.getStructures)\n\t\t\tthrow new Error(`Reference to shared structure ${recordId} without getStructures method`);\n\t\tunpackr._mergeStructures(unpackr.getStructures());\n\t\tif (!unpackr.typedStructs)\n\t\t\tthrow new Error('Could not find any shared typed structures');\n\t\tunpackr.lastTypedStructuresLength = unpackr.typedStructs.length;\n\t\tstructure = unpackr.typedStructs[recordId];\n\t\tif (!structure)\n\t\t\tthrow new Error('Could not find typed structure ' + recordId);\n\t}\n\tvar construct = structure.construct;\n\tif (!construct) {\n\t\tconstruct = structure.construct = function LazyObject() {\n\t\t}\n\t\tvar prototype = construct.prototype;\n\t\tlet properties = [];\n\t\tlet currentOffset = 0;\n\t\tlet lastRefProperty;\n\t\tfor (let i = 0, l = structure.length; i < l; i++) {\n\t\t\tlet definition = structure[i];\n\t\t\tlet [ type, size, key, enumerationOffset ] = definition;\n\t\t\tif (key === '__proto__')\n\t\t\t\tkey = '__proto_';\n\t\t\tlet property = {\n\t\t\t\tkey,\n\t\t\t\toffset: currentOffset,\n\t\t\t}\n\t\t\tif (enumerationOffset)\n\t\t\t\tproperties.splice(i + enumerationOffset, 0, property);\n\t\t\telse\n\t\t\t\tproperties.push(property);\n\t\t\tlet getRef;\n\t\t\tswitch(size) { // TODO: Move into a separate function\n\t\t\t\tcase 0: getRef = () => 0; break;\n\t\t\t\tcase 1:\n\t\t\t\t\tgetRef = (source, position) => {\n\t\t\t\t\t\tlet ref = source.bytes[position + property.offset];\n\t\t\t\t\t\treturn ref >= 0xf6 ? toConstant(ref) : ref;\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\t\t\t\tcase 2:\n\t\t\t\t\tgetRef = (source, position) => {\n\t\t\t\t\t\tlet src = source.bytes;\n\t\t\t\t\t\tlet dataView = src.dataView || (src.dataView = new DataView(src.buffer, src.byteOffset, src.byteLength));\n\t\t\t\t\t\tlet ref = dataView.getUint16(position + property.offset, true);\n\t\t\t\t\t\treturn ref >= 0xff00 ? toConstant(ref & 0xff) : ref;\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\t\t\t\tcase 4:\n\t\t\t\t\tgetRef = (source, position) => {\n\t\t\t\t\t\tlet src = source.bytes;\n\t\t\t\t\t\tlet dataView = src.dataView || (src.dataView = new DataView(src.buffer, src.byteOffset, src.byteLength));\n\t\t\t\t\t\tlet ref = dataView.getUint32(position + property.offset, true);\n\t\t\t\t\t\treturn ref >= 0xffffff00 ? toConstant(ref & 0xff) : ref;\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tproperty.getRef = getRef;\n\t\t\tcurrentOffset += size;\n\t\t\tlet get;\n\t\t\tswitch(type) {\n\t\t\t\tcase ASCII:\n\t\t\t\t\tif (lastRefProperty && !lastRefProperty.next)\n\t\t\t\t\t\tlastRefProperty.next = property;\n\t\t\t\t\tlastRefProperty = property;\n\t\t\t\t\tproperty.multiGetCount = 0;\n\t\t\t\t\tget = function(source) {\n\t\t\t\t\t\tlet src = source.bytes;\n\t\t\t\t\t\tlet position = source.position;\n\t\t\t\t\t\tlet refStart = currentOffset + position;\n\t\t\t\t\t\tlet ref = getRef(source, position);\n\t\t\t\t\t\tif (typeof ref !== 'number') return ref;\n\n\t\t\t\t\t\tlet end, next = property.next;\n\t\t\t\t\t\twhile(next) {\n\t\t\t\t\t\t\tend = next.getRef(source, position);\n\t\t\t\t\t\t\tif (typeof end === 'number')\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tend = null;\n\t\t\t\t\t\t\tnext = next.next;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (end == null)\n\t\t\t\t\t\t\tend = source.bytesEnd - refStart;\n\t\t\t\t\t\tif (source.srcString) {\n\t\t\t\t\t\t\treturn source.srcString.slice(ref, end);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t/*if (property.multiGetCount > 0) {\n\t\t\t\t\t\t\tlet asciiEnd;\n\t\t\t\t\t\t\tnext = firstRefProperty;\n\t\t\t\t\t\t\tlet dataView = src.dataView || (src.dataView = new DataView(src.buffer, src.byteOffset, src.byteLength));\n\t\t\t\t\t\t\tdo {\n\t\t\t\t\t\t\t\tasciiEnd = dataView.getUint16(source.position + next.offset, true);\n\t\t\t\t\t\t\t\tif (asciiEnd < 0xff00)\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\tasciiEnd = null;\n\t\t\t\t\t\t\t} while((next = next.next));\n\t\t\t\t\t\t\tif (asciiEnd == null)\n\t\t\t\t\t\t\t\tasciiEnd = source.bytesEnd - refStart\n\t\t\t\t\t\t\tsource.srcString = src.toString('latin1', refStart, refStart + asciiEnd);\n\t\t\t\t\t\t\treturn source.srcString.slice(ref, end);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (source.prevStringGet) {\n\t\t\t\t\t\t\tsource.prevStringGet.multiGetCount += 2;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tsource.prevStringGet = property;\n\t\t\t\t\t\t\tproperty.multiGetCount--;\n\t\t\t\t\t\t}*/\n\t\t\t\t\t\treturn (0,_unpack_js__WEBPACK_IMPORTED_MODULE_1__.readString)(src, ref + refStart, end - ref);\n\t\t\t\t\t\t//return src.toString('latin1', ref + refStart, end + refStart);\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\t\t\t\tcase UTF8: case OBJECT_DATA:\n\t\t\t\t\tif (lastRefProperty && !lastRefProperty.next)\n\t\t\t\t\t\tlastRefProperty.next = property;\n\t\t\t\t\tlastRefProperty = property;\n\t\t\t\t\tget = function(source) {\n\t\t\t\t\t\tlet position = source.position;\n\t\t\t\t\t\tlet refStart = currentOffset + position;\n\t\t\t\t\t\tlet ref = getRef(source, position);\n\t\t\t\t\t\tif (typeof ref !== 'number') return ref;\n\t\t\t\t\t\tlet src = source.bytes;\n\t\t\t\t\t\tlet end, next = property.next;\n\t\t\t\t\t\twhile(next) {\n\t\t\t\t\t\t\tend = next.getRef(source, position);\n\t\t\t\t\t\t\tif (typeof end === 'number')\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tend = null;\n\t\t\t\t\t\t\tnext = next.next;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (end == null)\n\t\t\t\t\t\t\tend = source.bytesEnd - refStart;\n\t\t\t\t\t\tif (type === UTF8) {\n\t\t\t\t\t\t\treturn src.toString('utf8', ref + refStart, end + refStart);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tcurrentSource = source;\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\treturn unpackr.unpack(src, { start: ref + refStart, end: end + refStart });\n\t\t\t\t\t\t\t} finally {\n\t\t\t\t\t\t\t\tcurrentSource = null;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\t\t\t\tcase NUMBER:\n\t\t\t\t\tswitch(size) {\n\t\t\t\t\t\tcase 4:\n\t\t\t\t\t\t\tget = function (source) {\n\t\t\t\t\t\t\t\tlet src = source.bytes;\n\t\t\t\t\t\t\t\tlet dataView = src.dataView || (src.dataView = new DataView(src.buffer, src.byteOffset, src.byteLength));\n\t\t\t\t\t\t\t\tlet position = source.position + property.offset;\n\t\t\t\t\t\t\t\tlet value = dataView.getInt32(position, true)\n\t\t\t\t\t\t\t\tif (value < 0x20000000) {\n\t\t\t\t\t\t\t\t\tif (value > -0x1f000000)\n\t\t\t\t\t\t\t\t\t\treturn value;\n\t\t\t\t\t\t\t\t\tif (value > -0x20000000)\n\t\t\t\t\t\t\t\t\t\treturn toConstant(value & 0xff);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tlet fValue = dataView.getFloat32(position, true);\n\t\t\t\t\t\t\t\t// this does rounding of numbers that were encoded in 32-bit float to nearest significant decimal digit that could be preserved\n\t\t\t\t\t\t\t\tlet multiplier = _unpack_js__WEBPACK_IMPORTED_MODULE_1__.mult10[((src[position + 3] & 0x7f) << 1) | (src[position + 2] >> 7)]\n\t\t\t\t\t\t\t\treturn ((multiplier * fValue + (fValue > 0 ? 0.5 : -0.5)) >> 0) / multiplier;\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 8:\n\t\t\t\t\t\t\tget = function (source) {\n\t\t\t\t\t\t\t\tlet src = source.bytes;\n\t\t\t\t\t\t\t\tlet dataView = src.dataView || (src.dataView = new DataView(src.buffer, src.byteOffset, src.byteLength));\n\t\t\t\t\t\t\t\tlet value = dataView.getFloat64(source.position + property.offset, true);\n\t\t\t\t\t\t\t\tif (isNaN(value)) {\n\t\t\t\t\t\t\t\t\tlet byte = src[source.position + property.offset];\n\t\t\t\t\t\t\t\t\tif (byte >= 0xf6)\n\t\t\t\t\t\t\t\t\t\treturn toConstant(byte);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn value;\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 1:\n\t\t\t\t\t\t\tget = function (source) {\n\t\t\t\t\t\t\t\tlet src = source.bytes;\n\t\t\t\t\t\t\t\tlet value = src[source.position + property.offset];\n\t\t\t\t\t\t\t\treturn value < 0xf6 ? value : toConstant(value);\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase DATE:\n\t\t\t\t\tget = function (source) {\n\t\t\t\t\t\tlet src = source.bytes;\n\t\t\t\t\t\tlet dataView = src.dataView || (src.dataView = new DataView(src.buffer, src.byteOffset, src.byteLength));\n\t\t\t\t\t\treturn new Date(dataView.getFloat64(source.position + property.offset, true));\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\t\t\tproperty.get = get;\n\t\t}\n\t\t// TODO: load the srcString for faster string decoding on toJSON\n\t\tif (evalSupported) {\n\t\t\tlet objectLiteralProperties = [];\n\t\t\tlet args = [];\n\t\t\tlet i = 0;\n\t\t\tlet hasInheritedProperties;\n\t\t\tfor (let property of properties) { // assign in enumeration order\n\t\t\t\tif (unpackr.alwaysLazyProperty && unpackr.alwaysLazyProperty(property.key)) {\n\t\t\t\t\t// these properties are not eagerly evaluated and this can be used for creating properties\n\t\t\t\t\t// that are not serialized as JSON\n\t\t\t\t\thasInheritedProperties = true;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tObject.defineProperty(prototype, property.key, { get: withSource(property.get), enumerable: true });\n\t\t\t\tlet valueFunction = 'v' + i++;\n\t\t\t\targs.push(valueFunction);\n\t\t\t\tobjectLiteralProperties.push('[' + JSON.stringify(property.key) + ']:' + valueFunction + '(s)');\n\t\t\t}\n\t\t\tif (hasInheritedProperties) {\n\t\t\t\tobjectLiteralProperties.push('__proto__:this');\n\t\t\t}\n\t\t\tlet toObject = (new Function(...args, 'return function(s){return{' + objectLiteralProperties.join(',') + '}}')).apply(null, properties.map(prop => prop.get));\n\t\t\tObject.defineProperty(prototype, 'toJSON', {\n\t\t\t\tvalue(omitUnderscoredProperties) {\n\t\t\t\t\treturn toObject.call(this, this[sourceSymbol]);\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tObject.defineProperty(prototype, 'toJSON', {\n\t\t\t\tvalue(omitUnderscoredProperties) {\n\t\t\t\t\t// return an enumerable object with own properties to JSON stringify\n\t\t\t\t\tlet resolved = {};\n\t\t\t\t\tfor (let i = 0, l = properties.length; i < l; i++) {\n\t\t\t\t\t\t// TODO: check alwaysLazyProperty\n\t\t\t\t\t\tlet key = properties[i].key;\n\n\t\t\t\t\t\tresolved[key] = this[key];\n\t\t\t\t\t}\n\t\t\t\t\treturn resolved;\n\t\t\t\t},\n\t\t\t\t// not enumerable or anything\n\t\t\t});\n\t\t}\n\t}\n\tvar instance = new construct();\n\tinstance[sourceSymbol] = {\n\t\tbytes: src,\n\t\tposition,\n\t\tsrcString: '',\n\t\tbytesEnd: srcEnd\n\t}\n\treturn instance;\n}\nfunction toConstant(code) {\n\tswitch(code) {\n\t\tcase 0xf6: return null;\n\t\tcase 0xf7: return undefined;\n\t\tcase 0xf8: return false;\n\t\tcase 0xf9: return true;\n\t}\n\tthrow new Error('Unknown constant');\n}\nfunction withSource(get) {\n\treturn function() {\n\t\treturn get(this[sourceSymbol]);\n\t}\n}\n\nfunction saveState() {\n\tif (currentSource) {\n\t\tcurrentSource.bytes = Uint8Array.prototype.slice.call(currentSource.bytes, currentSource.position, currentSource.bytesEnd);\n\t\tcurrentSource.position = 0;\n\t\tcurrentSource.bytesEnd = currentSource.bytes.length;\n\t}\n}\nfunction prepareStructures(structures, packr) {\n\tif (packr.typedStructs) {\n\t\tlet structMap = new Map();\n\t\tstructMap.set('named', structures);\n\t\tstructMap.set('typed', packr.typedStructs);\n\t\tstructures = structMap;\n\t}\n\tlet lastTypedStructuresLength = packr.lastTypedStructuresLength || 0;\n\tstructures.isCompatible = existing => {\n\t\tlet compatible = true;\n\t\tif (existing instanceof Map) {\n\t\t\tlet named = existing.get('named') || [];\n\t\t\tif (named.length !== (packr.lastNamedStructuresLength || 0))\n\t\t\t\tcompatible = false;\n\t\t\tlet typed = existing.get('typed') || [];\n\t\t\tif (typed.length !== lastTypedStructuresLength)\n\t\t\t\tcompatible = false;\n\t\t} else if (existing instanceof Array || Array.isArray(existing)) {\n\t\t\tif (existing.length !== (packr.lastNamedStructuresLength || 0))\n\t\t\t\tcompatible = false;\n\t\t}\n\t\tif (!compatible)\n\t\t\tpackr._mergeStructures(existing);\n\t\treturn compatible;\n\t};\n\tpackr.lastTypedStructuresLength = packr.typedStructs && packr.typedStructs.length;\n\treturn structures;\n}\n\n(0,_unpack_js__WEBPACK_IMPORTED_MODULE_1__.setReadStruct)(readStruct, onLoadedStructures, saveState);\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbm9kZV9tb2R1bGVzL0BsaXZlc3RvcmUvdXRpbHMvbm9kZV9tb2R1bGVzL21zZ3BhY2tyL3N0cnVjdC5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOzs7QUFHQTtBQUNBOztBQUVBOzs7QUFHMEU7QUFDWjtBQUM5RCxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0EsNkRBQW1CO0FBQ25CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyw4Q0FBTTtBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLGVBQWU7QUFDaEM7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCO0FBQzdCLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLGFBQWE7QUFDYixNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQSxNQUFNLE9BQU87QUFDYiwwRUFBMEU7QUFDMUU7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQThDO0FBQzlDO0FBQ0E7QUFDQSx3RUFBd0U7QUFDeEU7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSw4Q0FBOEMsTUFBTTtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSyxPQUFPO0FBQ1o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsSUFBSSxPQUFPO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQSwyQkFBMkIsbURBQWE7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLG1EQUFhO0FBQzFCO0FBQ0EsdUJBQXVCO0FBQ3ZCOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxvQkFBb0I7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxvQkFBb0I7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsT0FBTztBQUMxQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLG1EQUFhO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0M7QUFDeEM7QUFDQSxpRUFBaUU7QUFDakUsMkZBQTJGO0FBQzNGLHFIQUFxSDtBQUNySDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvREFBb0QsVUFBVTtBQUM5RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QyxPQUFPO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCLDhCQUE4QjtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0EsT0FBTztBQUNQLGFBQWEsc0RBQVU7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0EscUNBQXFDLDRDQUE0QztBQUNqRixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUJBQXlCLDhDQUFNO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFEQUFxRCxpREFBaUQ7QUFDdEc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2REFBNkQsT0FBTywyQ0FBMkM7QUFDL0c7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNENBQTRDLE9BQU87QUFDbkQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHlEQUFhIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYW5hY29uZGEtYXNzZXNtZW50LTEvLi9zcmMvbm9kZV9tb2R1bGVzL0BsaXZlc3RvcmUvdXRpbHMvbm9kZV9tb2R1bGVzL21zZ3BhY2tyL3N0cnVjdC5qcz85ZTU4Il0sInNvdXJjZXNDb250ZW50IjpbIlxuLypcblxuRm9yIFwiYW55LWRhdGFcIjpcbjMyLTU1IC0gcmVjb3JkIHdpdGggcmVjb3JkIGlkcyAoLTMyKVxuNTYgLSA4LWJpdCByZWNvcmQgaWRzXG41NyAtIDE2LWJpdCByZWNvcmQgaWRzXG41OCAtIDI0LWJpdCByZWNvcmQgaWRzXG41OSAtIDMyLWJpdCByZWNvcmQgaWRzXG4yNTAtMjU1IC0gZm9sbG93ZWQgYnkgdHlwZWQgZml4ZWQgd2lkdGggdmFsdWVzXG42NC0yNTAgbXNncGFja3IvY2Jvci9wYWlyZWQgZGF0YVxuYXJyYXlzIGFuZCBzdHJpbmdzIHdpdGhpbiBhcnJheXMgYXJlIGhhbmRsZWQgYnkgcGFpcmVkIGVuY29kaW5nXG5cblN0cnVjdHVyZSBlbmNvZGluZzpcbih0eXBlIC0gc3RyaW5nICh1c2luZyBwYWlyZWQgZW5jb2RpbmcpKStcblxuVHlwZSBlbmNvZGluZ1xuZW5jb2RpbmcgYnl0ZSAtIGZpeGVkIHdpZHRoIGJ5dGUgLSBuZXh0IHJlZmVyZW5jZStcblxuRW5jb2RpbmcgYnl0ZTpcbmZpcnN0IGJpdDpcblx0MCAtIGlubGluZVxuXHQxIC0gcmVmZXJlbmNlXG5zZWNvbmQgYml0OlxuXHQwIC0gZGF0YSBvciBudW1iZXJcblx0MSAtIHN0cmluZ1xuXG5yZW1haW5pbmcgYml0czpcblx0Y2hhcmFjdGVyIGVuY29kaW5nIC0gSVNPLTg4NTkteFxuXG5cbm51bGwgKDB4ZmYpKyAweGY2XG5udWxsICgweGZmKSsgMHhmN1xuXG4qL1xuXG5cbmltcG9ydCB7c2V0V3JpdGVTdHJ1Y3RTbG90cywgUkVDT1JEX1NZTUJPTCwgYWRkRXh0ZW5zaW9ufSBmcm9tICcuL3BhY2suanMnXG5pbXBvcnQge3NldFJlYWRTdHJ1Y3QsIG11bHQxMCwgcmVhZFN0cmluZ30gZnJvbSAnLi91bnBhY2suanMnO1xuY29uc3QgQVNDSUkgPSAzOyAvLyB0aGUgTUlCZW51bSBmcm9tIGh0dHBzOi8vd3d3LmlhbmEub3JnL2Fzc2lnbm1lbnRzL2NoYXJhY3Rlci1zZXRzL2NoYXJhY3Rlci1zZXRzLnhodG1sIChhbmQgb3RoZXIgY2hhcmFjdGVyIGVuY29kaW5ncyBjb3VsZCBiZSByZWZlcmVuY2VkIGJ5IE1JQmVudW0pXG5jb25zdCBOVU1CRVIgPSAwO1xuY29uc3QgVVRGOCA9IDI7XG5jb25zdCBPQkpFQ1RfREFUQSA9IDE7XG5jb25zdCBEQVRFID0gMTY7XG5jb25zdCBUWVBFX05BTUVTID0gWydudW0nLCAnb2JqZWN0JywgJ3N0cmluZycsICdhc2NpaSddO1xuVFlQRV9OQU1FU1tEQVRFXSA9ICdkYXRlJztcbmNvbnN0IGZsb2F0MzJIZWFkZXJzID0gW2ZhbHNlLCB0cnVlLCB0cnVlLCBmYWxzZSwgZmFsc2UsIHRydWUsIHRydWUsIGZhbHNlXTtcbmxldCBldmFsU3VwcG9ydGVkO1xudHJ5IHtcblx0bmV3IEZ1bmN0aW9uKCcnKTtcblx0ZXZhbFN1cHBvcnRlZCA9IHRydWU7XG59IGNhdGNoKGVycm9yKSB7XG5cdC8vIGlmIGV2YWwgdmFyaWFudHMgYXJlIG5vdCBzdXBwb3J0ZWQsIGRvIG5vdCBjcmVhdGUgaW5saW5lIG9iamVjdCByZWFkZXJzIGV2ZXJcbn1cblxubGV0IHVwZGF0ZWRQb3NpdGlvbjtcbmNvbnN0IGhhc05vZGVCdWZmZXIgPSB0eXBlb2YgQnVmZmVyICE9PSAndW5kZWZpbmVkJ1xubGV0IHRleHRFbmNvZGVyLCBjdXJyZW50U291cmNlO1xudHJ5IHtcblx0dGV4dEVuY29kZXIgPSBuZXcgVGV4dEVuY29kZXIoKVxufSBjYXRjaCAoZXJyb3IpIHt9XG5jb25zdCBlbmNvZGVVdGY4ID0gaGFzTm9kZUJ1ZmZlciA/IGZ1bmN0aW9uKHRhcmdldCwgc3RyaW5nLCBwb3NpdGlvbikge1xuXHRyZXR1cm4gdGFyZ2V0LnV0ZjhXcml0ZShzdHJpbmcsIHBvc2l0aW9uLCB0YXJnZXQuYnl0ZUxlbmd0aCAtIHBvc2l0aW9uKVxufSA6ICh0ZXh0RW5jb2RlciAmJiB0ZXh0RW5jb2Rlci5lbmNvZGVJbnRvKSA/XG5cdGZ1bmN0aW9uKHRhcmdldCwgc3RyaW5nLCBwb3NpdGlvbikge1xuXHRcdHJldHVybiB0ZXh0RW5jb2Rlci5lbmNvZGVJbnRvKHN0cmluZywgdGFyZ2V0LnN1YmFycmF5KHBvc2l0aW9uKSkud3JpdHRlblxuXHR9IDogZmFsc2VcblxuY29uc3QgVFlQRSA9IFN5bWJvbCgndHlwZScpO1xuY29uc3QgUEFSRU5UID0gU3ltYm9sKCdwYXJlbnQnKTtcbnNldFdyaXRlU3RydWN0U2xvdHMod3JpdGVTdHJ1Y3QsIHByZXBhcmVTdHJ1Y3R1cmVzKTtcbmZ1bmN0aW9uIHdyaXRlU3RydWN0KG9iamVjdCwgdGFyZ2V0LCBlbmNvZGluZ1N0YXJ0LCBwb3NpdGlvbiwgc3RydWN0dXJlcywgbWFrZVJvb20sIHBhY2ssIHBhY2tyKSB7XG5cdGxldCB0eXBlZFN0cnVjdHMgPSBwYWNrci50eXBlZFN0cnVjdHMgfHwgKHBhY2tyLnR5cGVkU3RydWN0cyA9IFtdKTtcblx0Ly8gbm90ZSB0aGF0IHdlIHJlbHkgb24gcGFjay5qcyB0byBsb2FkIHN0b3JlZCBzdHJ1Y3R1cmVzIGJlZm9yZSB3ZSBnZXQgdG8gdGhpcyBwb2ludFxuXHRsZXQgdGFyZ2V0VmlldyA9IHRhcmdldC5kYXRhVmlldztcblx0bGV0IHJlZnNTdGFydFBvc2l0aW9uID0gKHR5cGVkU3RydWN0cy5sYXN0U3RyaW5nU3RhcnQgfHwgMTAwKSArIHBvc2l0aW9uO1xuXHRsZXQgc2FmZUVuZCA9IHRhcmdldC5sZW5ndGggLSAxMDtcblx0bGV0IHN0YXJ0ID0gcG9zaXRpb247XG5cdGlmIChwb3NpdGlvbiA+IHNhZmVFbmQpIHtcblx0XHR0YXJnZXQgPSBtYWtlUm9vbShwb3NpdGlvbik7XG5cdFx0dGFyZ2V0VmlldyA9IHRhcmdldC5kYXRhVmlldztcblx0XHRwb3NpdGlvbiAtPSBlbmNvZGluZ1N0YXJ0O1xuXHRcdHN0YXJ0IC09IGVuY29kaW5nU3RhcnQ7XG5cdFx0cmVmc1N0YXJ0UG9zaXRpb24gLT0gZW5jb2RpbmdTdGFydDtcblx0XHRlbmNvZGluZ1N0YXJ0ID0gMDtcblx0XHRzYWZlRW5kID0gdGFyZ2V0Lmxlbmd0aCAtIDEwO1xuXHR9XG5cblx0bGV0IHJlZk9mZnNldCwgcmVmUG9zaXRpb24gPSByZWZzU3RhcnRQb3NpdGlvbjtcblxuXHRsZXQgdHJhbnNpdGlvbiA9IHR5cGVkU3RydWN0cy50cmFuc2l0aW9ucyB8fCAodHlwZWRTdHJ1Y3RzLnRyYW5zaXRpb25zID0gT2JqZWN0LmNyZWF0ZShudWxsKSk7XG5cdGxldCBuZXh0SWQgPSB0eXBlZFN0cnVjdHMubmV4dElkIHx8IHR5cGVkU3RydWN0cy5sZW5ndGg7XG5cdGxldCBoZWFkZXJTaXplID1cblx0XHRuZXh0SWQgPCAweGYgPyAxIDpcblx0XHRcdG5leHRJZCA8IDB4ZjAgPyAyIDpcblx0XHRcdFx0bmV4dElkIDwgMHhmMDAwID8gMyA6XG5cdFx0XHRcdFx0bmV4dElkIDwgMHhmMDAwMDAgPyA0IDogMDtcblx0aWYgKGhlYWRlclNpemUgPT09IDApXG5cdFx0cmV0dXJuIDA7XG5cdHBvc2l0aW9uICs9IGhlYWRlclNpemU7XG5cdGxldCBxdWV1ZWRSZWZlcmVuY2VzID0gW107XG5cdGxldCB1c2VkQXNjaWkwO1xuXHRsZXQga2V5SW5kZXggPSAwO1xuXHRmb3IgKGxldCBrZXkgaW4gb2JqZWN0KSB7XG5cdFx0bGV0IHZhbHVlID0gb2JqZWN0W2tleV07XG5cdFx0bGV0IG5leHRUcmFuc2l0aW9uID0gdHJhbnNpdGlvbltrZXldO1xuXHRcdGlmICghbmV4dFRyYW5zaXRpb24pIHtcblx0XHRcdHRyYW5zaXRpb25ba2V5XSA9IG5leHRUcmFuc2l0aW9uID0ge1xuXHRcdFx0XHRrZXksXG5cdFx0XHRcdHBhcmVudDogdHJhbnNpdGlvbixcblx0XHRcdFx0ZW51bWVyYXRpb25PZmZzZXQ6IDAsXG5cdFx0XHRcdGFzY2lpMDogbnVsbCxcblx0XHRcdFx0YXNjaWk4OiBudWxsLFxuXHRcdFx0XHRudW04OiBudWxsLFxuXHRcdFx0XHRzdHJpbmcxNjogbnVsbCxcblx0XHRcdFx0b2JqZWN0MTY6IG51bGwsXG5cdFx0XHRcdG51bTMyOiBudWxsLFxuXHRcdFx0XHRmbG9hdDY0OiBudWxsLFxuXHRcdFx0XHRkYXRlNjQ6IG51bGxcblx0XHRcdH07XG5cdFx0fVxuXHRcdGlmIChwb3NpdGlvbiA+IHNhZmVFbmQpIHtcblx0XHRcdHRhcmdldCA9IG1ha2VSb29tKHBvc2l0aW9uKTtcblx0XHRcdHRhcmdldFZpZXcgPSB0YXJnZXQuZGF0YVZpZXc7XG5cdFx0XHRwb3NpdGlvbiAtPSBlbmNvZGluZ1N0YXJ0O1xuXHRcdFx0c3RhcnQgLT0gZW5jb2RpbmdTdGFydDtcblx0XHRcdHJlZnNTdGFydFBvc2l0aW9uIC09IGVuY29kaW5nU3RhcnQ7XG5cdFx0XHRyZWZQb3NpdGlvbiAtPSBlbmNvZGluZ1N0YXJ0O1xuXHRcdFx0ZW5jb2RpbmdTdGFydCA9IDA7XG5cdFx0XHRzYWZlRW5kID0gdGFyZ2V0Lmxlbmd0aCAtIDEwXG5cdFx0fVxuXHRcdHN3aXRjaCAodHlwZW9mIHZhbHVlKSB7XG5cdFx0XHRjYXNlICdudW1iZXInOlxuXHRcdFx0XHRsZXQgbnVtYmVyID0gdmFsdWU7XG5cdFx0XHRcdC8vIGZpcnN0IGNoZWNrIHRvIHNlZSBpZiB3ZSBhcmUgdXNpbmcgYSBsb3Qgb2YgaWRzIGFuZCBzaG91bGQgZGVmYXVsdCB0byB3aWRlL2NvbW1vbiBmb3JtYXRcblx0XHRcdFx0aWYgKG5leHRJZCA8IDIwMCB8fCAhbmV4dFRyYW5zaXRpb24ubnVtNjQpIHtcblx0XHRcdFx0XHRpZiAobnVtYmVyID4+IDAgPT09IG51bWJlciAmJiBudW1iZXIgPCAweDIwMDAwMDAwICYmIG51bWJlciA+IC0weDFmMDAwMDAwKSB7XG5cdFx0XHRcdFx0XHRpZiAobnVtYmVyIDwgMHhmNiAmJiBudW1iZXIgPj0gMCAmJiAobmV4dFRyYW5zaXRpb24ubnVtOCAmJiAhKG5leHRJZCA+IDIwMCAmJiBuZXh0VHJhbnNpdGlvbi5udW0zMikgfHwgbnVtYmVyIDwgMHgyMCAmJiAhbmV4dFRyYW5zaXRpb24ubnVtMzIpKSB7XG5cdFx0XHRcdFx0XHRcdHRyYW5zaXRpb24gPSBuZXh0VHJhbnNpdGlvbi5udW04IHx8IGNyZWF0ZVR5cGVUcmFuc2l0aW9uKG5leHRUcmFuc2l0aW9uLCBOVU1CRVIsIDEpO1xuXHRcdFx0XHRcdFx0XHR0YXJnZXRbcG9zaXRpb24rK10gPSBudW1iZXI7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHR0cmFuc2l0aW9uID0gbmV4dFRyYW5zaXRpb24ubnVtMzIgfHwgY3JlYXRlVHlwZVRyYW5zaXRpb24obmV4dFRyYW5zaXRpb24sIE5VTUJFUiwgNCk7XG5cdFx0XHRcdFx0XHRcdHRhcmdldFZpZXcuc2V0VWludDMyKHBvc2l0aW9uLCBudW1iZXIsIHRydWUpO1xuXHRcdFx0XHRcdFx0XHRwb3NpdGlvbiArPSA0O1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0fSBlbHNlIGlmIChudW1iZXIgPCAweDEwMDAwMDAwMCAmJiBudW1iZXIgPj0gLTB4ODAwMDAwMDApIHtcblx0XHRcdFx0XHRcdHRhcmdldFZpZXcuc2V0RmxvYXQzMihwb3NpdGlvbiwgbnVtYmVyLCB0cnVlKTtcblx0XHRcdFx0XHRcdGlmIChmbG9hdDMySGVhZGVyc1t0YXJnZXRbcG9zaXRpb24gKyAzXSA+Pj4gNV0pIHtcblx0XHRcdFx0XHRcdFx0bGV0IHhTaGlmdGVkXG5cdFx0XHRcdFx0XHRcdC8vIHRoaXMgY2hlY2tzIGZvciByb3VuZGluZyBvZiBudW1iZXJzIHRoYXQgd2VyZSBlbmNvZGVkIGluIDMyLWJpdCBmbG9hdCB0byBuZWFyZXN0IHNpZ25pZmljYW50IGRlY2ltYWwgZGlnaXQgdGhhdCBjb3VsZCBiZSBwcmVzZXJ2ZWRcblx0XHRcdFx0XHRcdFx0aWYgKCgoeFNoaWZ0ZWQgPSBudW1iZXIgKiBtdWx0MTBbKCh0YXJnZXRbcG9zaXRpb24gKyAzXSAmIDB4N2YpIDw8IDEpIHwgKHRhcmdldFtwb3NpdGlvbiArIDJdID4+IDcpXSkgPj4gMCkgPT09IHhTaGlmdGVkKSB7XG5cdFx0XHRcdFx0XHRcdFx0dHJhbnNpdGlvbiA9IG5leHRUcmFuc2l0aW9uLm51bTMyIHx8IGNyZWF0ZVR5cGVUcmFuc2l0aW9uKG5leHRUcmFuc2l0aW9uLCBOVU1CRVIsIDQpO1xuXHRcdFx0XHRcdFx0XHRcdHBvc2l0aW9uICs9IDQ7XG5cdFx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0dHJhbnNpdGlvbiA9IG5leHRUcmFuc2l0aW9uLm51bTY0IHx8IGNyZWF0ZVR5cGVUcmFuc2l0aW9uKG5leHRUcmFuc2l0aW9uLCBOVU1CRVIsIDgpO1xuXHRcdFx0XHR0YXJnZXRWaWV3LnNldEZsb2F0NjQocG9zaXRpb24sIG51bWJlciwgdHJ1ZSk7XG5cdFx0XHRcdHBvc2l0aW9uICs9IDg7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAnc3RyaW5nJzpcblx0XHRcdFx0bGV0IHN0ckxlbmd0aCA9IHZhbHVlLmxlbmd0aDtcblx0XHRcdFx0cmVmT2Zmc2V0ID0gcmVmUG9zaXRpb24gLSByZWZzU3RhcnRQb3NpdGlvbjtcblx0XHRcdFx0aWYgKChzdHJMZW5ndGggPDwgMikgKyByZWZQb3NpdGlvbiA+IHNhZmVFbmQpIHtcblx0XHRcdFx0XHR0YXJnZXQgPSBtYWtlUm9vbSgoc3RyTGVuZ3RoIDw8IDIpICsgcmVmUG9zaXRpb24pO1xuXHRcdFx0XHRcdHRhcmdldFZpZXcgPSB0YXJnZXQuZGF0YVZpZXc7XG5cdFx0XHRcdFx0cG9zaXRpb24gLT0gZW5jb2RpbmdTdGFydDtcblx0XHRcdFx0XHRzdGFydCAtPSBlbmNvZGluZ1N0YXJ0O1xuXHRcdFx0XHRcdHJlZnNTdGFydFBvc2l0aW9uIC09IGVuY29kaW5nU3RhcnQ7XG5cdFx0XHRcdFx0cmVmUG9zaXRpb24gLT0gZW5jb2RpbmdTdGFydDtcblx0XHRcdFx0XHRlbmNvZGluZ1N0YXJ0ID0gMDtcblx0XHRcdFx0XHRzYWZlRW5kID0gdGFyZ2V0Lmxlbmd0aCAtIDEwXG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKHN0ckxlbmd0aCA+ICgoMHhmZjAwICsgcmVmT2Zmc2V0KSA+PiAyKSkge1xuXHRcdFx0XHRcdHF1ZXVlZFJlZmVyZW5jZXMucHVzaChrZXksIHZhbHVlLCBwb3NpdGlvbiAtIHN0YXJ0KTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXHRcdFx0XHRsZXQgaXNOb3RBc2NpaVxuXHRcdFx0XHRsZXQgc3RyU3RhcnQgPSByZWZQb3NpdGlvbjtcblx0XHRcdFx0aWYgKHN0ckxlbmd0aCA8IDB4NDApIHtcblx0XHRcdFx0XHRsZXQgaSwgYzEsIGMyO1xuXHRcdFx0XHRcdGZvciAoaSA9IDA7IGkgPCBzdHJMZW5ndGg7IGkrKykge1xuXHRcdFx0XHRcdFx0YzEgPSB2YWx1ZS5jaGFyQ29kZUF0KGkpXG5cdFx0XHRcdFx0XHRpZiAoYzEgPCAweDgwKSB7XG5cdFx0XHRcdFx0XHRcdHRhcmdldFtyZWZQb3NpdGlvbisrXSA9IGMxXG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKGMxIDwgMHg4MDApIHtcblx0XHRcdFx0XHRcdFx0aXNOb3RBc2NpaSA9IHRydWU7XG5cdFx0XHRcdFx0XHRcdHRhcmdldFtyZWZQb3NpdGlvbisrXSA9IGMxID4+IDYgfCAweGMwXG5cdFx0XHRcdFx0XHRcdHRhcmdldFtyZWZQb3NpdGlvbisrXSA9IGMxICYgMHgzZiB8IDB4ODBcblx0XHRcdFx0XHRcdH0gZWxzZSBpZiAoXG5cdFx0XHRcdFx0XHRcdChjMSAmIDB4ZmMwMCkgPT09IDB4ZDgwMCAmJlxuXHRcdFx0XHRcdFx0XHQoKGMyID0gdmFsdWUuY2hhckNvZGVBdChpICsgMSkpICYgMHhmYzAwKSA9PT0gMHhkYzAwXG5cdFx0XHRcdFx0XHQpIHtcblx0XHRcdFx0XHRcdFx0aXNOb3RBc2NpaSA9IHRydWU7XG5cdFx0XHRcdFx0XHRcdGMxID0gMHgxMDAwMCArICgoYzEgJiAweDAzZmYpIDw8IDEwKSArIChjMiAmIDB4MDNmZilcblx0XHRcdFx0XHRcdFx0aSsrXG5cdFx0XHRcdFx0XHRcdHRhcmdldFtyZWZQb3NpdGlvbisrXSA9IGMxID4+IDE4IHwgMHhmMFxuXHRcdFx0XHRcdFx0XHR0YXJnZXRbcmVmUG9zaXRpb24rK10gPSBjMSA+PiAxMiAmIDB4M2YgfCAweDgwXG5cdFx0XHRcdFx0XHRcdHRhcmdldFtyZWZQb3NpdGlvbisrXSA9IGMxID4+IDYgJiAweDNmIHwgMHg4MFxuXHRcdFx0XHRcdFx0XHR0YXJnZXRbcmVmUG9zaXRpb24rK10gPSBjMSAmIDB4M2YgfCAweDgwXG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRpc05vdEFzY2lpID0gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0dGFyZ2V0W3JlZlBvc2l0aW9uKytdID0gYzEgPj4gMTIgfCAweGUwXG5cdFx0XHRcdFx0XHRcdHRhcmdldFtyZWZQb3NpdGlvbisrXSA9IGMxID4+IDYgJiAweDNmIHwgMHg4MFxuXHRcdFx0XHRcdFx0XHR0YXJnZXRbcmVmUG9zaXRpb24rK10gPSBjMSAmIDB4M2YgfCAweDgwXG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHJlZlBvc2l0aW9uICs9IGVuY29kZVV0ZjgodGFyZ2V0LCB2YWx1ZSwgcmVmUG9zaXRpb24pO1xuXHRcdFx0XHRcdGlzTm90QXNjaWkgPSByZWZQb3NpdGlvbiAtIHN0clN0YXJ0ID4gc3RyTGVuZ3RoO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChyZWZPZmZzZXQgPCAweGEwIHx8IChyZWZPZmZzZXQgPCAweGY2ICYmIChuZXh0VHJhbnNpdGlvbi5hc2NpaTggfHwgbmV4dFRyYW5zaXRpb24uc3RyaW5nOCkpKSB7XG5cdFx0XHRcdFx0Ly8gc2hvcnQgc3RyaW5nc1xuXHRcdFx0XHRcdGlmIChpc05vdEFzY2lpKSB7XG5cdFx0XHRcdFx0XHRpZiAoISh0cmFuc2l0aW9uID0gbmV4dFRyYW5zaXRpb24uc3RyaW5nOCkpIHtcblx0XHRcdFx0XHRcdFx0aWYgKHR5cGVkU3RydWN0cy5sZW5ndGggPiAxMCAmJiAodHJhbnNpdGlvbiA9IG5leHRUcmFuc2l0aW9uLmFzY2lpOCkpIHtcblx0XHRcdFx0XHRcdFx0XHQvLyB3ZSBjYW4gc2FmZWx5IGNoYW5nZSBhc2NpaSB0byB1dGY4IGluIHBsYWNlIHNpbmNlIHRoZXkgYXJlIGNvbXBhdGlibGVcblx0XHRcdFx0XHRcdFx0XHR0cmFuc2l0aW9uLl9fdHlwZSA9IFVURjg7XG5cdFx0XHRcdFx0XHRcdFx0bmV4dFRyYW5zaXRpb24uYXNjaWk4ID0gbnVsbDtcblx0XHRcdFx0XHRcdFx0XHRuZXh0VHJhbnNpdGlvbi5zdHJpbmc4ID0gdHJhbnNpdGlvbjtcblx0XHRcdFx0XHRcdFx0XHRwYWNrKG51bGwsIDAsIHRydWUpOyAvLyBzcGVjaWFsIGNhbGwgdG8gbm90aWZ5IHRoYXQgc3RydWN0dXJlcyBoYXZlIGJlZW4gdXBkYXRlZFxuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdHRyYW5zaXRpb24gPSBjcmVhdGVUeXBlVHJhbnNpdGlvbihuZXh0VHJhbnNpdGlvbiwgVVRGOCwgMSk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9IGVsc2UgaWYgKHJlZk9mZnNldCA9PT0gMCAmJiAhdXNlZEFzY2lpMCkge1xuXHRcdFx0XHRcdFx0dXNlZEFzY2lpMCA9IHRydWU7XG5cdFx0XHRcdFx0XHR0cmFuc2l0aW9uID0gbmV4dFRyYW5zaXRpb24uYXNjaWkwIHx8IGNyZWF0ZVR5cGVUcmFuc2l0aW9uKG5leHRUcmFuc2l0aW9uLCBBU0NJSSwgMCk7XG5cdFx0XHRcdFx0XHRicmVhazsgLy8gZG9uJ3QgaW5jcmVtZW50IHBvc2l0aW9uXG5cdFx0XHRcdFx0fS8vIGVsc2UgYXNjaWk6XG5cdFx0XHRcdFx0ZWxzZSBpZiAoISh0cmFuc2l0aW9uID0gbmV4dFRyYW5zaXRpb24uYXNjaWk4KSAmJiAhKHR5cGVkU3RydWN0cy5sZW5ndGggPiAxMCAmJiAodHJhbnNpdGlvbiA9IG5leHRUcmFuc2l0aW9uLnN0cmluZzgpKSlcblx0XHRcdFx0XHRcdHRyYW5zaXRpb24gPSBjcmVhdGVUeXBlVHJhbnNpdGlvbihuZXh0VHJhbnNpdGlvbiwgQVNDSUksIDEpO1xuXHRcdFx0XHRcdHRhcmdldFtwb3NpdGlvbisrXSA9IHJlZk9mZnNldDtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQvLyBUT0RPOiBFbmFibGUgYXNjaWkxNiBhdCBzb21lIHBvaW50LCBidXQgZ2V0IHRoZSBsb2dpYyByaWdodFxuXHRcdFx0XHRcdC8vaWYgKGlzTm90QXNjaWkpXG5cdFx0XHRcdFx0XHR0cmFuc2l0aW9uID0gbmV4dFRyYW5zaXRpb24uc3RyaW5nMTYgfHwgY3JlYXRlVHlwZVRyYW5zaXRpb24obmV4dFRyYW5zaXRpb24sIFVURjgsIDIpO1xuXHRcdFx0XHRcdC8vZWxzZVxuXHRcdFx0XHRcdFx0Ly90cmFuc2l0aW9uID0gbmV4dFRyYW5zaXRpb24uYXNjaWkxNiB8fCBjcmVhdGVUeXBlVHJhbnNpdGlvbihuZXh0VHJhbnNpdGlvbiwgQVNDSUksIDIpO1xuXHRcdFx0XHRcdHRhcmdldFZpZXcuc2V0VWludDE2KHBvc2l0aW9uLCByZWZPZmZzZXQsIHRydWUpO1xuXHRcdFx0XHRcdHBvc2l0aW9uICs9IDI7XG5cdFx0XHRcdH1cblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlICdvYmplY3QnOlxuXHRcdFx0XHRpZiAodmFsdWUpIHtcblx0XHRcdFx0XHRpZiAodmFsdWUuY29uc3RydWN0b3IgPT09IERhdGUpIHtcblx0XHRcdFx0XHRcdHRyYW5zaXRpb24gPSBuZXh0VHJhbnNpdGlvbi5kYXRlNjQgfHwgY3JlYXRlVHlwZVRyYW5zaXRpb24obmV4dFRyYW5zaXRpb24sIERBVEUsIDgpO1xuXHRcdFx0XHRcdFx0dGFyZ2V0Vmlldy5zZXRGbG9hdDY0KHBvc2l0aW9uLCB2YWx1ZS5nZXRUaW1lKCksIHRydWUpO1xuXHRcdFx0XHRcdFx0cG9zaXRpb24gKz0gODtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0cXVldWVkUmVmZXJlbmNlcy5wdXNoKGtleSwgdmFsdWUsIGtleUluZGV4KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdH0gZWxzZSB7IC8vIG51bGxcblx0XHRcdFx0XHRuZXh0VHJhbnNpdGlvbiA9IGFueVR5cGUobmV4dFRyYW5zaXRpb24sIHBvc2l0aW9uLCB0YXJnZXRWaWV3LCAtMTApOyAvLyBtYXRjaCBDQk9SIHdpdGggdGhpc1xuXHRcdFx0XHRcdGlmIChuZXh0VHJhbnNpdGlvbikge1xuXHRcdFx0XHRcdFx0dHJhbnNpdGlvbiA9IG5leHRUcmFuc2l0aW9uO1xuXHRcdFx0XHRcdFx0cG9zaXRpb24gPSB1cGRhdGVkUG9zaXRpb247XG5cdFx0XHRcdFx0fSBlbHNlIHF1ZXVlZFJlZmVyZW5jZXMucHVzaChrZXksIHZhbHVlLCBrZXlJbmRleCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlICdib29sZWFuJzpcblx0XHRcdFx0dHJhbnNpdGlvbiA9IG5leHRUcmFuc2l0aW9uLm51bTggfHwgbmV4dFRyYW5zaXRpb24uYXNjaWk4IHx8IGNyZWF0ZVR5cGVUcmFuc2l0aW9uKG5leHRUcmFuc2l0aW9uLCBOVU1CRVIsIDEpO1xuXHRcdFx0XHR0YXJnZXRbcG9zaXRpb24rK10gPSB2YWx1ZSA/IDB4ZjkgOiAweGY4OyAvLyBtYXRjaCBDQk9SIHdpdGggdGhlc2Vcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlICd1bmRlZmluZWQnOlxuXHRcdFx0XHRuZXh0VHJhbnNpdGlvbiA9IGFueVR5cGUobmV4dFRyYW5zaXRpb24sIHBvc2l0aW9uLCB0YXJnZXRWaWV3LCAtOSk7IC8vIG1hdGNoIENCT1Igd2l0aCB0aGlzXG5cdFx0XHRcdGlmIChuZXh0VHJhbnNpdGlvbikge1xuXHRcdFx0XHRcdHRyYW5zaXRpb24gPSBuZXh0VHJhbnNpdGlvbjtcblx0XHRcdFx0XHRwb3NpdGlvbiA9IHVwZGF0ZWRQb3NpdGlvbjtcblx0XHRcdFx0fSBlbHNlIHF1ZXVlZFJlZmVyZW5jZXMucHVzaChrZXksIHZhbHVlLCBrZXlJbmRleCk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0ZGVmYXVsdDpcblx0XHRcdFx0cXVldWVkUmVmZXJlbmNlcy5wdXNoKGtleSwgdmFsdWUsIGtleUluZGV4KTtcblx0XHR9XG5cdFx0a2V5SW5kZXgrKztcblx0fVxuXG5cdGZvciAobGV0IGkgPSAwLCBsID0gcXVldWVkUmVmZXJlbmNlcy5sZW5ndGg7IGkgPCBsOykge1xuXHRcdGxldCBrZXkgPSBxdWV1ZWRSZWZlcmVuY2VzW2krK107XG5cdFx0bGV0IHZhbHVlID0gcXVldWVkUmVmZXJlbmNlc1tpKytdO1xuXHRcdGxldCBwcm9wZXJ0eUluZGV4ID0gcXVldWVkUmVmZXJlbmNlc1tpKytdO1xuXHRcdGxldCBuZXh0VHJhbnNpdGlvbiA9IHRyYW5zaXRpb25ba2V5XTtcblx0XHRpZiAoIW5leHRUcmFuc2l0aW9uKSB7XG5cdFx0XHR0cmFuc2l0aW9uW2tleV0gPSBuZXh0VHJhbnNpdGlvbiA9IHtcblx0XHRcdFx0a2V5LFxuXHRcdFx0XHRwYXJlbnQ6IHRyYW5zaXRpb24sXG5cdFx0XHRcdGVudW1lcmF0aW9uT2Zmc2V0OiBwcm9wZXJ0eUluZGV4IC0ga2V5SW5kZXgsXG5cdFx0XHRcdGFzY2lpMDogbnVsbCxcblx0XHRcdFx0YXNjaWk4OiBudWxsLFxuXHRcdFx0XHRudW04OiBudWxsLFxuXHRcdFx0XHRzdHJpbmcxNjogbnVsbCxcblx0XHRcdFx0b2JqZWN0MTY6IG51bGwsXG5cdFx0XHRcdG51bTMyOiBudWxsLFxuXHRcdFx0XHRmbG9hdDY0OiBudWxsXG5cdFx0XHR9O1xuXHRcdH1cblx0XHRsZXQgbmV3UG9zaXRpb247XG5cdFx0aWYgKHZhbHVlKSB7XG5cdFx0XHQvKmlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7IC8vIFRPRE86IHdlIGNvdWxkIHJlLWVuYWJsZSBsb25nIHN0cmluZ3Ncblx0XHRcdFx0aWYgKHBvc2l0aW9uICsgdmFsdWUubGVuZ3RoICogMyA+IHNhZmVFbmQpIHtcblx0XHRcdFx0XHR0YXJnZXQgPSBtYWtlUm9vbShwb3NpdGlvbiArIHZhbHVlLmxlbmd0aCAqIDMpO1xuXHRcdFx0XHRcdHBvc2l0aW9uIC09IHN0YXJ0O1xuXHRcdFx0XHRcdHRhcmdldFZpZXcgPSB0YXJnZXQuZGF0YVZpZXc7XG5cdFx0XHRcdFx0c3RhcnQgPSAwO1xuXHRcdFx0XHR9XG5cdFx0XHRcdG5ld1Bvc2l0aW9uID0gcG9zaXRpb24gKyB0YXJnZXQudXRmOFdyaXRlKHZhbHVlLCBwb3NpdGlvbiwgMHhmZmZmZmZmZik7XG5cdFx0XHR9IGVsc2UgeyAqL1xuXHRcdFx0bGV0IHNpemU7XG5cdFx0XHRyZWZPZmZzZXQgPSByZWZQb3NpdGlvbiAtIHJlZnNTdGFydFBvc2l0aW9uO1xuXHRcdFx0aWYgKHJlZk9mZnNldCA8IDB4ZmYwMCkge1xuXHRcdFx0XHR0cmFuc2l0aW9uID0gbmV4dFRyYW5zaXRpb24ub2JqZWN0MTY7XG5cdFx0XHRcdGlmICh0cmFuc2l0aW9uKVxuXHRcdFx0XHRcdHNpemUgPSAyO1xuXHRcdFx0XHRlbHNlIGlmICgodHJhbnNpdGlvbiA9IG5leHRUcmFuc2l0aW9uLm9iamVjdDMyKSlcblx0XHRcdFx0XHRzaXplID0gNDtcblx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0dHJhbnNpdGlvbiA9IGNyZWF0ZVR5cGVUcmFuc2l0aW9uKG5leHRUcmFuc2l0aW9uLCBPQkpFQ1RfREFUQSwgMik7XG5cdFx0XHRcdFx0c2l6ZSA9IDI7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRyYW5zaXRpb24gPSBuZXh0VHJhbnNpdGlvbi5vYmplY3QzMiB8fCBjcmVhdGVUeXBlVHJhbnNpdGlvbihuZXh0VHJhbnNpdGlvbiwgT0JKRUNUX0RBVEEsIDQpO1xuXHRcdFx0XHRzaXplID0gNDtcblx0XHRcdH1cblx0XHRcdG5ld1Bvc2l0aW9uID0gcGFjayh2YWx1ZSwgcmVmUG9zaXRpb24pO1xuXHRcdFx0Ly99XG5cdFx0XHRpZiAodHlwZW9mIG5ld1Bvc2l0aW9uID09PSAnb2JqZWN0Jykge1xuXHRcdFx0XHQvLyByZS1hbGxvY2F0ZWRcblx0XHRcdFx0cmVmUG9zaXRpb24gPSBuZXdQb3NpdGlvbi5wb3NpdGlvbjtcblx0XHRcdFx0dGFyZ2V0VmlldyA9IG5ld1Bvc2l0aW9uLnRhcmdldFZpZXc7XG5cdFx0XHRcdHRhcmdldCA9IG5ld1Bvc2l0aW9uLnRhcmdldDtcblx0XHRcdFx0cmVmc1N0YXJ0UG9zaXRpb24gLT0gZW5jb2RpbmdTdGFydDtcblx0XHRcdFx0cG9zaXRpb24gLT0gZW5jb2RpbmdTdGFydDtcblx0XHRcdFx0c3RhcnQgLT0gZW5jb2RpbmdTdGFydDtcblx0XHRcdFx0ZW5jb2RpbmdTdGFydCA9IDA7XG5cdFx0XHR9IGVsc2Vcblx0XHRcdFx0cmVmUG9zaXRpb24gPSBuZXdQb3NpdGlvbjtcblx0XHRcdGlmIChzaXplID09PSAyKSB7XG5cdFx0XHRcdHRhcmdldFZpZXcuc2V0VWludDE2KHBvc2l0aW9uLCByZWZPZmZzZXQsIHRydWUpO1xuXHRcdFx0XHRwb3NpdGlvbiArPSAyO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dGFyZ2V0Vmlldy5zZXRVaW50MzIocG9zaXRpb24sIHJlZk9mZnNldCwgdHJ1ZSk7XG5cdFx0XHRcdHBvc2l0aW9uICs9IDQ7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHsgLy8gbnVsbCBvciB1bmRlZmluZWRcblx0XHRcdHRyYW5zaXRpb24gPSBuZXh0VHJhbnNpdGlvbi5vYmplY3QxNiB8fCBjcmVhdGVUeXBlVHJhbnNpdGlvbihuZXh0VHJhbnNpdGlvbiwgT0JKRUNUX0RBVEEsIDIpO1xuXHRcdFx0dGFyZ2V0Vmlldy5zZXRJbnQxNihwb3NpdGlvbiwgdmFsdWUgPT09IG51bGwgPyAtMTAgOiAtOSwgdHJ1ZSk7XG5cdFx0XHRwb3NpdGlvbiArPSAyO1xuXHRcdH1cblx0XHRrZXlJbmRleCsrO1xuXHR9XG5cblxuXHRsZXQgcmVjb3JkSWQgPSB0cmFuc2l0aW9uW1JFQ09SRF9TWU1CT0xdO1xuXHRpZiAocmVjb3JkSWQgPT0gbnVsbCkge1xuXHRcdHJlY29yZElkID0gcGFja3IudHlwZWRTdHJ1Y3RzLmxlbmd0aDtcblx0XHRsZXQgc3RydWN0dXJlID0gW107XG5cdFx0bGV0IG5leHRUcmFuc2l0aW9uID0gdHJhbnNpdGlvbjtcblx0XHRsZXQga2V5LCB0eXBlO1xuXHRcdHdoaWxlICgodHlwZSA9IG5leHRUcmFuc2l0aW9uLl9fdHlwZSkgIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0bGV0IHNpemUgPSBuZXh0VHJhbnNpdGlvbi5fX3NpemU7XG5cdFx0XHRuZXh0VHJhbnNpdGlvbiA9IG5leHRUcmFuc2l0aW9uLl9fcGFyZW50O1xuXHRcdFx0a2V5ID0gbmV4dFRyYW5zaXRpb24ua2V5O1xuXHRcdFx0bGV0IHByb3BlcnR5ID0gW3R5cGUsIHNpemUsIGtleV07XG5cdFx0XHRpZiAobmV4dFRyYW5zaXRpb24uZW51bWVyYXRpb25PZmZzZXQpXG5cdFx0XHRcdHByb3BlcnR5LnB1c2gobmV4dFRyYW5zaXRpb24uZW51bWVyYXRpb25PZmZzZXQpO1xuXHRcdFx0c3RydWN0dXJlLnB1c2gocHJvcGVydHkpO1xuXHRcdFx0bmV4dFRyYW5zaXRpb24gPSBuZXh0VHJhbnNpdGlvbi5wYXJlbnQ7XG5cdFx0fVxuXHRcdHN0cnVjdHVyZS5yZXZlcnNlKCk7XG5cdFx0dHJhbnNpdGlvbltSRUNPUkRfU1lNQk9MXSA9IHJlY29yZElkO1xuXHRcdHBhY2tyLnR5cGVkU3RydWN0c1tyZWNvcmRJZF0gPSBzdHJ1Y3R1cmU7XG5cdFx0cGFjayhudWxsLCAwLCB0cnVlKTsgLy8gc3BlY2lhbCBjYWxsIHRvIG5vdGlmeSB0aGF0IHN0cnVjdHVyZXMgaGF2ZSBiZWVuIHVwZGF0ZWRcblx0fVxuXG5cblx0c3dpdGNoIChoZWFkZXJTaXplKSB7XG5cdFx0Y2FzZSAxOlxuXHRcdFx0aWYgKHJlY29yZElkID49IDB4MTApIHJldHVybiAwO1xuXHRcdFx0dGFyZ2V0W3N0YXJ0XSA9IHJlY29yZElkICsgMHgyMDtcblx0XHRcdGJyZWFrO1xuXHRcdGNhc2UgMjpcblx0XHRcdGlmIChyZWNvcmRJZCA+PSAweDEwMCkgcmV0dXJuIDA7XG5cdFx0XHR0YXJnZXRbc3RhcnRdID0gMHgzODtcblx0XHRcdHRhcmdldFtzdGFydCArIDFdID0gcmVjb3JkSWQ7XG5cdFx0XHRicmVhaztcblx0XHRjYXNlIDM6XG5cdFx0XHRpZiAocmVjb3JkSWQgPj0gMHgxMDAwMCkgcmV0dXJuIDA7XG5cdFx0XHR0YXJnZXRbc3RhcnRdID0gMHgzOTtcblx0XHRcdHRhcmdldFZpZXcuc2V0VWludDE2KHN0YXJ0ICsgMSwgcmVjb3JkSWQsIHRydWUpO1xuXHRcdFx0YnJlYWs7XG5cdFx0Y2FzZSA0OlxuXHRcdFx0aWYgKHJlY29yZElkID49IDB4MTAwMDAwMCkgcmV0dXJuIDA7XG5cdFx0XHR0YXJnZXRWaWV3LnNldFVpbnQzMihzdGFydCwgKHJlY29yZElkIDw8IDgpICsgMHgzYSwgdHJ1ZSk7XG5cdFx0XHRicmVhaztcblx0fVxuXG5cdGlmIChwb3NpdGlvbiA8IHJlZnNTdGFydFBvc2l0aW9uKSB7XG5cdFx0aWYgKHJlZnNTdGFydFBvc2l0aW9uID09PSByZWZQb3NpdGlvbilcblx0XHRcdHJldHVybiBwb3NpdGlvbjsgLy8gbm8gcmVmc1xuXHRcdC8vIGFkanVzdCBwb3NpdGlvbmluZ1xuXHRcdHRhcmdldC5jb3B5V2l0aGluKHBvc2l0aW9uLCByZWZzU3RhcnRQb3NpdGlvbiwgcmVmUG9zaXRpb24pO1xuXHRcdHJlZlBvc2l0aW9uICs9IHBvc2l0aW9uIC0gcmVmc1N0YXJ0UG9zaXRpb247XG5cdFx0dHlwZWRTdHJ1Y3RzLmxhc3RTdHJpbmdTdGFydCA9IHBvc2l0aW9uIC0gc3RhcnQ7XG5cdH0gZWxzZSBpZiAocG9zaXRpb24gPiByZWZzU3RhcnRQb3NpdGlvbikge1xuXHRcdGlmIChyZWZzU3RhcnRQb3NpdGlvbiA9PT0gcmVmUG9zaXRpb24pXG5cdFx0XHRyZXR1cm4gcG9zaXRpb247IC8vIG5vIHJlZnNcblx0XHR0eXBlZFN0cnVjdHMubGFzdFN0cmluZ1N0YXJ0ID0gcG9zaXRpb24gLSBzdGFydDtcblx0XHRyZXR1cm4gd3JpdGVTdHJ1Y3Qob2JqZWN0LCB0YXJnZXQsIGVuY29kaW5nU3RhcnQsIHN0YXJ0LCBzdHJ1Y3R1cmVzLCBtYWtlUm9vbSwgcGFjaywgcGFja3IpO1xuXHR9XG5cdHJldHVybiByZWZQb3NpdGlvbjtcbn1cbmZ1bmN0aW9uIGFueVR5cGUodHJhbnNpdGlvbiwgcG9zaXRpb24sIHRhcmdldFZpZXcsIHZhbHVlKSB7XG5cdGxldCBuZXh0VHJhbnNpdGlvbjtcblx0aWYgKChuZXh0VHJhbnNpdGlvbiA9IHRyYW5zaXRpb24uYXNjaWk4IHx8IHRyYW5zaXRpb24ubnVtOCkpIHtcblx0XHR0YXJnZXRWaWV3LnNldEludDgocG9zaXRpb24sIHZhbHVlLCB0cnVlKTtcblx0XHR1cGRhdGVkUG9zaXRpb24gPSBwb3NpdGlvbiArIDE7XG5cdFx0cmV0dXJuIG5leHRUcmFuc2l0aW9uO1xuXHR9XG5cdGlmICgobmV4dFRyYW5zaXRpb24gPSB0cmFuc2l0aW9uLnN0cmluZzE2IHx8IHRyYW5zaXRpb24ub2JqZWN0MTYpKSB7XG5cdFx0dGFyZ2V0Vmlldy5zZXRJbnQxNihwb3NpdGlvbiwgdmFsdWUsIHRydWUpO1xuXHRcdHVwZGF0ZWRQb3NpdGlvbiA9IHBvc2l0aW9uICsgMjtcblx0XHRyZXR1cm4gbmV4dFRyYW5zaXRpb247XG5cdH1cblx0aWYgKG5leHRUcmFuc2l0aW9uID0gdHJhbnNpdGlvbi5udW0zMikge1xuXHRcdHRhcmdldFZpZXcuc2V0VWludDMyKHBvc2l0aW9uLCAweGUwMDAwMTAwICsgdmFsdWUsIHRydWUpO1xuXHRcdHVwZGF0ZWRQb3NpdGlvbiA9IHBvc2l0aW9uICsgNDtcblx0XHRyZXR1cm4gbmV4dFRyYW5zaXRpb247XG5cdH1cblx0Ly8gdHJhbnNpdGlvbi5mbG9hdDY0XG5cdGlmIChuZXh0VHJhbnNpdGlvbiA9IHRyYW5zaXRpb24ubnVtNjQpIHtcblx0XHR0YXJnZXRWaWV3LnNldEZsb2F0NjQocG9zaXRpb24sIE5hTiwgdHJ1ZSk7XG5cdFx0dGFyZ2V0Vmlldy5zZXRJbnQ4KHBvc2l0aW9uLCB2YWx1ZSk7XG5cdFx0dXBkYXRlZFBvc2l0aW9uID0gcG9zaXRpb24gKyA4O1xuXHRcdHJldHVybiBuZXh0VHJhbnNpdGlvbjtcblx0fVxuXHR1cGRhdGVkUG9zaXRpb24gPSBwb3NpdGlvbjtcblx0Ly8gVE9ETzogY2FuIHdlIGRvIGFuIFwiYW55XCIgdHlwZSB3aGVyZSB3ZSBkZWZlciB0aGUgZGVjaXNpb24/XG5cdHJldHVybjtcbn1cbmZ1bmN0aW9uIGNyZWF0ZVR5cGVUcmFuc2l0aW9uKHRyYW5zaXRpb24sIHR5cGUsIHNpemUpIHtcblx0bGV0IHR5cGVOYW1lID0gVFlQRV9OQU1FU1t0eXBlXSArIChzaXplIDw8IDMpO1xuXHRsZXQgbmV3VHJhbnNpdGlvbiA9IHRyYW5zaXRpb25bdHlwZU5hbWVdIHx8ICh0cmFuc2l0aW9uW3R5cGVOYW1lXSA9IE9iamVjdC5jcmVhdGUobnVsbCkpO1xuXHRuZXdUcmFuc2l0aW9uLl9fdHlwZSA9IHR5cGU7XG5cdG5ld1RyYW5zaXRpb24uX19zaXplID0gc2l6ZTtcblx0bmV3VHJhbnNpdGlvbi5fX3BhcmVudCA9IHRyYW5zaXRpb247XG5cdHJldHVybiBuZXdUcmFuc2l0aW9uO1xufVxuZnVuY3Rpb24gb25Mb2FkZWRTdHJ1Y3R1cmVzKHNoYXJlZERhdGEpIHtcblx0aWYgKCEoc2hhcmVkRGF0YSBpbnN0YW5jZW9mIE1hcCkpXG5cdFx0cmV0dXJuIHNoYXJlZERhdGE7XG5cdGxldCB0eXBlZCA9IHNoYXJlZERhdGEuZ2V0KCd0eXBlZCcpIHx8IFtdO1xuXHRpZiAoT2JqZWN0LmlzRnJvemVuKHR5cGVkKSlcblx0XHR0eXBlZCA9IHR5cGVkLm1hcChzdHJ1Y3R1cmUgPT4gc3RydWN0dXJlLnNsaWNlKDApKTtcblx0bGV0IG5hbWVkID0gc2hhcmVkRGF0YS5nZXQoJ25hbWVkJyk7XG5cdGxldCB0cmFuc2l0aW9ucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cdGZvciAobGV0IGkgPSAwLCBsID0gdHlwZWQubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdFx0bGV0IHN0cnVjdHVyZSA9IHR5cGVkW2ldO1xuXHRcdGxldCB0cmFuc2l0aW9uID0gdHJhbnNpdGlvbnM7XG5cdFx0Zm9yIChsZXQgW3R5cGUsIHNpemUsIGtleV0gb2Ygc3RydWN0dXJlKSB7XG5cdFx0XHRsZXQgbmV4dFRyYW5zaXRpb24gPSB0cmFuc2l0aW9uW2tleV07XG5cdFx0XHRpZiAoIW5leHRUcmFuc2l0aW9uKSB7XG5cdFx0XHRcdHRyYW5zaXRpb25ba2V5XSA9IG5leHRUcmFuc2l0aW9uID0ge1xuXHRcdFx0XHRcdGtleSxcblx0XHRcdFx0XHRwYXJlbnQ6IHRyYW5zaXRpb24sXG5cdFx0XHRcdFx0ZW51bWVyYXRpb25PZmZzZXQ6IDAsXG5cdFx0XHRcdFx0YXNjaWkwOiBudWxsLFxuXHRcdFx0XHRcdGFzY2lpODogbnVsbCxcblx0XHRcdFx0XHRudW04OiBudWxsLFxuXHRcdFx0XHRcdHN0cmluZzE2OiBudWxsLFxuXHRcdFx0XHRcdG9iamVjdDE2OiBudWxsLFxuXHRcdFx0XHRcdG51bTMyOiBudWxsLFxuXHRcdFx0XHRcdGZsb2F0NjQ6IG51bGwsXG5cdFx0XHRcdFx0ZGF0ZTY0OiBudWxsLFxuXHRcdFx0XHR9O1xuXHRcdFx0fVxuXHRcdFx0dHJhbnNpdGlvbiA9IGNyZWF0ZVR5cGVUcmFuc2l0aW9uKG5leHRUcmFuc2l0aW9uLCB0eXBlLCBzaXplKTtcblx0XHR9XG5cdFx0dHJhbnNpdGlvbltSRUNPUkRfU1lNQk9MXSA9IGk7XG5cdH1cblx0dHlwZWQudHJhbnNpdGlvbnMgPSB0cmFuc2l0aW9ucztcblx0dGhpcy50eXBlZFN0cnVjdHMgPSB0eXBlZDtcblx0dGhpcy5sYXN0VHlwZWRTdHJ1Y3R1cmVzTGVuZ3RoID0gdHlwZWQubGVuZ3RoO1xuXHRyZXR1cm4gbmFtZWQ7XG59XG52YXIgc291cmNlU3ltYm9sID0gU3ltYm9sLmZvcignc291cmNlJylcbmZ1bmN0aW9uIHJlYWRTdHJ1Y3Qoc3JjLCBwb3NpdGlvbiwgc3JjRW5kLCB1bnBhY2tyKSB7XG5cdGxldCByZWNvcmRJZCA9IHNyY1twb3NpdGlvbisrXSAtIDB4MjA7XG5cdGlmIChyZWNvcmRJZCA+PSAyNCkge1xuXHRcdHN3aXRjaChyZWNvcmRJZCkge1xuXHRcdFx0Y2FzZSAyNDogcmVjb3JkSWQgPSBzcmNbcG9zaXRpb24rK107IGJyZWFrO1xuXHRcdFx0Ly8gbGl0dGxlIGVuZGlhbjpcblx0XHRcdGNhc2UgMjU6IHJlY29yZElkID0gc3JjW3Bvc2l0aW9uKytdICsgKHNyY1twb3NpdGlvbisrXSA8PCA4KTsgYnJlYWs7XG5cdFx0XHRjYXNlIDI2OiByZWNvcmRJZCA9IHNyY1twb3NpdGlvbisrXSArIChzcmNbcG9zaXRpb24rK10gPDwgOCkgKyAoc3JjW3Bvc2l0aW9uKytdIDw8IDE2KTsgYnJlYWs7XG5cdFx0XHRjYXNlIDI3OiByZWNvcmRJZCA9IHNyY1twb3NpdGlvbisrXSArIChzcmNbcG9zaXRpb24rK10gPDwgOCkgKyAoc3JjW3Bvc2l0aW9uKytdIDw8IDE2KSArIChzcmNbcG9zaXRpb24rK10gPDwgMjQpOyBicmVhaztcblx0XHR9XG5cdH1cblx0bGV0IHN0cnVjdHVyZSA9IHVucGFja3IudHlwZWRTdHJ1Y3RzICYmIHVucGFja3IudHlwZWRTdHJ1Y3RzW3JlY29yZElkXTtcblx0aWYgKCFzdHJ1Y3R1cmUpIHtcblx0XHQvLyBjb3B5IHNyYyBidWZmZXIgYmVjYXVzZSBnZXRTdHJ1Y3R1cmVzIHdpbGwgb3ZlcnJpZGUgaXRcblx0XHRzcmMgPSBVaW50OEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHNyYywgcG9zaXRpb24sIHNyY0VuZCk7XG5cdFx0c3JjRW5kIC09IHBvc2l0aW9uO1xuXHRcdHBvc2l0aW9uID0gMDtcblx0XHRpZiAoIXVucGFja3IuZ2V0U3RydWN0dXJlcylcblx0XHRcdHRocm93IG5ldyBFcnJvcihgUmVmZXJlbmNlIHRvIHNoYXJlZCBzdHJ1Y3R1cmUgJHtyZWNvcmRJZH0gd2l0aG91dCBnZXRTdHJ1Y3R1cmVzIG1ldGhvZGApO1xuXHRcdHVucGFja3IuX21lcmdlU3RydWN0dXJlcyh1bnBhY2tyLmdldFN0cnVjdHVyZXMoKSk7XG5cdFx0aWYgKCF1bnBhY2tyLnR5cGVkU3RydWN0cylcblx0XHRcdHRocm93IG5ldyBFcnJvcignQ291bGQgbm90IGZpbmQgYW55IHNoYXJlZCB0eXBlZCBzdHJ1Y3R1cmVzJyk7XG5cdFx0dW5wYWNrci5sYXN0VHlwZWRTdHJ1Y3R1cmVzTGVuZ3RoID0gdW5wYWNrci50eXBlZFN0cnVjdHMubGVuZ3RoO1xuXHRcdHN0cnVjdHVyZSA9IHVucGFja3IudHlwZWRTdHJ1Y3RzW3JlY29yZElkXTtcblx0XHRpZiAoIXN0cnVjdHVyZSlcblx0XHRcdHRocm93IG5ldyBFcnJvcignQ291bGQgbm90IGZpbmQgdHlwZWQgc3RydWN0dXJlICcgKyByZWNvcmRJZCk7XG5cdH1cblx0dmFyIGNvbnN0cnVjdCA9IHN0cnVjdHVyZS5jb25zdHJ1Y3Q7XG5cdGlmICghY29uc3RydWN0KSB7XG5cdFx0Y29uc3RydWN0ID0gc3RydWN0dXJlLmNvbnN0cnVjdCA9IGZ1bmN0aW9uIExhenlPYmplY3QoKSB7XG5cdFx0fVxuXHRcdHZhciBwcm90b3R5cGUgPSBjb25zdHJ1Y3QucHJvdG90eXBlO1xuXHRcdGxldCBwcm9wZXJ0aWVzID0gW107XG5cdFx0bGV0IGN1cnJlbnRPZmZzZXQgPSAwO1xuXHRcdGxldCBsYXN0UmVmUHJvcGVydHk7XG5cdFx0Zm9yIChsZXQgaSA9IDAsIGwgPSBzdHJ1Y3R1cmUubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdFx0XHRsZXQgZGVmaW5pdGlvbiA9IHN0cnVjdHVyZVtpXTtcblx0XHRcdGxldCBbIHR5cGUsIHNpemUsIGtleSwgZW51bWVyYXRpb25PZmZzZXQgXSA9IGRlZmluaXRpb247XG5cdFx0XHRpZiAoa2V5ID09PSAnX19wcm90b19fJylcblx0XHRcdFx0a2V5ID0gJ19fcHJvdG9fJztcblx0XHRcdGxldCBwcm9wZXJ0eSA9IHtcblx0XHRcdFx0a2V5LFxuXHRcdFx0XHRvZmZzZXQ6IGN1cnJlbnRPZmZzZXQsXG5cdFx0XHR9XG5cdFx0XHRpZiAoZW51bWVyYXRpb25PZmZzZXQpXG5cdFx0XHRcdHByb3BlcnRpZXMuc3BsaWNlKGkgKyBlbnVtZXJhdGlvbk9mZnNldCwgMCwgcHJvcGVydHkpO1xuXHRcdFx0ZWxzZVxuXHRcdFx0XHRwcm9wZXJ0aWVzLnB1c2gocHJvcGVydHkpO1xuXHRcdFx0bGV0IGdldFJlZjtcblx0XHRcdHN3aXRjaChzaXplKSB7IC8vIFRPRE86IE1vdmUgaW50byBhIHNlcGFyYXRlIGZ1bmN0aW9uXG5cdFx0XHRcdGNhc2UgMDogZ2V0UmVmID0gKCkgPT4gMDsgYnJlYWs7XG5cdFx0XHRcdGNhc2UgMTpcblx0XHRcdFx0XHRnZXRSZWYgPSAoc291cmNlLCBwb3NpdGlvbikgPT4ge1xuXHRcdFx0XHRcdFx0bGV0IHJlZiA9IHNvdXJjZS5ieXRlc1twb3NpdGlvbiArIHByb3BlcnR5Lm9mZnNldF07XG5cdFx0XHRcdFx0XHRyZXR1cm4gcmVmID49IDB4ZjYgPyB0b0NvbnN0YW50KHJlZikgOiByZWY7XG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSAyOlxuXHRcdFx0XHRcdGdldFJlZiA9IChzb3VyY2UsIHBvc2l0aW9uKSA9PiB7XG5cdFx0XHRcdFx0XHRsZXQgc3JjID0gc291cmNlLmJ5dGVzO1xuXHRcdFx0XHRcdFx0bGV0IGRhdGFWaWV3ID0gc3JjLmRhdGFWaWV3IHx8IChzcmMuZGF0YVZpZXcgPSBuZXcgRGF0YVZpZXcoc3JjLmJ1ZmZlciwgc3JjLmJ5dGVPZmZzZXQsIHNyYy5ieXRlTGVuZ3RoKSk7XG5cdFx0XHRcdFx0XHRsZXQgcmVmID0gZGF0YVZpZXcuZ2V0VWludDE2KHBvc2l0aW9uICsgcHJvcGVydHkub2Zmc2V0LCB0cnVlKTtcblx0XHRcdFx0XHRcdHJldHVybiByZWYgPj0gMHhmZjAwID8gdG9Db25zdGFudChyZWYgJiAweGZmKSA6IHJlZjtcblx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlIDQ6XG5cdFx0XHRcdFx0Z2V0UmVmID0gKHNvdXJjZSwgcG9zaXRpb24pID0+IHtcblx0XHRcdFx0XHRcdGxldCBzcmMgPSBzb3VyY2UuYnl0ZXM7XG5cdFx0XHRcdFx0XHRsZXQgZGF0YVZpZXcgPSBzcmMuZGF0YVZpZXcgfHwgKHNyYy5kYXRhVmlldyA9IG5ldyBEYXRhVmlldyhzcmMuYnVmZmVyLCBzcmMuYnl0ZU9mZnNldCwgc3JjLmJ5dGVMZW5ndGgpKTtcblx0XHRcdFx0XHRcdGxldCByZWYgPSBkYXRhVmlldy5nZXRVaW50MzIocG9zaXRpb24gKyBwcm9wZXJ0eS5vZmZzZXQsIHRydWUpO1xuXHRcdFx0XHRcdFx0cmV0dXJuIHJlZiA+PSAweGZmZmZmZjAwID8gdG9Db25zdGFudChyZWYgJiAweGZmKSA6IHJlZjtcblx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdFx0cHJvcGVydHkuZ2V0UmVmID0gZ2V0UmVmO1xuXHRcdFx0Y3VycmVudE9mZnNldCArPSBzaXplO1xuXHRcdFx0bGV0IGdldDtcblx0XHRcdHN3aXRjaCh0eXBlKSB7XG5cdFx0XHRcdGNhc2UgQVNDSUk6XG5cdFx0XHRcdFx0aWYgKGxhc3RSZWZQcm9wZXJ0eSAmJiAhbGFzdFJlZlByb3BlcnR5Lm5leHQpXG5cdFx0XHRcdFx0XHRsYXN0UmVmUHJvcGVydHkubmV4dCA9IHByb3BlcnR5O1xuXHRcdFx0XHRcdGxhc3RSZWZQcm9wZXJ0eSA9IHByb3BlcnR5O1xuXHRcdFx0XHRcdHByb3BlcnR5Lm11bHRpR2V0Q291bnQgPSAwO1xuXHRcdFx0XHRcdGdldCA9IGZ1bmN0aW9uKHNvdXJjZSkge1xuXHRcdFx0XHRcdFx0bGV0IHNyYyA9IHNvdXJjZS5ieXRlcztcblx0XHRcdFx0XHRcdGxldCBwb3NpdGlvbiA9IHNvdXJjZS5wb3NpdGlvbjtcblx0XHRcdFx0XHRcdGxldCByZWZTdGFydCA9IGN1cnJlbnRPZmZzZXQgKyBwb3NpdGlvbjtcblx0XHRcdFx0XHRcdGxldCByZWYgPSBnZXRSZWYoc291cmNlLCBwb3NpdGlvbik7XG5cdFx0XHRcdFx0XHRpZiAodHlwZW9mIHJlZiAhPT0gJ251bWJlcicpIHJldHVybiByZWY7XG5cblx0XHRcdFx0XHRcdGxldCBlbmQsIG5leHQgPSBwcm9wZXJ0eS5uZXh0O1xuXHRcdFx0XHRcdFx0d2hpbGUobmV4dCkge1xuXHRcdFx0XHRcdFx0XHRlbmQgPSBuZXh0LmdldFJlZihzb3VyY2UsIHBvc2l0aW9uKTtcblx0XHRcdFx0XHRcdFx0aWYgKHR5cGVvZiBlbmQgPT09ICdudW1iZXInKVxuXHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0XHRlbHNlXG5cdFx0XHRcdFx0XHRcdFx0ZW5kID0gbnVsbDtcblx0XHRcdFx0XHRcdFx0bmV4dCA9IG5leHQubmV4dDtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGlmIChlbmQgPT0gbnVsbClcblx0XHRcdFx0XHRcdFx0ZW5kID0gc291cmNlLmJ5dGVzRW5kIC0gcmVmU3RhcnQ7XG5cdFx0XHRcdFx0XHRpZiAoc291cmNlLnNyY1N0cmluZykge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gc291cmNlLnNyY1N0cmluZy5zbGljZShyZWYsIGVuZCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHQvKmlmIChwcm9wZXJ0eS5tdWx0aUdldENvdW50ID4gMCkge1xuXHRcdFx0XHRcdFx0XHRsZXQgYXNjaWlFbmQ7XG5cdFx0XHRcdFx0XHRcdG5leHQgPSBmaXJzdFJlZlByb3BlcnR5O1xuXHRcdFx0XHRcdFx0XHRsZXQgZGF0YVZpZXcgPSBzcmMuZGF0YVZpZXcgfHwgKHNyYy5kYXRhVmlldyA9IG5ldyBEYXRhVmlldyhzcmMuYnVmZmVyLCBzcmMuYnl0ZU9mZnNldCwgc3JjLmJ5dGVMZW5ndGgpKTtcblx0XHRcdFx0XHRcdFx0ZG8ge1xuXHRcdFx0XHRcdFx0XHRcdGFzY2lpRW5kID0gZGF0YVZpZXcuZ2V0VWludDE2KHNvdXJjZS5wb3NpdGlvbiArIG5leHQub2Zmc2V0LCB0cnVlKTtcblx0XHRcdFx0XHRcdFx0XHRpZiAoYXNjaWlFbmQgPCAweGZmMDApXG5cdFx0XHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdFx0XHRlbHNlXG5cdFx0XHRcdFx0XHRcdFx0XHRhc2NpaUVuZCA9IG51bGw7XG5cdFx0XHRcdFx0XHRcdH0gd2hpbGUoKG5leHQgPSBuZXh0Lm5leHQpKTtcblx0XHRcdFx0XHRcdFx0aWYgKGFzY2lpRW5kID09IG51bGwpXG5cdFx0XHRcdFx0XHRcdFx0YXNjaWlFbmQgPSBzb3VyY2UuYnl0ZXNFbmQgLSByZWZTdGFydFxuXHRcdFx0XHRcdFx0XHRzb3VyY2Uuc3JjU3RyaW5nID0gc3JjLnRvU3RyaW5nKCdsYXRpbjEnLCByZWZTdGFydCwgcmVmU3RhcnQgKyBhc2NpaUVuZCk7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBzb3VyY2Uuc3JjU3RyaW5nLnNsaWNlKHJlZiwgZW5kKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGlmIChzb3VyY2UucHJldlN0cmluZ0dldCkge1xuXHRcdFx0XHRcdFx0XHRzb3VyY2UucHJldlN0cmluZ0dldC5tdWx0aUdldENvdW50ICs9IDI7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRzb3VyY2UucHJldlN0cmluZ0dldCA9IHByb3BlcnR5O1xuXHRcdFx0XHRcdFx0XHRwcm9wZXJ0eS5tdWx0aUdldENvdW50LS07XG5cdFx0XHRcdFx0XHR9Ki9cblx0XHRcdFx0XHRcdHJldHVybiByZWFkU3RyaW5nKHNyYywgcmVmICsgcmVmU3RhcnQsIGVuZCAtIHJlZik7XG5cdFx0XHRcdFx0XHQvL3JldHVybiBzcmMudG9TdHJpbmcoJ2xhdGluMScsIHJlZiArIHJlZlN0YXJ0LCBlbmQgKyByZWZTdGFydCk7XG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0Y2FzZSBVVEY4OiBjYXNlIE9CSkVDVF9EQVRBOlxuXHRcdFx0XHRcdGlmIChsYXN0UmVmUHJvcGVydHkgJiYgIWxhc3RSZWZQcm9wZXJ0eS5uZXh0KVxuXHRcdFx0XHRcdFx0bGFzdFJlZlByb3BlcnR5Lm5leHQgPSBwcm9wZXJ0eTtcblx0XHRcdFx0XHRsYXN0UmVmUHJvcGVydHkgPSBwcm9wZXJ0eTtcblx0XHRcdFx0XHRnZXQgPSBmdW5jdGlvbihzb3VyY2UpIHtcblx0XHRcdFx0XHRcdGxldCBwb3NpdGlvbiA9IHNvdXJjZS5wb3NpdGlvbjtcblx0XHRcdFx0XHRcdGxldCByZWZTdGFydCA9IGN1cnJlbnRPZmZzZXQgKyBwb3NpdGlvbjtcblx0XHRcdFx0XHRcdGxldCByZWYgPSBnZXRSZWYoc291cmNlLCBwb3NpdGlvbik7XG5cdFx0XHRcdFx0XHRpZiAodHlwZW9mIHJlZiAhPT0gJ251bWJlcicpIHJldHVybiByZWY7XG5cdFx0XHRcdFx0XHRsZXQgc3JjID0gc291cmNlLmJ5dGVzO1xuXHRcdFx0XHRcdFx0bGV0IGVuZCwgbmV4dCA9IHByb3BlcnR5Lm5leHQ7XG5cdFx0XHRcdFx0XHR3aGlsZShuZXh0KSB7XG5cdFx0XHRcdFx0XHRcdGVuZCA9IG5leHQuZ2V0UmVmKHNvdXJjZSwgcG9zaXRpb24pO1xuXHRcdFx0XHRcdFx0XHRpZiAodHlwZW9mIGVuZCA9PT0gJ251bWJlcicpXG5cdFx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHRcdGVsc2Vcblx0XHRcdFx0XHRcdFx0XHRlbmQgPSBudWxsO1xuXHRcdFx0XHRcdFx0XHRuZXh0ID0gbmV4dC5uZXh0O1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0aWYgKGVuZCA9PSBudWxsKVxuXHRcdFx0XHRcdFx0XHRlbmQgPSBzb3VyY2UuYnl0ZXNFbmQgLSByZWZTdGFydDtcblx0XHRcdFx0XHRcdGlmICh0eXBlID09PSBVVEY4KSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBzcmMudG9TdHJpbmcoJ3V0ZjgnLCByZWYgKyByZWZTdGFydCwgZW5kICsgcmVmU3RhcnQpO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0Y3VycmVudFNvdXJjZSA9IHNvdXJjZTtcblx0XHRcdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gdW5wYWNrci51bnBhY2soc3JjLCB7IHN0YXJ0OiByZWYgKyByZWZTdGFydCwgZW5kOiBlbmQgKyByZWZTdGFydCB9KTtcblx0XHRcdFx0XHRcdFx0fSBmaW5hbGx5IHtcblx0XHRcdFx0XHRcdFx0XHRjdXJyZW50U291cmNlID0gbnVsbDtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdGNhc2UgTlVNQkVSOlxuXHRcdFx0XHRcdHN3aXRjaChzaXplKSB7XG5cdFx0XHRcdFx0XHRjYXNlIDQ6XG5cdFx0XHRcdFx0XHRcdGdldCA9IGZ1bmN0aW9uIChzb3VyY2UpIHtcblx0XHRcdFx0XHRcdFx0XHRsZXQgc3JjID0gc291cmNlLmJ5dGVzO1xuXHRcdFx0XHRcdFx0XHRcdGxldCBkYXRhVmlldyA9IHNyYy5kYXRhVmlldyB8fCAoc3JjLmRhdGFWaWV3ID0gbmV3IERhdGFWaWV3KHNyYy5idWZmZXIsIHNyYy5ieXRlT2Zmc2V0LCBzcmMuYnl0ZUxlbmd0aCkpO1xuXHRcdFx0XHRcdFx0XHRcdGxldCBwb3NpdGlvbiA9IHNvdXJjZS5wb3NpdGlvbiArIHByb3BlcnR5Lm9mZnNldDtcblx0XHRcdFx0XHRcdFx0XHRsZXQgdmFsdWUgPSBkYXRhVmlldy5nZXRJbnQzMihwb3NpdGlvbiwgdHJ1ZSlcblx0XHRcdFx0XHRcdFx0XHRpZiAodmFsdWUgPCAweDIwMDAwMDAwKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAodmFsdWUgPiAtMHgxZjAwMDAwMClcblx0XHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuIHZhbHVlO1xuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKHZhbHVlID4gLTB4MjAwMDAwMDApXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHJldHVybiB0b0NvbnN0YW50KHZhbHVlICYgMHhmZik7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdGxldCBmVmFsdWUgPSBkYXRhVmlldy5nZXRGbG9hdDMyKHBvc2l0aW9uLCB0cnVlKTtcblx0XHRcdFx0XHRcdFx0XHQvLyB0aGlzIGRvZXMgcm91bmRpbmcgb2YgbnVtYmVycyB0aGF0IHdlcmUgZW5jb2RlZCBpbiAzMi1iaXQgZmxvYXQgdG8gbmVhcmVzdCBzaWduaWZpY2FudCBkZWNpbWFsIGRpZ2l0IHRoYXQgY291bGQgYmUgcHJlc2VydmVkXG5cdFx0XHRcdFx0XHRcdFx0bGV0IG11bHRpcGxpZXIgPSBtdWx0MTBbKChzcmNbcG9zaXRpb24gKyAzXSAmIDB4N2YpIDw8IDEpIHwgKHNyY1twb3NpdGlvbiArIDJdID4+IDcpXVxuXHRcdFx0XHRcdFx0XHRcdHJldHVybiAoKG11bHRpcGxpZXIgKiBmVmFsdWUgKyAoZlZhbHVlID4gMCA/IDAuNSA6IC0wLjUpKSA+PiAwKSAvIG11bHRpcGxpZXI7XG5cdFx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0Y2FzZSA4OlxuXHRcdFx0XHRcdFx0XHRnZXQgPSBmdW5jdGlvbiAoc291cmNlKSB7XG5cdFx0XHRcdFx0XHRcdFx0bGV0IHNyYyA9IHNvdXJjZS5ieXRlcztcblx0XHRcdFx0XHRcdFx0XHRsZXQgZGF0YVZpZXcgPSBzcmMuZGF0YVZpZXcgfHwgKHNyYy5kYXRhVmlldyA9IG5ldyBEYXRhVmlldyhzcmMuYnVmZmVyLCBzcmMuYnl0ZU9mZnNldCwgc3JjLmJ5dGVMZW5ndGgpKTtcblx0XHRcdFx0XHRcdFx0XHRsZXQgdmFsdWUgPSBkYXRhVmlldy5nZXRGbG9hdDY0KHNvdXJjZS5wb3NpdGlvbiArIHByb3BlcnR5Lm9mZnNldCwgdHJ1ZSk7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKGlzTmFOKHZhbHVlKSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0bGV0IGJ5dGUgPSBzcmNbc291cmNlLnBvc2l0aW9uICsgcHJvcGVydHkub2Zmc2V0XTtcblx0XHRcdFx0XHRcdFx0XHRcdGlmIChieXRlID49IDB4ZjYpXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHJldHVybiB0b0NvbnN0YW50KGJ5dGUpO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gdmFsdWU7XG5cdFx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0Y2FzZSAxOlxuXHRcdFx0XHRcdFx0XHRnZXQgPSBmdW5jdGlvbiAoc291cmNlKSB7XG5cdFx0XHRcdFx0XHRcdFx0bGV0IHNyYyA9IHNvdXJjZS5ieXRlcztcblx0XHRcdFx0XHRcdFx0XHRsZXQgdmFsdWUgPSBzcmNbc291cmNlLnBvc2l0aW9uICsgcHJvcGVydHkub2Zmc2V0XTtcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gdmFsdWUgPCAweGY2ID8gdmFsdWUgOiB0b0NvbnN0YW50KHZhbHVlKTtcblx0XHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRjYXNlIERBVEU6XG5cdFx0XHRcdFx0Z2V0ID0gZnVuY3Rpb24gKHNvdXJjZSkge1xuXHRcdFx0XHRcdFx0bGV0IHNyYyA9IHNvdXJjZS5ieXRlcztcblx0XHRcdFx0XHRcdGxldCBkYXRhVmlldyA9IHNyYy5kYXRhVmlldyB8fCAoc3JjLmRhdGFWaWV3ID0gbmV3IERhdGFWaWV3KHNyYy5idWZmZXIsIHNyYy5ieXRlT2Zmc2V0LCBzcmMuYnl0ZUxlbmd0aCkpO1xuXHRcdFx0XHRcdFx0cmV0dXJuIG5ldyBEYXRlKGRhdGFWaWV3LmdldEZsb2F0NjQoc291cmNlLnBvc2l0aW9uICsgcHJvcGVydHkub2Zmc2V0LCB0cnVlKSk7XG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRicmVhaztcblxuXHRcdFx0fVxuXHRcdFx0cHJvcGVydHkuZ2V0ID0gZ2V0O1xuXHRcdH1cblx0XHQvLyBUT0RPOiBsb2FkIHRoZSBzcmNTdHJpbmcgZm9yIGZhc3RlciBzdHJpbmcgZGVjb2Rpbmcgb24gdG9KU09OXG5cdFx0aWYgKGV2YWxTdXBwb3J0ZWQpIHtcblx0XHRcdGxldCBvYmplY3RMaXRlcmFsUHJvcGVydGllcyA9IFtdO1xuXHRcdFx0bGV0IGFyZ3MgPSBbXTtcblx0XHRcdGxldCBpID0gMDtcblx0XHRcdGxldCBoYXNJbmhlcml0ZWRQcm9wZXJ0aWVzO1xuXHRcdFx0Zm9yIChsZXQgcHJvcGVydHkgb2YgcHJvcGVydGllcykgeyAvLyBhc3NpZ24gaW4gZW51bWVyYXRpb24gb3JkZXJcblx0XHRcdFx0aWYgKHVucGFja3IuYWx3YXlzTGF6eVByb3BlcnR5ICYmIHVucGFja3IuYWx3YXlzTGF6eVByb3BlcnR5KHByb3BlcnR5LmtleSkpIHtcblx0XHRcdFx0XHQvLyB0aGVzZSBwcm9wZXJ0aWVzIGFyZSBub3QgZWFnZXJseSBldmFsdWF0ZWQgYW5kIHRoaXMgY2FuIGJlIHVzZWQgZm9yIGNyZWF0aW5nIHByb3BlcnRpZXNcblx0XHRcdFx0XHQvLyB0aGF0IGFyZSBub3Qgc2VyaWFsaXplZCBhcyBKU09OXG5cdFx0XHRcdFx0aGFzSW5oZXJpdGVkUHJvcGVydGllcyA9IHRydWU7XG5cdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdH1cblx0XHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KHByb3RvdHlwZSwgcHJvcGVydHkua2V5LCB7IGdldDogd2l0aFNvdXJjZShwcm9wZXJ0eS5nZXQpLCBlbnVtZXJhYmxlOiB0cnVlIH0pO1xuXHRcdFx0XHRsZXQgdmFsdWVGdW5jdGlvbiA9ICd2JyArIGkrKztcblx0XHRcdFx0YXJncy5wdXNoKHZhbHVlRnVuY3Rpb24pO1xuXHRcdFx0XHRvYmplY3RMaXRlcmFsUHJvcGVydGllcy5wdXNoKCdbJyArIEpTT04uc3RyaW5naWZ5KHByb3BlcnR5LmtleSkgKyAnXTonICsgdmFsdWVGdW5jdGlvbiArICcocyknKTtcblx0XHRcdH1cblx0XHRcdGlmIChoYXNJbmhlcml0ZWRQcm9wZXJ0aWVzKSB7XG5cdFx0XHRcdG9iamVjdExpdGVyYWxQcm9wZXJ0aWVzLnB1c2goJ19fcHJvdG9fXzp0aGlzJyk7XG5cdFx0XHR9XG5cdFx0XHRsZXQgdG9PYmplY3QgPSAobmV3IEZ1bmN0aW9uKC4uLmFyZ3MsICdyZXR1cm4gZnVuY3Rpb24ocyl7cmV0dXJueycgKyBvYmplY3RMaXRlcmFsUHJvcGVydGllcy5qb2luKCcsJykgKyAnfX0nKSkuYXBwbHkobnVsbCwgcHJvcGVydGllcy5tYXAocHJvcCA9PiBwcm9wLmdldCkpO1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KHByb3RvdHlwZSwgJ3RvSlNPTicsIHtcblx0XHRcdFx0dmFsdWUob21pdFVuZGVyc2NvcmVkUHJvcGVydGllcykge1xuXHRcdFx0XHRcdHJldHVybiB0b09iamVjdC5jYWxsKHRoaXMsIHRoaXNbc291cmNlU3ltYm9sXSk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkocHJvdG90eXBlLCAndG9KU09OJywge1xuXHRcdFx0XHR2YWx1ZShvbWl0VW5kZXJzY29yZWRQcm9wZXJ0aWVzKSB7XG5cdFx0XHRcdFx0Ly8gcmV0dXJuIGFuIGVudW1lcmFibGUgb2JqZWN0IHdpdGggb3duIHByb3BlcnRpZXMgdG8gSlNPTiBzdHJpbmdpZnlcblx0XHRcdFx0XHRsZXQgcmVzb2x2ZWQgPSB7fTtcblx0XHRcdFx0XHRmb3IgKGxldCBpID0gMCwgbCA9IHByb3BlcnRpZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdFx0XHRcdFx0XHQvLyBUT0RPOiBjaGVjayBhbHdheXNMYXp5UHJvcGVydHlcblx0XHRcdFx0XHRcdGxldCBrZXkgPSBwcm9wZXJ0aWVzW2ldLmtleTtcblxuXHRcdFx0XHRcdFx0cmVzb2x2ZWRba2V5XSA9IHRoaXNba2V5XTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIHJlc29sdmVkO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHQvLyBub3QgZW51bWVyYWJsZSBvciBhbnl0aGluZ1xuXHRcdFx0fSk7XG5cdFx0fVxuXHR9XG5cdHZhciBpbnN0YW5jZSA9IG5ldyBjb25zdHJ1Y3QoKTtcblx0aW5zdGFuY2Vbc291cmNlU3ltYm9sXSA9IHtcblx0XHRieXRlczogc3JjLFxuXHRcdHBvc2l0aW9uLFxuXHRcdHNyY1N0cmluZzogJycsXG5cdFx0Ynl0ZXNFbmQ6IHNyY0VuZFxuXHR9XG5cdHJldHVybiBpbnN0YW5jZTtcbn1cbmZ1bmN0aW9uIHRvQ29uc3RhbnQoY29kZSkge1xuXHRzd2l0Y2goY29kZSkge1xuXHRcdGNhc2UgMHhmNjogcmV0dXJuIG51bGw7XG5cdFx0Y2FzZSAweGY3OiByZXR1cm4gdW5kZWZpbmVkO1xuXHRcdGNhc2UgMHhmODogcmV0dXJuIGZhbHNlO1xuXHRcdGNhc2UgMHhmOTogcmV0dXJuIHRydWU7XG5cdH1cblx0dGhyb3cgbmV3IEVycm9yKCdVbmtub3duIGNvbnN0YW50Jyk7XG59XG5mdW5jdGlvbiB3aXRoU291cmNlKGdldCkge1xuXHRyZXR1cm4gZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIGdldCh0aGlzW3NvdXJjZVN5bWJvbF0pO1xuXHR9XG59XG5cbmZ1bmN0aW9uIHNhdmVTdGF0ZSgpIHtcblx0aWYgKGN1cnJlbnRTb3VyY2UpIHtcblx0XHRjdXJyZW50U291cmNlLmJ5dGVzID0gVWludDhBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChjdXJyZW50U291cmNlLmJ5dGVzLCBjdXJyZW50U291cmNlLnBvc2l0aW9uLCBjdXJyZW50U291cmNlLmJ5dGVzRW5kKTtcblx0XHRjdXJyZW50U291cmNlLnBvc2l0aW9uID0gMDtcblx0XHRjdXJyZW50U291cmNlLmJ5dGVzRW5kID0gY3VycmVudFNvdXJjZS5ieXRlcy5sZW5ndGg7XG5cdH1cbn1cbmZ1bmN0aW9uIHByZXBhcmVTdHJ1Y3R1cmVzKHN0cnVjdHVyZXMsIHBhY2tyKSB7XG5cdGlmIChwYWNrci50eXBlZFN0cnVjdHMpIHtcblx0XHRsZXQgc3RydWN0TWFwID0gbmV3IE1hcCgpO1xuXHRcdHN0cnVjdE1hcC5zZXQoJ25hbWVkJywgc3RydWN0dXJlcyk7XG5cdFx0c3RydWN0TWFwLnNldCgndHlwZWQnLCBwYWNrci50eXBlZFN0cnVjdHMpO1xuXHRcdHN0cnVjdHVyZXMgPSBzdHJ1Y3RNYXA7XG5cdH1cblx0bGV0IGxhc3RUeXBlZFN0cnVjdHVyZXNMZW5ndGggPSBwYWNrci5sYXN0VHlwZWRTdHJ1Y3R1cmVzTGVuZ3RoIHx8IDA7XG5cdHN0cnVjdHVyZXMuaXNDb21wYXRpYmxlID0gZXhpc3RpbmcgPT4ge1xuXHRcdGxldCBjb21wYXRpYmxlID0gdHJ1ZTtcblx0XHRpZiAoZXhpc3RpbmcgaW5zdGFuY2VvZiBNYXApIHtcblx0XHRcdGxldCBuYW1lZCA9IGV4aXN0aW5nLmdldCgnbmFtZWQnKSB8fCBbXTtcblx0XHRcdGlmIChuYW1lZC5sZW5ndGggIT09IChwYWNrci5sYXN0TmFtZWRTdHJ1Y3R1cmVzTGVuZ3RoIHx8IDApKVxuXHRcdFx0XHRjb21wYXRpYmxlID0gZmFsc2U7XG5cdFx0XHRsZXQgdHlwZWQgPSBleGlzdGluZy5nZXQoJ3R5cGVkJykgfHwgW107XG5cdFx0XHRpZiAodHlwZWQubGVuZ3RoICE9PSBsYXN0VHlwZWRTdHJ1Y3R1cmVzTGVuZ3RoKVxuXHRcdFx0XHRjb21wYXRpYmxlID0gZmFsc2U7XG5cdFx0fSBlbHNlIGlmIChleGlzdGluZyBpbnN0YW5jZW9mIEFycmF5IHx8IEFycmF5LmlzQXJyYXkoZXhpc3RpbmcpKSB7XG5cdFx0XHRpZiAoZXhpc3RpbmcubGVuZ3RoICE9PSAocGFja3IubGFzdE5hbWVkU3RydWN0dXJlc0xlbmd0aCB8fCAwKSlcblx0XHRcdFx0Y29tcGF0aWJsZSA9IGZhbHNlO1xuXHRcdH1cblx0XHRpZiAoIWNvbXBhdGlibGUpXG5cdFx0XHRwYWNrci5fbWVyZ2VTdHJ1Y3R1cmVzKGV4aXN0aW5nKTtcblx0XHRyZXR1cm4gY29tcGF0aWJsZTtcblx0fTtcblx0cGFja3IubGFzdFR5cGVkU3RydWN0dXJlc0xlbmd0aCA9IHBhY2tyLnR5cGVkU3RydWN0cyAmJiBwYWNrci50eXBlZFN0cnVjdHMubGVuZ3RoO1xuXHRyZXR1cm4gc3RydWN0dXJlcztcbn1cblxuc2V0UmVhZFN0cnVjdChyZWFkU3RydWN0LCBvbkxvYWRlZFN0cnVjdHVyZXMsIHNhdmVTdGF0ZSk7XG5cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/node_modules/@livestore/utils/node_modules/msgpackr/struct.js\n");

/***/ }),

/***/ "(rsc)/./src/node_modules/@livestore/utils/node_modules/msgpackr/unpack.js":
/*!***************************************************************************!*\
  !*** ./src/node_modules/@livestore/utils/node_modules/msgpackr/unpack.js ***!
  \***************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   C1: () => (/* binding */ C1),\n/* harmony export */   C1Type: () => (/* binding */ C1Type),\n/* harmony export */   Decoder: () => (/* binding */ Decoder),\n/* harmony export */   FLOAT32_OPTIONS: () => (/* binding */ FLOAT32_OPTIONS),\n/* harmony export */   Unpackr: () => (/* binding */ Unpackr),\n/* harmony export */   addExtension: () => (/* binding */ addExtension),\n/* harmony export */   checkedRead: () => (/* binding */ checkedRead),\n/* harmony export */   clearSource: () => (/* binding */ clearSource),\n/* harmony export */   decode: () => (/* binding */ decode),\n/* harmony export */   getPosition: () => (/* binding */ getPosition),\n/* harmony export */   isNativeAccelerationEnabled: () => (/* binding */ isNativeAccelerationEnabled),\n/* harmony export */   loadStructures: () => (/* binding */ loadStructures),\n/* harmony export */   mult10: () => (/* binding */ mult10),\n/* harmony export */   read: () => (/* binding */ read),\n/* harmony export */   readString: () => (/* binding */ readString),\n/* harmony export */   roundFloat32: () => (/* binding */ roundFloat32),\n/* harmony export */   setExtractor: () => (/* binding */ setExtractor),\n/* harmony export */   setReadStruct: () => (/* binding */ setReadStruct),\n/* harmony export */   typedArrays: () => (/* binding */ typedArrays),\n/* harmony export */   unpack: () => (/* binding */ unpack),\n/* harmony export */   unpackMultiple: () => (/* binding */ unpackMultiple)\n/* harmony export */ });\nvar decoder\ntry {\n\tdecoder = new TextDecoder()\n} catch(error) {}\nvar src\nvar srcEnd\nvar position = 0\nvar alreadySet\nconst EMPTY_ARRAY = []\nvar strings = EMPTY_ARRAY\nvar stringPosition = 0\nvar currentUnpackr = {}\nvar currentStructures\nvar srcString\nvar srcStringStart = 0\nvar srcStringEnd = 0\nvar bundledStrings\nvar referenceMap\nvar currentExtensions = []\nvar dataView\nvar defaultOptions = {\n\tuseRecords: false,\n\tmapsAsObjects: true\n}\nclass C1Type {}\nconst C1 = new C1Type()\nC1.name = 'MessagePack 0xC1'\nvar sequentialMode = false\nvar inlineObjectReadThreshold = 2\nvar readStruct, onLoadedStructures, onSaveState\nvar BlockedFunction // we use search and replace to change the next call to BlockedFunction to avoid CSP issues for\n// no-eval build\ntry {\n\tnew Function('')\n} catch(error) {\n\t// if eval variants are not supported, do not create inline object readers ever\n\tinlineObjectReadThreshold = Infinity\n}\n\nclass Unpackr {\n\tconstructor(options) {\n\t\tif (options) {\n\t\t\tif (options.useRecords === false && options.mapsAsObjects === undefined)\n\t\t\t\toptions.mapsAsObjects = true\n\t\t\tif (options.sequential && options.trusted !== false) {\n\t\t\t\toptions.trusted = true;\n\t\t\t\tif (!options.structures && options.useRecords != false) {\n\t\t\t\t\toptions.structures = []\n\t\t\t\t\tif (!options.maxSharedStructures)\n\t\t\t\t\t\toptions.maxSharedStructures = 0\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (options.structures)\n\t\t\t\toptions.structures.sharedLength = options.structures.length\n\t\t\telse if (options.getStructures) {\n\t\t\t\t(options.structures = []).uninitialized = true // this is what we use to denote an uninitialized structures\n\t\t\t\toptions.structures.sharedLength = 0\n\t\t\t}\n\t\t\tif (options.int64AsNumber) {\n\t\t\t\toptions.int64AsType = 'number'\n\t\t\t}\n\t\t}\n\t\tObject.assign(this, options)\n\t}\n\tunpack(source, options) {\n\t\tif (src) {\n\t\t\t// re-entrant execution, save the state and restore it after we do this unpack\n\t\t\treturn saveState(() => {\n\t\t\t\tclearSource()\n\t\t\t\treturn this ? this.unpack(source, options) : Unpackr.prototype.unpack.call(defaultOptions, source, options)\n\t\t\t})\n\t\t}\n\t\tif (!source.buffer && source.constructor === ArrayBuffer)\n\t\t\tsource = typeof Buffer !== 'undefined' ? Buffer.from(source) : new Uint8Array(source);\n\t\tif (typeof options === 'object') {\n\t\t\tsrcEnd = options.end || source.length\n\t\t\tposition = options.start || 0\n\t\t} else {\n\t\t\tposition = 0\n\t\t\tsrcEnd = options > -1 ? options : source.length\n\t\t}\n\t\tstringPosition = 0\n\t\tsrcStringEnd = 0\n\t\tsrcString = null\n\t\tstrings = EMPTY_ARRAY\n\t\tbundledStrings = null\n\t\tsrc = source\n\t\t// this provides cached access to the data view for a buffer if it is getting reused, which is a recommend\n\t\t// technique for getting data from a database where it can be copied into an existing buffer instead of creating\n\t\t// new ones\n\t\ttry {\n\t\t\tdataView = source.dataView || (source.dataView = new DataView(source.buffer, source.byteOffset, source.byteLength))\n\t\t} catch(error) {\n\t\t\t// if it doesn't have a buffer, maybe it is the wrong type of object\n\t\t\tsrc = null\n\t\t\tif (source instanceof Uint8Array)\n\t\t\t\tthrow error\n\t\t\tthrow new Error('Source must be a Uint8Array or Buffer but was a ' + ((source && typeof source == 'object') ? source.constructor.name : typeof source))\n\t\t}\n\t\tif (this instanceof Unpackr) {\n\t\t\tcurrentUnpackr = this\n\t\t\tif (this.structures) {\n\t\t\t\tcurrentStructures = this.structures\n\t\t\t\treturn checkedRead(options)\n\t\t\t} else if (!currentStructures || currentStructures.length > 0) {\n\t\t\t\tcurrentStructures = []\n\t\t\t}\n\t\t} else {\n\t\t\tcurrentUnpackr = defaultOptions\n\t\t\tif (!currentStructures || currentStructures.length > 0)\n\t\t\t\tcurrentStructures = []\n\t\t}\n\t\treturn checkedRead(options)\n\t}\n\tunpackMultiple(source, forEach) {\n\t\tlet values, lastPosition = 0\n\t\ttry {\n\t\t\tsequentialMode = true\n\t\t\tlet size = source.length\n\t\t\tlet value = this ? this.unpack(source, size) : defaultUnpackr.unpack(source, size)\n\t\t\tif (forEach) {\n\t\t\t\tif (forEach(value, lastPosition, position) === false) return;\n\t\t\t\twhile(position < size) {\n\t\t\t\t\tlastPosition = position\n\t\t\t\t\tif (forEach(checkedRead(), lastPosition, position) === false) {\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tvalues = [ value ]\n\t\t\t\twhile(position < size) {\n\t\t\t\t\tlastPosition = position\n\t\t\t\t\tvalues.push(checkedRead())\n\t\t\t\t}\n\t\t\t\treturn values\n\t\t\t}\n\t\t} catch(error) {\n\t\t\terror.lastPosition = lastPosition\n\t\t\terror.values = values\n\t\t\tthrow error\n\t\t} finally {\n\t\t\tsequentialMode = false\n\t\t\tclearSource()\n\t\t}\n\t}\n\t_mergeStructures(loadedStructures, existingStructures) {\n\t\tif (onLoadedStructures)\n\t\t\tloadedStructures = onLoadedStructures.call(this, loadedStructures);\n\t\tloadedStructures = loadedStructures || []\n\t\tif (Object.isFrozen(loadedStructures))\n\t\t\tloadedStructures = loadedStructures.map(structure => structure.slice(0))\n\t\tfor (let i = 0, l = loadedStructures.length; i < l; i++) {\n\t\t\tlet structure = loadedStructures[i]\n\t\t\tif (structure) {\n\t\t\t\tstructure.isShared = true\n\t\t\t\tif (i >= 32)\n\t\t\t\t\tstructure.highByte = (i - 32) >> 5\n\t\t\t}\n\t\t}\n\t\tloadedStructures.sharedLength = loadedStructures.length\n\t\tfor (let id in existingStructures || []) {\n\t\t\tif (id >= 0) {\n\t\t\t\tlet structure = loadedStructures[id]\n\t\t\t\tlet existing = existingStructures[id]\n\t\t\t\tif (existing) {\n\t\t\t\t\tif (structure)\n\t\t\t\t\t\t(loadedStructures.restoreStructures || (loadedStructures.restoreStructures = []))[id] = structure\n\t\t\t\t\tloadedStructures[id] = existing\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn this.structures = loadedStructures\n\t}\n\tdecode(source, options) {\n\t\treturn this.unpack(source, options)\n\t}\n}\nfunction getPosition() {\n\treturn position\n}\nfunction checkedRead(options) {\n\ttry {\n\t\tif (!currentUnpackr.trusted && !sequentialMode) {\n\t\t\tlet sharedLength = currentStructures.sharedLength || 0\n\t\t\tif (sharedLength < currentStructures.length)\n\t\t\t\tcurrentStructures.length = sharedLength\n\t\t}\n\t\tlet result\n\t\tif (currentUnpackr.randomAccessStructure && src[position] < 0x40 && src[position] >= 0x20 && readStruct) {\n\t\t\tresult = readStruct(src, position, srcEnd, currentUnpackr)\n\t\t\tsrc = null // dispose of this so that recursive unpack calls don't save state\n\t\t\tif (!(options && options.lazy) && result)\n\t\t\t\tresult = result.toJSON()\n\t\t\tposition = srcEnd\n\t\t} else\n\t\t\tresult = read()\n\t\tif (bundledStrings) { // bundled strings to skip past\n\t\t\tposition = bundledStrings.postBundlePosition\n\t\t\tbundledStrings = null\n\t\t}\n\t\tif (sequentialMode)\n\t\t\t// we only need to restore the structures if there was an error, but if we completed a read,\n\t\t\t// we can clear this out and keep the structures we read\n\t\t\tcurrentStructures.restoreStructures = null\n\n\t\tif (position == srcEnd) {\n\t\t\t// finished reading this source, cleanup references\n\t\t\tif (currentStructures && currentStructures.restoreStructures)\n\t\t\t\trestoreStructures()\n\t\t\tcurrentStructures = null\n\t\t\tsrc = null\n\t\t\tif (referenceMap)\n\t\t\t\treferenceMap = null\n\t\t} else if (position > srcEnd) {\n\t\t\t// over read\n\t\t\tthrow new Error('Unexpected end of MessagePack data')\n\t\t} else if (!sequentialMode) {\n\t\t\tlet jsonView;\n\t\t\ttry {\n\t\t\t\tjsonView = JSON.stringify(result, (_, value) => typeof value === \"bigint\" ? `${value}n` : value).slice(0, 100)\n\t\t\t} catch(error) {\n\t\t\t\tjsonView = '(JSON view not available ' + error + ')'\n\t\t\t}\n\t\t\tthrow new Error('Data read, but end of buffer not reached ' + jsonView)\n\t\t}\n\t\t// else more to read, but we are reading sequentially, so don't clear source yet\n\t\treturn result\n\t} catch(error) {\n\t\tif (currentStructures && currentStructures.restoreStructures)\n\t\t\trestoreStructures()\n\t\tclearSource()\n\t\tif (error instanceof RangeError || error.message.startsWith('Unexpected end of buffer') || position > srcEnd) {\n\t\t\terror.incomplete = true\n\t\t}\n\t\tthrow error\n\t}\n}\n\nfunction restoreStructures() {\n\tfor (let id in currentStructures.restoreStructures) {\n\t\tcurrentStructures[id] = currentStructures.restoreStructures[id]\n\t}\n\tcurrentStructures.restoreStructures = null\n}\n\nfunction read() {\n\tlet token = src[position++]\n\tif (token < 0xa0) {\n\t\tif (token < 0x80) {\n\t\t\tif (token < 0x40)\n\t\t\t\treturn token\n\t\t\telse {\n\t\t\t\tlet structure = currentStructures[token & 0x3f] ||\n\t\t\t\t\tcurrentUnpackr.getStructures && loadStructures()[token & 0x3f]\n\t\t\t\tif (structure) {\n\t\t\t\t\tif (!structure.read) {\n\t\t\t\t\t\tstructure.read = createStructureReader(structure, token & 0x3f)\n\t\t\t\t\t}\n\t\t\t\t\treturn structure.read()\n\t\t\t\t} else\n\t\t\t\t\treturn token\n\t\t\t}\n\t\t} else if (token < 0x90) {\n\t\t\t// map\n\t\t\ttoken -= 0x80\n\t\t\tif (currentUnpackr.mapsAsObjects) {\n\t\t\t\tlet object = {}\n\t\t\t\tfor (let i = 0; i < token; i++) {\n\t\t\t\t\tlet key = readKey()\n\t\t\t\t\tif (key === '__proto__')\n\t\t\t\t\t\tkey = '__proto_'\n\t\t\t\t\tobject[key] = read()\n\t\t\t\t}\n\t\t\t\treturn object\n\t\t\t} else {\n\t\t\t\tlet map = new Map()\n\t\t\t\tfor (let i = 0; i < token; i++) {\n\t\t\t\t\tmap.set(read(), read())\n\t\t\t\t}\n\t\t\t\treturn map\n\t\t\t}\n\t\t} else {\n\t\t\ttoken -= 0x90\n\t\t\tlet array = new Array(token)\n\t\t\tfor (let i = 0; i < token; i++) {\n\t\t\t\tarray[i] = read()\n\t\t\t}\n\t\t\tif (currentUnpackr.freezeData)\n\t\t\t\treturn Object.freeze(array)\n\t\t\treturn array\n\t\t}\n\t} else if (token < 0xc0) {\n\t\t// fixstr\n\t\tlet length = token - 0xa0\n\t\tif (srcStringEnd >= position) {\n\t\t\treturn srcString.slice(position - srcStringStart, (position += length) - srcStringStart)\n\t\t}\n\t\tif (srcStringEnd == 0 && srcEnd < 140) {\n\t\t\t// for small blocks, avoiding the overhead of the extract call is helpful\n\t\t\tlet string = length < 16 ? shortStringInJS(length) : longStringInJS(length)\n\t\t\tif (string != null)\n\t\t\t\treturn string\n\t\t}\n\t\treturn readFixedString(length)\n\t} else {\n\t\tlet value\n\t\tswitch (token) {\n\t\t\tcase 0xc0: return null\n\t\t\tcase 0xc1:\n\t\t\t\tif (bundledStrings) {\n\t\t\t\t\tvalue = read() // followed by the length of the string in characters (not bytes!)\n\t\t\t\t\tif (value > 0)\n\t\t\t\t\t\treturn bundledStrings[1].slice(bundledStrings.position1, bundledStrings.position1 += value)\n\t\t\t\t\telse\n\t\t\t\t\t\treturn bundledStrings[0].slice(bundledStrings.position0, bundledStrings.position0 -= value)\n\t\t\t\t}\n\t\t\t\treturn C1; // \"never-used\", return special object to denote that\n\t\t\tcase 0xc2: return false\n\t\t\tcase 0xc3: return true\n\t\t\tcase 0xc4:\n\t\t\t\t// bin 8\n\t\t\t\tvalue = src[position++]\n\t\t\t\tif (value === undefined)\n\t\t\t\t\tthrow new Error('Unexpected end of buffer')\n\t\t\t\treturn readBin(value)\n\t\t\tcase 0xc5:\n\t\t\t\t// bin 16\n\t\t\t\tvalue = dataView.getUint16(position)\n\t\t\t\tposition += 2\n\t\t\t\treturn readBin(value)\n\t\t\tcase 0xc6:\n\t\t\t\t// bin 32\n\t\t\t\tvalue = dataView.getUint32(position)\n\t\t\t\tposition += 4\n\t\t\t\treturn readBin(value)\n\t\t\tcase 0xc7:\n\t\t\t\t// ext 8\n\t\t\t\treturn readExt(src[position++])\n\t\t\tcase 0xc8:\n\t\t\t\t// ext 16\n\t\t\t\tvalue = dataView.getUint16(position)\n\t\t\t\tposition += 2\n\t\t\t\treturn readExt(value)\n\t\t\tcase 0xc9:\n\t\t\t\t// ext 32\n\t\t\t\tvalue = dataView.getUint32(position)\n\t\t\t\tposition += 4\n\t\t\t\treturn readExt(value)\n\t\t\tcase 0xca:\n\t\t\t\tvalue = dataView.getFloat32(position)\n\t\t\t\tif (currentUnpackr.useFloat32 > 2) {\n\t\t\t\t\t// this does rounding of numbers that were encoded in 32-bit float to nearest significant decimal digit that could be preserved\n\t\t\t\t\tlet multiplier = mult10[((src[position] & 0x7f) << 1) | (src[position + 1] >> 7)]\n\t\t\t\t\tposition += 4\n\t\t\t\t\treturn ((multiplier * value + (value > 0 ? 0.5 : -0.5)) >> 0) / multiplier\n\t\t\t\t}\n\t\t\t\tposition += 4\n\t\t\t\treturn value\n\t\t\tcase 0xcb:\n\t\t\t\tvalue = dataView.getFloat64(position)\n\t\t\t\tposition += 8\n\t\t\t\treturn value\n\t\t\t// uint handlers\n\t\t\tcase 0xcc:\n\t\t\t\treturn src[position++]\n\t\t\tcase 0xcd:\n\t\t\t\tvalue = dataView.getUint16(position)\n\t\t\t\tposition += 2\n\t\t\t\treturn value\n\t\t\tcase 0xce:\n\t\t\t\tvalue = dataView.getUint32(position)\n\t\t\t\tposition += 4\n\t\t\t\treturn value\n\t\t\tcase 0xcf:\n\t\t\t\tif (currentUnpackr.int64AsType === 'number') {\n\t\t\t\t\tvalue = dataView.getUint32(position) * 0x100000000\n\t\t\t\t\tvalue += dataView.getUint32(position + 4)\n\t\t\t\t} else if (currentUnpackr.int64AsType === 'string') {\n\t\t\t\t\tvalue = dataView.getBigUint64(position).toString()\n\t\t\t\t} else if (currentUnpackr.int64AsType === 'auto') {\n\t\t\t\t\tvalue = dataView.getBigUint64(position)\n\t\t\t\t\tif (value<=BigInt(2)<<BigInt(52)) value=Number(value)\n\t\t\t\t} else\n\t\t\t\t\tvalue = dataView.getBigUint64(position)\n\t\t\t\tposition += 8\n\t\t\t\treturn value\n\n\t\t\t// int handlers\n\t\t\tcase 0xd0:\n\t\t\t\treturn dataView.getInt8(position++)\n\t\t\tcase 0xd1:\n\t\t\t\tvalue = dataView.getInt16(position)\n\t\t\t\tposition += 2\n\t\t\t\treturn value\n\t\t\tcase 0xd2:\n\t\t\t\tvalue = dataView.getInt32(position)\n\t\t\t\tposition += 4\n\t\t\t\treturn value\n\t\t\tcase 0xd3:\n\t\t\t\tif (currentUnpackr.int64AsType === 'number') {\n\t\t\t\t\tvalue = dataView.getInt32(position) * 0x100000000\n\t\t\t\t\tvalue += dataView.getUint32(position + 4)\n\t\t\t\t} else if (currentUnpackr.int64AsType === 'string') {\n\t\t\t\t\tvalue = dataView.getBigInt64(position).toString()\n\t\t\t\t} else if (currentUnpackr.int64AsType === 'auto') {\n\t\t\t\t\tvalue = dataView.getBigInt64(position)\n\t\t\t\t\tif (value>=BigInt(-2)<<BigInt(52)&&value<=BigInt(2)<<BigInt(52)) value=Number(value)\n\t\t\t\t} else\n\t\t\t\t\tvalue = dataView.getBigInt64(position)\n\t\t\t\tposition += 8\n\t\t\t\treturn value\n\n\t\t\tcase 0xd4:\n\t\t\t\t// fixext 1\n\t\t\t\tvalue = src[position++]\n\t\t\t\tif (value == 0x72) {\n\t\t\t\t\treturn recordDefinition(src[position++] & 0x3f)\n\t\t\t\t} else {\n\t\t\t\t\tlet extension = currentExtensions[value]\n\t\t\t\t\tif (extension) {\n\t\t\t\t\t\tif (extension.read) {\n\t\t\t\t\t\t\tposition++ // skip filler byte\n\t\t\t\t\t\t\treturn extension.read(read())\n\t\t\t\t\t\t} else if (extension.noBuffer) {\n\t\t\t\t\t\t\tposition++ // skip filler byte\n\t\t\t\t\t\t\treturn extension()\n\t\t\t\t\t\t} else\n\t\t\t\t\t\t\treturn extension(src.subarray(position, ++position))\n\t\t\t\t\t} else\n\t\t\t\t\t\tthrow new Error('Unknown extension ' + value)\n\t\t\t\t}\n\t\t\tcase 0xd5:\n\t\t\t\t// fixext 2\n\t\t\t\tvalue = src[position]\n\t\t\t\tif (value == 0x72) {\n\t\t\t\t\tposition++\n\t\t\t\t\treturn recordDefinition(src[position++] & 0x3f, src[position++])\n\t\t\t\t} else\n\t\t\t\t\treturn readExt(2)\n\t\t\tcase 0xd6:\n\t\t\t\t// fixext 4\n\t\t\t\treturn readExt(4)\n\t\t\tcase 0xd7:\n\t\t\t\t// fixext 8\n\t\t\t\treturn readExt(8)\n\t\t\tcase 0xd8:\n\t\t\t\t// fixext 16\n\t\t\t\treturn readExt(16)\n\t\t\tcase 0xd9:\n\t\t\t// str 8\n\t\t\t\tvalue = src[position++]\n\t\t\t\tif (srcStringEnd >= position) {\n\t\t\t\t\treturn srcString.slice(position - srcStringStart, (position += value) - srcStringStart)\n\t\t\t\t}\n\t\t\t\treturn readString8(value)\n\t\t\tcase 0xda:\n\t\t\t// str 16\n\t\t\t\tvalue = dataView.getUint16(position)\n\t\t\t\tposition += 2\n\t\t\t\tif (srcStringEnd >= position) {\n\t\t\t\t\treturn srcString.slice(position - srcStringStart, (position += value) - srcStringStart)\n\t\t\t\t}\n\t\t\t\treturn readString16(value)\n\t\t\tcase 0xdb:\n\t\t\t// str 32\n\t\t\t\tvalue = dataView.getUint32(position)\n\t\t\t\tposition += 4\n\t\t\t\tif (srcStringEnd >= position) {\n\t\t\t\t\treturn srcString.slice(position - srcStringStart, (position += value) - srcStringStart)\n\t\t\t\t}\n\t\t\t\treturn readString32(value)\n\t\t\tcase 0xdc:\n\t\t\t// array 16\n\t\t\t\tvalue = dataView.getUint16(position)\n\t\t\t\tposition += 2\n\t\t\t\treturn readArray(value)\n\t\t\tcase 0xdd:\n\t\t\t// array 32\n\t\t\t\tvalue = dataView.getUint32(position)\n\t\t\t\tposition += 4\n\t\t\t\treturn readArray(value)\n\t\t\tcase 0xde:\n\t\t\t// map 16\n\t\t\t\tvalue = dataView.getUint16(position)\n\t\t\t\tposition += 2\n\t\t\t\treturn readMap(value)\n\t\t\tcase 0xdf:\n\t\t\t// map 32\n\t\t\t\tvalue = dataView.getUint32(position)\n\t\t\t\tposition += 4\n\t\t\t\treturn readMap(value)\n\t\t\tdefault: // negative int\n\t\t\t\tif (token >= 0xe0)\n\t\t\t\t\treturn token - 0x100\n\t\t\t\tif (token === undefined) {\n\t\t\t\t\tlet error = new Error('Unexpected end of MessagePack data')\n\t\t\t\t\terror.incomplete = true\n\t\t\t\t\tthrow error\n\t\t\t\t}\n\t\t\t\tthrow new Error('Unknown MessagePack token ' + token)\n\n\t\t}\n\t}\n}\nconst validName = /^[a-zA-Z_$][a-zA-Z\\d_$]*$/\nfunction createStructureReader(structure, firstId) {\n\tfunction readObject() {\n\t\t// This initial function is quick to instantiate, but runs slower. After several iterations pay the cost to build the faster function\n\t\tif (readObject.count++ > inlineObjectReadThreshold) {\n\t\t\tlet readObject = structure.read = (new Function('r', 'return function(){return ' + (currentUnpackr.freezeData ? 'Object.freeze' : '') +\n\t\t\t\t'({' + structure.map(key => key === '__proto__' ? '__proto_:r()' : validName.test(key) ? key + ':r()' : ('[' + JSON.stringify(key) + ']:r()')).join(',') + '})}'))(read)\n\t\t\tif (structure.highByte === 0)\n\t\t\t\tstructure.read = createSecondByteReader(firstId, structure.read)\n\t\t\treturn readObject() // second byte is already read, if there is one so immediately read object\n\t\t}\n\t\tlet object = {}\n\t\tfor (let i = 0, l = structure.length; i < l; i++) {\n\t\t\tlet key = structure[i]\n\t\t\tif (key === '__proto__')\n\t\t\t\tkey = '__proto_'\n\t\t\tobject[key] = read()\n\t\t}\n\t\tif (currentUnpackr.freezeData)\n\t\t\treturn Object.freeze(object);\n\t\treturn object\n\t}\n\treadObject.count = 0\n\tif (structure.highByte === 0) {\n\t\treturn createSecondByteReader(firstId, readObject)\n\t}\n\treturn readObject\n}\n\nconst createSecondByteReader = (firstId, read0) => {\n\treturn function() {\n\t\tlet highByte = src[position++]\n\t\tif (highByte === 0)\n\t\t\treturn read0()\n\t\tlet id = firstId < 32 ? -(firstId + (highByte << 5)) : firstId + (highByte << 5)\n\t\tlet structure = currentStructures[id] || loadStructures()[id]\n\t\tif (!structure) {\n\t\t\tthrow new Error('Record id is not defined for ' + id)\n\t\t}\n\t\tif (!structure.read)\n\t\t\tstructure.read = createStructureReader(structure, firstId)\n\t\treturn structure.read()\n\t}\n}\n\nfunction loadStructures() {\n\tlet loadedStructures = saveState(() => {\n\t\t// save the state in case getStructures modifies our buffer\n\t\tsrc = null\n\t\treturn currentUnpackr.getStructures()\n\t})\n\treturn currentStructures = currentUnpackr._mergeStructures(loadedStructures, currentStructures)\n}\n\nvar readFixedString = readStringJS\nvar readString8 = readStringJS\nvar readString16 = readStringJS\nvar readString32 = readStringJS\nlet isNativeAccelerationEnabled = false\n\nfunction setExtractor(extractStrings) {\n\tisNativeAccelerationEnabled = true\n\treadFixedString = readString(1)\n\treadString8 = readString(2)\n\treadString16 = readString(3)\n\treadString32 = readString(5)\n\tfunction readString(headerLength) {\n\t\treturn function readString(length) {\n\t\t\tlet string = strings[stringPosition++]\n\t\t\tif (string == null) {\n\t\t\t\tif (bundledStrings)\n\t\t\t\t\treturn readStringJS(length)\n\t\t\t\tlet byteOffset = src.byteOffset\n\t\t\t\tlet extraction = extractStrings(position - headerLength + byteOffset, srcEnd + byteOffset, src.buffer)\n\t\t\t\tif (typeof extraction == 'string') {\n\t\t\t\t\tstring = extraction\n\t\t\t\t\tstrings = EMPTY_ARRAY\n\t\t\t\t} else {\n\t\t\t\t\tstrings = extraction\n\t\t\t\t\tstringPosition = 1\n\t\t\t\t\tsrcStringEnd = 1 // even if a utf-8 string was decoded, must indicate we are in the midst of extracted strings and can't skip strings\n\t\t\t\t\tstring = strings[0]\n\t\t\t\t\tif (string === undefined)\n\t\t\t\t\t\tthrow new Error('Unexpected end of buffer')\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet srcStringLength = string.length\n\t\t\tif (srcStringLength <= length) {\n\t\t\t\tposition += length\n\t\t\t\treturn string\n\t\t\t}\n\t\t\tsrcString = string\n\t\t\tsrcStringStart = position\n\t\t\tsrcStringEnd = position + srcStringLength\n\t\t\tposition += length\n\t\t\treturn string.slice(0, length) // we know we just want the beginning\n\t\t}\n\t}\n}\nfunction readStringJS(length) {\n\tlet result\n\tif (length < 16) {\n\t\tif (result = shortStringInJS(length))\n\t\t\treturn result\n\t}\n\tif (length > 64 && decoder)\n\t\treturn decoder.decode(src.subarray(position, position += length))\n\tconst end = position + length\n\tconst units = []\n\tresult = ''\n\twhile (position < end) {\n\t\tconst byte1 = src[position++]\n\t\tif ((byte1 & 0x80) === 0) {\n\t\t\t// 1 byte\n\t\t\tunits.push(byte1)\n\t\t} else if ((byte1 & 0xe0) === 0xc0) {\n\t\t\t// 2 bytes\n\t\t\tconst byte2 = src[position++] & 0x3f\n\t\t\tunits.push(((byte1 & 0x1f) << 6) | byte2)\n\t\t} else if ((byte1 & 0xf0) === 0xe0) {\n\t\t\t// 3 bytes\n\t\t\tconst byte2 = src[position++] & 0x3f\n\t\t\tconst byte3 = src[position++] & 0x3f\n\t\t\tunits.push(((byte1 & 0x1f) << 12) | (byte2 << 6) | byte3)\n\t\t} else if ((byte1 & 0xf8) === 0xf0) {\n\t\t\t// 4 bytes\n\t\t\tconst byte2 = src[position++] & 0x3f\n\t\t\tconst byte3 = src[position++] & 0x3f\n\t\t\tconst byte4 = src[position++] & 0x3f\n\t\t\tlet unit = ((byte1 & 0x07) << 0x12) | (byte2 << 0x0c) | (byte3 << 0x06) | byte4\n\t\t\tif (unit > 0xffff) {\n\t\t\t\tunit -= 0x10000\n\t\t\t\tunits.push(((unit >>> 10) & 0x3ff) | 0xd800)\n\t\t\t\tunit = 0xdc00 | (unit & 0x3ff)\n\t\t\t}\n\t\t\tunits.push(unit)\n\t\t} else {\n\t\t\tunits.push(byte1)\n\t\t}\n\n\t\tif (units.length >= 0x1000) {\n\t\t\tresult += fromCharCode.apply(String, units)\n\t\t\tunits.length = 0\n\t\t}\n\t}\n\n\tif (units.length > 0) {\n\t\tresult += fromCharCode.apply(String, units)\n\t}\n\n\treturn result\n}\nfunction readString(source, start, length) {\n\tlet existingSrc = src;\n\tsrc = source;\n\tposition = start;\n\ttry {\n\t\treturn readStringJS(length);\n\t} finally {\n\t\tsrc = existingSrc;\n\t}\n}\n\nfunction readArray(length) {\n\tlet array = new Array(length)\n\tfor (let i = 0; i < length; i++) {\n\t\tarray[i] = read()\n\t}\n\tif (currentUnpackr.freezeData)\n\t\treturn Object.freeze(array)\n\treturn array\n}\n\nfunction readMap(length) {\n\tif (currentUnpackr.mapsAsObjects) {\n\t\tlet object = {}\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tlet key = readKey()\n\t\t\tif (key === '__proto__')\n\t\t\t\tkey = '__proto_';\n\t\t\tobject[key] = read()\n\t\t}\n\t\treturn object\n\t} else {\n\t\tlet map = new Map()\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tmap.set(read(), read())\n\t\t}\n\t\treturn map\n\t}\n}\n\nvar fromCharCode = String.fromCharCode\nfunction longStringInJS(length) {\n\tlet start = position\n\tlet bytes = new Array(length)\n\tfor (let i = 0; i < length; i++) {\n\t\tconst byte = src[position++];\n\t\tif ((byte & 0x80) > 0) {\n\t\t\t\tposition = start\n\t\t\t\treturn\n\t\t\t}\n\t\t\tbytes[i] = byte\n\t\t}\n\t\treturn fromCharCode.apply(String, bytes)\n}\nfunction shortStringInJS(length) {\n\tif (length < 4) {\n\t\tif (length < 2) {\n\t\t\tif (length === 0)\n\t\t\t\treturn ''\n\t\t\telse {\n\t\t\t\tlet a = src[position++]\n\t\t\t\tif ((a & 0x80) > 1) {\n\t\t\t\t\tposition -= 1\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\treturn fromCharCode(a)\n\t\t\t}\n\t\t} else {\n\t\t\tlet a = src[position++]\n\t\t\tlet b = src[position++]\n\t\t\tif ((a & 0x80) > 0 || (b & 0x80) > 0) {\n\t\t\t\tposition -= 2\n\t\t\t\treturn\n\t\t\t}\n\t\t\tif (length < 3)\n\t\t\t\treturn fromCharCode(a, b)\n\t\t\tlet c = src[position++]\n\t\t\tif ((c & 0x80) > 0) {\n\t\t\t\tposition -= 3\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn fromCharCode(a, b, c)\n\t\t}\n\t} else {\n\t\tlet a = src[position++]\n\t\tlet b = src[position++]\n\t\tlet c = src[position++]\n\t\tlet d = src[position++]\n\t\tif ((a & 0x80) > 0 || (b & 0x80) > 0 || (c & 0x80) > 0 || (d & 0x80) > 0) {\n\t\t\tposition -= 4\n\t\t\treturn\n\t\t}\n\t\tif (length < 6) {\n\t\t\tif (length === 4)\n\t\t\t\treturn fromCharCode(a, b, c, d)\n\t\t\telse {\n\t\t\t\tlet e = src[position++]\n\t\t\t\tif ((e & 0x80) > 0) {\n\t\t\t\t\tposition -= 5\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\treturn fromCharCode(a, b, c, d, e)\n\t\t\t}\n\t\t} else if (length < 8) {\n\t\t\tlet e = src[position++]\n\t\t\tlet f = src[position++]\n\t\t\tif ((e & 0x80) > 0 || (f & 0x80) > 0) {\n\t\t\t\tposition -= 6\n\t\t\t\treturn\n\t\t\t}\n\t\t\tif (length < 7)\n\t\t\t\treturn fromCharCode(a, b, c, d, e, f)\n\t\t\tlet g = src[position++]\n\t\t\tif ((g & 0x80) > 0) {\n\t\t\t\tposition -= 7\n\t\t\t\treturn\n\t\t\t}\n\t\t\treturn fromCharCode(a, b, c, d, e, f, g)\n\t\t} else {\n\t\t\tlet e = src[position++]\n\t\t\tlet f = src[position++]\n\t\t\tlet g = src[position++]\n\t\t\tlet h = src[position++]\n\t\t\tif ((e & 0x80) > 0 || (f & 0x80) > 0 || (g & 0x80) > 0 || (h & 0x80) > 0) {\n\t\t\t\tposition -= 8\n\t\t\t\treturn\n\t\t\t}\n\t\t\tif (length < 10) {\n\t\t\t\tif (length === 8)\n\t\t\t\t\treturn fromCharCode(a, b, c, d, e, f, g, h)\n\t\t\t\telse {\n\t\t\t\t\tlet i = src[position++]\n\t\t\t\t\tif ((i & 0x80) > 0) {\n\t\t\t\t\t\tposition -= 9\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\t\t\t\t\treturn fromCharCode(a, b, c, d, e, f, g, h, i)\n\t\t\t\t}\n\t\t\t} else if (length < 12) {\n\t\t\t\tlet i = src[position++]\n\t\t\t\tlet j = src[position++]\n\t\t\t\tif ((i & 0x80) > 0 || (j & 0x80) > 0) {\n\t\t\t\t\tposition -= 10\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tif (length < 11)\n\t\t\t\t\treturn fromCharCode(a, b, c, d, e, f, g, h, i, j)\n\t\t\t\tlet k = src[position++]\n\t\t\t\tif ((k & 0x80) > 0) {\n\t\t\t\t\tposition -= 11\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\treturn fromCharCode(a, b, c, d, e, f, g, h, i, j, k)\n\t\t\t} else {\n\t\t\t\tlet i = src[position++]\n\t\t\t\tlet j = src[position++]\n\t\t\t\tlet k = src[position++]\n\t\t\t\tlet l = src[position++]\n\t\t\t\tif ((i & 0x80) > 0 || (j & 0x80) > 0 || (k & 0x80) > 0 || (l & 0x80) > 0) {\n\t\t\t\t\tposition -= 12\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tif (length < 14) {\n\t\t\t\t\tif (length === 12)\n\t\t\t\t\t\treturn fromCharCode(a, b, c, d, e, f, g, h, i, j, k, l)\n\t\t\t\t\telse {\n\t\t\t\t\t\tlet m = src[position++]\n\t\t\t\t\t\tif ((m & 0x80) > 0) {\n\t\t\t\t\t\t\tposition -= 13\n\t\t\t\t\t\t\treturn\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn fromCharCode(a, b, c, d, e, f, g, h, i, j, k, l, m)\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tlet m = src[position++]\n\t\t\t\t\tlet n = src[position++]\n\t\t\t\t\tif ((m & 0x80) > 0 || (n & 0x80) > 0) {\n\t\t\t\t\t\tposition -= 14\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\t\t\t\t\tif (length < 15)\n\t\t\t\t\t\treturn fromCharCode(a, b, c, d, e, f, g, h, i, j, k, l, m, n)\n\t\t\t\t\tlet o = src[position++]\n\t\t\t\t\tif ((o & 0x80) > 0) {\n\t\t\t\t\t\tposition -= 15\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\t\t\t\t\treturn fromCharCode(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction readOnlyJSString() {\n\tlet token = src[position++]\n\tlet length\n\tif (token < 0xc0) {\n\t\t// fixstr\n\t\tlength = token - 0xa0\n\t} else {\n\t\tswitch(token) {\n\t\t\tcase 0xd9:\n\t\t\t// str 8\n\t\t\t\tlength = src[position++]\n\t\t\t\tbreak\n\t\t\tcase 0xda:\n\t\t\t// str 16\n\t\t\t\tlength = dataView.getUint16(position)\n\t\t\t\tposition += 2\n\t\t\t\tbreak\n\t\t\tcase 0xdb:\n\t\t\t// str 32\n\t\t\t\tlength = dataView.getUint32(position)\n\t\t\t\tposition += 4\n\t\t\t\tbreak\n\t\t\tdefault:\n\t\t\t\tthrow new Error('Expected string')\n\t\t}\n\t}\n\treturn readStringJS(length)\n}\n\n\nfunction readBin(length) {\n\treturn currentUnpackr.copyBuffers ?\n\t\t// specifically use the copying slice (not the node one)\n\t\tUint8Array.prototype.slice.call(src, position, position += length) :\n\t\tsrc.subarray(position, position += length)\n}\nfunction readExt(length) {\n\tlet type = src[position++]\n\tif (currentExtensions[type]) {\n\t\tlet end\n\t\treturn currentExtensions[type](src.subarray(position, end = (position += length)), (readPosition) => {\n\t\t\tposition = readPosition;\n\t\t\ttry {\n\t\t\t\treturn read();\n\t\t\t} finally {\n\t\t\t\tposition = end;\n\t\t\t}\n\t\t})\n\t}\n\telse\n\t\tthrow new Error('Unknown extension type ' + type)\n}\n\nvar keyCache = new Array(4096)\nfunction readKey() {\n\tlet length = src[position++]\n\tif (length >= 0xa0 && length < 0xc0) {\n\t\t// fixstr, potentially use key cache\n\t\tlength = length - 0xa0\n\t\tif (srcStringEnd >= position) // if it has been extracted, must use it (and faster anyway)\n\t\t\treturn srcString.slice(position - srcStringStart, (position += length) - srcStringStart)\n\t\telse if (!(srcStringEnd == 0 && srcEnd < 180))\n\t\t\treturn readFixedString(length)\n\t} else { // not cacheable, go back and do a standard read\n\t\tposition--\n\t\treturn asSafeString(read())\n\t}\n\tlet key = ((length << 5) ^ (length > 1 ? dataView.getUint16(position) : length > 0 ? src[position] : 0)) & 0xfff\n\tlet entry = keyCache[key]\n\tlet checkPosition = position\n\tlet end = position + length - 3\n\tlet chunk\n\tlet i = 0\n\tif (entry && entry.bytes == length) {\n\t\twhile (checkPosition < end) {\n\t\t\tchunk = dataView.getUint32(checkPosition)\n\t\t\tif (chunk != entry[i++]) {\n\t\t\t\tcheckPosition = 0x70000000\n\t\t\t\tbreak\n\t\t\t}\n\t\t\tcheckPosition += 4\n\t\t}\n\t\tend += 3\n\t\twhile (checkPosition < end) {\n\t\t\tchunk = src[checkPosition++]\n\t\t\tif (chunk != entry[i++]) {\n\t\t\t\tcheckPosition = 0x70000000\n\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\t\tif (checkPosition === end) {\n\t\t\tposition = checkPosition\n\t\t\treturn entry.string\n\t\t}\n\t\tend -= 3\n\t\tcheckPosition = position\n\t}\n\tentry = []\n\tkeyCache[key] = entry\n\tentry.bytes = length\n\twhile (checkPosition < end) {\n\t\tchunk = dataView.getUint32(checkPosition)\n\t\tentry.push(chunk)\n\t\tcheckPosition += 4\n\t}\n\tend += 3\n\twhile (checkPosition < end) {\n\t\tchunk = src[checkPosition++]\n\t\tentry.push(chunk)\n\t}\n\t// for small blocks, avoiding the overhead of the extract call is helpful\n\tlet string = length < 16 ? shortStringInJS(length) : longStringInJS(length)\n\tif (string != null)\n\t\treturn entry.string = string\n\treturn entry.string = readFixedString(length)\n}\n\nfunction asSafeString(property) {\n\t// protect against expensive (DoS) string conversions\n\tif (typeof property === 'string') return property;\n\tif (typeof property === 'number' || typeof property === 'boolean' || typeof property === 'bigint') return property.toString();\n\tif (property == null) return property + '';\n\tthrow new Error('Invalid property type for record', typeof property);\n}\n// the registration of the record definition extension (as \"r\")\nconst recordDefinition = (id, highByte) => {\n\tlet structure = read().map(asSafeString) // ensure that all keys are strings and\n\t// that the array is mutable\n\tlet firstByte = id\n\tif (highByte !== undefined) {\n\t\tid = id < 32 ? -((highByte << 5) + id) : ((highByte << 5) + id)\n\t\tstructure.highByte = highByte\n\t}\n\tlet existingStructure = currentStructures[id]\n\t// If it is a shared structure, we need to restore any changes after reading.\n\t// Also in sequential mode, we may get incomplete reads and thus errors, and we need to restore\n\t// to the state prior to an incomplete read in order to properly resume.\n\tif (existingStructure && (existingStructure.isShared || sequentialMode)) {\n\t\t(currentStructures.restoreStructures || (currentStructures.restoreStructures = []))[id] = existingStructure\n\t}\n\tcurrentStructures[id] = structure\n\tstructure.read = createStructureReader(structure, firstByte)\n\treturn structure.read()\n}\ncurrentExtensions[0] = () => {} // notepack defines extension 0 to mean undefined, so use that as the default here\ncurrentExtensions[0].noBuffer = true\n\ncurrentExtensions[0x42] = (data) => {\n\t// decode bigint\n\tlet length = data.length;\n\tlet value = BigInt(data[0] & 0x80 ? data[0] - 0x100 : data[0]);\n\tfor (let i = 1; i < length; i++) {\n\t\tvalue <<= BigInt(8);\n\t\tvalue += BigInt(data[i]);\n\t}\n\treturn value;\n}\n\nlet errors = { Error, TypeError, ReferenceError };\ncurrentExtensions[0x65] = () => {\n\tlet data = read()\n\treturn (errors[data[0]] || Error)(data[1], { cause: data[2] })\n}\n\ncurrentExtensions[0x69] = (data) => {\n\t// id extension (for structured clones)\n\tif (currentUnpackr.structuredClone === false) throw new Error('Structured clone extension is disabled')\n\tlet id = dataView.getUint32(position - 4)\n\tif (!referenceMap)\n\t\treferenceMap = new Map()\n\tlet token = src[position]\n\tlet target\n\t// TODO: handle Maps, Sets, and other types that can cycle; this is complicated, because you potentially need to read\n\t// ahead past references to record structure definitions\n\tif (token >= 0x90 && token < 0xa0 || token == 0xdc || token == 0xdd)\n\t\ttarget = []\n\telse\n\t\ttarget = {}\n\n\tlet refEntry = { target } // a placeholder object\n\treferenceMap.set(id, refEntry)\n\tlet targetProperties = read() // read the next value as the target object to id\n\tif (refEntry.used) // there is a cycle, so we have to assign properties to original target\n\t\treturn Object.assign(target, targetProperties)\n\trefEntry.target = targetProperties // the placeholder wasn't used, replace with the deserialized one\n\treturn targetProperties // no cycle, can just use the returned read object\n}\n\ncurrentExtensions[0x70] = (data) => {\n\t// pointer extension (for structured clones)\n\tif (currentUnpackr.structuredClone === false) throw new Error('Structured clone extension is disabled')\n\tlet id = dataView.getUint32(position - 4)\n\tlet refEntry = referenceMap.get(id)\n\trefEntry.used = true\n\treturn refEntry.target\n}\n\ncurrentExtensions[0x73] = () => new Set(read())\n\nconst typedArrays = ['Int8','Uint8','Uint8Clamped','Int16','Uint16','Int32','Uint32','Float32','Float64','BigInt64','BigUint64'].map(type => type + 'Array')\n\nlet glbl = typeof globalThis === 'object' ? globalThis : window;\ncurrentExtensions[0x74] = (data) => {\n\tlet typeCode = data[0]\n\tlet typedArrayName = typedArrays[typeCode]\n\tif (!typedArrayName) {\n\t\tif (typeCode === 16) {\n\t\t\tlet ab = new ArrayBuffer(data.length - 1)\n\t\t\tlet u8 = new Uint8Array(ab)\n\t\t\tu8.set(data.subarray(1))\n\t\t\treturn ab;\n\t\t}\n\t\tthrow new Error('Could not find typed array for code ' + typeCode)\n\t}\n\t// we have to always slice/copy here to get a new ArrayBuffer that is word/byte aligned\n\treturn new glbl[typedArrayName](Uint8Array.prototype.slice.call(data, 1).buffer)\n}\ncurrentExtensions[0x78] = () => {\n\tlet data = read()\n\treturn new RegExp(data[0], data[1])\n}\nconst TEMP_BUNDLE = []\ncurrentExtensions[0x62] = (data) => {\n\tlet dataSize = (data[0] << 24) + (data[1] << 16) + (data[2] << 8) + data[3]\n\tlet dataPosition = position\n\tposition += dataSize - data.length\n\tbundledStrings = TEMP_BUNDLE\n\tbundledStrings = [readOnlyJSString(), readOnlyJSString()]\n\tbundledStrings.position0 = 0\n\tbundledStrings.position1 = 0\n\tbundledStrings.postBundlePosition = position\n\tposition = dataPosition\n\treturn read()\n}\n\ncurrentExtensions[0xff] = (data) => {\n\t// 32-bit date extension\n\tif (data.length == 4)\n\t\treturn new Date((data[0] * 0x1000000 + (data[1] << 16) + (data[2] << 8) + data[3]) * 1000)\n\telse if (data.length == 8)\n\t\treturn new Date(\n\t\t\t((data[0] << 22) + (data[1] << 14) + (data[2] << 6) + (data[3] >> 2)) / 1000000 +\n\t\t\t((data[3] & 0x3) * 0x100000000 + data[4] * 0x1000000 + (data[5] << 16) + (data[6] << 8) + data[7]) * 1000)\n\telse if (data.length == 12)// TODO: Implement support for negative\n\t\treturn new Date(\n\t\t\t((data[0] << 24) + (data[1] << 16) + (data[2] << 8) + data[3]) / 1000000 +\n\t\t\t(((data[4] & 0x80) ? -0x1000000000000 : 0) + data[6] * 0x10000000000 + data[7] * 0x100000000 + data[8] * 0x1000000 + (data[9] << 16) + (data[10] << 8) + data[11]) * 1000)\n\telse\n\t\treturn new Date('invalid')\n} // notepack defines extension 0 to mean undefined, so use that as the default here\n// registration of bulk record definition?\n// currentExtensions[0x52] = () =>\n\nfunction saveState(callback) {\n\tif (onSaveState)\n\t\tonSaveState();\n\tlet savedSrcEnd = srcEnd\n\tlet savedPosition = position\n\tlet savedStringPosition = stringPosition\n\tlet savedSrcStringStart = srcStringStart\n\tlet savedSrcStringEnd = srcStringEnd\n\tlet savedSrcString = srcString\n\tlet savedStrings = strings\n\tlet savedReferenceMap = referenceMap\n\tlet savedBundledStrings = bundledStrings\n\n\t// TODO: We may need to revisit this if we do more external calls to user code (since it could be slow)\n\tlet savedSrc = new Uint8Array(src.slice(0, srcEnd)) // we copy the data in case it changes while external data is processed\n\tlet savedStructures = currentStructures\n\tlet savedStructuresContents = currentStructures.slice(0, currentStructures.length)\n\tlet savedPackr = currentUnpackr\n\tlet savedSequentialMode = sequentialMode\n\tlet value = callback()\n\tsrcEnd = savedSrcEnd\n\tposition = savedPosition\n\tstringPosition = savedStringPosition\n\tsrcStringStart = savedSrcStringStart\n\tsrcStringEnd = savedSrcStringEnd\n\tsrcString = savedSrcString\n\tstrings = savedStrings\n\treferenceMap = savedReferenceMap\n\tbundledStrings = savedBundledStrings\n\tsrc = savedSrc\n\tsequentialMode = savedSequentialMode\n\tcurrentStructures = savedStructures\n\tcurrentStructures.splice(0, currentStructures.length, ...savedStructuresContents)\n\tcurrentUnpackr = savedPackr\n\tdataView = new DataView(src.buffer, src.byteOffset, src.byteLength)\n\treturn value\n}\nfunction clearSource() {\n\tsrc = null\n\treferenceMap = null\n\tcurrentStructures = null\n}\n\nfunction addExtension(extension) {\n\tif (extension.unpack)\n\t\tcurrentExtensions[extension.type] = extension.unpack\n\telse\n\t\tcurrentExtensions[extension.type] = extension\n}\n\nconst mult10 = new Array(147) // this is a table matching binary exponents to the multiplier to determine significant digit rounding\nfor (let i = 0; i < 256; i++) {\n\tmult10[i] = +('1e' + Math.floor(45.15 - i * 0.30103))\n}\nconst Decoder = Unpackr\nvar defaultUnpackr = new Unpackr({ useRecords: false })\nconst unpack = defaultUnpackr.unpack\nconst unpackMultiple = defaultUnpackr.unpackMultiple\nconst decode = defaultUnpackr.unpack\nconst FLOAT32_OPTIONS = {\n\tNEVER: 0,\n\tALWAYS: 1,\n\tDECIMAL_ROUND: 3,\n\tDECIMAL_FIT: 4\n}\nlet f32Array = new Float32Array(1)\nlet u8Array = new Uint8Array(f32Array.buffer, 0, 4)\nfunction roundFloat32(float32Number) {\n\tf32Array[0] = float32Number\n\tlet multiplier = mult10[((u8Array[3] & 0x7f) << 1) | (u8Array[2] >> 7)]\n\treturn ((multiplier * float32Number + (float32Number > 0 ? 0.5 : -0.5)) >> 0) / multiplier\n}\nfunction setReadStruct(updatedReadStruct, loadedStructs, saveState) {\n\treadStruct = updatedReadStruct;\n\tonLoadedStructures = loadedStructs;\n\tonSaveState = saveState;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbm9kZV9tb2R1bGVzL0BsaXZlc3RvcmUvdXRpbHMvbm9kZV9tb2R1bGVzL21zZ3BhY2tyL3VucGFjay5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ0E7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTs7QUFFTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQ0FBK0MsT0FBTztBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQSx3QkFBd0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxtRkFBbUYsTUFBTTtBQUN6RixLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLFdBQVc7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0Esb0JBQW9CLFdBQVc7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLG1CQUFtQixXQUFXO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkVBQTJFO0FBQzNFLE9BQU8sMEpBQTBKLEVBQUU7QUFDbks7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdDQUF3QyxPQUFPO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ087O0FBRUE7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUIsWUFBWTtBQUM3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLFlBQVk7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0Esa0JBQWtCLFlBQVk7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixZQUFZO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRyxPQUFPO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0NBQWdDO0FBQ2hDOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLFlBQVk7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxlQUFlO0FBQ2Y7QUFDQTtBQUNBLDhDQUE4QyxnQkFBZ0I7QUFDOUQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZEQUE2RDtBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGtCQUFrQixTQUFTO0FBQzNCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRU87O0FBRVA7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTs7QUFFTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRU87QUFDUCxnQkFBZ0IsU0FBUztBQUN6QjtBQUNBO0FBQ087QUFDUCxtQ0FBbUMsbUJBQW1CO0FBQy9DO0FBQ0E7QUFDQTtBQUNBO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL2FuYWNvbmRhLWFzc2VzbWVudC0xLy4vc3JjL25vZGVfbW9kdWxlcy9AbGl2ZXN0b3JlL3V0aWxzL25vZGVfbW9kdWxlcy9tc2dwYWNrci91bnBhY2suanM/MWJmOCJdLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgZGVjb2RlclxudHJ5IHtcblx0ZGVjb2RlciA9IG5ldyBUZXh0RGVjb2RlcigpXG59IGNhdGNoKGVycm9yKSB7fVxudmFyIHNyY1xudmFyIHNyY0VuZFxudmFyIHBvc2l0aW9uID0gMFxudmFyIGFscmVhZHlTZXRcbmNvbnN0IEVNUFRZX0FSUkFZID0gW11cbnZhciBzdHJpbmdzID0gRU1QVFlfQVJSQVlcbnZhciBzdHJpbmdQb3NpdGlvbiA9IDBcbnZhciBjdXJyZW50VW5wYWNrciA9IHt9XG52YXIgY3VycmVudFN0cnVjdHVyZXNcbnZhciBzcmNTdHJpbmdcbnZhciBzcmNTdHJpbmdTdGFydCA9IDBcbnZhciBzcmNTdHJpbmdFbmQgPSAwXG52YXIgYnVuZGxlZFN0cmluZ3NcbnZhciByZWZlcmVuY2VNYXBcbnZhciBjdXJyZW50RXh0ZW5zaW9ucyA9IFtdXG52YXIgZGF0YVZpZXdcbnZhciBkZWZhdWx0T3B0aW9ucyA9IHtcblx0dXNlUmVjb3JkczogZmFsc2UsXG5cdG1hcHNBc09iamVjdHM6IHRydWVcbn1cbmV4cG9ydCBjbGFzcyBDMVR5cGUge31cbmV4cG9ydCBjb25zdCBDMSA9IG5ldyBDMVR5cGUoKVxuQzEubmFtZSA9ICdNZXNzYWdlUGFjayAweEMxJ1xudmFyIHNlcXVlbnRpYWxNb2RlID0gZmFsc2VcbnZhciBpbmxpbmVPYmplY3RSZWFkVGhyZXNob2xkID0gMlxudmFyIHJlYWRTdHJ1Y3QsIG9uTG9hZGVkU3RydWN0dXJlcywgb25TYXZlU3RhdGVcbnZhciBCbG9ja2VkRnVuY3Rpb24gLy8gd2UgdXNlIHNlYXJjaCBhbmQgcmVwbGFjZSB0byBjaGFuZ2UgdGhlIG5leHQgY2FsbCB0byBCbG9ja2VkRnVuY3Rpb24gdG8gYXZvaWQgQ1NQIGlzc3VlcyBmb3Jcbi8vIG5vLWV2YWwgYnVpbGRcbnRyeSB7XG5cdG5ldyBGdW5jdGlvbignJylcbn0gY2F0Y2goZXJyb3IpIHtcblx0Ly8gaWYgZXZhbCB2YXJpYW50cyBhcmUgbm90IHN1cHBvcnRlZCwgZG8gbm90IGNyZWF0ZSBpbmxpbmUgb2JqZWN0IHJlYWRlcnMgZXZlclxuXHRpbmxpbmVPYmplY3RSZWFkVGhyZXNob2xkID0gSW5maW5pdHlcbn1cblxuZXhwb3J0IGNsYXNzIFVucGFja3Ige1xuXHRjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG5cdFx0aWYgKG9wdGlvbnMpIHtcblx0XHRcdGlmIChvcHRpb25zLnVzZVJlY29yZHMgPT09IGZhbHNlICYmIG9wdGlvbnMubWFwc0FzT2JqZWN0cyA9PT0gdW5kZWZpbmVkKVxuXHRcdFx0XHRvcHRpb25zLm1hcHNBc09iamVjdHMgPSB0cnVlXG5cdFx0XHRpZiAob3B0aW9ucy5zZXF1ZW50aWFsICYmIG9wdGlvbnMudHJ1c3RlZCAhPT0gZmFsc2UpIHtcblx0XHRcdFx0b3B0aW9ucy50cnVzdGVkID0gdHJ1ZTtcblx0XHRcdFx0aWYgKCFvcHRpb25zLnN0cnVjdHVyZXMgJiYgb3B0aW9ucy51c2VSZWNvcmRzICE9IGZhbHNlKSB7XG5cdFx0XHRcdFx0b3B0aW9ucy5zdHJ1Y3R1cmVzID0gW11cblx0XHRcdFx0XHRpZiAoIW9wdGlvbnMubWF4U2hhcmVkU3RydWN0dXJlcylcblx0XHRcdFx0XHRcdG9wdGlvbnMubWF4U2hhcmVkU3RydWN0dXJlcyA9IDBcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0aWYgKG9wdGlvbnMuc3RydWN0dXJlcylcblx0XHRcdFx0b3B0aW9ucy5zdHJ1Y3R1cmVzLnNoYXJlZExlbmd0aCA9IG9wdGlvbnMuc3RydWN0dXJlcy5sZW5ndGhcblx0XHRcdGVsc2UgaWYgKG9wdGlvbnMuZ2V0U3RydWN0dXJlcykge1xuXHRcdFx0XHQob3B0aW9ucy5zdHJ1Y3R1cmVzID0gW10pLnVuaW5pdGlhbGl6ZWQgPSB0cnVlIC8vIHRoaXMgaXMgd2hhdCB3ZSB1c2UgdG8gZGVub3RlIGFuIHVuaW5pdGlhbGl6ZWQgc3RydWN0dXJlc1xuXHRcdFx0XHRvcHRpb25zLnN0cnVjdHVyZXMuc2hhcmVkTGVuZ3RoID0gMFxuXHRcdFx0fVxuXHRcdFx0aWYgKG9wdGlvbnMuaW50NjRBc051bWJlcikge1xuXHRcdFx0XHRvcHRpb25zLmludDY0QXNUeXBlID0gJ251bWJlcidcblx0XHRcdH1cblx0XHR9XG5cdFx0T2JqZWN0LmFzc2lnbih0aGlzLCBvcHRpb25zKVxuXHR9XG5cdHVucGFjayhzb3VyY2UsIG9wdGlvbnMpIHtcblx0XHRpZiAoc3JjKSB7XG5cdFx0XHQvLyByZS1lbnRyYW50IGV4ZWN1dGlvbiwgc2F2ZSB0aGUgc3RhdGUgYW5kIHJlc3RvcmUgaXQgYWZ0ZXIgd2UgZG8gdGhpcyB1bnBhY2tcblx0XHRcdHJldHVybiBzYXZlU3RhdGUoKCkgPT4ge1xuXHRcdFx0XHRjbGVhclNvdXJjZSgpXG5cdFx0XHRcdHJldHVybiB0aGlzID8gdGhpcy51bnBhY2soc291cmNlLCBvcHRpb25zKSA6IFVucGFja3IucHJvdG90eXBlLnVucGFjay5jYWxsKGRlZmF1bHRPcHRpb25zLCBzb3VyY2UsIG9wdGlvbnMpXG5cdFx0XHR9KVxuXHRcdH1cblx0XHRpZiAoIXNvdXJjZS5idWZmZXIgJiYgc291cmNlLmNvbnN0cnVjdG9yID09PSBBcnJheUJ1ZmZlcilcblx0XHRcdHNvdXJjZSA9IHR5cGVvZiBCdWZmZXIgIT09ICd1bmRlZmluZWQnID8gQnVmZmVyLmZyb20oc291cmNlKSA6IG5ldyBVaW50OEFycmF5KHNvdXJjZSk7XG5cdFx0aWYgKHR5cGVvZiBvcHRpb25zID09PSAnb2JqZWN0Jykge1xuXHRcdFx0c3JjRW5kID0gb3B0aW9ucy5lbmQgfHwgc291cmNlLmxlbmd0aFxuXHRcdFx0cG9zaXRpb24gPSBvcHRpb25zLnN0YXJ0IHx8IDBcblx0XHR9IGVsc2Uge1xuXHRcdFx0cG9zaXRpb24gPSAwXG5cdFx0XHRzcmNFbmQgPSBvcHRpb25zID4gLTEgPyBvcHRpb25zIDogc291cmNlLmxlbmd0aFxuXHRcdH1cblx0XHRzdHJpbmdQb3NpdGlvbiA9IDBcblx0XHRzcmNTdHJpbmdFbmQgPSAwXG5cdFx0c3JjU3RyaW5nID0gbnVsbFxuXHRcdHN0cmluZ3MgPSBFTVBUWV9BUlJBWVxuXHRcdGJ1bmRsZWRTdHJpbmdzID0gbnVsbFxuXHRcdHNyYyA9IHNvdXJjZVxuXHRcdC8vIHRoaXMgcHJvdmlkZXMgY2FjaGVkIGFjY2VzcyB0byB0aGUgZGF0YSB2aWV3IGZvciBhIGJ1ZmZlciBpZiBpdCBpcyBnZXR0aW5nIHJldXNlZCwgd2hpY2ggaXMgYSByZWNvbW1lbmRcblx0XHQvLyB0ZWNobmlxdWUgZm9yIGdldHRpbmcgZGF0YSBmcm9tIGEgZGF0YWJhc2Ugd2hlcmUgaXQgY2FuIGJlIGNvcGllZCBpbnRvIGFuIGV4aXN0aW5nIGJ1ZmZlciBpbnN0ZWFkIG9mIGNyZWF0aW5nXG5cdFx0Ly8gbmV3IG9uZXNcblx0XHR0cnkge1xuXHRcdFx0ZGF0YVZpZXcgPSBzb3VyY2UuZGF0YVZpZXcgfHwgKHNvdXJjZS5kYXRhVmlldyA9IG5ldyBEYXRhVmlldyhzb3VyY2UuYnVmZmVyLCBzb3VyY2UuYnl0ZU9mZnNldCwgc291cmNlLmJ5dGVMZW5ndGgpKVxuXHRcdH0gY2F0Y2goZXJyb3IpIHtcblx0XHRcdC8vIGlmIGl0IGRvZXNuJ3QgaGF2ZSBhIGJ1ZmZlciwgbWF5YmUgaXQgaXMgdGhlIHdyb25nIHR5cGUgb2Ygb2JqZWN0XG5cdFx0XHRzcmMgPSBudWxsXG5cdFx0XHRpZiAoc291cmNlIGluc3RhbmNlb2YgVWludDhBcnJheSlcblx0XHRcdFx0dGhyb3cgZXJyb3Jcblx0XHRcdHRocm93IG5ldyBFcnJvcignU291cmNlIG11c3QgYmUgYSBVaW50OEFycmF5IG9yIEJ1ZmZlciBidXQgd2FzIGEgJyArICgoc291cmNlICYmIHR5cGVvZiBzb3VyY2UgPT0gJ29iamVjdCcpID8gc291cmNlLmNvbnN0cnVjdG9yLm5hbWUgOiB0eXBlb2Ygc291cmNlKSlcblx0XHR9XG5cdFx0aWYgKHRoaXMgaW5zdGFuY2VvZiBVbnBhY2tyKSB7XG5cdFx0XHRjdXJyZW50VW5wYWNrciA9IHRoaXNcblx0XHRcdGlmICh0aGlzLnN0cnVjdHVyZXMpIHtcblx0XHRcdFx0Y3VycmVudFN0cnVjdHVyZXMgPSB0aGlzLnN0cnVjdHVyZXNcblx0XHRcdFx0cmV0dXJuIGNoZWNrZWRSZWFkKG9wdGlvbnMpXG5cdFx0XHR9IGVsc2UgaWYgKCFjdXJyZW50U3RydWN0dXJlcyB8fCBjdXJyZW50U3RydWN0dXJlcy5sZW5ndGggPiAwKSB7XG5cdFx0XHRcdGN1cnJlbnRTdHJ1Y3R1cmVzID0gW11cblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0Y3VycmVudFVucGFja3IgPSBkZWZhdWx0T3B0aW9uc1xuXHRcdFx0aWYgKCFjdXJyZW50U3RydWN0dXJlcyB8fCBjdXJyZW50U3RydWN0dXJlcy5sZW5ndGggPiAwKVxuXHRcdFx0XHRjdXJyZW50U3RydWN0dXJlcyA9IFtdXG5cdFx0fVxuXHRcdHJldHVybiBjaGVja2VkUmVhZChvcHRpb25zKVxuXHR9XG5cdHVucGFja011bHRpcGxlKHNvdXJjZSwgZm9yRWFjaCkge1xuXHRcdGxldCB2YWx1ZXMsIGxhc3RQb3NpdGlvbiA9IDBcblx0XHR0cnkge1xuXHRcdFx0c2VxdWVudGlhbE1vZGUgPSB0cnVlXG5cdFx0XHRsZXQgc2l6ZSA9IHNvdXJjZS5sZW5ndGhcblx0XHRcdGxldCB2YWx1ZSA9IHRoaXMgPyB0aGlzLnVucGFjayhzb3VyY2UsIHNpemUpIDogZGVmYXVsdFVucGFja3IudW5wYWNrKHNvdXJjZSwgc2l6ZSlcblx0XHRcdGlmIChmb3JFYWNoKSB7XG5cdFx0XHRcdGlmIChmb3JFYWNoKHZhbHVlLCBsYXN0UG9zaXRpb24sIHBvc2l0aW9uKSA9PT0gZmFsc2UpIHJldHVybjtcblx0XHRcdFx0d2hpbGUocG9zaXRpb24gPCBzaXplKSB7XG5cdFx0XHRcdFx0bGFzdFBvc2l0aW9uID0gcG9zaXRpb25cblx0XHRcdFx0XHRpZiAoZm9yRWFjaChjaGVja2VkUmVhZCgpLCBsYXN0UG9zaXRpb24sIHBvc2l0aW9uKSA9PT0gZmFsc2UpIHtcblx0XHRcdFx0XHRcdHJldHVyblxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0ZWxzZSB7XG5cdFx0XHRcdHZhbHVlcyA9IFsgdmFsdWUgXVxuXHRcdFx0XHR3aGlsZShwb3NpdGlvbiA8IHNpemUpIHtcblx0XHRcdFx0XHRsYXN0UG9zaXRpb24gPSBwb3NpdGlvblxuXHRcdFx0XHRcdHZhbHVlcy5wdXNoKGNoZWNrZWRSZWFkKCkpXG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHZhbHVlc1xuXHRcdFx0fVxuXHRcdH0gY2F0Y2goZXJyb3IpIHtcblx0XHRcdGVycm9yLmxhc3RQb3NpdGlvbiA9IGxhc3RQb3NpdGlvblxuXHRcdFx0ZXJyb3IudmFsdWVzID0gdmFsdWVzXG5cdFx0XHR0aHJvdyBlcnJvclxuXHRcdH0gZmluYWxseSB7XG5cdFx0XHRzZXF1ZW50aWFsTW9kZSA9IGZhbHNlXG5cdFx0XHRjbGVhclNvdXJjZSgpXG5cdFx0fVxuXHR9XG5cdF9tZXJnZVN0cnVjdHVyZXMobG9hZGVkU3RydWN0dXJlcywgZXhpc3RpbmdTdHJ1Y3R1cmVzKSB7XG5cdFx0aWYgKG9uTG9hZGVkU3RydWN0dXJlcylcblx0XHRcdGxvYWRlZFN0cnVjdHVyZXMgPSBvbkxvYWRlZFN0cnVjdHVyZXMuY2FsbCh0aGlzLCBsb2FkZWRTdHJ1Y3R1cmVzKTtcblx0XHRsb2FkZWRTdHJ1Y3R1cmVzID0gbG9hZGVkU3RydWN0dXJlcyB8fCBbXVxuXHRcdGlmIChPYmplY3QuaXNGcm96ZW4obG9hZGVkU3RydWN0dXJlcykpXG5cdFx0XHRsb2FkZWRTdHJ1Y3R1cmVzID0gbG9hZGVkU3RydWN0dXJlcy5tYXAoc3RydWN0dXJlID0+IHN0cnVjdHVyZS5zbGljZSgwKSlcblx0XHRmb3IgKGxldCBpID0gMCwgbCA9IGxvYWRlZFN0cnVjdHVyZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdFx0XHRsZXQgc3RydWN0dXJlID0gbG9hZGVkU3RydWN0dXJlc1tpXVxuXHRcdFx0aWYgKHN0cnVjdHVyZSkge1xuXHRcdFx0XHRzdHJ1Y3R1cmUuaXNTaGFyZWQgPSB0cnVlXG5cdFx0XHRcdGlmIChpID49IDMyKVxuXHRcdFx0XHRcdHN0cnVjdHVyZS5oaWdoQnl0ZSA9IChpIC0gMzIpID4+IDVcblx0XHRcdH1cblx0XHR9XG5cdFx0bG9hZGVkU3RydWN0dXJlcy5zaGFyZWRMZW5ndGggPSBsb2FkZWRTdHJ1Y3R1cmVzLmxlbmd0aFxuXHRcdGZvciAobGV0IGlkIGluIGV4aXN0aW5nU3RydWN0dXJlcyB8fCBbXSkge1xuXHRcdFx0aWYgKGlkID49IDApIHtcblx0XHRcdFx0bGV0IHN0cnVjdHVyZSA9IGxvYWRlZFN0cnVjdHVyZXNbaWRdXG5cdFx0XHRcdGxldCBleGlzdGluZyA9IGV4aXN0aW5nU3RydWN0dXJlc1tpZF1cblx0XHRcdFx0aWYgKGV4aXN0aW5nKSB7XG5cdFx0XHRcdFx0aWYgKHN0cnVjdHVyZSlcblx0XHRcdFx0XHRcdChsb2FkZWRTdHJ1Y3R1cmVzLnJlc3RvcmVTdHJ1Y3R1cmVzIHx8IChsb2FkZWRTdHJ1Y3R1cmVzLnJlc3RvcmVTdHJ1Y3R1cmVzID0gW10pKVtpZF0gPSBzdHJ1Y3R1cmVcblx0XHRcdFx0XHRsb2FkZWRTdHJ1Y3R1cmVzW2lkXSA9IGV4aXN0aW5nXG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIHRoaXMuc3RydWN0dXJlcyA9IGxvYWRlZFN0cnVjdHVyZXNcblx0fVxuXHRkZWNvZGUoc291cmNlLCBvcHRpb25zKSB7XG5cdFx0cmV0dXJuIHRoaXMudW5wYWNrKHNvdXJjZSwgb3B0aW9ucylcblx0fVxufVxuZXhwb3J0IGZ1bmN0aW9uIGdldFBvc2l0aW9uKCkge1xuXHRyZXR1cm4gcG9zaXRpb25cbn1cbmV4cG9ydCBmdW5jdGlvbiBjaGVja2VkUmVhZChvcHRpb25zKSB7XG5cdHRyeSB7XG5cdFx0aWYgKCFjdXJyZW50VW5wYWNrci50cnVzdGVkICYmICFzZXF1ZW50aWFsTW9kZSkge1xuXHRcdFx0bGV0IHNoYXJlZExlbmd0aCA9IGN1cnJlbnRTdHJ1Y3R1cmVzLnNoYXJlZExlbmd0aCB8fCAwXG5cdFx0XHRpZiAoc2hhcmVkTGVuZ3RoIDwgY3VycmVudFN0cnVjdHVyZXMubGVuZ3RoKVxuXHRcdFx0XHRjdXJyZW50U3RydWN0dXJlcy5sZW5ndGggPSBzaGFyZWRMZW5ndGhcblx0XHR9XG5cdFx0bGV0IHJlc3VsdFxuXHRcdGlmIChjdXJyZW50VW5wYWNrci5yYW5kb21BY2Nlc3NTdHJ1Y3R1cmUgJiYgc3JjW3Bvc2l0aW9uXSA8IDB4NDAgJiYgc3JjW3Bvc2l0aW9uXSA+PSAweDIwICYmIHJlYWRTdHJ1Y3QpIHtcblx0XHRcdHJlc3VsdCA9IHJlYWRTdHJ1Y3Qoc3JjLCBwb3NpdGlvbiwgc3JjRW5kLCBjdXJyZW50VW5wYWNrcilcblx0XHRcdHNyYyA9IG51bGwgLy8gZGlzcG9zZSBvZiB0aGlzIHNvIHRoYXQgcmVjdXJzaXZlIHVucGFjayBjYWxscyBkb24ndCBzYXZlIHN0YXRlXG5cdFx0XHRpZiAoIShvcHRpb25zICYmIG9wdGlvbnMubGF6eSkgJiYgcmVzdWx0KVxuXHRcdFx0XHRyZXN1bHQgPSByZXN1bHQudG9KU09OKClcblx0XHRcdHBvc2l0aW9uID0gc3JjRW5kXG5cdFx0fSBlbHNlXG5cdFx0XHRyZXN1bHQgPSByZWFkKClcblx0XHRpZiAoYnVuZGxlZFN0cmluZ3MpIHsgLy8gYnVuZGxlZCBzdHJpbmdzIHRvIHNraXAgcGFzdFxuXHRcdFx0cG9zaXRpb24gPSBidW5kbGVkU3RyaW5ncy5wb3N0QnVuZGxlUG9zaXRpb25cblx0XHRcdGJ1bmRsZWRTdHJpbmdzID0gbnVsbFxuXHRcdH1cblx0XHRpZiAoc2VxdWVudGlhbE1vZGUpXG5cdFx0XHQvLyB3ZSBvbmx5IG5lZWQgdG8gcmVzdG9yZSB0aGUgc3RydWN0dXJlcyBpZiB0aGVyZSB3YXMgYW4gZXJyb3IsIGJ1dCBpZiB3ZSBjb21wbGV0ZWQgYSByZWFkLFxuXHRcdFx0Ly8gd2UgY2FuIGNsZWFyIHRoaXMgb3V0IGFuZCBrZWVwIHRoZSBzdHJ1Y3R1cmVzIHdlIHJlYWRcblx0XHRcdGN1cnJlbnRTdHJ1Y3R1cmVzLnJlc3RvcmVTdHJ1Y3R1cmVzID0gbnVsbFxuXG5cdFx0aWYgKHBvc2l0aW9uID09IHNyY0VuZCkge1xuXHRcdFx0Ly8gZmluaXNoZWQgcmVhZGluZyB0aGlzIHNvdXJjZSwgY2xlYW51cCByZWZlcmVuY2VzXG5cdFx0XHRpZiAoY3VycmVudFN0cnVjdHVyZXMgJiYgY3VycmVudFN0cnVjdHVyZXMucmVzdG9yZVN0cnVjdHVyZXMpXG5cdFx0XHRcdHJlc3RvcmVTdHJ1Y3R1cmVzKClcblx0XHRcdGN1cnJlbnRTdHJ1Y3R1cmVzID0gbnVsbFxuXHRcdFx0c3JjID0gbnVsbFxuXHRcdFx0aWYgKHJlZmVyZW5jZU1hcClcblx0XHRcdFx0cmVmZXJlbmNlTWFwID0gbnVsbFxuXHRcdH0gZWxzZSBpZiAocG9zaXRpb24gPiBzcmNFbmQpIHtcblx0XHRcdC8vIG92ZXIgcmVhZFxuXHRcdFx0dGhyb3cgbmV3IEVycm9yKCdVbmV4cGVjdGVkIGVuZCBvZiBNZXNzYWdlUGFjayBkYXRhJylcblx0XHR9IGVsc2UgaWYgKCFzZXF1ZW50aWFsTW9kZSkge1xuXHRcdFx0bGV0IGpzb25WaWV3O1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0anNvblZpZXcgPSBKU09OLnN0cmluZ2lmeShyZXN1bHQsIChfLCB2YWx1ZSkgPT4gdHlwZW9mIHZhbHVlID09PSBcImJpZ2ludFwiID8gYCR7dmFsdWV9bmAgOiB2YWx1ZSkuc2xpY2UoMCwgMTAwKVxuXHRcdFx0fSBjYXRjaChlcnJvcikge1xuXHRcdFx0XHRqc29uVmlldyA9ICcoSlNPTiB2aWV3IG5vdCBhdmFpbGFibGUgJyArIGVycm9yICsgJyknXG5cdFx0XHR9XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ0RhdGEgcmVhZCwgYnV0IGVuZCBvZiBidWZmZXIgbm90IHJlYWNoZWQgJyArIGpzb25WaWV3KVxuXHRcdH1cblx0XHQvLyBlbHNlIG1vcmUgdG8gcmVhZCwgYnV0IHdlIGFyZSByZWFkaW5nIHNlcXVlbnRpYWxseSwgc28gZG9uJ3QgY2xlYXIgc291cmNlIHlldFxuXHRcdHJldHVybiByZXN1bHRcblx0fSBjYXRjaChlcnJvcikge1xuXHRcdGlmIChjdXJyZW50U3RydWN0dXJlcyAmJiBjdXJyZW50U3RydWN0dXJlcy5yZXN0b3JlU3RydWN0dXJlcylcblx0XHRcdHJlc3RvcmVTdHJ1Y3R1cmVzKClcblx0XHRjbGVhclNvdXJjZSgpXG5cdFx0aWYgKGVycm9yIGluc3RhbmNlb2YgUmFuZ2VFcnJvciB8fCBlcnJvci5tZXNzYWdlLnN0YXJ0c1dpdGgoJ1VuZXhwZWN0ZWQgZW5kIG9mIGJ1ZmZlcicpIHx8IHBvc2l0aW9uID4gc3JjRW5kKSB7XG5cdFx0XHRlcnJvci5pbmNvbXBsZXRlID0gdHJ1ZVxuXHRcdH1cblx0XHR0aHJvdyBlcnJvclxuXHR9XG59XG5cbmZ1bmN0aW9uIHJlc3RvcmVTdHJ1Y3R1cmVzKCkge1xuXHRmb3IgKGxldCBpZCBpbiBjdXJyZW50U3RydWN0dXJlcy5yZXN0b3JlU3RydWN0dXJlcykge1xuXHRcdGN1cnJlbnRTdHJ1Y3R1cmVzW2lkXSA9IGN1cnJlbnRTdHJ1Y3R1cmVzLnJlc3RvcmVTdHJ1Y3R1cmVzW2lkXVxuXHR9XG5cdGN1cnJlbnRTdHJ1Y3R1cmVzLnJlc3RvcmVTdHJ1Y3R1cmVzID0gbnVsbFxufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVhZCgpIHtcblx0bGV0IHRva2VuID0gc3JjW3Bvc2l0aW9uKytdXG5cdGlmICh0b2tlbiA8IDB4YTApIHtcblx0XHRpZiAodG9rZW4gPCAweDgwKSB7XG5cdFx0XHRpZiAodG9rZW4gPCAweDQwKVxuXHRcdFx0XHRyZXR1cm4gdG9rZW5cblx0XHRcdGVsc2Uge1xuXHRcdFx0XHRsZXQgc3RydWN0dXJlID0gY3VycmVudFN0cnVjdHVyZXNbdG9rZW4gJiAweDNmXSB8fFxuXHRcdFx0XHRcdGN1cnJlbnRVbnBhY2tyLmdldFN0cnVjdHVyZXMgJiYgbG9hZFN0cnVjdHVyZXMoKVt0b2tlbiAmIDB4M2ZdXG5cdFx0XHRcdGlmIChzdHJ1Y3R1cmUpIHtcblx0XHRcdFx0XHRpZiAoIXN0cnVjdHVyZS5yZWFkKSB7XG5cdFx0XHRcdFx0XHRzdHJ1Y3R1cmUucmVhZCA9IGNyZWF0ZVN0cnVjdHVyZVJlYWRlcihzdHJ1Y3R1cmUsIHRva2VuICYgMHgzZilcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIHN0cnVjdHVyZS5yZWFkKClcblx0XHRcdFx0fSBlbHNlXG5cdFx0XHRcdFx0cmV0dXJuIHRva2VuXG5cdFx0XHR9XG5cdFx0fSBlbHNlIGlmICh0b2tlbiA8IDB4OTApIHtcblx0XHRcdC8vIG1hcFxuXHRcdFx0dG9rZW4gLT0gMHg4MFxuXHRcdFx0aWYgKGN1cnJlbnRVbnBhY2tyLm1hcHNBc09iamVjdHMpIHtcblx0XHRcdFx0bGV0IG9iamVjdCA9IHt9XG5cdFx0XHRcdGZvciAobGV0IGkgPSAwOyBpIDwgdG9rZW47IGkrKykge1xuXHRcdFx0XHRcdGxldCBrZXkgPSByZWFkS2V5KClcblx0XHRcdFx0XHRpZiAoa2V5ID09PSAnX19wcm90b19fJylcblx0XHRcdFx0XHRcdGtleSA9ICdfX3Byb3RvXydcblx0XHRcdFx0XHRvYmplY3Rba2V5XSA9IHJlYWQoKVxuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiBvYmplY3Rcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGxldCBtYXAgPSBuZXcgTWFwKClcblx0XHRcdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCB0b2tlbjsgaSsrKSB7XG5cdFx0XHRcdFx0bWFwLnNldChyZWFkKCksIHJlYWQoKSlcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gbWFwXG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRva2VuIC09IDB4OTBcblx0XHRcdGxldCBhcnJheSA9IG5ldyBBcnJheSh0b2tlbilcblx0XHRcdGZvciAobGV0IGkgPSAwOyBpIDwgdG9rZW47IGkrKykge1xuXHRcdFx0XHRhcnJheVtpXSA9IHJlYWQoKVxuXHRcdFx0fVxuXHRcdFx0aWYgKGN1cnJlbnRVbnBhY2tyLmZyZWV6ZURhdGEpXG5cdFx0XHRcdHJldHVybiBPYmplY3QuZnJlZXplKGFycmF5KVxuXHRcdFx0cmV0dXJuIGFycmF5XG5cdFx0fVxuXHR9IGVsc2UgaWYgKHRva2VuIDwgMHhjMCkge1xuXHRcdC8vIGZpeHN0clxuXHRcdGxldCBsZW5ndGggPSB0b2tlbiAtIDB4YTBcblx0XHRpZiAoc3JjU3RyaW5nRW5kID49IHBvc2l0aW9uKSB7XG5cdFx0XHRyZXR1cm4gc3JjU3RyaW5nLnNsaWNlKHBvc2l0aW9uIC0gc3JjU3RyaW5nU3RhcnQsIChwb3NpdGlvbiArPSBsZW5ndGgpIC0gc3JjU3RyaW5nU3RhcnQpXG5cdFx0fVxuXHRcdGlmIChzcmNTdHJpbmdFbmQgPT0gMCAmJiBzcmNFbmQgPCAxNDApIHtcblx0XHRcdC8vIGZvciBzbWFsbCBibG9ja3MsIGF2b2lkaW5nIHRoZSBvdmVyaGVhZCBvZiB0aGUgZXh0cmFjdCBjYWxsIGlzIGhlbHBmdWxcblx0XHRcdGxldCBzdHJpbmcgPSBsZW5ndGggPCAxNiA/IHNob3J0U3RyaW5nSW5KUyhsZW5ndGgpIDogbG9uZ1N0cmluZ0luSlMobGVuZ3RoKVxuXHRcdFx0aWYgKHN0cmluZyAhPSBudWxsKVxuXHRcdFx0XHRyZXR1cm4gc3RyaW5nXG5cdFx0fVxuXHRcdHJldHVybiByZWFkRml4ZWRTdHJpbmcobGVuZ3RoKVxuXHR9IGVsc2Uge1xuXHRcdGxldCB2YWx1ZVxuXHRcdHN3aXRjaCAodG9rZW4pIHtcblx0XHRcdGNhc2UgMHhjMDogcmV0dXJuIG51bGxcblx0XHRcdGNhc2UgMHhjMTpcblx0XHRcdFx0aWYgKGJ1bmRsZWRTdHJpbmdzKSB7XG5cdFx0XHRcdFx0dmFsdWUgPSByZWFkKCkgLy8gZm9sbG93ZWQgYnkgdGhlIGxlbmd0aCBvZiB0aGUgc3RyaW5nIGluIGNoYXJhY3RlcnMgKG5vdCBieXRlcyEpXG5cdFx0XHRcdFx0aWYgKHZhbHVlID4gMClcblx0XHRcdFx0XHRcdHJldHVybiBidW5kbGVkU3RyaW5nc1sxXS5zbGljZShidW5kbGVkU3RyaW5ncy5wb3NpdGlvbjEsIGJ1bmRsZWRTdHJpbmdzLnBvc2l0aW9uMSArPSB2YWx1ZSlcblx0XHRcdFx0XHRlbHNlXG5cdFx0XHRcdFx0XHRyZXR1cm4gYnVuZGxlZFN0cmluZ3NbMF0uc2xpY2UoYnVuZGxlZFN0cmluZ3MucG9zaXRpb24wLCBidW5kbGVkU3RyaW5ncy5wb3NpdGlvbjAgLT0gdmFsdWUpXG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIEMxOyAvLyBcIm5ldmVyLXVzZWRcIiwgcmV0dXJuIHNwZWNpYWwgb2JqZWN0IHRvIGRlbm90ZSB0aGF0XG5cdFx0XHRjYXNlIDB4YzI6IHJldHVybiBmYWxzZVxuXHRcdFx0Y2FzZSAweGMzOiByZXR1cm4gdHJ1ZVxuXHRcdFx0Y2FzZSAweGM0OlxuXHRcdFx0XHQvLyBiaW4gOFxuXHRcdFx0XHR2YWx1ZSA9IHNyY1twb3NpdGlvbisrXVxuXHRcdFx0XHRpZiAodmFsdWUgPT09IHVuZGVmaW5lZClcblx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ1VuZXhwZWN0ZWQgZW5kIG9mIGJ1ZmZlcicpXG5cdFx0XHRcdHJldHVybiByZWFkQmluKHZhbHVlKVxuXHRcdFx0Y2FzZSAweGM1OlxuXHRcdFx0XHQvLyBiaW4gMTZcblx0XHRcdFx0dmFsdWUgPSBkYXRhVmlldy5nZXRVaW50MTYocG9zaXRpb24pXG5cdFx0XHRcdHBvc2l0aW9uICs9IDJcblx0XHRcdFx0cmV0dXJuIHJlYWRCaW4odmFsdWUpXG5cdFx0XHRjYXNlIDB4YzY6XG5cdFx0XHRcdC8vIGJpbiAzMlxuXHRcdFx0XHR2YWx1ZSA9IGRhdGFWaWV3LmdldFVpbnQzMihwb3NpdGlvbilcblx0XHRcdFx0cG9zaXRpb24gKz0gNFxuXHRcdFx0XHRyZXR1cm4gcmVhZEJpbih2YWx1ZSlcblx0XHRcdGNhc2UgMHhjNzpcblx0XHRcdFx0Ly8gZXh0IDhcblx0XHRcdFx0cmV0dXJuIHJlYWRFeHQoc3JjW3Bvc2l0aW9uKytdKVxuXHRcdFx0Y2FzZSAweGM4OlxuXHRcdFx0XHQvLyBleHQgMTZcblx0XHRcdFx0dmFsdWUgPSBkYXRhVmlldy5nZXRVaW50MTYocG9zaXRpb24pXG5cdFx0XHRcdHBvc2l0aW9uICs9IDJcblx0XHRcdFx0cmV0dXJuIHJlYWRFeHQodmFsdWUpXG5cdFx0XHRjYXNlIDB4Yzk6XG5cdFx0XHRcdC8vIGV4dCAzMlxuXHRcdFx0XHR2YWx1ZSA9IGRhdGFWaWV3LmdldFVpbnQzMihwb3NpdGlvbilcblx0XHRcdFx0cG9zaXRpb24gKz0gNFxuXHRcdFx0XHRyZXR1cm4gcmVhZEV4dCh2YWx1ZSlcblx0XHRcdGNhc2UgMHhjYTpcblx0XHRcdFx0dmFsdWUgPSBkYXRhVmlldy5nZXRGbG9hdDMyKHBvc2l0aW9uKVxuXHRcdFx0XHRpZiAoY3VycmVudFVucGFja3IudXNlRmxvYXQzMiA+IDIpIHtcblx0XHRcdFx0XHQvLyB0aGlzIGRvZXMgcm91bmRpbmcgb2YgbnVtYmVycyB0aGF0IHdlcmUgZW5jb2RlZCBpbiAzMi1iaXQgZmxvYXQgdG8gbmVhcmVzdCBzaWduaWZpY2FudCBkZWNpbWFsIGRpZ2l0IHRoYXQgY291bGQgYmUgcHJlc2VydmVkXG5cdFx0XHRcdFx0bGV0IG11bHRpcGxpZXIgPSBtdWx0MTBbKChzcmNbcG9zaXRpb25dICYgMHg3ZikgPDwgMSkgfCAoc3JjW3Bvc2l0aW9uICsgMV0gPj4gNyldXG5cdFx0XHRcdFx0cG9zaXRpb24gKz0gNFxuXHRcdFx0XHRcdHJldHVybiAoKG11bHRpcGxpZXIgKiB2YWx1ZSArICh2YWx1ZSA+IDAgPyAwLjUgOiAtMC41KSkgPj4gMCkgLyBtdWx0aXBsaWVyXG5cdFx0XHRcdH1cblx0XHRcdFx0cG9zaXRpb24gKz0gNFxuXHRcdFx0XHRyZXR1cm4gdmFsdWVcblx0XHRcdGNhc2UgMHhjYjpcblx0XHRcdFx0dmFsdWUgPSBkYXRhVmlldy5nZXRGbG9hdDY0KHBvc2l0aW9uKVxuXHRcdFx0XHRwb3NpdGlvbiArPSA4XG5cdFx0XHRcdHJldHVybiB2YWx1ZVxuXHRcdFx0Ly8gdWludCBoYW5kbGVyc1xuXHRcdFx0Y2FzZSAweGNjOlxuXHRcdFx0XHRyZXR1cm4gc3JjW3Bvc2l0aW9uKytdXG5cdFx0XHRjYXNlIDB4Y2Q6XG5cdFx0XHRcdHZhbHVlID0gZGF0YVZpZXcuZ2V0VWludDE2KHBvc2l0aW9uKVxuXHRcdFx0XHRwb3NpdGlvbiArPSAyXG5cdFx0XHRcdHJldHVybiB2YWx1ZVxuXHRcdFx0Y2FzZSAweGNlOlxuXHRcdFx0XHR2YWx1ZSA9IGRhdGFWaWV3LmdldFVpbnQzMihwb3NpdGlvbilcblx0XHRcdFx0cG9zaXRpb24gKz0gNFxuXHRcdFx0XHRyZXR1cm4gdmFsdWVcblx0XHRcdGNhc2UgMHhjZjpcblx0XHRcdFx0aWYgKGN1cnJlbnRVbnBhY2tyLmludDY0QXNUeXBlID09PSAnbnVtYmVyJykge1xuXHRcdFx0XHRcdHZhbHVlID0gZGF0YVZpZXcuZ2V0VWludDMyKHBvc2l0aW9uKSAqIDB4MTAwMDAwMDAwXG5cdFx0XHRcdFx0dmFsdWUgKz0gZGF0YVZpZXcuZ2V0VWludDMyKHBvc2l0aW9uICsgNClcblx0XHRcdFx0fSBlbHNlIGlmIChjdXJyZW50VW5wYWNrci5pbnQ2NEFzVHlwZSA9PT0gJ3N0cmluZycpIHtcblx0XHRcdFx0XHR2YWx1ZSA9IGRhdGFWaWV3LmdldEJpZ1VpbnQ2NChwb3NpdGlvbikudG9TdHJpbmcoKVxuXHRcdFx0XHR9IGVsc2UgaWYgKGN1cnJlbnRVbnBhY2tyLmludDY0QXNUeXBlID09PSAnYXV0bycpIHtcblx0XHRcdFx0XHR2YWx1ZSA9IGRhdGFWaWV3LmdldEJpZ1VpbnQ2NChwb3NpdGlvbilcblx0XHRcdFx0XHRpZiAodmFsdWU8PUJpZ0ludCgyKTw8QmlnSW50KDUyKSkgdmFsdWU9TnVtYmVyKHZhbHVlKVxuXHRcdFx0XHR9IGVsc2Vcblx0XHRcdFx0XHR2YWx1ZSA9IGRhdGFWaWV3LmdldEJpZ1VpbnQ2NChwb3NpdGlvbilcblx0XHRcdFx0cG9zaXRpb24gKz0gOFxuXHRcdFx0XHRyZXR1cm4gdmFsdWVcblxuXHRcdFx0Ly8gaW50IGhhbmRsZXJzXG5cdFx0XHRjYXNlIDB4ZDA6XG5cdFx0XHRcdHJldHVybiBkYXRhVmlldy5nZXRJbnQ4KHBvc2l0aW9uKyspXG5cdFx0XHRjYXNlIDB4ZDE6XG5cdFx0XHRcdHZhbHVlID0gZGF0YVZpZXcuZ2V0SW50MTYocG9zaXRpb24pXG5cdFx0XHRcdHBvc2l0aW9uICs9IDJcblx0XHRcdFx0cmV0dXJuIHZhbHVlXG5cdFx0XHRjYXNlIDB4ZDI6XG5cdFx0XHRcdHZhbHVlID0gZGF0YVZpZXcuZ2V0SW50MzIocG9zaXRpb24pXG5cdFx0XHRcdHBvc2l0aW9uICs9IDRcblx0XHRcdFx0cmV0dXJuIHZhbHVlXG5cdFx0XHRjYXNlIDB4ZDM6XG5cdFx0XHRcdGlmIChjdXJyZW50VW5wYWNrci5pbnQ2NEFzVHlwZSA9PT0gJ251bWJlcicpIHtcblx0XHRcdFx0XHR2YWx1ZSA9IGRhdGFWaWV3LmdldEludDMyKHBvc2l0aW9uKSAqIDB4MTAwMDAwMDAwXG5cdFx0XHRcdFx0dmFsdWUgKz0gZGF0YVZpZXcuZ2V0VWludDMyKHBvc2l0aW9uICsgNClcblx0XHRcdFx0fSBlbHNlIGlmIChjdXJyZW50VW5wYWNrci5pbnQ2NEFzVHlwZSA9PT0gJ3N0cmluZycpIHtcblx0XHRcdFx0XHR2YWx1ZSA9IGRhdGFWaWV3LmdldEJpZ0ludDY0KHBvc2l0aW9uKS50b1N0cmluZygpXG5cdFx0XHRcdH0gZWxzZSBpZiAoY3VycmVudFVucGFja3IuaW50NjRBc1R5cGUgPT09ICdhdXRvJykge1xuXHRcdFx0XHRcdHZhbHVlID0gZGF0YVZpZXcuZ2V0QmlnSW50NjQocG9zaXRpb24pXG5cdFx0XHRcdFx0aWYgKHZhbHVlPj1CaWdJbnQoLTIpPDxCaWdJbnQoNTIpJiZ2YWx1ZTw9QmlnSW50KDIpPDxCaWdJbnQoNTIpKSB2YWx1ZT1OdW1iZXIodmFsdWUpXG5cdFx0XHRcdH0gZWxzZVxuXHRcdFx0XHRcdHZhbHVlID0gZGF0YVZpZXcuZ2V0QmlnSW50NjQocG9zaXRpb24pXG5cdFx0XHRcdHBvc2l0aW9uICs9IDhcblx0XHRcdFx0cmV0dXJuIHZhbHVlXG5cblx0XHRcdGNhc2UgMHhkNDpcblx0XHRcdFx0Ly8gZml4ZXh0IDFcblx0XHRcdFx0dmFsdWUgPSBzcmNbcG9zaXRpb24rK11cblx0XHRcdFx0aWYgKHZhbHVlID09IDB4NzIpIHtcblx0XHRcdFx0XHRyZXR1cm4gcmVjb3JkRGVmaW5pdGlvbihzcmNbcG9zaXRpb24rK10gJiAweDNmKVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGxldCBleHRlbnNpb24gPSBjdXJyZW50RXh0ZW5zaW9uc1t2YWx1ZV1cblx0XHRcdFx0XHRpZiAoZXh0ZW5zaW9uKSB7XG5cdFx0XHRcdFx0XHRpZiAoZXh0ZW5zaW9uLnJlYWQpIHtcblx0XHRcdFx0XHRcdFx0cG9zaXRpb24rKyAvLyBza2lwIGZpbGxlciBieXRlXG5cdFx0XHRcdFx0XHRcdHJldHVybiBleHRlbnNpb24ucmVhZChyZWFkKCkpXG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKGV4dGVuc2lvbi5ub0J1ZmZlcikge1xuXHRcdFx0XHRcdFx0XHRwb3NpdGlvbisrIC8vIHNraXAgZmlsbGVyIGJ5dGVcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGV4dGVuc2lvbigpXG5cdFx0XHRcdFx0XHR9IGVsc2Vcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGV4dGVuc2lvbihzcmMuc3ViYXJyYXkocG9zaXRpb24sICsrcG9zaXRpb24pKVxuXHRcdFx0XHRcdH0gZWxzZVxuXHRcdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKCdVbmtub3duIGV4dGVuc2lvbiAnICsgdmFsdWUpXG5cdFx0XHRcdH1cblx0XHRcdGNhc2UgMHhkNTpcblx0XHRcdFx0Ly8gZml4ZXh0IDJcblx0XHRcdFx0dmFsdWUgPSBzcmNbcG9zaXRpb25dXG5cdFx0XHRcdGlmICh2YWx1ZSA9PSAweDcyKSB7XG5cdFx0XHRcdFx0cG9zaXRpb24rK1xuXHRcdFx0XHRcdHJldHVybiByZWNvcmREZWZpbml0aW9uKHNyY1twb3NpdGlvbisrXSAmIDB4M2YsIHNyY1twb3NpdGlvbisrXSlcblx0XHRcdFx0fSBlbHNlXG5cdFx0XHRcdFx0cmV0dXJuIHJlYWRFeHQoMilcblx0XHRcdGNhc2UgMHhkNjpcblx0XHRcdFx0Ly8gZml4ZXh0IDRcblx0XHRcdFx0cmV0dXJuIHJlYWRFeHQoNClcblx0XHRcdGNhc2UgMHhkNzpcblx0XHRcdFx0Ly8gZml4ZXh0IDhcblx0XHRcdFx0cmV0dXJuIHJlYWRFeHQoOClcblx0XHRcdGNhc2UgMHhkODpcblx0XHRcdFx0Ly8gZml4ZXh0IDE2XG5cdFx0XHRcdHJldHVybiByZWFkRXh0KDE2KVxuXHRcdFx0Y2FzZSAweGQ5OlxuXHRcdFx0Ly8gc3RyIDhcblx0XHRcdFx0dmFsdWUgPSBzcmNbcG9zaXRpb24rK11cblx0XHRcdFx0aWYgKHNyY1N0cmluZ0VuZCA+PSBwb3NpdGlvbikge1xuXHRcdFx0XHRcdHJldHVybiBzcmNTdHJpbmcuc2xpY2UocG9zaXRpb24gLSBzcmNTdHJpbmdTdGFydCwgKHBvc2l0aW9uICs9IHZhbHVlKSAtIHNyY1N0cmluZ1N0YXJ0KVxuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiByZWFkU3RyaW5nOCh2YWx1ZSlcblx0XHRcdGNhc2UgMHhkYTpcblx0XHRcdC8vIHN0ciAxNlxuXHRcdFx0XHR2YWx1ZSA9IGRhdGFWaWV3LmdldFVpbnQxNihwb3NpdGlvbilcblx0XHRcdFx0cG9zaXRpb24gKz0gMlxuXHRcdFx0XHRpZiAoc3JjU3RyaW5nRW5kID49IHBvc2l0aW9uKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHNyY1N0cmluZy5zbGljZShwb3NpdGlvbiAtIHNyY1N0cmluZ1N0YXJ0LCAocG9zaXRpb24gKz0gdmFsdWUpIC0gc3JjU3RyaW5nU3RhcnQpXG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHJlYWRTdHJpbmcxNih2YWx1ZSlcblx0XHRcdGNhc2UgMHhkYjpcblx0XHRcdC8vIHN0ciAzMlxuXHRcdFx0XHR2YWx1ZSA9IGRhdGFWaWV3LmdldFVpbnQzMihwb3NpdGlvbilcblx0XHRcdFx0cG9zaXRpb24gKz0gNFxuXHRcdFx0XHRpZiAoc3JjU3RyaW5nRW5kID49IHBvc2l0aW9uKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHNyY1N0cmluZy5zbGljZShwb3NpdGlvbiAtIHNyY1N0cmluZ1N0YXJ0LCAocG9zaXRpb24gKz0gdmFsdWUpIC0gc3JjU3RyaW5nU3RhcnQpXG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHJlYWRTdHJpbmczMih2YWx1ZSlcblx0XHRcdGNhc2UgMHhkYzpcblx0XHRcdC8vIGFycmF5IDE2XG5cdFx0XHRcdHZhbHVlID0gZGF0YVZpZXcuZ2V0VWludDE2KHBvc2l0aW9uKVxuXHRcdFx0XHRwb3NpdGlvbiArPSAyXG5cdFx0XHRcdHJldHVybiByZWFkQXJyYXkodmFsdWUpXG5cdFx0XHRjYXNlIDB4ZGQ6XG5cdFx0XHQvLyBhcnJheSAzMlxuXHRcdFx0XHR2YWx1ZSA9IGRhdGFWaWV3LmdldFVpbnQzMihwb3NpdGlvbilcblx0XHRcdFx0cG9zaXRpb24gKz0gNFxuXHRcdFx0XHRyZXR1cm4gcmVhZEFycmF5KHZhbHVlKVxuXHRcdFx0Y2FzZSAweGRlOlxuXHRcdFx0Ly8gbWFwIDE2XG5cdFx0XHRcdHZhbHVlID0gZGF0YVZpZXcuZ2V0VWludDE2KHBvc2l0aW9uKVxuXHRcdFx0XHRwb3NpdGlvbiArPSAyXG5cdFx0XHRcdHJldHVybiByZWFkTWFwKHZhbHVlKVxuXHRcdFx0Y2FzZSAweGRmOlxuXHRcdFx0Ly8gbWFwIDMyXG5cdFx0XHRcdHZhbHVlID0gZGF0YVZpZXcuZ2V0VWludDMyKHBvc2l0aW9uKVxuXHRcdFx0XHRwb3NpdGlvbiArPSA0XG5cdFx0XHRcdHJldHVybiByZWFkTWFwKHZhbHVlKVxuXHRcdFx0ZGVmYXVsdDogLy8gbmVnYXRpdmUgaW50XG5cdFx0XHRcdGlmICh0b2tlbiA+PSAweGUwKVxuXHRcdFx0XHRcdHJldHVybiB0b2tlbiAtIDB4MTAwXG5cdFx0XHRcdGlmICh0b2tlbiA9PT0gdW5kZWZpbmVkKSB7XG5cdFx0XHRcdFx0bGV0IGVycm9yID0gbmV3IEVycm9yKCdVbmV4cGVjdGVkIGVuZCBvZiBNZXNzYWdlUGFjayBkYXRhJylcblx0XHRcdFx0XHRlcnJvci5pbmNvbXBsZXRlID0gdHJ1ZVxuXHRcdFx0XHRcdHRocm93IGVycm9yXG5cdFx0XHRcdH1cblx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKCdVbmtub3duIE1lc3NhZ2VQYWNrIHRva2VuICcgKyB0b2tlbilcblxuXHRcdH1cblx0fVxufVxuY29uc3QgdmFsaWROYW1lID0gL15bYS16QS1aXyRdW2EtekEtWlxcZF8kXSokL1xuZnVuY3Rpb24gY3JlYXRlU3RydWN0dXJlUmVhZGVyKHN0cnVjdHVyZSwgZmlyc3RJZCkge1xuXHRmdW5jdGlvbiByZWFkT2JqZWN0KCkge1xuXHRcdC8vIFRoaXMgaW5pdGlhbCBmdW5jdGlvbiBpcyBxdWljayB0byBpbnN0YW50aWF0ZSwgYnV0IHJ1bnMgc2xvd2VyLiBBZnRlciBzZXZlcmFsIGl0ZXJhdGlvbnMgcGF5IHRoZSBjb3N0IHRvIGJ1aWxkIHRoZSBmYXN0ZXIgZnVuY3Rpb25cblx0XHRpZiAocmVhZE9iamVjdC5jb3VudCsrID4gaW5saW5lT2JqZWN0UmVhZFRocmVzaG9sZCkge1xuXHRcdFx0bGV0IHJlYWRPYmplY3QgPSBzdHJ1Y3R1cmUucmVhZCA9IChuZXcgRnVuY3Rpb24oJ3InLCAncmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuICcgKyAoY3VycmVudFVucGFja3IuZnJlZXplRGF0YSA/ICdPYmplY3QuZnJlZXplJyA6ICcnKSArXG5cdFx0XHRcdCcoeycgKyBzdHJ1Y3R1cmUubWFwKGtleSA9PiBrZXkgPT09ICdfX3Byb3RvX18nID8gJ19fcHJvdG9fOnIoKScgOiB2YWxpZE5hbWUudGVzdChrZXkpID8ga2V5ICsgJzpyKCknIDogKCdbJyArIEpTT04uc3RyaW5naWZ5KGtleSkgKyAnXTpyKCknKSkuam9pbignLCcpICsgJ30pfScpKShyZWFkKVxuXHRcdFx0aWYgKHN0cnVjdHVyZS5oaWdoQnl0ZSA9PT0gMClcblx0XHRcdFx0c3RydWN0dXJlLnJlYWQgPSBjcmVhdGVTZWNvbmRCeXRlUmVhZGVyKGZpcnN0SWQsIHN0cnVjdHVyZS5yZWFkKVxuXHRcdFx0cmV0dXJuIHJlYWRPYmplY3QoKSAvLyBzZWNvbmQgYnl0ZSBpcyBhbHJlYWR5IHJlYWQsIGlmIHRoZXJlIGlzIG9uZSBzbyBpbW1lZGlhdGVseSByZWFkIG9iamVjdFxuXHRcdH1cblx0XHRsZXQgb2JqZWN0ID0ge31cblx0XHRmb3IgKGxldCBpID0gMCwgbCA9IHN0cnVjdHVyZS5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0XHRcdGxldCBrZXkgPSBzdHJ1Y3R1cmVbaV1cblx0XHRcdGlmIChrZXkgPT09ICdfX3Byb3RvX18nKVxuXHRcdFx0XHRrZXkgPSAnX19wcm90b18nXG5cdFx0XHRvYmplY3Rba2V5XSA9IHJlYWQoKVxuXHRcdH1cblx0XHRpZiAoY3VycmVudFVucGFja3IuZnJlZXplRGF0YSlcblx0XHRcdHJldHVybiBPYmplY3QuZnJlZXplKG9iamVjdCk7XG5cdFx0cmV0dXJuIG9iamVjdFxuXHR9XG5cdHJlYWRPYmplY3QuY291bnQgPSAwXG5cdGlmIChzdHJ1Y3R1cmUuaGlnaEJ5dGUgPT09IDApIHtcblx0XHRyZXR1cm4gY3JlYXRlU2Vjb25kQnl0ZVJlYWRlcihmaXJzdElkLCByZWFkT2JqZWN0KVxuXHR9XG5cdHJldHVybiByZWFkT2JqZWN0XG59XG5cbmNvbnN0IGNyZWF0ZVNlY29uZEJ5dGVSZWFkZXIgPSAoZmlyc3RJZCwgcmVhZDApID0+IHtcblx0cmV0dXJuIGZ1bmN0aW9uKCkge1xuXHRcdGxldCBoaWdoQnl0ZSA9IHNyY1twb3NpdGlvbisrXVxuXHRcdGlmIChoaWdoQnl0ZSA9PT0gMClcblx0XHRcdHJldHVybiByZWFkMCgpXG5cdFx0bGV0IGlkID0gZmlyc3RJZCA8IDMyID8gLShmaXJzdElkICsgKGhpZ2hCeXRlIDw8IDUpKSA6IGZpcnN0SWQgKyAoaGlnaEJ5dGUgPDwgNSlcblx0XHRsZXQgc3RydWN0dXJlID0gY3VycmVudFN0cnVjdHVyZXNbaWRdIHx8IGxvYWRTdHJ1Y3R1cmVzKClbaWRdXG5cdFx0aWYgKCFzdHJ1Y3R1cmUpIHtcblx0XHRcdHRocm93IG5ldyBFcnJvcignUmVjb3JkIGlkIGlzIG5vdCBkZWZpbmVkIGZvciAnICsgaWQpXG5cdFx0fVxuXHRcdGlmICghc3RydWN0dXJlLnJlYWQpXG5cdFx0XHRzdHJ1Y3R1cmUucmVhZCA9IGNyZWF0ZVN0cnVjdHVyZVJlYWRlcihzdHJ1Y3R1cmUsIGZpcnN0SWQpXG5cdFx0cmV0dXJuIHN0cnVjdHVyZS5yZWFkKClcblx0fVxufVxuXG5leHBvcnQgZnVuY3Rpb24gbG9hZFN0cnVjdHVyZXMoKSB7XG5cdGxldCBsb2FkZWRTdHJ1Y3R1cmVzID0gc2F2ZVN0YXRlKCgpID0+IHtcblx0XHQvLyBzYXZlIHRoZSBzdGF0ZSBpbiBjYXNlIGdldFN0cnVjdHVyZXMgbW9kaWZpZXMgb3VyIGJ1ZmZlclxuXHRcdHNyYyA9IG51bGxcblx0XHRyZXR1cm4gY3VycmVudFVucGFja3IuZ2V0U3RydWN0dXJlcygpXG5cdH0pXG5cdHJldHVybiBjdXJyZW50U3RydWN0dXJlcyA9IGN1cnJlbnRVbnBhY2tyLl9tZXJnZVN0cnVjdHVyZXMobG9hZGVkU3RydWN0dXJlcywgY3VycmVudFN0cnVjdHVyZXMpXG59XG5cbnZhciByZWFkRml4ZWRTdHJpbmcgPSByZWFkU3RyaW5nSlNcbnZhciByZWFkU3RyaW5nOCA9IHJlYWRTdHJpbmdKU1xudmFyIHJlYWRTdHJpbmcxNiA9IHJlYWRTdHJpbmdKU1xudmFyIHJlYWRTdHJpbmczMiA9IHJlYWRTdHJpbmdKU1xuZXhwb3J0IGxldCBpc05hdGl2ZUFjY2VsZXJhdGlvbkVuYWJsZWQgPSBmYWxzZVxuXG5leHBvcnQgZnVuY3Rpb24gc2V0RXh0cmFjdG9yKGV4dHJhY3RTdHJpbmdzKSB7XG5cdGlzTmF0aXZlQWNjZWxlcmF0aW9uRW5hYmxlZCA9IHRydWVcblx0cmVhZEZpeGVkU3RyaW5nID0gcmVhZFN0cmluZygxKVxuXHRyZWFkU3RyaW5nOCA9IHJlYWRTdHJpbmcoMilcblx0cmVhZFN0cmluZzE2ID0gcmVhZFN0cmluZygzKVxuXHRyZWFkU3RyaW5nMzIgPSByZWFkU3RyaW5nKDUpXG5cdGZ1bmN0aW9uIHJlYWRTdHJpbmcoaGVhZGVyTGVuZ3RoKSB7XG5cdFx0cmV0dXJuIGZ1bmN0aW9uIHJlYWRTdHJpbmcobGVuZ3RoKSB7XG5cdFx0XHRsZXQgc3RyaW5nID0gc3RyaW5nc1tzdHJpbmdQb3NpdGlvbisrXVxuXHRcdFx0aWYgKHN0cmluZyA9PSBudWxsKSB7XG5cdFx0XHRcdGlmIChidW5kbGVkU3RyaW5ncylcblx0XHRcdFx0XHRyZXR1cm4gcmVhZFN0cmluZ0pTKGxlbmd0aClcblx0XHRcdFx0bGV0IGJ5dGVPZmZzZXQgPSBzcmMuYnl0ZU9mZnNldFxuXHRcdFx0XHRsZXQgZXh0cmFjdGlvbiA9IGV4dHJhY3RTdHJpbmdzKHBvc2l0aW9uIC0gaGVhZGVyTGVuZ3RoICsgYnl0ZU9mZnNldCwgc3JjRW5kICsgYnl0ZU9mZnNldCwgc3JjLmJ1ZmZlcilcblx0XHRcdFx0aWYgKHR5cGVvZiBleHRyYWN0aW9uID09ICdzdHJpbmcnKSB7XG5cdFx0XHRcdFx0c3RyaW5nID0gZXh0cmFjdGlvblxuXHRcdFx0XHRcdHN0cmluZ3MgPSBFTVBUWV9BUlJBWVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHN0cmluZ3MgPSBleHRyYWN0aW9uXG5cdFx0XHRcdFx0c3RyaW5nUG9zaXRpb24gPSAxXG5cdFx0XHRcdFx0c3JjU3RyaW5nRW5kID0gMSAvLyBldmVuIGlmIGEgdXRmLTggc3RyaW5nIHdhcyBkZWNvZGVkLCBtdXN0IGluZGljYXRlIHdlIGFyZSBpbiB0aGUgbWlkc3Qgb2YgZXh0cmFjdGVkIHN0cmluZ3MgYW5kIGNhbid0IHNraXAgc3RyaW5nc1xuXHRcdFx0XHRcdHN0cmluZyA9IHN0cmluZ3NbMF1cblx0XHRcdFx0XHRpZiAoc3RyaW5nID09PSB1bmRlZmluZWQpXG5cdFx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ1VuZXhwZWN0ZWQgZW5kIG9mIGJ1ZmZlcicpXG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdGxldCBzcmNTdHJpbmdMZW5ndGggPSBzdHJpbmcubGVuZ3RoXG5cdFx0XHRpZiAoc3JjU3RyaW5nTGVuZ3RoIDw9IGxlbmd0aCkge1xuXHRcdFx0XHRwb3NpdGlvbiArPSBsZW5ndGhcblx0XHRcdFx0cmV0dXJuIHN0cmluZ1xuXHRcdFx0fVxuXHRcdFx0c3JjU3RyaW5nID0gc3RyaW5nXG5cdFx0XHRzcmNTdHJpbmdTdGFydCA9IHBvc2l0aW9uXG5cdFx0XHRzcmNTdHJpbmdFbmQgPSBwb3NpdGlvbiArIHNyY1N0cmluZ0xlbmd0aFxuXHRcdFx0cG9zaXRpb24gKz0gbGVuZ3RoXG5cdFx0XHRyZXR1cm4gc3RyaW5nLnNsaWNlKDAsIGxlbmd0aCkgLy8gd2Uga25vdyB3ZSBqdXN0IHdhbnQgdGhlIGJlZ2lubmluZ1xuXHRcdH1cblx0fVxufVxuZnVuY3Rpb24gcmVhZFN0cmluZ0pTKGxlbmd0aCkge1xuXHRsZXQgcmVzdWx0XG5cdGlmIChsZW5ndGggPCAxNikge1xuXHRcdGlmIChyZXN1bHQgPSBzaG9ydFN0cmluZ0luSlMobGVuZ3RoKSlcblx0XHRcdHJldHVybiByZXN1bHRcblx0fVxuXHRpZiAobGVuZ3RoID4gNjQgJiYgZGVjb2Rlcilcblx0XHRyZXR1cm4gZGVjb2Rlci5kZWNvZGUoc3JjLnN1YmFycmF5KHBvc2l0aW9uLCBwb3NpdGlvbiArPSBsZW5ndGgpKVxuXHRjb25zdCBlbmQgPSBwb3NpdGlvbiArIGxlbmd0aFxuXHRjb25zdCB1bml0cyA9IFtdXG5cdHJlc3VsdCA9ICcnXG5cdHdoaWxlIChwb3NpdGlvbiA8IGVuZCkge1xuXHRcdGNvbnN0IGJ5dGUxID0gc3JjW3Bvc2l0aW9uKytdXG5cdFx0aWYgKChieXRlMSAmIDB4ODApID09PSAwKSB7XG5cdFx0XHQvLyAxIGJ5dGVcblx0XHRcdHVuaXRzLnB1c2goYnl0ZTEpXG5cdFx0fSBlbHNlIGlmICgoYnl0ZTEgJiAweGUwKSA9PT0gMHhjMCkge1xuXHRcdFx0Ly8gMiBieXRlc1xuXHRcdFx0Y29uc3QgYnl0ZTIgPSBzcmNbcG9zaXRpb24rK10gJiAweDNmXG5cdFx0XHR1bml0cy5wdXNoKCgoYnl0ZTEgJiAweDFmKSA8PCA2KSB8IGJ5dGUyKVxuXHRcdH0gZWxzZSBpZiAoKGJ5dGUxICYgMHhmMCkgPT09IDB4ZTApIHtcblx0XHRcdC8vIDMgYnl0ZXNcblx0XHRcdGNvbnN0IGJ5dGUyID0gc3JjW3Bvc2l0aW9uKytdICYgMHgzZlxuXHRcdFx0Y29uc3QgYnl0ZTMgPSBzcmNbcG9zaXRpb24rK10gJiAweDNmXG5cdFx0XHR1bml0cy5wdXNoKCgoYnl0ZTEgJiAweDFmKSA8PCAxMikgfCAoYnl0ZTIgPDwgNikgfCBieXRlMylcblx0XHR9IGVsc2UgaWYgKChieXRlMSAmIDB4ZjgpID09PSAweGYwKSB7XG5cdFx0XHQvLyA0IGJ5dGVzXG5cdFx0XHRjb25zdCBieXRlMiA9IHNyY1twb3NpdGlvbisrXSAmIDB4M2Zcblx0XHRcdGNvbnN0IGJ5dGUzID0gc3JjW3Bvc2l0aW9uKytdICYgMHgzZlxuXHRcdFx0Y29uc3QgYnl0ZTQgPSBzcmNbcG9zaXRpb24rK10gJiAweDNmXG5cdFx0XHRsZXQgdW5pdCA9ICgoYnl0ZTEgJiAweDA3KSA8PCAweDEyKSB8IChieXRlMiA8PCAweDBjKSB8IChieXRlMyA8PCAweDA2KSB8IGJ5dGU0XG5cdFx0XHRpZiAodW5pdCA+IDB4ZmZmZikge1xuXHRcdFx0XHR1bml0IC09IDB4MTAwMDBcblx0XHRcdFx0dW5pdHMucHVzaCgoKHVuaXQgPj4+IDEwKSAmIDB4M2ZmKSB8IDB4ZDgwMClcblx0XHRcdFx0dW5pdCA9IDB4ZGMwMCB8ICh1bml0ICYgMHgzZmYpXG5cdFx0XHR9XG5cdFx0XHR1bml0cy5wdXNoKHVuaXQpXG5cdFx0fSBlbHNlIHtcblx0XHRcdHVuaXRzLnB1c2goYnl0ZTEpXG5cdFx0fVxuXG5cdFx0aWYgKHVuaXRzLmxlbmd0aCA+PSAweDEwMDApIHtcblx0XHRcdHJlc3VsdCArPSBmcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLCB1bml0cylcblx0XHRcdHVuaXRzLmxlbmd0aCA9IDBcblx0XHR9XG5cdH1cblxuXHRpZiAodW5pdHMubGVuZ3RoID4gMCkge1xuXHRcdHJlc3VsdCArPSBmcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLCB1bml0cylcblx0fVxuXG5cdHJldHVybiByZXN1bHRcbn1cbmV4cG9ydCBmdW5jdGlvbiByZWFkU3RyaW5nKHNvdXJjZSwgc3RhcnQsIGxlbmd0aCkge1xuXHRsZXQgZXhpc3RpbmdTcmMgPSBzcmM7XG5cdHNyYyA9IHNvdXJjZTtcblx0cG9zaXRpb24gPSBzdGFydDtcblx0dHJ5IHtcblx0XHRyZXR1cm4gcmVhZFN0cmluZ0pTKGxlbmd0aCk7XG5cdH0gZmluYWxseSB7XG5cdFx0c3JjID0gZXhpc3RpbmdTcmM7XG5cdH1cbn1cblxuZnVuY3Rpb24gcmVhZEFycmF5KGxlbmd0aCkge1xuXHRsZXQgYXJyYXkgPSBuZXcgQXJyYXkobGVuZ3RoKVxuXHRmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG5cdFx0YXJyYXlbaV0gPSByZWFkKClcblx0fVxuXHRpZiAoY3VycmVudFVucGFja3IuZnJlZXplRGF0YSlcblx0XHRyZXR1cm4gT2JqZWN0LmZyZWV6ZShhcnJheSlcblx0cmV0dXJuIGFycmF5XG59XG5cbmZ1bmN0aW9uIHJlYWRNYXAobGVuZ3RoKSB7XG5cdGlmIChjdXJyZW50VW5wYWNrci5tYXBzQXNPYmplY3RzKSB7XG5cdFx0bGV0IG9iamVjdCA9IHt9XG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuXHRcdFx0bGV0IGtleSA9IHJlYWRLZXkoKVxuXHRcdFx0aWYgKGtleSA9PT0gJ19fcHJvdG9fXycpXG5cdFx0XHRcdGtleSA9ICdfX3Byb3RvXyc7XG5cdFx0XHRvYmplY3Rba2V5XSA9IHJlYWQoKVxuXHRcdH1cblx0XHRyZXR1cm4gb2JqZWN0XG5cdH0gZWxzZSB7XG5cdFx0bGV0IG1hcCA9IG5ldyBNYXAoKVxuXHRcdGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcblx0XHRcdG1hcC5zZXQocmVhZCgpLCByZWFkKCkpXG5cdFx0fVxuXHRcdHJldHVybiBtYXBcblx0fVxufVxuXG52YXIgZnJvbUNoYXJDb2RlID0gU3RyaW5nLmZyb21DaGFyQ29kZVxuZnVuY3Rpb24gbG9uZ1N0cmluZ0luSlMobGVuZ3RoKSB7XG5cdGxldCBzdGFydCA9IHBvc2l0aW9uXG5cdGxldCBieXRlcyA9IG5ldyBBcnJheShsZW5ndGgpXG5cdGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcblx0XHRjb25zdCBieXRlID0gc3JjW3Bvc2l0aW9uKytdO1xuXHRcdGlmICgoYnl0ZSAmIDB4ODApID4gMCkge1xuXHRcdFx0XHRwb3NpdGlvbiA9IHN0YXJ0XG5cdFx0XHRcdHJldHVyblxuXHRcdFx0fVxuXHRcdFx0Ynl0ZXNbaV0gPSBieXRlXG5cdFx0fVxuXHRcdHJldHVybiBmcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLCBieXRlcylcbn1cbmZ1bmN0aW9uIHNob3J0U3RyaW5nSW5KUyhsZW5ndGgpIHtcblx0aWYgKGxlbmd0aCA8IDQpIHtcblx0XHRpZiAobGVuZ3RoIDwgMikge1xuXHRcdFx0aWYgKGxlbmd0aCA9PT0gMClcblx0XHRcdFx0cmV0dXJuICcnXG5cdFx0XHRlbHNlIHtcblx0XHRcdFx0bGV0IGEgPSBzcmNbcG9zaXRpb24rK11cblx0XHRcdFx0aWYgKChhICYgMHg4MCkgPiAxKSB7XG5cdFx0XHRcdFx0cG9zaXRpb24gLT0gMVxuXHRcdFx0XHRcdHJldHVyblxuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiBmcm9tQ2hhckNvZGUoYSlcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0bGV0IGEgPSBzcmNbcG9zaXRpb24rK11cblx0XHRcdGxldCBiID0gc3JjW3Bvc2l0aW9uKytdXG5cdFx0XHRpZiAoKGEgJiAweDgwKSA+IDAgfHwgKGIgJiAweDgwKSA+IDApIHtcblx0XHRcdFx0cG9zaXRpb24gLT0gMlxuXHRcdFx0XHRyZXR1cm5cblx0XHRcdH1cblx0XHRcdGlmIChsZW5ndGggPCAzKVxuXHRcdFx0XHRyZXR1cm4gZnJvbUNoYXJDb2RlKGEsIGIpXG5cdFx0XHRsZXQgYyA9IHNyY1twb3NpdGlvbisrXVxuXHRcdFx0aWYgKChjICYgMHg4MCkgPiAwKSB7XG5cdFx0XHRcdHBvc2l0aW9uIC09IDNcblx0XHRcdFx0cmV0dXJuXG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gZnJvbUNoYXJDb2RlKGEsIGIsIGMpXG5cdFx0fVxuXHR9IGVsc2Uge1xuXHRcdGxldCBhID0gc3JjW3Bvc2l0aW9uKytdXG5cdFx0bGV0IGIgPSBzcmNbcG9zaXRpb24rK11cblx0XHRsZXQgYyA9IHNyY1twb3NpdGlvbisrXVxuXHRcdGxldCBkID0gc3JjW3Bvc2l0aW9uKytdXG5cdFx0aWYgKChhICYgMHg4MCkgPiAwIHx8IChiICYgMHg4MCkgPiAwIHx8IChjICYgMHg4MCkgPiAwIHx8IChkICYgMHg4MCkgPiAwKSB7XG5cdFx0XHRwb3NpdGlvbiAtPSA0XG5cdFx0XHRyZXR1cm5cblx0XHR9XG5cdFx0aWYgKGxlbmd0aCA8IDYpIHtcblx0XHRcdGlmIChsZW5ndGggPT09IDQpXG5cdFx0XHRcdHJldHVybiBmcm9tQ2hhckNvZGUoYSwgYiwgYywgZClcblx0XHRcdGVsc2Uge1xuXHRcdFx0XHRsZXQgZSA9IHNyY1twb3NpdGlvbisrXVxuXHRcdFx0XHRpZiAoKGUgJiAweDgwKSA+IDApIHtcblx0XHRcdFx0XHRwb3NpdGlvbiAtPSA1XG5cdFx0XHRcdFx0cmV0dXJuXG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIGZyb21DaGFyQ29kZShhLCBiLCBjLCBkLCBlKVxuXHRcdFx0fVxuXHRcdH0gZWxzZSBpZiAobGVuZ3RoIDwgOCkge1xuXHRcdFx0bGV0IGUgPSBzcmNbcG9zaXRpb24rK11cblx0XHRcdGxldCBmID0gc3JjW3Bvc2l0aW9uKytdXG5cdFx0XHRpZiAoKGUgJiAweDgwKSA+IDAgfHwgKGYgJiAweDgwKSA+IDApIHtcblx0XHRcdFx0cG9zaXRpb24gLT0gNlxuXHRcdFx0XHRyZXR1cm5cblx0XHRcdH1cblx0XHRcdGlmIChsZW5ndGggPCA3KVxuXHRcdFx0XHRyZXR1cm4gZnJvbUNoYXJDb2RlKGEsIGIsIGMsIGQsIGUsIGYpXG5cdFx0XHRsZXQgZyA9IHNyY1twb3NpdGlvbisrXVxuXHRcdFx0aWYgKChnICYgMHg4MCkgPiAwKSB7XG5cdFx0XHRcdHBvc2l0aW9uIC09IDdcblx0XHRcdFx0cmV0dXJuXG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gZnJvbUNoYXJDb2RlKGEsIGIsIGMsIGQsIGUsIGYsIGcpXG5cdFx0fSBlbHNlIHtcblx0XHRcdGxldCBlID0gc3JjW3Bvc2l0aW9uKytdXG5cdFx0XHRsZXQgZiA9IHNyY1twb3NpdGlvbisrXVxuXHRcdFx0bGV0IGcgPSBzcmNbcG9zaXRpb24rK11cblx0XHRcdGxldCBoID0gc3JjW3Bvc2l0aW9uKytdXG5cdFx0XHRpZiAoKGUgJiAweDgwKSA+IDAgfHwgKGYgJiAweDgwKSA+IDAgfHwgKGcgJiAweDgwKSA+IDAgfHwgKGggJiAweDgwKSA+IDApIHtcblx0XHRcdFx0cG9zaXRpb24gLT0gOFxuXHRcdFx0XHRyZXR1cm5cblx0XHRcdH1cblx0XHRcdGlmIChsZW5ndGggPCAxMCkge1xuXHRcdFx0XHRpZiAobGVuZ3RoID09PSA4KVxuXHRcdFx0XHRcdHJldHVybiBmcm9tQ2hhckNvZGUoYSwgYiwgYywgZCwgZSwgZiwgZywgaClcblx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0bGV0IGkgPSBzcmNbcG9zaXRpb24rK11cblx0XHRcdFx0XHRpZiAoKGkgJiAweDgwKSA+IDApIHtcblx0XHRcdFx0XHRcdHBvc2l0aW9uIC09IDlcblx0XHRcdFx0XHRcdHJldHVyblxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZXR1cm4gZnJvbUNoYXJDb2RlKGEsIGIsIGMsIGQsIGUsIGYsIGcsIGgsIGkpXG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZiAobGVuZ3RoIDwgMTIpIHtcblx0XHRcdFx0bGV0IGkgPSBzcmNbcG9zaXRpb24rK11cblx0XHRcdFx0bGV0IGogPSBzcmNbcG9zaXRpb24rK11cblx0XHRcdFx0aWYgKChpICYgMHg4MCkgPiAwIHx8IChqICYgMHg4MCkgPiAwKSB7XG5cdFx0XHRcdFx0cG9zaXRpb24gLT0gMTBcblx0XHRcdFx0XHRyZXR1cm5cblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAobGVuZ3RoIDwgMTEpXG5cdFx0XHRcdFx0cmV0dXJuIGZyb21DaGFyQ29kZShhLCBiLCBjLCBkLCBlLCBmLCBnLCBoLCBpLCBqKVxuXHRcdFx0XHRsZXQgayA9IHNyY1twb3NpdGlvbisrXVxuXHRcdFx0XHRpZiAoKGsgJiAweDgwKSA+IDApIHtcblx0XHRcdFx0XHRwb3NpdGlvbiAtPSAxMVxuXHRcdFx0XHRcdHJldHVyblxuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiBmcm9tQ2hhckNvZGUoYSwgYiwgYywgZCwgZSwgZiwgZywgaCwgaSwgaiwgaylcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGxldCBpID0gc3JjW3Bvc2l0aW9uKytdXG5cdFx0XHRcdGxldCBqID0gc3JjW3Bvc2l0aW9uKytdXG5cdFx0XHRcdGxldCBrID0gc3JjW3Bvc2l0aW9uKytdXG5cdFx0XHRcdGxldCBsID0gc3JjW3Bvc2l0aW9uKytdXG5cdFx0XHRcdGlmICgoaSAmIDB4ODApID4gMCB8fCAoaiAmIDB4ODApID4gMCB8fCAoayAmIDB4ODApID4gMCB8fCAobCAmIDB4ODApID4gMCkge1xuXHRcdFx0XHRcdHBvc2l0aW9uIC09IDEyXG5cdFx0XHRcdFx0cmV0dXJuXG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKGxlbmd0aCA8IDE0KSB7XG5cdFx0XHRcdFx0aWYgKGxlbmd0aCA9PT0gMTIpXG5cdFx0XHRcdFx0XHRyZXR1cm4gZnJvbUNoYXJDb2RlKGEsIGIsIGMsIGQsIGUsIGYsIGcsIGgsIGksIGosIGssIGwpXG5cdFx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0XHRsZXQgbSA9IHNyY1twb3NpdGlvbisrXVxuXHRcdFx0XHRcdFx0aWYgKChtICYgMHg4MCkgPiAwKSB7XG5cdFx0XHRcdFx0XHRcdHBvc2l0aW9uIC09IDEzXG5cdFx0XHRcdFx0XHRcdHJldHVyblxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0cmV0dXJuIGZyb21DaGFyQ29kZShhLCBiLCBjLCBkLCBlLCBmLCBnLCBoLCBpLCBqLCBrLCBsLCBtKVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRsZXQgbSA9IHNyY1twb3NpdGlvbisrXVxuXHRcdFx0XHRcdGxldCBuID0gc3JjW3Bvc2l0aW9uKytdXG5cdFx0XHRcdFx0aWYgKChtICYgMHg4MCkgPiAwIHx8IChuICYgMHg4MCkgPiAwKSB7XG5cdFx0XHRcdFx0XHRwb3NpdGlvbiAtPSAxNFxuXHRcdFx0XHRcdFx0cmV0dXJuXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmIChsZW5ndGggPCAxNSlcblx0XHRcdFx0XHRcdHJldHVybiBmcm9tQ2hhckNvZGUoYSwgYiwgYywgZCwgZSwgZiwgZywgaCwgaSwgaiwgaywgbCwgbSwgbilcblx0XHRcdFx0XHRsZXQgbyA9IHNyY1twb3NpdGlvbisrXVxuXHRcdFx0XHRcdGlmICgobyAmIDB4ODApID4gMCkge1xuXHRcdFx0XHRcdFx0cG9zaXRpb24gLT0gMTVcblx0XHRcdFx0XHRcdHJldHVyblxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZXR1cm4gZnJvbUNoYXJDb2RlKGEsIGIsIGMsIGQsIGUsIGYsIGcsIGgsIGksIGosIGssIGwsIG0sIG4sIG8pXG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cbn1cblxuZnVuY3Rpb24gcmVhZE9ubHlKU1N0cmluZygpIHtcblx0bGV0IHRva2VuID0gc3JjW3Bvc2l0aW9uKytdXG5cdGxldCBsZW5ndGhcblx0aWYgKHRva2VuIDwgMHhjMCkge1xuXHRcdC8vIGZpeHN0clxuXHRcdGxlbmd0aCA9IHRva2VuIC0gMHhhMFxuXHR9IGVsc2Uge1xuXHRcdHN3aXRjaCh0b2tlbikge1xuXHRcdFx0Y2FzZSAweGQ5OlxuXHRcdFx0Ly8gc3RyIDhcblx0XHRcdFx0bGVuZ3RoID0gc3JjW3Bvc2l0aW9uKytdXG5cdFx0XHRcdGJyZWFrXG5cdFx0XHRjYXNlIDB4ZGE6XG5cdFx0XHQvLyBzdHIgMTZcblx0XHRcdFx0bGVuZ3RoID0gZGF0YVZpZXcuZ2V0VWludDE2KHBvc2l0aW9uKVxuXHRcdFx0XHRwb3NpdGlvbiArPSAyXG5cdFx0XHRcdGJyZWFrXG5cdFx0XHRjYXNlIDB4ZGI6XG5cdFx0XHQvLyBzdHIgMzJcblx0XHRcdFx0bGVuZ3RoID0gZGF0YVZpZXcuZ2V0VWludDMyKHBvc2l0aW9uKVxuXHRcdFx0XHRwb3NpdGlvbiArPSA0XG5cdFx0XHRcdGJyZWFrXG5cdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ0V4cGVjdGVkIHN0cmluZycpXG5cdFx0fVxuXHR9XG5cdHJldHVybiByZWFkU3RyaW5nSlMobGVuZ3RoKVxufVxuXG5cbmZ1bmN0aW9uIHJlYWRCaW4obGVuZ3RoKSB7XG5cdHJldHVybiBjdXJyZW50VW5wYWNrci5jb3B5QnVmZmVycyA/XG5cdFx0Ly8gc3BlY2lmaWNhbGx5IHVzZSB0aGUgY29weWluZyBzbGljZSAobm90IHRoZSBub2RlIG9uZSlcblx0XHRVaW50OEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHNyYywgcG9zaXRpb24sIHBvc2l0aW9uICs9IGxlbmd0aCkgOlxuXHRcdHNyYy5zdWJhcnJheShwb3NpdGlvbiwgcG9zaXRpb24gKz0gbGVuZ3RoKVxufVxuZnVuY3Rpb24gcmVhZEV4dChsZW5ndGgpIHtcblx0bGV0IHR5cGUgPSBzcmNbcG9zaXRpb24rK11cblx0aWYgKGN1cnJlbnRFeHRlbnNpb25zW3R5cGVdKSB7XG5cdFx0bGV0IGVuZFxuXHRcdHJldHVybiBjdXJyZW50RXh0ZW5zaW9uc1t0eXBlXShzcmMuc3ViYXJyYXkocG9zaXRpb24sIGVuZCA9IChwb3NpdGlvbiArPSBsZW5ndGgpKSwgKHJlYWRQb3NpdGlvbikgPT4ge1xuXHRcdFx0cG9zaXRpb24gPSByZWFkUG9zaXRpb247XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRyZXR1cm4gcmVhZCgpO1xuXHRcdFx0fSBmaW5hbGx5IHtcblx0XHRcdFx0cG9zaXRpb24gPSBlbmQ7XG5cdFx0XHR9XG5cdFx0fSlcblx0fVxuXHRlbHNlXG5cdFx0dGhyb3cgbmV3IEVycm9yKCdVbmtub3duIGV4dGVuc2lvbiB0eXBlICcgKyB0eXBlKVxufVxuXG52YXIga2V5Q2FjaGUgPSBuZXcgQXJyYXkoNDA5NilcbmZ1bmN0aW9uIHJlYWRLZXkoKSB7XG5cdGxldCBsZW5ndGggPSBzcmNbcG9zaXRpb24rK11cblx0aWYgKGxlbmd0aCA+PSAweGEwICYmIGxlbmd0aCA8IDB4YzApIHtcblx0XHQvLyBmaXhzdHIsIHBvdGVudGlhbGx5IHVzZSBrZXkgY2FjaGVcblx0XHRsZW5ndGggPSBsZW5ndGggLSAweGEwXG5cdFx0aWYgKHNyY1N0cmluZ0VuZCA+PSBwb3NpdGlvbikgLy8gaWYgaXQgaGFzIGJlZW4gZXh0cmFjdGVkLCBtdXN0IHVzZSBpdCAoYW5kIGZhc3RlciBhbnl3YXkpXG5cdFx0XHRyZXR1cm4gc3JjU3RyaW5nLnNsaWNlKHBvc2l0aW9uIC0gc3JjU3RyaW5nU3RhcnQsIChwb3NpdGlvbiArPSBsZW5ndGgpIC0gc3JjU3RyaW5nU3RhcnQpXG5cdFx0ZWxzZSBpZiAoIShzcmNTdHJpbmdFbmQgPT0gMCAmJiBzcmNFbmQgPCAxODApKVxuXHRcdFx0cmV0dXJuIHJlYWRGaXhlZFN0cmluZyhsZW5ndGgpXG5cdH0gZWxzZSB7IC8vIG5vdCBjYWNoZWFibGUsIGdvIGJhY2sgYW5kIGRvIGEgc3RhbmRhcmQgcmVhZFxuXHRcdHBvc2l0aW9uLS1cblx0XHRyZXR1cm4gYXNTYWZlU3RyaW5nKHJlYWQoKSlcblx0fVxuXHRsZXQga2V5ID0gKChsZW5ndGggPDwgNSkgXiAobGVuZ3RoID4gMSA/IGRhdGFWaWV3LmdldFVpbnQxNihwb3NpdGlvbikgOiBsZW5ndGggPiAwID8gc3JjW3Bvc2l0aW9uXSA6IDApKSAmIDB4ZmZmXG5cdGxldCBlbnRyeSA9IGtleUNhY2hlW2tleV1cblx0bGV0IGNoZWNrUG9zaXRpb24gPSBwb3NpdGlvblxuXHRsZXQgZW5kID0gcG9zaXRpb24gKyBsZW5ndGggLSAzXG5cdGxldCBjaHVua1xuXHRsZXQgaSA9IDBcblx0aWYgKGVudHJ5ICYmIGVudHJ5LmJ5dGVzID09IGxlbmd0aCkge1xuXHRcdHdoaWxlIChjaGVja1Bvc2l0aW9uIDwgZW5kKSB7XG5cdFx0XHRjaHVuayA9IGRhdGFWaWV3LmdldFVpbnQzMihjaGVja1Bvc2l0aW9uKVxuXHRcdFx0aWYgKGNodW5rICE9IGVudHJ5W2krK10pIHtcblx0XHRcdFx0Y2hlY2tQb3NpdGlvbiA9IDB4NzAwMDAwMDBcblx0XHRcdFx0YnJlYWtcblx0XHRcdH1cblx0XHRcdGNoZWNrUG9zaXRpb24gKz0gNFxuXHRcdH1cblx0XHRlbmQgKz0gM1xuXHRcdHdoaWxlIChjaGVja1Bvc2l0aW9uIDwgZW5kKSB7XG5cdFx0XHRjaHVuayA9IHNyY1tjaGVja1Bvc2l0aW9uKytdXG5cdFx0XHRpZiAoY2h1bmsgIT0gZW50cnlbaSsrXSkge1xuXHRcdFx0XHRjaGVja1Bvc2l0aW9uID0gMHg3MDAwMDAwMFxuXHRcdFx0XHRicmVha1xuXHRcdFx0fVxuXHRcdH1cblx0XHRpZiAoY2hlY2tQb3NpdGlvbiA9PT0gZW5kKSB7XG5cdFx0XHRwb3NpdGlvbiA9IGNoZWNrUG9zaXRpb25cblx0XHRcdHJldHVybiBlbnRyeS5zdHJpbmdcblx0XHR9XG5cdFx0ZW5kIC09IDNcblx0XHRjaGVja1Bvc2l0aW9uID0gcG9zaXRpb25cblx0fVxuXHRlbnRyeSA9IFtdXG5cdGtleUNhY2hlW2tleV0gPSBlbnRyeVxuXHRlbnRyeS5ieXRlcyA9IGxlbmd0aFxuXHR3aGlsZSAoY2hlY2tQb3NpdGlvbiA8IGVuZCkge1xuXHRcdGNodW5rID0gZGF0YVZpZXcuZ2V0VWludDMyKGNoZWNrUG9zaXRpb24pXG5cdFx0ZW50cnkucHVzaChjaHVuaylcblx0XHRjaGVja1Bvc2l0aW9uICs9IDRcblx0fVxuXHRlbmQgKz0gM1xuXHR3aGlsZSAoY2hlY2tQb3NpdGlvbiA8IGVuZCkge1xuXHRcdGNodW5rID0gc3JjW2NoZWNrUG9zaXRpb24rK11cblx0XHRlbnRyeS5wdXNoKGNodW5rKVxuXHR9XG5cdC8vIGZvciBzbWFsbCBibG9ja3MsIGF2b2lkaW5nIHRoZSBvdmVyaGVhZCBvZiB0aGUgZXh0cmFjdCBjYWxsIGlzIGhlbHBmdWxcblx0bGV0IHN0cmluZyA9IGxlbmd0aCA8IDE2ID8gc2hvcnRTdHJpbmdJbkpTKGxlbmd0aCkgOiBsb25nU3RyaW5nSW5KUyhsZW5ndGgpXG5cdGlmIChzdHJpbmcgIT0gbnVsbClcblx0XHRyZXR1cm4gZW50cnkuc3RyaW5nID0gc3RyaW5nXG5cdHJldHVybiBlbnRyeS5zdHJpbmcgPSByZWFkRml4ZWRTdHJpbmcobGVuZ3RoKVxufVxuXG5mdW5jdGlvbiBhc1NhZmVTdHJpbmcocHJvcGVydHkpIHtcblx0Ly8gcHJvdGVjdCBhZ2FpbnN0IGV4cGVuc2l2ZSAoRG9TKSBzdHJpbmcgY29udmVyc2lvbnNcblx0aWYgKHR5cGVvZiBwcm9wZXJ0eSA9PT0gJ3N0cmluZycpIHJldHVybiBwcm9wZXJ0eTtcblx0aWYgKHR5cGVvZiBwcm9wZXJ0eSA9PT0gJ251bWJlcicgfHwgdHlwZW9mIHByb3BlcnR5ID09PSAnYm9vbGVhbicgfHwgdHlwZW9mIHByb3BlcnR5ID09PSAnYmlnaW50JykgcmV0dXJuIHByb3BlcnR5LnRvU3RyaW5nKCk7XG5cdGlmIChwcm9wZXJ0eSA9PSBudWxsKSByZXR1cm4gcHJvcGVydHkgKyAnJztcblx0dGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHByb3BlcnR5IHR5cGUgZm9yIHJlY29yZCcsIHR5cGVvZiBwcm9wZXJ0eSk7XG59XG4vLyB0aGUgcmVnaXN0cmF0aW9uIG9mIHRoZSByZWNvcmQgZGVmaW5pdGlvbiBleHRlbnNpb24gKGFzIFwiclwiKVxuY29uc3QgcmVjb3JkRGVmaW5pdGlvbiA9IChpZCwgaGlnaEJ5dGUpID0+IHtcblx0bGV0IHN0cnVjdHVyZSA9IHJlYWQoKS5tYXAoYXNTYWZlU3RyaW5nKSAvLyBlbnN1cmUgdGhhdCBhbGwga2V5cyBhcmUgc3RyaW5ncyBhbmRcblx0Ly8gdGhhdCB0aGUgYXJyYXkgaXMgbXV0YWJsZVxuXHRsZXQgZmlyc3RCeXRlID0gaWRcblx0aWYgKGhpZ2hCeXRlICE9PSB1bmRlZmluZWQpIHtcblx0XHRpZCA9IGlkIDwgMzIgPyAtKChoaWdoQnl0ZSA8PCA1KSArIGlkKSA6ICgoaGlnaEJ5dGUgPDwgNSkgKyBpZClcblx0XHRzdHJ1Y3R1cmUuaGlnaEJ5dGUgPSBoaWdoQnl0ZVxuXHR9XG5cdGxldCBleGlzdGluZ1N0cnVjdHVyZSA9IGN1cnJlbnRTdHJ1Y3R1cmVzW2lkXVxuXHQvLyBJZiBpdCBpcyBhIHNoYXJlZCBzdHJ1Y3R1cmUsIHdlIG5lZWQgdG8gcmVzdG9yZSBhbnkgY2hhbmdlcyBhZnRlciByZWFkaW5nLlxuXHQvLyBBbHNvIGluIHNlcXVlbnRpYWwgbW9kZSwgd2UgbWF5IGdldCBpbmNvbXBsZXRlIHJlYWRzIGFuZCB0aHVzIGVycm9ycywgYW5kIHdlIG5lZWQgdG8gcmVzdG9yZVxuXHQvLyB0byB0aGUgc3RhdGUgcHJpb3IgdG8gYW4gaW5jb21wbGV0ZSByZWFkIGluIG9yZGVyIHRvIHByb3Blcmx5IHJlc3VtZS5cblx0aWYgKGV4aXN0aW5nU3RydWN0dXJlICYmIChleGlzdGluZ1N0cnVjdHVyZS5pc1NoYXJlZCB8fCBzZXF1ZW50aWFsTW9kZSkpIHtcblx0XHQoY3VycmVudFN0cnVjdHVyZXMucmVzdG9yZVN0cnVjdHVyZXMgfHwgKGN1cnJlbnRTdHJ1Y3R1cmVzLnJlc3RvcmVTdHJ1Y3R1cmVzID0gW10pKVtpZF0gPSBleGlzdGluZ1N0cnVjdHVyZVxuXHR9XG5cdGN1cnJlbnRTdHJ1Y3R1cmVzW2lkXSA9IHN0cnVjdHVyZVxuXHRzdHJ1Y3R1cmUucmVhZCA9IGNyZWF0ZVN0cnVjdHVyZVJlYWRlcihzdHJ1Y3R1cmUsIGZpcnN0Qnl0ZSlcblx0cmV0dXJuIHN0cnVjdHVyZS5yZWFkKClcbn1cbmN1cnJlbnRFeHRlbnNpb25zWzBdID0gKCkgPT4ge30gLy8gbm90ZXBhY2sgZGVmaW5lcyBleHRlbnNpb24gMCB0byBtZWFuIHVuZGVmaW5lZCwgc28gdXNlIHRoYXQgYXMgdGhlIGRlZmF1bHQgaGVyZVxuY3VycmVudEV4dGVuc2lvbnNbMF0ubm9CdWZmZXIgPSB0cnVlXG5cbmN1cnJlbnRFeHRlbnNpb25zWzB4NDJdID0gKGRhdGEpID0+IHtcblx0Ly8gZGVjb2RlIGJpZ2ludFxuXHRsZXQgbGVuZ3RoID0gZGF0YS5sZW5ndGg7XG5cdGxldCB2YWx1ZSA9IEJpZ0ludChkYXRhWzBdICYgMHg4MCA/IGRhdGFbMF0gLSAweDEwMCA6IGRhdGFbMF0pO1xuXHRmb3IgKGxldCBpID0gMTsgaSA8IGxlbmd0aDsgaSsrKSB7XG5cdFx0dmFsdWUgPDw9IEJpZ0ludCg4KTtcblx0XHR2YWx1ZSArPSBCaWdJbnQoZGF0YVtpXSk7XG5cdH1cblx0cmV0dXJuIHZhbHVlO1xufVxuXG5sZXQgZXJyb3JzID0geyBFcnJvciwgVHlwZUVycm9yLCBSZWZlcmVuY2VFcnJvciB9O1xuY3VycmVudEV4dGVuc2lvbnNbMHg2NV0gPSAoKSA9PiB7XG5cdGxldCBkYXRhID0gcmVhZCgpXG5cdHJldHVybiAoZXJyb3JzW2RhdGFbMF1dIHx8IEVycm9yKShkYXRhWzFdLCB7IGNhdXNlOiBkYXRhWzJdIH0pXG59XG5cbmN1cnJlbnRFeHRlbnNpb25zWzB4NjldID0gKGRhdGEpID0+IHtcblx0Ly8gaWQgZXh0ZW5zaW9uIChmb3Igc3RydWN0dXJlZCBjbG9uZXMpXG5cdGlmIChjdXJyZW50VW5wYWNrci5zdHJ1Y3R1cmVkQ2xvbmUgPT09IGZhbHNlKSB0aHJvdyBuZXcgRXJyb3IoJ1N0cnVjdHVyZWQgY2xvbmUgZXh0ZW5zaW9uIGlzIGRpc2FibGVkJylcblx0bGV0IGlkID0gZGF0YVZpZXcuZ2V0VWludDMyKHBvc2l0aW9uIC0gNClcblx0aWYgKCFyZWZlcmVuY2VNYXApXG5cdFx0cmVmZXJlbmNlTWFwID0gbmV3IE1hcCgpXG5cdGxldCB0b2tlbiA9IHNyY1twb3NpdGlvbl1cblx0bGV0IHRhcmdldFxuXHQvLyBUT0RPOiBoYW5kbGUgTWFwcywgU2V0cywgYW5kIG90aGVyIHR5cGVzIHRoYXQgY2FuIGN5Y2xlOyB0aGlzIGlzIGNvbXBsaWNhdGVkLCBiZWNhdXNlIHlvdSBwb3RlbnRpYWxseSBuZWVkIHRvIHJlYWRcblx0Ly8gYWhlYWQgcGFzdCByZWZlcmVuY2VzIHRvIHJlY29yZCBzdHJ1Y3R1cmUgZGVmaW5pdGlvbnNcblx0aWYgKHRva2VuID49IDB4OTAgJiYgdG9rZW4gPCAweGEwIHx8IHRva2VuID09IDB4ZGMgfHwgdG9rZW4gPT0gMHhkZClcblx0XHR0YXJnZXQgPSBbXVxuXHRlbHNlXG5cdFx0dGFyZ2V0ID0ge31cblxuXHRsZXQgcmVmRW50cnkgPSB7IHRhcmdldCB9IC8vIGEgcGxhY2Vob2xkZXIgb2JqZWN0XG5cdHJlZmVyZW5jZU1hcC5zZXQoaWQsIHJlZkVudHJ5KVxuXHRsZXQgdGFyZ2V0UHJvcGVydGllcyA9IHJlYWQoKSAvLyByZWFkIHRoZSBuZXh0IHZhbHVlIGFzIHRoZSB0YXJnZXQgb2JqZWN0IHRvIGlkXG5cdGlmIChyZWZFbnRyeS51c2VkKSAvLyB0aGVyZSBpcyBhIGN5Y2xlLCBzbyB3ZSBoYXZlIHRvIGFzc2lnbiBwcm9wZXJ0aWVzIHRvIG9yaWdpbmFsIHRhcmdldFxuXHRcdHJldHVybiBPYmplY3QuYXNzaWduKHRhcmdldCwgdGFyZ2V0UHJvcGVydGllcylcblx0cmVmRW50cnkudGFyZ2V0ID0gdGFyZ2V0UHJvcGVydGllcyAvLyB0aGUgcGxhY2Vob2xkZXIgd2Fzbid0IHVzZWQsIHJlcGxhY2Ugd2l0aCB0aGUgZGVzZXJpYWxpemVkIG9uZVxuXHRyZXR1cm4gdGFyZ2V0UHJvcGVydGllcyAvLyBubyBjeWNsZSwgY2FuIGp1c3QgdXNlIHRoZSByZXR1cm5lZCByZWFkIG9iamVjdFxufVxuXG5jdXJyZW50RXh0ZW5zaW9uc1sweDcwXSA9IChkYXRhKSA9PiB7XG5cdC8vIHBvaW50ZXIgZXh0ZW5zaW9uIChmb3Igc3RydWN0dXJlZCBjbG9uZXMpXG5cdGlmIChjdXJyZW50VW5wYWNrci5zdHJ1Y3R1cmVkQ2xvbmUgPT09IGZhbHNlKSB0aHJvdyBuZXcgRXJyb3IoJ1N0cnVjdHVyZWQgY2xvbmUgZXh0ZW5zaW9uIGlzIGRpc2FibGVkJylcblx0bGV0IGlkID0gZGF0YVZpZXcuZ2V0VWludDMyKHBvc2l0aW9uIC0gNClcblx0bGV0IHJlZkVudHJ5ID0gcmVmZXJlbmNlTWFwLmdldChpZClcblx0cmVmRW50cnkudXNlZCA9IHRydWVcblx0cmV0dXJuIHJlZkVudHJ5LnRhcmdldFxufVxuXG5jdXJyZW50RXh0ZW5zaW9uc1sweDczXSA9ICgpID0+IG5ldyBTZXQocmVhZCgpKVxuXG5leHBvcnQgY29uc3QgdHlwZWRBcnJheXMgPSBbJ0ludDgnLCdVaW50OCcsJ1VpbnQ4Q2xhbXBlZCcsJ0ludDE2JywnVWludDE2JywnSW50MzInLCdVaW50MzInLCdGbG9hdDMyJywnRmxvYXQ2NCcsJ0JpZ0ludDY0JywnQmlnVWludDY0J10ubWFwKHR5cGUgPT4gdHlwZSArICdBcnJheScpXG5cbmxldCBnbGJsID0gdHlwZW9mIGdsb2JhbFRoaXMgPT09ICdvYmplY3QnID8gZ2xvYmFsVGhpcyA6IHdpbmRvdztcbmN1cnJlbnRFeHRlbnNpb25zWzB4NzRdID0gKGRhdGEpID0+IHtcblx0bGV0IHR5cGVDb2RlID0gZGF0YVswXVxuXHRsZXQgdHlwZWRBcnJheU5hbWUgPSB0eXBlZEFycmF5c1t0eXBlQ29kZV1cblx0aWYgKCF0eXBlZEFycmF5TmFtZSkge1xuXHRcdGlmICh0eXBlQ29kZSA9PT0gMTYpIHtcblx0XHRcdGxldCBhYiA9IG5ldyBBcnJheUJ1ZmZlcihkYXRhLmxlbmd0aCAtIDEpXG5cdFx0XHRsZXQgdTggPSBuZXcgVWludDhBcnJheShhYilcblx0XHRcdHU4LnNldChkYXRhLnN1YmFycmF5KDEpKVxuXHRcdFx0cmV0dXJuIGFiO1xuXHRcdH1cblx0XHR0aHJvdyBuZXcgRXJyb3IoJ0NvdWxkIG5vdCBmaW5kIHR5cGVkIGFycmF5IGZvciBjb2RlICcgKyB0eXBlQ29kZSlcblx0fVxuXHQvLyB3ZSBoYXZlIHRvIGFsd2F5cyBzbGljZS9jb3B5IGhlcmUgdG8gZ2V0IGEgbmV3IEFycmF5QnVmZmVyIHRoYXQgaXMgd29yZC9ieXRlIGFsaWduZWRcblx0cmV0dXJuIG5ldyBnbGJsW3R5cGVkQXJyYXlOYW1lXShVaW50OEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGRhdGEsIDEpLmJ1ZmZlcilcbn1cbmN1cnJlbnRFeHRlbnNpb25zWzB4NzhdID0gKCkgPT4ge1xuXHRsZXQgZGF0YSA9IHJlYWQoKVxuXHRyZXR1cm4gbmV3IFJlZ0V4cChkYXRhWzBdLCBkYXRhWzFdKVxufVxuY29uc3QgVEVNUF9CVU5ETEUgPSBbXVxuY3VycmVudEV4dGVuc2lvbnNbMHg2Ml0gPSAoZGF0YSkgPT4ge1xuXHRsZXQgZGF0YVNpemUgPSAoZGF0YVswXSA8PCAyNCkgKyAoZGF0YVsxXSA8PCAxNikgKyAoZGF0YVsyXSA8PCA4KSArIGRhdGFbM11cblx0bGV0IGRhdGFQb3NpdGlvbiA9IHBvc2l0aW9uXG5cdHBvc2l0aW9uICs9IGRhdGFTaXplIC0gZGF0YS5sZW5ndGhcblx0YnVuZGxlZFN0cmluZ3MgPSBURU1QX0JVTkRMRVxuXHRidW5kbGVkU3RyaW5ncyA9IFtyZWFkT25seUpTU3RyaW5nKCksIHJlYWRPbmx5SlNTdHJpbmcoKV1cblx0YnVuZGxlZFN0cmluZ3MucG9zaXRpb24wID0gMFxuXHRidW5kbGVkU3RyaW5ncy5wb3NpdGlvbjEgPSAwXG5cdGJ1bmRsZWRTdHJpbmdzLnBvc3RCdW5kbGVQb3NpdGlvbiA9IHBvc2l0aW9uXG5cdHBvc2l0aW9uID0gZGF0YVBvc2l0aW9uXG5cdHJldHVybiByZWFkKClcbn1cblxuY3VycmVudEV4dGVuc2lvbnNbMHhmZl0gPSAoZGF0YSkgPT4ge1xuXHQvLyAzMi1iaXQgZGF0ZSBleHRlbnNpb25cblx0aWYgKGRhdGEubGVuZ3RoID09IDQpXG5cdFx0cmV0dXJuIG5ldyBEYXRlKChkYXRhWzBdICogMHgxMDAwMDAwICsgKGRhdGFbMV0gPDwgMTYpICsgKGRhdGFbMl0gPDwgOCkgKyBkYXRhWzNdKSAqIDEwMDApXG5cdGVsc2UgaWYgKGRhdGEubGVuZ3RoID09IDgpXG5cdFx0cmV0dXJuIG5ldyBEYXRlKFxuXHRcdFx0KChkYXRhWzBdIDw8IDIyKSArIChkYXRhWzFdIDw8IDE0KSArIChkYXRhWzJdIDw8IDYpICsgKGRhdGFbM10gPj4gMikpIC8gMTAwMDAwMCArXG5cdFx0XHQoKGRhdGFbM10gJiAweDMpICogMHgxMDAwMDAwMDAgKyBkYXRhWzRdICogMHgxMDAwMDAwICsgKGRhdGFbNV0gPDwgMTYpICsgKGRhdGFbNl0gPDwgOCkgKyBkYXRhWzddKSAqIDEwMDApXG5cdGVsc2UgaWYgKGRhdGEubGVuZ3RoID09IDEyKS8vIFRPRE86IEltcGxlbWVudCBzdXBwb3J0IGZvciBuZWdhdGl2ZVxuXHRcdHJldHVybiBuZXcgRGF0ZShcblx0XHRcdCgoZGF0YVswXSA8PCAyNCkgKyAoZGF0YVsxXSA8PCAxNikgKyAoZGF0YVsyXSA8PCA4KSArIGRhdGFbM10pIC8gMTAwMDAwMCArXG5cdFx0XHQoKChkYXRhWzRdICYgMHg4MCkgPyAtMHgxMDAwMDAwMDAwMDAwIDogMCkgKyBkYXRhWzZdICogMHgxMDAwMDAwMDAwMCArIGRhdGFbN10gKiAweDEwMDAwMDAwMCArIGRhdGFbOF0gKiAweDEwMDAwMDAgKyAoZGF0YVs5XSA8PCAxNikgKyAoZGF0YVsxMF0gPDwgOCkgKyBkYXRhWzExXSkgKiAxMDAwKVxuXHRlbHNlXG5cdFx0cmV0dXJuIG5ldyBEYXRlKCdpbnZhbGlkJylcbn0gLy8gbm90ZXBhY2sgZGVmaW5lcyBleHRlbnNpb24gMCB0byBtZWFuIHVuZGVmaW5lZCwgc28gdXNlIHRoYXQgYXMgdGhlIGRlZmF1bHQgaGVyZVxuLy8gcmVnaXN0cmF0aW9uIG9mIGJ1bGsgcmVjb3JkIGRlZmluaXRpb24/XG4vLyBjdXJyZW50RXh0ZW5zaW9uc1sweDUyXSA9ICgpID0+XG5cbmZ1bmN0aW9uIHNhdmVTdGF0ZShjYWxsYmFjaykge1xuXHRpZiAob25TYXZlU3RhdGUpXG5cdFx0b25TYXZlU3RhdGUoKTtcblx0bGV0IHNhdmVkU3JjRW5kID0gc3JjRW5kXG5cdGxldCBzYXZlZFBvc2l0aW9uID0gcG9zaXRpb25cblx0bGV0IHNhdmVkU3RyaW5nUG9zaXRpb24gPSBzdHJpbmdQb3NpdGlvblxuXHRsZXQgc2F2ZWRTcmNTdHJpbmdTdGFydCA9IHNyY1N0cmluZ1N0YXJ0XG5cdGxldCBzYXZlZFNyY1N0cmluZ0VuZCA9IHNyY1N0cmluZ0VuZFxuXHRsZXQgc2F2ZWRTcmNTdHJpbmcgPSBzcmNTdHJpbmdcblx0bGV0IHNhdmVkU3RyaW5ncyA9IHN0cmluZ3Ncblx0bGV0IHNhdmVkUmVmZXJlbmNlTWFwID0gcmVmZXJlbmNlTWFwXG5cdGxldCBzYXZlZEJ1bmRsZWRTdHJpbmdzID0gYnVuZGxlZFN0cmluZ3NcblxuXHQvLyBUT0RPOiBXZSBtYXkgbmVlZCB0byByZXZpc2l0IHRoaXMgaWYgd2UgZG8gbW9yZSBleHRlcm5hbCBjYWxscyB0byB1c2VyIGNvZGUgKHNpbmNlIGl0IGNvdWxkIGJlIHNsb3cpXG5cdGxldCBzYXZlZFNyYyA9IG5ldyBVaW50OEFycmF5KHNyYy5zbGljZSgwLCBzcmNFbmQpKSAvLyB3ZSBjb3B5IHRoZSBkYXRhIGluIGNhc2UgaXQgY2hhbmdlcyB3aGlsZSBleHRlcm5hbCBkYXRhIGlzIHByb2Nlc3NlZFxuXHRsZXQgc2F2ZWRTdHJ1Y3R1cmVzID0gY3VycmVudFN0cnVjdHVyZXNcblx0bGV0IHNhdmVkU3RydWN0dXJlc0NvbnRlbnRzID0gY3VycmVudFN0cnVjdHVyZXMuc2xpY2UoMCwgY3VycmVudFN0cnVjdHVyZXMubGVuZ3RoKVxuXHRsZXQgc2F2ZWRQYWNrciA9IGN1cnJlbnRVbnBhY2tyXG5cdGxldCBzYXZlZFNlcXVlbnRpYWxNb2RlID0gc2VxdWVudGlhbE1vZGVcblx0bGV0IHZhbHVlID0gY2FsbGJhY2soKVxuXHRzcmNFbmQgPSBzYXZlZFNyY0VuZFxuXHRwb3NpdGlvbiA9IHNhdmVkUG9zaXRpb25cblx0c3RyaW5nUG9zaXRpb24gPSBzYXZlZFN0cmluZ1Bvc2l0aW9uXG5cdHNyY1N0cmluZ1N0YXJ0ID0gc2F2ZWRTcmNTdHJpbmdTdGFydFxuXHRzcmNTdHJpbmdFbmQgPSBzYXZlZFNyY1N0cmluZ0VuZFxuXHRzcmNTdHJpbmcgPSBzYXZlZFNyY1N0cmluZ1xuXHRzdHJpbmdzID0gc2F2ZWRTdHJpbmdzXG5cdHJlZmVyZW5jZU1hcCA9IHNhdmVkUmVmZXJlbmNlTWFwXG5cdGJ1bmRsZWRTdHJpbmdzID0gc2F2ZWRCdW5kbGVkU3RyaW5nc1xuXHRzcmMgPSBzYXZlZFNyY1xuXHRzZXF1ZW50aWFsTW9kZSA9IHNhdmVkU2VxdWVudGlhbE1vZGVcblx0Y3VycmVudFN0cnVjdHVyZXMgPSBzYXZlZFN0cnVjdHVyZXNcblx0Y3VycmVudFN0cnVjdHVyZXMuc3BsaWNlKDAsIGN1cnJlbnRTdHJ1Y3R1cmVzLmxlbmd0aCwgLi4uc2F2ZWRTdHJ1Y3R1cmVzQ29udGVudHMpXG5cdGN1cnJlbnRVbnBhY2tyID0gc2F2ZWRQYWNrclxuXHRkYXRhVmlldyA9IG5ldyBEYXRhVmlldyhzcmMuYnVmZmVyLCBzcmMuYnl0ZU9mZnNldCwgc3JjLmJ5dGVMZW5ndGgpXG5cdHJldHVybiB2YWx1ZVxufVxuZXhwb3J0IGZ1bmN0aW9uIGNsZWFyU291cmNlKCkge1xuXHRzcmMgPSBudWxsXG5cdHJlZmVyZW5jZU1hcCA9IG51bGxcblx0Y3VycmVudFN0cnVjdHVyZXMgPSBudWxsXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhZGRFeHRlbnNpb24oZXh0ZW5zaW9uKSB7XG5cdGlmIChleHRlbnNpb24udW5wYWNrKVxuXHRcdGN1cnJlbnRFeHRlbnNpb25zW2V4dGVuc2lvbi50eXBlXSA9IGV4dGVuc2lvbi51bnBhY2tcblx0ZWxzZVxuXHRcdGN1cnJlbnRFeHRlbnNpb25zW2V4dGVuc2lvbi50eXBlXSA9IGV4dGVuc2lvblxufVxuXG5leHBvcnQgY29uc3QgbXVsdDEwID0gbmV3IEFycmF5KDE0NykgLy8gdGhpcyBpcyBhIHRhYmxlIG1hdGNoaW5nIGJpbmFyeSBleHBvbmVudHMgdG8gdGhlIG11bHRpcGxpZXIgdG8gZGV0ZXJtaW5lIHNpZ25pZmljYW50IGRpZ2l0IHJvdW5kaW5nXG5mb3IgKGxldCBpID0gMDsgaSA8IDI1NjsgaSsrKSB7XG5cdG11bHQxMFtpXSA9ICsoJzFlJyArIE1hdGguZmxvb3IoNDUuMTUgLSBpICogMC4zMDEwMykpXG59XG5leHBvcnQgY29uc3QgRGVjb2RlciA9IFVucGFja3JcbnZhciBkZWZhdWx0VW5wYWNrciA9IG5ldyBVbnBhY2tyKHsgdXNlUmVjb3JkczogZmFsc2UgfSlcbmV4cG9ydCBjb25zdCB1bnBhY2sgPSBkZWZhdWx0VW5wYWNrci51bnBhY2tcbmV4cG9ydCBjb25zdCB1bnBhY2tNdWx0aXBsZSA9IGRlZmF1bHRVbnBhY2tyLnVucGFja011bHRpcGxlXG5leHBvcnQgY29uc3QgZGVjb2RlID0gZGVmYXVsdFVucGFja3IudW5wYWNrXG5leHBvcnQgY29uc3QgRkxPQVQzMl9PUFRJT05TID0ge1xuXHRORVZFUjogMCxcblx0QUxXQVlTOiAxLFxuXHRERUNJTUFMX1JPVU5EOiAzLFxuXHRERUNJTUFMX0ZJVDogNFxufVxubGV0IGYzMkFycmF5ID0gbmV3IEZsb2F0MzJBcnJheSgxKVxubGV0IHU4QXJyYXkgPSBuZXcgVWludDhBcnJheShmMzJBcnJheS5idWZmZXIsIDAsIDQpXG5leHBvcnQgZnVuY3Rpb24gcm91bmRGbG9hdDMyKGZsb2F0MzJOdW1iZXIpIHtcblx0ZjMyQXJyYXlbMF0gPSBmbG9hdDMyTnVtYmVyXG5cdGxldCBtdWx0aXBsaWVyID0gbXVsdDEwWygodThBcnJheVszXSAmIDB4N2YpIDw8IDEpIHwgKHU4QXJyYXlbMl0gPj4gNyldXG5cdHJldHVybiAoKG11bHRpcGxpZXIgKiBmbG9hdDMyTnVtYmVyICsgKGZsb2F0MzJOdW1iZXIgPiAwID8gMC41IDogLTAuNSkpID4+IDApIC8gbXVsdGlwbGllclxufVxuZXhwb3J0IGZ1bmN0aW9uIHNldFJlYWRTdHJ1Y3QodXBkYXRlZFJlYWRTdHJ1Y3QsIGxvYWRlZFN0cnVjdHMsIHNhdmVTdGF0ZSkge1xuXHRyZWFkU3RydWN0ID0gdXBkYXRlZFJlYWRTdHJ1Y3Q7XG5cdG9uTG9hZGVkU3RydWN0dXJlcyA9IGxvYWRlZFN0cnVjdHM7XG5cdG9uU2F2ZVN0YXRlID0gc2F2ZVN0YXRlO1xufVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/node_modules/@livestore/utils/node_modules/msgpackr/unpack.js\n");

/***/ })

};
;